/*! For license information please see 70.vendors.chunk.js.LICENSE.txt */
(window.webpackChunk=window.webpackChunk||[]).push([[70],{12738:(e,t,n)=>{"use strict";var r;n.d(t,{$:()=>r}),function(e){!function(e){e.echo="echo",e.silent="silent"}(e.Mode||(e.Mode={}))}(r||(r={}))},59443:(e,t,n)=>{"use strict";n.d(t,{Y1:()=>r,uq:()=>l});var r,i,o,a,s,l,c,u,d=n(42654),p=n(22232),f=n(8125),m=n(60705);!function(e){e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return m.SV.create(e.index,e.index+e.length)},e.eq=(0,d.fromEquals)((function(e,t){return e.index===t.index&&e.length===t.length})),e.empty={index:0,length:0}}(r||(r={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(o||(o={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,p.vE)(n)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,p.vE)(n)}}}}(e.Y||(e.Y={}))}(a||(a={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(s||(s={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(l||(l={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,f.CI)(t,e)},function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(c||(c={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(u||(u={}))},94503:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var r,i=n(27378),o=n(65772),a=n(57175);!function(e){!function(e){e.supportsSVGDominantBaseline="supportsSVGDominantBaseline",e.supportsSetGoalsLoader="supportsSetGoalsLoader",e.onlyTrustedEvents="onlyTrustedEvents"}(e.Flag||(e.Flag={})),e.Context=i.createContext(a.S.invariantContent("PlatformEnvironment"));var t=function(){this.has=function(){return!1},this.actions={openUrl:function(){return o.right(void 0)},openPopup:function(){return o.right(void 0)}}};e.Mock=t}(r||(r={}))},93583:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var r,i=n(27378),o=n(73805),a=n(64909),s=n(83078),l=n(52479),c=n(99391),u=n(60430),d=n(2844),p=n(16528),f=n(2834),m=n(9223);!function(e){e.Manager=function(t){var n=t.children,r=t.remSize,o=l.Dx(r).pipe(c.shareReplay({refCount:!0,bufferSize:1}));return u.P.useSingleton("RemSize.Manager"),u.P.useSubscriptionTo(o),i.createElement(e.Context.Provider,{value:o},n)},e.DefaultManager=function(t){var n=t.children;return u.P.useSingleton("RemSize.DefaultManager"),i.createElement(e.Manager,{remSize:e.withRemSizeEffect(e.defaultSizeObserver)},n)},e.defaultSizeObserver=d.aj(p.Lw("(max-width: 1359px)"),p.Lw("(min-width: 1600px)"),(function(e,t){return e?14:t?18:16})),e.withRemSizeEffect=function(t,n){return void 0===n&&(n=e.defaultFontSizeSetter),t.pipe(f.b((function(e){return n(a.some(e))})),m.x(n.bind(null,a.none)),c.shareReplay({refCount:!0,bufferSize:1}))},e.defaultFontSizeSetter=function(t){e.setRootCssVar(document.documentElement,t),e.setRootFontSize(t)},e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=function(e,t){e.style.setProperty("--rem",(0,o.pipe)(t,a.map(String),s.QP))},e.setRootFontSize=function(e){document.documentElement.style.fontSize=(0,o.pipe)(e,a.map((function(e){return e+"px"})),s.QP)}}(r||(r={}))},22168:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var r,i=n(59312),o=n(27378),a=n(64909),s=n(19962),l=n(18208),c=n(92932),u=n(95300),d=n(66265),p=n(66310),f=n(24209),m=n(16528),h=n(49708),g=n(85985),v=n(76974),y=n(52479),b=n(17343),w=n(93508),C=n(77176),_=n(2844),S=n(41398),x=n(99391),I=n(18625);!function(e){var t;!function(e){e.nextLevel=function(e,t){return{rect:e,level:t+1}}}(e.State||(e.State={})),function(e){e.empty={top:0,bottom:0}}(e.Padding||(e.Padding={})),function(e){e.root="root",e.inherit="inherit"}(t=e.ContainerType||(e.ContainerType={})),e.withViewportContainer=function(n,r){return function(l){function c(){var e=null!==l&&l.apply(this,arguments)||this;return e._viewportEl=new u.X(a.none),e._onMount=function(t){e._viewportEl.next(a.fromNullable(t)),e.props.onMount&&t&&e.props.onMount(t)},e}return(0,i.__extends)(c,l),c.prototype.render=function(){var a=this.props,l=a.name,c=a.children,u=this._viewportEl.pipe(d.oA,p.w((function(e){return f.T(m.Qr,h.R(e,"transitionend").pipe(g.h((function(t){return t.target===e}))),v.of(!0).pipe(p.w(y.b2.rafScheduler))).pipe(b.h(e),w.O(e),C.U(s.UL.fromEl))}))),_=r.type===t.root?e.RootVirtualContainer:e.InheritVirtualContainer;return o.createElement(n,(0,i.__assign)({},this.props,{onMount:this._onMount,name:l}),o.createElement(_,{viewport:u,name:l},c))},c}(o.Component)},e.RootVirtualContainer=function(t){var n=t.viewport,r=t.viewportPadding,i=void 0===r?v.of(e.Padding.empty):r,a=t.name,s=t.children,l=o.useContext(e.Context);return o.createElement(e.Context.Provider,{key:k(a),value:_.aj(n,i,A).pipe(S.M(l.pipe(C.U((function(e){return e.level}))),e.State.nextLevel),x.shareReplay({bufferSize:1,refCount:!0}))},s)},e.InheritVirtualContainer=function(t){var n=t.viewport,r=t.viewportPadding,i=void 0===r?v.of(s.UL.empty):r,l=t.name,u=t.children,d=o.useContext(e.Context);return o.createElement(e.Context.Provider,{key:k(l),value:_.aj(d.pipe(C.U((function(e){return e.rect}))),_.aj(n||d.pipe(C.U((function(e){return e.rect}))),i,A),s.UL.intersection).pipe(C.U(a.getOrElse((function(){return c.C8.Logging.getLogger("InheritVirtualContainer").warn("Got an empty rect for inherit viewport",{name:l}),s.UL.empty}))),S.M(d.pipe(C.U((function(e){return e.level}))),e.State.nextLevel),x.shareReplay({bufferSize:1,refCount:!0}))},u)};var n=I.P((function(){return m.Qr.pipe(b.h(document.body),w.O(document.body),C.U(s.UL.fromEl),C.U((function(e){return{rect:e,level:0}})))})).pipe(x.shareReplay({bufferSize:1,refCount:!0}));e.Context=o.createContext(n)}(r||(r={}));var A=function(e,t){return{top:e.top+t.top,bottom:e.bottom-t.bottom,height:e.height-t.top-t.bottom,left:e.left,right:e.right,width:e.width}},k=function(e){return"viewportProvider"+l._A(e)}},34095:(e,t,n)=>{"use strict";n.d(t,{Ys:()=>u});var r=n(59312),i=n(27378),o=n(42726),a=n(90351),s=n(22823),l=n(13097),c=function(){return i.createElement("svg",{className:h.svg2,viewBox:"0 0 12 9",width:"12",height:"9",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1.386 4.115L4.561 7.29l5.81-5.81",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"}))},u=function(e){var t=e.checked,n=e.className,r=e.children,o=e.name;return i.createElement(d,{checked:t,name:o,className:n,checkedComponent:function(e){return i.createElement("div",{key:e?"checkbox1":"checkbox2",className:e?h.rectangleFilledBlue:h.rectangle},e&&i.createElement(c,null))}},r)},d=function(e){var t=e.checked,n=e.checkedComponent,a=e.className,s=e.children,l=e.name;return i.createElement(o.F.label,(0,r.__assign)({},(0,o.Sh)(h.wrapper,a),{onClick:function(e){return e.stopPropagation()}},l?{"data-name":l+"-checkbox"}:{}),i.createElement(o.F.input,{type:"checkbox",checked:t,onChange:function(e){return t.modify((function(e){return!e}))},className:h.inputCheckbox}),t.view(n),i.createElement("div",null,s))},p={display:"flex",marginRight:s.u.rem(.5),paddingTop:s.u.rem(.18),width:s.u.rem(1),height:s.u.rem(1),border:"2px solid "+a.Il.CoreNeutral30,borderRadius:s.u.rem(l.mA),backgroundColor:"transparent",alignItems:"center"},f={paddingTop:s.u.rem(.1),borderColor:a.Il.CoreBlue50,borderRadius:s.u.rem(l.mA),backgroundColor:a.Il.CoreBlue50},m={width:s.u.percent(100),height:s.u.percent(100)},h=s.u.stylesheet({wrapper:[{display:"flex",cursor:"default",alignItems:"center",userSelect:"none"}],rectangle:[p],rectangleFilledBlue:[p,f],inputCheckbox:[{margin:0,"-webkit-appearance":"none",appearance:"none"}],svg:[m],svg2:[{margin:"auto"}]})},32577:(e,t,n)=>{"use strict";n.d(t,{L:()=>U});var r=n(59312),i=n(27378),o=n(73805),a=n(42726),s=n(18208),l=n(19962),c=n(22232),u=n(8125),d=n(64909),p=n(73313),f=n(94503),m=n(22168),h=n(31484),g=n(52479),v=n(16118),y=n(66310),b=n(80900),w=n(17343),C=n(76974),_=n(95093),S=n(77176),x=n(28043),I=n(2834),A=n(38194),k=n(93508),E=n(598),T=n(2844),R=n(24713),L=n(50628),M=n(32952),N=n(90351),P=n(22823),F=n(13097),O={position:"absolute",zIndex:F.VN,display:"flex",flexDirection:"column",margin:P.u.rem(.5)+" 0",padding:P.u.rem(.5)+" 0",minWidth:P.u.percent(100),borderRadius:P.u.rem(F.Jr),background:N.Il.CoreNeutral0,boxShadow:N.uc.Z200,opacity:1,transition:"opacity .2s"},B={margin:P.u.rem(.5),height:P.u.px(1),backgroundColor:N.Il.CoreNeutral20},D={wrapper:P.u.style({position:"relative"}),list:P.u.style(O),transparent:P.u.style({opacity:0}),hidden:P.u.style({display:"none"}),delimiter:P.u.style(B)},W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t}(h.l5),U=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._uuid=s.fg(12),n._initialState=!1,n._hovered=a.hg.create(n._initialState),n._hidden=a.hg.create(!n._initialState),n._listPosState=a.hg.create({}),n._dropdownEl=null,n._subs=[],n._viewport=a.hg.create(l.UL.empty),n.hovered=n._hovered.pipe(v.G(),y.w((function(e){var r=e[0];return e[1]?b.H(n.props.showDelay).pipe(w.h(!0)):r?b.H(void 0===n.props.closeDelay?t.defaultProps.closeDelay:n.props.closeDelay).pipe(w.h(!1)):C.of(!1)})),_.T(t._hoveredForce.pipe(S.U(d.exists((function(e){return e===n._uuid}))))),x.x(),I.b((function(e){return e&&t._hoveredForce.next(d.some(n._uuid))})),I.b((function(e){return e&&n._hidden.set(!1)})),A.B(),k.O(n._initialState)),n._handleClickForAppearanceHover=function(e){var r=e.target;if(!l.pK(r)&&!n.props.dontCloseOnClickInside){var i=!l.q_(r,D.list);t._hoveredForce.next(i?d.some(n._uuid):d.none),n._hovered.set(i)}},n._handleMouseEnterForAppearanceHover=function(){n._hovered.set(!0)},n._handleClickForAppearanceClick=function(e,t){t&&!e.isTrusted||n._hovered.modify((function(e){return!e}))},n._handleMouseEnterForAppearanceClick=function(e){var r=e.target;l.q_(r,D.list)&&(t._hoveredForce.next(d.some(n._uuid)),n._hovered.set(!0))},n}return(0,r.__extends)(t,e),t.prototype._getHAlign=function(e){switch(e){case"left":case"auto":return{left:"0"};case"right":return{right:"0"};case"center":return{right:"50%",marginRight:"-"+(this._dropdownEl?this._dropdownEl.offsetWidth:0)/2+"px"};default:return(0,c.vE)(e)}},t.prototype._getVAlign=function(e){switch(e){case"top":return{bottom:"100%"};case"bottom":case"auto":return{top:"100%"};default:return(0,c.vE)(e)}},t.prototype.calcDropdownPosition=function(){var e=this,t=this.props.align,n=this.props.vAlign;this._listPosState.set((0,r.__assign)((0,r.__assign)({},this._getHAlign(t)),this._getVAlign(n)));var i="auto"===t,o="auto"===n;(i||o)&&requestAnimationFrame((function(){if(e._dropdownEl){var a=e._viewport.get(),s=e._dropdownEl.getBoundingClientRect();e._listPosState.set((0,r.__assign)((0,r.__assign)({},e._getHAlign(i?a.right<s.right?"right":"left":t)),e._getVAlign(o?a.bottom<s.bottom?"top":"bottom":n)))}}))},t.prototype.componentDidMount=function(){var e=this;this._subs.push(this.hovered.pipe(I.b((function(t){e.props.onVisibilityChange&&e.props.onVisibilityChange(t)})),E.c((0,o.pipe)(d.fromNullable(this.props.customPosition),d.fold((function(){return C.of(d.none)}),(function(e){var t=e.top,n=e.left;return T.aj((0,g.Dx)(t),(0,g.Dx)(n)).pipe(S.U(d.some))}))))).subscribe(d.fold((function(){return e.calcDropdownPosition()}),(function(t){var n=t[0],r=t[1];return e._listPosState.set({top:n,left:r})}))),this.context.pipe(R.j("rect")).subscribe(g.wW(this._viewport))),this.props.forceHide&&this._subs.push(this._hidden.pipe(y.w(g.wX(this.props.forceHide.pipe(L.P())))).subscribe((function(){return e._hidden.set(!0)})))},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.componentWillReciveProps=function(){this.calcDropdownPosition()},t.prototype.mapStateToClass=function(e,t){var n={start:"",end:""};return t?{prev:n,next:{start:D.transparent,end:""}}:{prev:{start:"",end:D.transparent},next:n}},t.prototype._behaviour=function(e){var t=this;return"mouseClick"===this.props.appearanceBehavior?{onClickCapture:function(n){return t._handleClickForAppearanceClick(n,e)},onMouseEnter:this._handleMouseEnterForAppearanceClick,onMouseLeave:function(){return t._hovered.set(t._initialState)}}:{onClickCapture:this._handleClickForAppearanceHover,onMouseEnter:this._handleMouseEnterForAppearanceHover,onMouseLeave:function(){return t._hovered.set(t._initialState)}}},t.prototype.render=function(){var e=this,t=this.props,n=t.label,o=t.theme,s=void 0===o?{}:o;return i.createElement(f.a.Context.Consumer,null,(function(t){return i.createElement(p.f.Context.Consumer,null,(function(o){return i.createElement(p.f.Context.Provider,{value:p.f.withValue(o,{hovered:e._hovered})},i.createElement("div",(0,r.__assign)({},(0,a.Sh)(D.wrapper,s.dropdownContainer),e._behaviour(t.has(f.a.Flag.onlyTrustedEvents))),n,i.createElement(W,{state:e.hovered,stateToClassMapper:e.mapStateToClass},(function(t){return t.state?i.createElement(H,(0,r.__assign)({key:"list",name:e.props.name,onTransitionEnd:"prev"===t.type?function(){return e._hidden.set(!0)}:u.ZT},(0,a.Sh)(s.dropdownList,t.view,e._hidden.view((function(e){return e?D.hidden:""}))),{mount:function(t){return e._dropdownEl=t},style:e._listPosState}),e.props.children):null}))))}))}))},t.defaultProps={align:"auto",vAlign:"auto",showDelay:500,closeDelay:500,appearanceBehavior:"mouseHover"},t.Delimiter=function(){return i.createElement("div",{className:D.delimiter})},t._hoveredForce=new M.xQ,t.contextType=m.l.Context,t}(i.PureComponent),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._elementState=p.f.emptyWithName((void 0!==t.context.name?t.context.name+"/":"")+"dropdown-"+t.props.name),t}return(0,r.__extends)(t,e),t.prototype.render=function(){return i.createElement(p.f.Context.Provider,{value:this._elementState},i.createElement(a.F.div,(0,r.__assign)({},(0,a.Sh)(this.props.className,D.list),{style:this.props.style,mount:this.props.mount,role:"dropdown-list","data-name":"dropdown-"+this.props.name,onTransitionEnd:this.props.onTransitionEnd}),this.props.children))},t.displayName="DropdownList",t.contextType=p.f.Context,t}(i.Component)},9261:(e,t,n)=>{"use strict";n.d(t,{u_:()=>K,ay:()=>J,Pj:()=>j});var r,i,o=n(59312),a=n(27378),s=n(45980),l=n(42726),c=n(25781),u=n(22232),d=n(90351),p=n(22823),f=n(71031),m=n(13097),h=n(39499),g=n(41439),v=n(53073),y=n(84347),b=n(92932),w=n(16528),C=n(52479),_=n(99391),S=n(42499),x=n(66081),I=n(66310),A=n(77176),k=n(67434),E=n(24209),T=n(49708),R=n(17343),L=n(28043),M=n(93508),N=n(95300),P=n(85985),F=n(2834),O=n(12126),B=n(2844),D=n(76974),W=n(13444),U=n(55935),H=n(55721),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._classes={hidden:"ps-hidden",visible:"ps-hovered",fastTransition:"ps-fast-transition"},t._mount=function(e){t._el=e,t.props.onMount&&e&&t.props.onMount(e)},t._update=function(){requestAnimationFrame((function(){t._el&&y.update(t._el)}))},t}return(0,o.__extends)(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,i=n.name,o=n.update,a=n.showWhenScrollable,s=n.scrollTo,l=n.className,c=this._el;y.initialize(c,{suppressScrollX:!0,minScrollbarLength:40,handlers:["click-rail","drag-scrollbar","keyboard","passiveWheel","touch"]}),this._update(),(e=this._subs).push.apply(e,r.customize(c,{name:i,showWhenScrollable:a||!1,classes:this._classes})),this._subs.push(w.YC(this._el).pipe(x.e(200)).subscribe(this._update)),o&&this._subs.push(o.subscribe(this._update)),s&&this._subs.push(s.pipe(I.w(C.b2.rafScheduler)).subscribe((function(e){c.scrollTop=e,t._update()}))),l&&this._subs.push(C.Dx(l).pipe(A.U((function(e){return e?e.split(" "):[]})),k.R((function(e,t){var n,r;return e&&(n=c.classList).remove.apply(n,e),t&&(r=c.classList).add.apply(r,t),t}),[])).subscribe())},t.prototype.componentWillUnmount=function(){y.destroy(this._el),this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this.props,t=e.children,n=e.onScroll,r=e.name,i=e.showWhenScrollable;return a.createElement(l.F.div,(0,o.__assign)({},(0,l.Sh)(i&&this._classes.visible),{onScroll:n?function(){return n.next()}:void 0,mount:this._mount,role:"scrollbar-"+r}),t)},t}(a.Component);!function(e){var t=["mousewheel","DOMMouseScroll","wheel","touchmove"];e.customize=function(e,n){var r=n.name,i=n.showWhenScrollable,o=n.classes,a=b.C8.Logging.getLogger("scrollBarY."+r,b.zW.LogLevel.DEBUG),s=e.querySelector(".ps__scrollbar-y"),l=e.querySelector(".ps__scrollbar-y-rail"),c=E.T(T.R(e,"mouseenter",{passive:!0}).pipe(R.h(!0)),T.R(e,"mouseleave",{passive:!0}).pipe(R.h(!1))).pipe(L.x(),M.O(!1)),d=E.T(T.R(l,"mouseenter",{passive:!0}).pipe(R.h(!0)),T.R(l,"mouseleave",{passive:!0}).pipe(R.h(!1))).pipe(L.x(),M.O(!1)),p=E.T(T.R(s,"mousedown",{passive:!0}).pipe(R.h(!0)),T.R(document,"mouseup",{passive:!0}).pipe(R.h(!1))).pipe(M.O(!1)),f=new N.X(!1),m=E.T(T.R(document,"paste",{passive:!0}),T.R(document,"mousedown",{passive:!0}).pipe(P.h((function(e){var t=e.target;return t!==s&&t!==l})),F.b((function(e){return a.trace("force hide event",e)})))).pipe(I.w((function(){return O.D([!0,!1])})),M.O(!1));return[E.T.apply(_,t.map((function(t){return T.R(e,t).pipe(A.U((function(e){return e.preventDefault(),e.stopPropagation(),!0})))}))).subscribe(f),B.aj(c,p,d,m).pipe(P.h((function(){return!i})),I.w((function(e){var t=e[0],n=e[1],r=e[2];return e[3]?D.of("forceHide"):n||r?r&&!n?D.of("show").pipe(W.g(600)):D.of("show"):t?E.T(f.pipe(U.T(1),H.p(100),R.h("show")),f.pipe(R.h("hide"),H.p(100),I.w((function(){return D.of("hide").pipe(W.g(600))})))):D.of("hide").pipe(W.g(600))})),L.x()).subscribe((function(t){switch(S.c.emit(t),a.trace("new scroll action",{action:t}),t){case"show":e.classList.remove(o.hidden,o.fastTransition),e.classList.add(o.visible);break;case"hide":e.classList.remove(o.visible);break;case"forceHide":e.classList.remove(o.visible),e.classList.add(o.fastTransition);break;default:(0,u.vE)(t)}return t}))]}}(r||(r={})),function(e){function t(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.deltaX/6,n=e.deltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.deltaY),[t,n]}e.verticalScrollByWhellEvent=function(e){return T.R(e,"wheel",{passive:!0}).pipe(A.U(t),A.U(v.Yg),F.b((function(t){return e.scrollTop-=t})))}}(i||(i={}));var X,G=n(14611),V=n(18244),Y=n(60430),q=n(66265),$=n(40151),Z=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._overlayIndex=t._index++,n._subs=[],n._visibilityState=l.hg.create("hidden"),n}return(0,o.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this;this._visibilityState.set(this.props.visible.get()?"visible":"hidden"),this._subs.push(this._visibilityState.pipe(A.U((function(e){return"visible"===e})),L.x()).subscribe((function(n){return t._activeOverlays.modify((function(t){var r=new Set(t);return n?r.add(e._overlayIndex):r.delete(e._overlayIndex),r}))})),this.props.visible.pipe(U.T(1)).subscribe((function(t){var n=e.props.animate?"fadeOut":"hidden";e._visibilityState.set(t?"visible":n)}))),this._subs.push(this._visibilityState.pipe(I.w((function(e){return"visible"===e?T.R(document,"keydown"):$.c()})),P.h((function(e){return e.keyCode===c.R.ESC_CODE}))).subscribe((function(){e.props.preventClose||e.props.visible.set(!1),e.props.onClose&&e.props.onClose()})))},t.prototype.componentWillUnmount=function(){var e=this;t._activeOverlays.modify((function(t){var n=new Set(t);return n.delete(e._overlayIndex),n})),this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.render=function(){var e=this;return a.createElement(l.F.Fragment,null,this._visibilityState.view((function(t){switch(t){case"visible":case"fadeOut":return a.createElement(l.F.div,(0,o.__assign)({role:"overlay-wrapper"},(0,l.Sh)(e.props.animate?e._getAnimatedTypeClass(t):e._getTypeClass(t),e._getPositionType(e.props.positionType)),{onClick:function(){e.props.preventClose||e.props.visible.set(!1),e.props.onClose&&e.props.onClose()},onTransitionEnd:function(){"fadeOut"===t&&e._visibilityState.set("hidden")}}),a.createElement(l.F.div,(0,o.__assign)({},(0,l.Sh)(e.props.animate&&e._getContentClass(t))),a.createElement("div",{className:me.scroll,role:"scrollbar-modal"},a.createElement(l.F.div,(0,o.__assign)({},(0,l.Sh)(e._getAlignmentClass(),e._getSmallResolutionClass())),e.props.children))));case"hidden":return null;default:return(0,u.vE)(t)}})))},t.prototype._getSmallResolutionClass=function(){switch(this.props.smallResolution){case"resize":return me.wrapperResize;case"cut":default:return""}},t.prototype._getAlignmentClass=function(){switch(this.props.alignment){case"top-center":return me.wrapperTopCenter;case"bottom-right":return me.wrapperBottomRight;case"none":return"";case"center":default:return me.wrapperCenter}},t.prototype._getTypeClass=function(e){if("visible"!==e)return me.wrapperTransparent;switch(this.props.overlayType){case"light":return me.wrapperLight;case"transparent":return me.wrapperTransparent;case"dark":default:return me.wrapperDark}},t.prototype._getPositionType=function(e){switch(e){case"absolute":return me.wrapperAbsolute;case"fixed":return me.wrapperFixed;default:return(0,u.vE)(e)}},t.prototype._getAnimatedTypeClass=function(e){var t="visible"===e;switch(this.props.overlayType){case"light":return G.f.rafSequence(t?[me.wrapperTransparent,me.wrapperLight]:[me.wrapperLight,me.wrapperTransparent],!0);case"transparent":return D.of(me.wrapperTransparent);case"dark":default:return G.f.rafSequence(t?[me.wrapperTransparent,me.wrapperDark]:[me.wrapperDark,me.wrapperTransparent],!0)}},t.prototype._getContentClass=function(e){var t=this.props.theme||me,n=t.contentFaded,r=t.content,i="visible"===e?[n,r]:[r,n];return G.f.rafSequence(i,!0)},t.defaultProps={visible:l.hg.create(!0)},t._activeOverlays=l.hg.create(new Set),t.activeCount=t._activeOverlays.view((function(e){return e.size})),t._index=0,t}(a.Component),j=function(e){return a.createElement(Z,(0,o.__assign)({},e,{visible:l.hg.create(!0),preventClose:!0}),e.children)},J=function(e){return a.createElement(Z,(0,o.__assign)({},e,{visible:l.hg.create(!0),preventClose:!1}),e.children)};function K(e){var t=e.children,n=e.className,r=e.close;return a.createElement(l.F.div,(0,o.__assign)({},(0,l.Sh)(me.modal,n),{onClick:V.UW(s.constVoid)}),t,r?a.createElement("div",{className:me.closeIconButtonContainer},a.createElement(h.zx,{name:"modal-close",onClick:r},a.createElement(g.JO.Close,{className:me.closeIcon,width:13}))):null)}!function(e){e.Header=function(e){var t=e.children,n=e.className;return a.createElement(l.F.header,(0,o.__assign)({},(0,l.Sh)(me.header,n)),t)},e.Body=function(e){var t=e.children,n=e.className,r=e.wrapperClassName,i=e.name,s=Y.P.useElWatcher(),c=s.ref,u=s.onMount;return a.createElement(z,(0,o.__assign)({name:i},(0,l.Sh)(me.scrollBody,r),{showWhenScrollable:!0,update:c.pipe(q.oA,I.w(w.YC),R.h(C.PU))}),a.createElement(l.F.div,(0,o.__assign)({},(0,l.Sh)(me.body,n),{mount:u}),t))},e.Footer=function(e){var t=e.children,n=e.className;return a.createElement(l.F.div,(0,o.__assign)({},(0,l.Sh)(me.footer,n))," ",t," ")}}(K||(K={}));var Q={top:0,left:0,display:"flex",flexDirection:"column",overflow:"hidden",width:p.u.percent(100),height:p.u.percent(100),transition:"background "+p.u.seconds(.2),pointerEvents:"auto"},ee={position:"fixed",zIndex:m.DY},te={margin:p.u.rem(-.5)+" auto auto"},ne={background:"rgba(255, 255, 255, .7)"},re={background:"rgba(100, 107, 131, .4)"},ie={position:"absolute",top:p.u.rem(.5),right:p.u.rem(.5)},oe={stroke:f.FW},ae={position:"relative",display:"flex",flexDirection:"column",overflow:"hidden",maxHeight:"90vh",borderRadius:p.u.rem(m.Jr),boxShadow:f.Re},se={position:"relative",overflow:"hidden",padding:p.u.rem(2.5)+" "+p.u.rem(2)+" "+p.u.rem(1),borderTopLeftRadius:p.u.rem(m.Jr),borderTopRightRadius:p.u.rem(m.Jr),backgroundColor:d.Il.CoreNeutral1},le={position:"absolute",top:p.u.px(10),right:"@top"},ce={padding:p.u.rem(2),backgroundColor:d.Il.CoreNeutral0},ue={display:"flex",padding:"0 "+p.u.rem(2),height:p.u.rem(4),border:"0 solid transparent",borderWidth:"0 1px",borderBottomRightRadius:p.u.rem(m.Jr),borderBottomLeftRadius:p.u.rem(m.Jr),backgroundColor:d.Il.CoreNeutral1,alignItems:"center",justifyContent:"flex-end",$nest:{"& > *:not(:last-child)":{marginRight:p.u.rem(.5)}}},de={transitionDuration:p.u.seconds(.2),transitionProperty:"opacity, transform",transformOrigin:"center"},pe={position:"relative",display:"flex",padding:p.u.rem(.5)+" 0",width:"100vw",height:"100vh"},fe={$nest:(X={},X["@media ("+m.pZ+")"]={margin:p.u.rem(2)+" auto auto"},X)},me=p.u.prefixedStylesheet("modal",{wrapper:[Q],wrapperFixed:[ee],wrapperAbsolute:[{position:"absolute"}],wrapperTopCenter:[te],wrapperBottomRight:[{margin:"auto 0 0 auto"}],wrapperCenter:[{margin:"auto"}],wrapperLight:[Q,ne],wrapperDark:[Q,re],wrapperTransparent:[Q,{overflow:"hidden",background:"transparent"}],closeIconButtonContainer:[ie],closeIcon:[oe],modal:[ae],header:[se],closeBtn:[le],body:[ce],scrollBody:[{position:"relative",flexGrow:1}],footer:[ue],contentBase:[de],contentFaded:[de,{opacity:0,transform:"scale(.8)"}],content:[de,{opacity:1,transform:"none"}],scroll:[pe],wrapperResize:[fe]})},41552:(e,t,n)=>{"use strict";n.d(t,{dC:()=>r,Iy:()=>i,EQ:()=>h});var r,i,o=n(45980),a=n(42726),s=n(64909),l=n(66310),c=n(18625),u=n(95300),d=n(76974),p=n(2834),f=n(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance",e.MutedAlerts="MutedAlerts"}(r||(r={})),function(e){e.setGoals=function(e){return{type:r.SetGoals,source:e}},e.performance={type:r.Performance},e.mutedAlerts={type:r.MutedAlerts}}(i||(i={}));var m,h=function(){function e(e){this._modalViews=e,this.state=a.hg.create(s.none),this._modalFactoryCache=new Map}return e.prototype.show=function(e){var t=this;return this.preload(e).pipe(l.w((function(e){return t.showPreloaded(e)})))},e.prototype.showPreloaded=function(e){var t=this;return c.P((function(){var n=new u.X("opened");return t.state.set(s.some(e({onClose:function(){t.state.set(s.none),n.next("closed"),n.complete()}}))),n}))},e.prototype.preload=function(e){var t=this,n=JSON.stringify(e);if(this._modalFactoryCache.has(n)){var r=this._modalFactoryCache.get(n);return d.of(r)}return c.P((function(){return t._modalViews.load(e)})).pipe(p.b((function(e){t._modalFactoryCache.set(n,e)})))},e.prototype.hideAll=function(){this.state.set(s.none)},e}();!function(e){var t=function(){function e(){this.state=a.hg.create(s.none),this.hideAll=o.constVoid}return e.prototype.show=function(e){return f.c()},e.prototype.showPreloaded=function(e){return f.c()},e.prototype.preload=function(e){return f.c()},e}();e.Mock=t}(m||(m={}))},38206:(e,t,n)=>{"use strict";n.d(t,{t:()=>v});var r,i=n(59312),o=n(27378),a=n(45980),s=n(73805),l=n(42726),c=n(489),u=n(93283),d=n(79932),p=n(19962),f=n(22232),m=n(95574),h=n(64909),g=n(65772);!function(e){var t,n,r;function o(e,n){var r=n.position,o=n.point,a={width:Math.trunc(e.width),height:Math.trunc(e.height)};return p.UL.validate(t.match((function(){return(0,i.__assign)({top:o.y,right:o.x,bottom:o.y+a.height,left:o.x-a.width},a)}),(function(){return(0,i.__assign)({top:o.y-a.height,right:o.x,bottom:o.y,left:o.x-a.width},a)}),(function(){return(0,i.__assign)({top:o.y-a.height,right:o.x+a.width,bottom:o.y,left:o.x},a)}),(function(){return(0,i.__assign)({top:o.y,right:o.x+a.width,bottom:o.y+a.height,left:o.x},a)}))(r))}function a(t){return e.topLeft(p.UL.Point.normalize({x:t.left,y:t.top}))}!function(e){e.topLeft="topLeft",e.topRight="topRight",e.bottomRight="bottomRight",e.bottomLeft="bottomLeft"}(t=e.Position||(e.Position={})),function(e){e.match=function(t,n,r,i){return function(o){switch(o){case e.topRight:return t();case e.bottomRight:return n();case e.bottomLeft:return r();case e.topLeft:return i();default:return(0,f.vE)(o)}}}}(t=e.Position||(e.Position={})),e.topLeft=function(e){return{position:t.topLeft,point:p.UL.Point.normalize(e)}},e.topRight=function(e){return{position:t.topRight,point:p.UL.Point.normalize(e)}},e.bottomRight=function(e){return{position:t.bottomRight,point:p.UL.Point.normalize(e)}},e.bottomLeft=function(e){return{position:t.bottomLeft,point:p.UL.Point.normalize(e)}},e.relativeTo=function(e,t){return{position:e.position,point:p.UL.Point.relativeTo(e.point,t)}},e.empty=e.topLeft(p.UL.Point.empty),e.toRect=o,e.fromRect=a,e.inRect=function(e,t){var n=t.point;return p.UL.hasPoint(e,n)},e.toCss=function(e){var n=e.position,r=e.point;return t.match((function(){return{top:r.y,right:r.x}}),(function(){return{right:r.x,bottom:r.y}}),(function(){return{bottom:r.y,left:r.x}}),(function(){return{top:r.y,left:r.x}}))(n)},function(t){t.create=function(e,t){return(0,f.kG)(e.point.x===t.point.x||e.point.y===t.point.y,"can not form Zone without a common dimension",(function(){return JSON.stringify({a:e,b:t})})),[e,t]},t.bySide=function(n,r){return p.UL.Side.match((function(){return t.create(e.bottomLeft({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.floor(r.right),y:Math.ceil(r.top)}))}),(function(){return t.create(e.topLeft({x:Math.floor(r.right),y:Math.ceil(r.top)}),e.bottomLeft({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topLeft({x:Math.ceil(r.left),y:Math.floor(r.bottom)}),e.topRight({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topRight({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.ceil(r.left),y:Math.floor(r.bottom)}))}))(n)}}(n=e.Zone||(e.Zone={})),function(e){e.byAxis=function(e,t){return u.sQ((0,d.getFirstSemigroup)(),c.IX)(p.UL.Axis.toSides(e).map((function(e){return[e,n.bySide(e,t)]})))}}(e.Variants||(e.Variants={})),function(t){function n(e,t){return(0,s.pipe)(p.UL.intersection(e,t),h.map((function(e){var n=e.width/t.width,r=e.height/t.height,i=(Number.isNaN(n)?0:n/2)+(Number.isNaN(r)?0:r/2);return(0,f.kG)(i>=0,"quality can not be negavite: "+i),(0,f.kG)(i<=1,"quality can be higher than 1: "+i),i})))}t.empty={quality:0,point:e.empty},t.qualityOfIntersection=n,t.byViewport=function(e,t){return{quality:(0,s.pipe)(n(e,t),h.getOrElse((function(){return 0})))+(0,s.pipe)(p.UL.scale(2,t),g.chain(p.UL.normalize),h.fromEither,h.chain((function(t){return n(e,t)})),h.getOrElse((function(){return 0}))),point:a(t)}},t.fromZone=function(e,n,r){return(0,s.pipe)(c.IX.traverse(g.either)(r,(function(e){return o(n,e)})),g.chain((function(e){var t=e[0],n=e[1];return p.UL.join(t,n)})),g.chain((function(e){return p.xu.placeIntoRect(n,e)})),g.map((function(n){return n.map((function(n){return t.byViewport(e,n)}))})))}}(r=e.Qualified||(e.Qualified={})),function(e){e.build=function(e,t,n){return(0,s.pipe)(n,u.UI((function(n){return r.fromZone(e,t,n)})))}}(e.QualifiedVariants||(e.QualifiedVariants={})),function(e){var t;!function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.edges=20]="edges",e[e.any=210]="any"}(t=e.Placement||(e.Placement={})),e.takeBy=function(e,t){return function(n){return(0,s.pipe)(n,u.To({point:r.empty,side:e},(function(n,r,i){return(0,s.pipe)(i,g.map((function(i){return i.filter((function(r,i){return t.toString().includes(i.toString())&&e===n})).reduce((function(e,t){return t.quality>e.point.quality?{point:t,side:n}:e}),r)})),m.MH)}))).point}},e.preferBy=function(e,t){return function(n){return(0,s.pipe)(n,u.To({point:r.empty,side:e},(function(n,r,i){return(0,s.pipe)(i,g.map((function(i){return i.reduce((function(r,i,o){return i.quality>r.point.quality||i.quality===r.point.quality&&t.toString().includes(o.toString())&&e===n?{point:i,side:n}:r}),r)})),m.MH)}))).point}},e.preferTopMiddle=e.preferBy("top",t.middle),e.preferTopEdges=e.preferBy("top",t.edges)}(e.Selector||(e.Selector={}))}(r||(r={}));var v,y=n(83078),b=n(8125),w=n(90351),C=n(22823),_=n(22168),S=n(60430),x=n(52479),I=n(77176),A=n(2844),k=n(28043);!function(e){!function(e){e.toSelector=function(e){switch(e){case"top":case"topCenter":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};case"topRight":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.right)};case"topLeft":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.left)};case"bottom":case"bottomCenter":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.middle)};case"bottomRight":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.right)};case"bottomLeft":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.left)};case"left":return{align:"left",selector:r.Selector.preferBy("left",r.Selector.Placement.middle)};case"right":return{align:"right",selector:r.Selector.preferBy("right",r.Selector.Placement.middle)};case"auto":case"center":return{align:p.UL.Axis.vertical,selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};default:return(0,f.vE)(e)}}}(e.Alignment||(e.Alignment={})),e.ByPoint=function(e){var t=e.point,n=e.className,a=(0,i.__rest)(e,["point","className"]);return o.createElement(l.F.div,(0,i.__assign)({role:"positioned-container",style:t.pipe(I.U(y.dH(r.toCss,{})))},(0,l.Sh)(P.wrapper,n,t.pipe(I.U((function(e){return h.isNone(e)?P.hidden:""})))),a))};var t=function(t){var i=S.P.useRectWatcher(),s=i.rect,l=i.onMount,u=x.Dx(t.rect),d=x.Dx(t.pinTargetRect),p=c(t.align),f=n(u,s,p,t.selector||r.Selector.preferTopMiddle,d,"relative"===t.position);return o.createElement(e.ByPoint,{mount:l,className:t.className,point:f.pipe(I.U(h.map((function(e){return e.tangentialPoint}))))},t.withPin&&f.pipe(I.U((0,a.flow)(h.chain((function(e){return e.median})),h.map((function(t){return o.createElement(e.Pin,{point:t,key:"pin"})})),h.toNullable))),t.children)};e.ByAbsoluteRect=function(e){return o.createElement(t,(0,i.__assign)({},e,{position:"absolute"}))},e.ByRelativeRect=function(e){return o.createElement(t,(0,i.__assign)({},e,{position:"relative"}))},e.Pin=function(e){var t=x.Dx(e.point).pipe(I.U((function(e){return e.side})),I.U((function(e){return N[e]}))),n=x.Dx(e.point).pipe(I.U((function(e){return e.point})),I.U((function(e){var t=e.x;return{top:e.y,left:t}})));return o.createElement(l.F.i,(0,i.__assign)({role:"pin",style:n},(0,l.Sh)(t,N.wrapper)))};var n=function(e,t,n,i,a,l){return A.aj(e,o.useContext(_.l.Context).pipe(I.U((function(e){return e.rect}))),t.pipe(k.x(h.getEq(p.xu.eq).equals)),a).pipe(I.U((function(e){var t=e[0],o=e[1],a=e[2],c=e[3];return(0,s.pipe)(a,h.map((function(e){var a=r.QualifiedVariants.build(o,e,n(t)),u=i(a).point,d=(0,s.pipe)(r.toRect(e,u),h.fromEither,h.chain((function(e){return(0,s.pipe)(p.UL.getMedian(t,e),h.map((function(t){return{anchorMedian:t,bodyRect:e}})))})),h.chain((function(e){var t=e.anchorMedian,n=e.bodyRect;if(c){var i=p.UL.stickToSide(p.UL.Side.invert(t.side),c)(n);return u=r.fromRect(i),(0,s.pipe)(p.UL.getMedian(c,i),h.map((function(e){var t=e.side,n=e.point;return{side:t,point:p.UL.Point.relativeTo(n,i)}})))}return(0,s.pipe)(h.some(t),h.map((function(e){var t=e.side,r=e.point;return{side:t,point:p.UL.Point.relativeTo(r,n)}})))})));return{tangentialPoint:r.relativeTo(u,l?t:o),median:d}})))})))},c=function(e){return void 0===e&&(e=p.UL.Axis.both),(0,b.CI)(p.UL.Axis,e)?function(t){return r.Variants.byAxis(e,t)}:function(t){var n;return(n={})[e]=r.Zone.bySide(e,t),n}}}(v||(v={}));var E={position:"absolute",border:C.u.px(7)+" solid "+w.Il.BackgroundTooltip,transform:"translate("+C.u.px(-7)+", "+C.u.px(-7)+")"},T={borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateY("+C.u.px(7)+")"}}},R={borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",$nest:{"& + *":{transform:"translateX("+C.u.px(-7)+")"}}},L={borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateY("+C.u.px(-7)+")"}}},M={borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateX("+C.u.px(7)+")"}}},N=C.u.stylesheet({wrapper:[E],top:[T],right:[R],bottom:[L],left:[M]}),P=C.u.stylesheet({hidden:[{visibility:"hidden",opacity:0}],wrapper:[{position:"absolute",transition:"opacity .2s"}]})},63979:(e,t,n)=>{"use strict";n.d(t,{P:()=>_});var r=n(59312),i=n(27378),o=n(42726),a=n(22232),s=n(19962),l=n(90351),c=n(22823),u=n(71031),d=n(94503),p=n(41439),f=2*Math.PI*32,m=36,h="#f1f2fa",g="#fff",v=function(e,t,n){return e<t?t:e>n?n:e},y=function(e){switch(e){case _.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:h,outline:g};case _.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:h,outline:g};case _.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:h,outline:g};case _.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:h,outline:g};case _.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:h,outline:g};case _.ColorType.logan:return{type:"plain",value:"#a6adc9",background:h,outline:g};case _.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case _.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case _.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case _.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case _.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case _.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case _.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case _.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,a.vE)(e)}},b=function(e){switch(e){case _.FontSize.normal:return 32;case _.FontSize.small:return 24;default:return(0,a.vE)(e)}},w=function(e){switch(e){case _.IconSize.pdf:case _.IconSize.normal:case _.IconSize.outcome:return 5;case _.IconSize.small:return 3;case _.IconSize.extraSmall:return 10;default:return(0,a.vE)(e)}},C=function(e){switch(e){case _.IconSize.pdf:return 110;case _.IconSize.normal:return 52;case _.IconSize.outcome:return 32;case _.IconSize.small:return 24;case _.IconSize.extraSmall:return 16;default:return(0,a.vE)(e)}},_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.render=function(){var e,n,a,l,c,u=this.props,h=u.percentage,g=u.aimValue,_=void 0===g?100:g,S=u.colorType,x=void 0===S?t.ColorType.logan:S,I=u.fontSize,k=void 0===I?t.FontSize.normal:I,E=u.iconSize,T=void 0===E?t.IconSize.normal:E,R=u.description,L=u.theme,M=void 0===L?A:L,N=[i.createElement("circle",{key:"circle",id:"circle",cx:m,cy:m,r:32,fill:"none"})],P=b(k),F=w(T),O=v(h,0,100),B=v(_,O,100),D=O*f/100,W=B*f/100,U=360*F/f,H=O?f-D-2*F:f,z=y(x);if("plain"===z.type)e=z.value,n=e,a=z.outline,l=z.background,c=void 0===z.backgroundOpacity?1:z.backgroundOpacity;else{var X=z.value;this._gradientId=this._gradientId||"pb-gradient-"+t._nextGradientId++,N.push(i.createElement("linearGradient",(0,r.__assign)({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},X.coordinates),i.createElement("stop",{stopColor:X.start,offset:"0%"}),i.createElement("stop",{stopColor:X.end,offset:"100%"}))),e="url(#"+this._gradientId+")",n="#2b2d38",a=z.outline,l=z.background,c=void 0===z.backgroundOpacity?1:z.backgroundOpacity}return i.createElement(d.a.Context.Consumer,null,(function(t){return i.createElement(p.a1,(0,r.__assign)({},(0,o.Sh)(A.iconWrapper,M.radialProgressBar),{width:C(T),viewBox:"0 0 72 72"}),i.createElement("defs",null,N),i.createElement("g",null,i.createElement("use",{className:A.valueCircle,stroke:O>=94&&a?a:l,strokeOpacity:c,strokeWidth:F,strokeDasharray:f,strokeDashoffset:f-W,transform:"rotate(-90 36 36)",strokeLinecap:"round",xlinkHref:"#circle"}),a&&i.createElement("use",{className:A.valueCircle,stroke:a,strokeWidth:F,strokeDasharray:f,strokeDashoffset:H,transform:"rotate("+(-90-U)+" "+"36 "+"36)",strokeLinecap:"round",xlinkHref:"#circle"}),i.createElement("use",{className:A.valueCircle,stroke:e,strokeDasharray:f,strokeDashoffset:f-D,strokeLinecap:"round",transform:"rotate(-90 36 36)",strokeWidth:F,xlinkHref:"#circle"}),i.createElement("text",(0,r.__assign)({className:M.radialProgressText,y:"38",x:"36",fill:n,fontSize:P,fontStyle:"normal",textAnchor:"middle"},s.h5(t.has(d.a.Flag.supportsSVGDominantBaseline))),O),R&&i.createElement("text",{className:M.radialProgressDescription,fill:n,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},R)))}))},t._nextGradientId=0,t}(i.Component);!function(e){!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(e.IconSize||(e.IconSize={}))}(_||(_={}));var S={width:c.u.percent(100),height:c.u.percent(100),fontWeight:"bold",fill:l.Il.CoreNeutral90},x={fontSize:c.u.rem(2),fill:l.Il.CoreNeutral90},I={fontWeight:"normal",fontSize:c.u.px(11),fill:u.UE},A=c.u.stylesheet({radialProgressBar:[S],radialProgressText:[x],radialProgressDescription:[I],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},54071:(e,t,n)=>{"use strict";n.d(t,{$:()=>p});var r,i=n(59312),o=n(27378),a=n(42726),s=n(22232),l=n(90351),c=n(22823),u=n(71031),d=n(52479);function p(e){var t=e.wrapperClassName,n=e.variation,r=e.isIdle,s=(e.ref,(0,i.__rest)(e,["wrapperClassName","variation","isIdle","ref"]));return o.createElement(a.F.span,{role:"spinner",className:t},d.ab(n,(function(e){return o.createElement(p.Svg,(0,i.__assign)({},s,{type:e,isIdle:r}))})))}!function(e){e.getClassName=function(e){return function(t){switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,s.vE)(t)}}},e.Svg=function(t){var n=t.className,r=t.size,l=void 0===r?64:r,c=t.strokeWidth,u=void 0===c?2:c,d=t.type,p=t.name,f=t.isIdle,m=(0,i.__rest)(t,["className","size","strokeWidth","type","name","isIdle"]),g=o.useRef(null),v=o.useRef(null);return o.useEffect((function(){return(0,s.kG)(null!==g.current,"groupEl should be already created"),v.current=g.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return v.current.cancel()}}),[]),o.useEffect((function(){(0,s.kG)(null!==v.current,"groupAnimation should be already created");var e=v.current;e.play&&(f?e.pause():"running"!==e.playState&&e.play())})),o.createElement("svg",(0,i.__assign)({"data-role":p},(0,a.Sh)(n),{viewBox:"25 25 50 50",width:l,height:l},m),o.createElement("g",{transform:"translate(50 50)"},o.createElement("g",{ref:g},o.createElement("circle",(0,i.__assign)({},(0,a.Sh)(A.path,f&&h,e.getClassName(A)(d)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:u,strokeMiterlimit:"10"})))))}}(p||(p={}));var f=200,m=c.u.keyframes({"0%":{strokeDasharray:"1px, "+c.u.px(f),strokeDashoffset:c.u.px(1)},"50%":{strokeDasharray:"89px, "+c.u.px(f),strokeDashoffset:c.u.px(-35)},"100%":{strokeDasharray:"89px, "+c.u.px(f),strokeDashoffset:c.u.px(-124)}}),h="spinnerIdle",g={animation:m+" 2s ease-in-out infinite",strokeDasharray:"1px, "+c.u.px(f),strokeDashoffset:c.u.px(1),strokeLinecap:"round",$nest:(r={},r["&."+h]={animationIterationCount:0},r)},v={stroke:l.Il.CoreRed50},y={stroke:l.Il.CoreGreen50},b={stroke:l.Il.CoreBlue50},w={stroke:l.Il.CoreNeutral0},C={stroke:u.lh},_={stroke:u.AX},S={stroke:l.Il.CoreYellow60},x={stroke:u.FW},I={stroke:l.Il.CoreCyan50},A=c.u.stylesheet({path:[g],red:[v],green:[y],blue:[b],white:[w],violet:[C],yellow:[_],orange:[S],gray:[x],cyan:[I]})},17674:(e,t,n)=>{"use strict";n.d(t,{X:()=>E});var r=n(59312),i=n(27378),o=n(45980),a=n(19962),s=n(64909),l=n(90351),c=n(22823),u=n(13097),d=n(38206),p=n(73805),f=n(42726),m=n(25781),h=n(83078),g=n(42499),v=n(52479),y=n(49708),b=n(85985),w=n(41398),C=n(24209),_=n(17343),S=n(38194),x=n(598),I=n(50628),A=n(66831),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!a.UL.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return i.createElement(f.F.div,{role:"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=y.R(document,"keydown").pipe(b.h((function(e){return e.keyCode===m.R.ESC_CODE}))),n=y.R(document,"mousedown").pipe(w.M(this.context.state),b.h((function(t){var n=t[0],r=t[1];return(0,p.pipe)(r,s.map((function(e){return e.target})),s.filter((function(){return a.pK(n.target)})),h.wo(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),r=C.T(t,n,y.R(document,"scroll"),g.c.observe.pipe(b.h((function(e){return"show"===e.detail})))).pipe(_.h(v.PU),S.B());this._subs=[this.context.hasContent.pipe(b.h(Boolean),x.c(r.pipe(I.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(b.h(Boolean),x.c(C.T(v.gw(!0,500),r.pipe(_.h(!1))).pipe(I.P())),b.h(Boolean)).subscribe(this.context.show)]},t.contextType=A.G.Context,t}(i.Component),E=function(){return i.createElement(k,null,(0,o.flow)(s.map((function(e){return i.createElement(d.t.ByAbsoluteRect,(0,r.__assign)({rect:a.UL.fromEl(e.target),className:L.container},d.t.Alignment.toSelector(e.alignment),{withPin:!0}),i.createElement("div",{className:L.content},e.content))})),s.toNullable))},T={position:"fixed",zIndex:u.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},R={padding:c.u.rem(.25)+" "+c.u.rem(1),borderRadius:c.u.rem(u.fx),background:l.Il.BackgroundTooltip,color:l.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:c.u.px(.25),fontSize:c.u.rem(.75),lineHeight:c.u.rem(1)},L=c.u.stylesheet({container:[T],content:[R]})},69551:(e,t,n)=>{"use strict";var r;n.d(t,{Q:()=>r}),function(e){e.group=function(e){return Object.values(e.reduce((function(e,t){var n=t.group,r=t.category,i=t.categoryHuman,o=t.cost;return void 0===e[r]&&(e[r]={group:n,category:r,categoryHuman:i,count:0}),e[r].count+=o,e}),{})).sort((function(e,t){return t.count-e.count}))}}(r||(r={}))},27901:(e,t,n)=>{"use strict";n.d(t,{S:()=>Se});var r,i=n(59312),o=n(53073),a=n(45980),s=n(73805),l=n(42726),c=n(80358),u=n(84966),d=n(67394),p=n(89943),f=n(81670),m=n(8125),h=n(22232),g=n(64909),v=n(65772),y=n(87088),b=n(92932),w=n(76779),C=n(40620),_=n(1701),S=n(92843),x=n(68983),I=n(76220),A=n(38365),k=n(67434),E=n(2834),T=n(77176);!function(e){function t(t){return function(o){return(0,s.pipe)(t,S.v.foldMap(e.group)(r,i,n),(0,x.W)(e.group.concat)(o))}}e.group=A.dM.group,e.eq=A.dM.eq,e.applyDiff=t,e.fromAlerts=function(e){var n=b.C8.Logging.getLogger("DocumentCounters");return e.pipe(k.R((function(e,n){return{alerts:n,counters:t(w.p.Diff.toRegistered(w.p.diff(e.alerts,n)))(e.counters)}}),{alerts:w.p.empty,counters:A.dM.group.empty}),E.b((function(e){var t=e.counters;A.dM.isValid(t)||n.error("Counters can not be below zero",A.dM.show.show(t))})),T.U((function(e){return e.counters})))};var n=function(e){return I.R.toUnmutedOnly(e.counters)},r=(0,a.flow)(n,e.group.inverse),i=function(t,i){return e.group.concat(n(i),r(t))}}(r||(r={}));var R,L=n(26001),M=n(93283),N=n(88903),P=n(64510),F=n(10002),O=n(58199),B=n(85985);!function(e){function t(e){var t=(0,s.pipe)(e,M.DZ(g.fromNullable),M.z7((function(e){return"GeneralScore"!==e})),M.Su((function(e,t){return{lensId:(n=e,n===F.R.SpecialId.Plagiarism?v.right(F.R.SpecialId.Plagiarism):F.R.OutcomeId.toOutcomeId(n)),score:O.T.fromNumber(t)};var n})),M.tV((0,L.Yt)(v.either))),n=t.left,r=t.right,i=(0,s.pipe)(r,M.UI((function(e){var t=e.lensId,n=e.score;return(0,a.tuple)(t,n)})),(function(e){return new Map(Object.values(e))}));return(0,s.pipe)(N.Qp(g.fromPredicate((0,a.not)(M.xb))(n),g.fromPredicate((0,a.not)(P.xb))(i)),g.getOrElse((function(){return N.F2(new Map)})))}e.empty=new Map,e.eq=P.Eh(F.R.Id.ord,O.T.ord),e.fromCapi=function(e){return e.pipe(B.h((0,m.Kg)(c.h.is("finish"),c.h.is("async_check_finished"),c.h.is("feedback_ack"))),T.U((function(e){return e.outcomeScores})),B.h(m.$K),T.U(t),E.b(N.Vn((function(e){M.xb(e)||b.C8.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),B.h((0,m.Kg)(N.WP,N.tO)),T.U((function(e){return e.right})))}}(R||(R={}));var D,W=n(95053),U=n(52479),H=n(32952),z=n(38194),X=n(77843),G=n(93508),V=n(95093),Y=n(598),q=n(24209),$=n(50628),Z=n(17343),j=n(36919),J=n(41120),K=n(95686),Q=n(64450),ee=n(25938),te=n(36991),ne=n(37492),re=n(95574),ie=n(83078),oe=n(51072),ae=n(489),se=n(44827),le=n(79932),ce=function(){function e(e){this._delta=e,this._cursor={index:0,operationOffset:0}}return e.prototype.next=function(e){(0,h.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return g.none;for(var n=te.s.operationLength(this._delta.ops[t]),r=e-(n-this._cursor.operationOffset);r>0&&t<this._delta.ops.length-1;)t++,r-=n=te.s.operationLength(this._delta.ops[t]);return r>0?(this._cursor={index:t+1,operationOffset:0},g.none):(this._cursor={index:t,operationOffset:n+r},g.some(this._delta.ops[t]))},e}();!function(e){var t=g.getMonoid((0,le.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=function(e){return function(n){var r=new ce(e);return n.ops.reduce((function(e,n){var i=e[0],o=e[1],a=r.next(o);return te.s.isInsert(n)?[i.insert(n.insert,g.toUndefined(t.concat(g.chain(te.s.getAttrs)(a),te.s.getAttrs(n)))),0]:[i.push(n),te.s.operationLength(n)]}),[new Q.i,1])[0]}}}(D||(D={}));var ue,de=n(17753);!function(e){var t=(0,m.HP)(b.C8.Logging.getLogger);e.switchBeingAppliedAlertsToApplied=function(e){return e.reduce((function(e,n){var r=n.beingAppliedAlert,i=n.undo,o=n.reversedAlternative,a={action:u.PZ.ACCEPTED,commit:function(){return t("AlertManager.ops").debug("_applyTransformJson("+r.toLiteString()+"):commit()")},undo:i,reversedAlternative:r.registerReversedAlternative(o)},s=r.switchToApplied(a),l=de.xS.create(s.state.from,se.h.create(r));return e.set(r.id,l),e}),new Map)}}(ue||(ue={}));var pe,fe,me,he=function(){function e(e,t,n,r){var o=this;this._positionManager=e,this._getContent=t,this._capiFeedbackClient=n,this._alertsRepo=r,this._log=b.C8.Logging.getLogger("AlertManager.ops"),this.changes=new H.xQ,this.events=new H.xQ,this.undoApplied=function(e,t){var n=o._positionManager.getTextLength(),r={alertsToUpdate:[],reversedDelta:new Q.i,undo:a.constVoid},i=e.filter(de.bZ.isApplied).reduce((function(e,t){var n=t.state.undoable;return de.VD.isWithAlternative(n)?(0,s.pipe)(n.reversedAlternative,g.fold((function(){u.wQ.withTransformJson(t._raw)&&o._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),c(e,t)}),(0,a.flow)((function(e){return e()}),v.map((function(e){return e.delta})),v.fold((function(e){o._log.error("Could not retrieve reversed delta",{e:e,alert:t.toLiteString()})}),(function(n){c(e,t),(0,s.pipe)(n,d.r3.fromRawDelta,(function(t){return t.rebase(e.reversedDelta)}),g.fold((function(){e.reversedDelta=e.reversedDelta.compose(n)}),(function(t){var n=t.delta;e.reversedDelta=e.reversedDelta.compose(n)})))}))))):c(e,t),e}),r);if(i.alertsToUpdate.length>0){var l=(0,s.pipe)(i.reversedDelta,D.getEnrichedWithFormattingDelta(o._getContent()));o.changes.next(ee.RI.delta(l,n)),o.flushChanges(),i.undo(),o.events.next({updated:new Map((0,s.pipe)(i.alertsToUpdate,ae.IX.sequence(K.io))())})}function c(e,n){e.undo=(0,a.flow)(e.undo,n.state.undoable.undo),e.alertsToUpdate.push((function(){return(0,a.tuple)(n.id,de.xS.create(se.h.create(n),se.h.create(n.changeState(t===de.bZ.State.Applied.Method.ByCard?de.bZ.State.init:de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.bulkAcceptUserResponse)))))}))}},this._dismissBatch=function(e){o.flushChanges();var t=e.map((function(e){return(0,h.kG)(!e.disposed,"Cannot send feedback for already disposed",(function(){return e.toString()})),o._applyFeedbackToAlert(e,u.PZ.IGNORE,de.l$.sidebar,(function(){return o._commitToCapi(e,{kind:u.PZ.IGNORE})}))})).map((function(e){return(0,a.tuple)(e.id,de.xS.create(e.state.from,se.h.create(e)))})),n={updated:new Map(t)};o.events.next(n)},this._applyAlert=function(e){var t=e.alert,n=e.replacementText,r=e.source,i=e.method;(0,h.kG)(de.bZ.isRegistered(t),"can not apply alert in non registered state",(function(){return t.toString()})),o.flushChanges(),o._alertsRepo.removeFromCapiMapping(t);var l=t.switchToBeingAppliedState(r,i),c=l.beingAppliedAlert,d=l.undo,p=(0,s.pipe)(t.getReplaceEither(),v.fold(a.identity,(function(){throw new Error("Cannot apply alert with tJSON")})));o._log.debug("_applyAlert("+t.toLiteString()+", rrange: "+p+")");var f=p.start,m=p.end-p.start,y=o._positionManager.getTextLength(),b=(new Q.i).retain(f).delete(n.length).insert(t.replaceText),w=!1,C={action:u.PZ.ACCEPTED,replacement:n,commit:function(){w||o._log.debug("_applyAlert("+t.toLiteString()+"):commit()")},reversedAlternative:g.none,undo:function(){w=!0,o._log.debug("_applyAlert("+t.toLiteString()+"):undo()");var e=o._positionManager.getTextLength();e!==y&&o._log.error("Text has changed while uncommitted apply is present. Expected: "+y+", actual: "+e);var n=ee.RI.delta(b,e);o.changes.next(n),o.flushChanges(),d()}};i===de.bZ.State.Applied.Method.ByCard&&o._sendApplyFeedback(c,n),o.changes.next(ee.RI.delta((new Q.i).retain(f).delete(m).insert(n),y)),o.flushChanges(),y=o._positionManager.getTextLength();var _=c.switchToApplied(C),S=de.xS.create(_.state.from,se.h.create(t));o.events.next({updated:new Map([[t.id,S]])})},this._sendApplyFeedback=function(e,t){return(0,s.pipe)(e.rawId,g.fold((function(){return o._log.debug("skip feedback for local alert",o)}),(function(e){return o._capiFeedbackClient.sendFeedback({kind:u.PZ.ACCEPTED,id:e,replacementText:t})()})))},this._applyTransformJson=function(e){var t=e.alerts,n=e.source,r=e.method;o.flushChanges();var a=o._positionManager.getTextLength(),l=t.map((function(e){return re.MH(e.alternative())})),c=o._getContent(),u=d.r3.compose(l.map((function(e){return e.alternative})),c),p=u.composedDelta,m=u.reversedAlternatives,h=(0,s.pipe)(m,f.T.foldSuccess(ae.UI((function(e){return(0,i.__assign)((0,i.__assign)({},e),{alternative:l[e.alternativeIndex],alert:t[e.alternativeIndex].alert})}))));if(te.s.nonEmpty(p)){var g=h.reduce((function(e,t){var a=t.alert,s=t.alternative,l=t.reversedAlternative;o._alertsRepo.removeFromCapiMapping(a);var c=a.switchToBeingAppliedState(n,r);return r===de.bZ.State.Applied.Method.ByCard&&o._sendApplyFeedback(c.beingAppliedAlert,s.replacementText),e.push((0,i.__assign)((0,i.__assign)({},c),{reversedAlternative:l})),e}),[]);(0,s.pipe)(p,D.getEnrichedWithFormattingDelta(c),(function(e){return o.changes.next(ee.RI.delta(e,a))})),o.flushChanges();var v=ue.switchBeingAppliedAlertsToApplied(g);o.events.next({updated:v})}(0,s.pipe)(m,f.T.tapFailure((function(e){var t=e.rejected;return b.C8.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",t)})))},this._alertFeedback=function(e,t,n){if(o._log.debug("_alertFeedback("+e.toLiteString()+", feedbackType: "+t.kind+", source: "+n+")"),de.bZ.isHidden(e)&&o._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind}),(0,h.kG)(!e.disposed,"Cannot send feedback for already disposed",(function(){return e.toString()})),t.kind!==u.PZ.LOOKED||e.isRead)if(u.nw.willRemoveAlert(t.kind)){o.flushChanges();var r=o._applyFeedbackToAlert(e,t.kind,n,(function(){return o._commitToCapi(e,t)}));a=de.xS.create(r.state.from,se.h.create(r)),s={updated:new Map([[r.id,a]])};o.events.next(s)}else o._commitToCapi(e,t);else{var i=se.h.create(e);e.isRead=!0;var a=de.xS.create(i,se.h.create(e)),s={updated:new Map([[e.id,a]])};o.events.next(s),o._commitToCapi(e,t)}},this._alertBatchFeedback=function(e,t){var n=e.filter((function(e){return g.isSome(e.rawId)})).map((function(e){return ie.MH(e.rawId)}));n.length>0&&o._sendFeedback({kind:t,alertIds:n})},this._notifyAlertUpdated=function(e){var t={updated:new Map([[e[0].id,e]])};o.events.next(t)},this._releaseRef=function(e,t){if(o._log.debug("_releaseRef "+e+" on ("+t.toLiteString()+") refs: "+t._refNames,{shouldBeRemoved:de.bZ.shouldBeRemoved(t)}),de.bZ.shouldBeRemoved(t)){var n={removed:new Map([[t.id,se.h.create(t)]])};o.events.next(n)}},this._changeMuteState=function(e,t){var n=(0,s.pipe)(e,f.T.fromArray((0,a.flow)(v.fromPredicate((function(e){return!e.disposed}),(function(e){var t=new Error("Cannot send Mute feedback for already disposed");return o._log.error(t.message,e.toString()),t})),v.chain(v.fromPredicate((function(e){return g.isSome(e.muteCategory)||de.bZ.belongsToAnySpecialCategory(e)}),(function(e){var t=new Error("Alert is not muting");return o._log.error(t.message,e.toString()),t}))))));return(0,s.pipe)(n,f.T.foldSuccess((function(e){return e.map((function(e){var n=se.h.create(e);e.mute=t;var r=se.h.create(e);return(0,a.tuple)(e.id,de.xS.create(n,r))}))})),(function(e){e.length>0&&o.events.next({updated:new Map(e)})})),n},this._changeUserInput=function(e,t){return(0,s.pipe)(e,v.fromPredicate(de.bZ.isOneGap,(function(){return new Error("can not change user input for a non one gap alert")})),v.map((function(e){var n=[(0,a.tuple)(e.id,de.xS.create(se.h.create(e),se.h.create(e.changeUserInput(t))))];o.events.next({updated:new Map(n)})})))},this._confirmApplied=function(e){var t=e.map((function(e){return(0,a.tuple)(e.id,de.xS.create(se.h.create(e),se.h.create(e.changeState(de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.bulkAcceptUserResponse)))))}));o.events.next({updated:new Map(t)})}}return e.prototype.flushChanges=function(){this.changes.next(ee.RI.flush())},e.prototype._applyFeedbackToAlert=function(e,t,n,r){this._alertsRepo.removeFromCapiMapping(e);var i=this._createFeedbackUndoable(e,t,r);return e.changeState(de.bZ.State.Applied.create(i,n,de.bZ.State.Applied.Method.ByCard,se.h.create(e)))},e.prototype._createFeedbackUndoable=function(e,t,n){var r=this;return{action:t,replacement:e.replaceText,commit:n,undo:function(){return r._alertsRepo.addToCapiMapping(e)}}},e.prototype._commitToCapi=function(e,t){var n=this;(0,s.pipe)(e.rawId,g.fold((function(){return n._log.debug("skip feedback for local alert",e)}),(function(e){return n._sendFeedback((0,i.__assign)({id:e},t))})))},e.prototype._sendFeedback=function(e){var t=this;oe.Vi(this._capiFeedbackClient.sendFeedback(e)).catch((function(e){ne.EP.isDroppedError(e)?t._log.debug("Stopped listening for feedback message acknowledge",e):ne.YG.isNotConnectedError(e)?t._log.warn("Failed to send alert feedback as CAPI was not connected",e):t._log.error("Failed to send alert feedback",e)}))},e}(),ge=n(80229);!function(e){e.toString=v.fold((function(e){return"rid:"+e.id}),(function(e){return"aid:"+e.toString()}))}(pe||(pe={})),function(e){e.match=function(e){return function(t){return t instanceof de.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}}(fe||(fe={})),function(e){e.defaultValidator=de.bZ.isDuplicatedBy}(me||(me={}));var ve,ye,be=function(){function e(t,n,r){var i=this;this._positionManager=t,this._alertsRepo=n,this._alertDuplicateValidator=r,this._log=b.C8.Logging.getLogger("AlertManager.pipeline",b.zW.LogLevel.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=function(e){return i._log.trace("process, to process = "+e.length),i._collectChanges(i._processAlertsBatch(e))},this.reset=function(e){return i._cleanupPendingAlerts(e),i._finishAlertsChecking()},this._processAlertsBatch=function(t){var n=i._processBatch(t),r=n.toAdd,o=n.toUpdate,l=n.toAddOrUpdate,u=n.toRemoveUnfiltered,d=n.toChangeUnfiltered,p=n.toDispose,f=n.rangeChanges,m=function(e){return(0,s.pipe)(i._alertsRepo.getByAlertId(e),g.getOrElse((function(){return r.get(e)||o.get(e)||p.get(e)})))};d.forEach((function(t){return(0,s.pipe)(g.fromNullable(l.get(t.id)),g.fold((function(){return(0,s.pipe)(i._alertsRepo.getByRawAlertId(t.id),g.map((function(n){var r=n.copy();r.patchWithRawAlert(e._prepareUpdate(r,t)),o.set(r.id,r),l.set(t.id,r)})),g.getOrElse((function(){return i._log.info("Change from CAPI: Cannot find internal AlertId.")})))}),(function(n){var r=e._prepareUpdate(n,t);o.has(n.id)?n.patchWithRawAlert(r):n.updateAlertWithManagedData(r)})))}));var y=u.reduce((function(e,t){var n=(0,s.pipe)(t,v.fold((function(e){var t=e.id;return(0,s.pipe)(i._alertsRepo.getByRawAlertId(t),g.map((function(e){return de.bZ.isRegistered(e)?e:void 0})),g.getOrElse((function(){return i._heuristicallyRemovedAlerts.has(t)?void i._heuristicallyRemovedAlerts.delete(t):l.get(t)})))}),m));return void 0===n?(v.isLeft(t)?i._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(t.left)):i._log.error("Cannot find existing alert by id",t.right),e):((0,s.pipe)(i._getMergeTarget(t,l),g.filter(we((function(e){return e.lensId!==n.lensId?(i._log.warn("Trying to merge alerts from different lenses",{source:n,target:e}),!1):g.isNone(n.rawId)?(i._log.warn("Trying to merge into local alert",{source:n,target:e}),!1):n.references>e.references}))),g.fold((function(){e.set(n.id,{alert:n,reason:(0,s.pipe)(t,v.swap,g.fromEither,g.chain((function(e){return e.hint})),g.chain((function(e){return e===c.A.NotFixed?g.some(de.bZ.State.Removed.Reason.capiDismiss):g.none})),g.getOrElse((function(){return de.bZ.State.Removed.Reason.capiDone})))})}),v.fold((function(e){i._log.debug("swap raw alerts with new alert",{source:n.toString(),newTarget:e.toString()}),i._alertsRepo.swapRaw(n,e);var t=ie.MH(n.rawId);(0,h.kG)(void 0===o.get(e.id),"Added alert should not be present in the updated alerts map",(function(){return o.get(e.id).toString()}));var a=n.copy();o.set(a.id,a),l.set(t,a),r.delete(e.id),p.set(e.id,e)}),(function(t){i._log.debug("swap raw alerts with existing alert",{source:n.toString(),existingTarget:t.toString()}),i._alertsRepo.swapRaw(n,t),e.set(t.id,{alert:t,reason:de.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),b=new Map;return f&&f.forEach((function(e,t){(0,s.pipe)(t,m,g.fromPredicate((function(n){return n?de.bZ.isInteractable(n)?!o.has(n.id)||(i._log.debug("skip range change on updateHolder alert",n.toLiteString()),!1):(i._log.debug("skip range change on non-interactable alert",n.toLiteString()),!1):(i._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1)})),g.chain((function(n){return(0,s.pipe)(n.onRangeChange(e),g.map((function(e){switch(e.state){case de.bZ.Transition.State.Pending:return b.set(n.id,[n,e.removedRanges]);case de.bZ.Transition.State.Dispose:return(0,s.pipe)(n.rawId,g.fold((function(){return i._log.debug("dispose by range change on unknown rid",n.id)}),(function(e){return i._heuristicallyRemovedAlerts.set(e,n)}))),y.set(t,{alert:n,reason:de.bZ.State.Removed.Reason.textChange});default:return(0,h.vE)(e)}})))})))})),y.forEach((function(e){var t=e.alert;i._log.trace("check cancellations from toRemove: "+t.toLiteString()),(0,s.pipe)(t.rawId,g.fold((function(){r.get(t.id)&&(i._log.debug("cancel add local alert for: "+t.toLiteString()),r.delete(t.id),y.delete(t.id),p.set(t.id,t)),(0,h.kG)(!1===o.has(t.id),"Added local alert should not be present in the updated alerts map",(function(){return o.get(t.id).toString()}))}),(function(e){var n=l.get(e);n&&(l.delete(e),r.delete(n.id)?(i._log.debug("cancel add for: "+n.toLiteString()),i._log.debug("cancel remove for: "+t.toLiteString()),y.delete(t.id),p.set(t.id,t),p.set(n.id,n)):o.delete(n.id)?(i._log.debug("cancel update for: "+n.toLiteString()),n.id!==t.id&&(i._log.debug("marking update to dispose: "+n.toLiteString()),p.set(n.id,n))):i._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",n))}))),i._log.trace("check if local orphan toRemove: "+t.toLiteString()),(0,s.pipe)(i._alertsRepo.getByAlertId(t.id),g.fold((function(){i._log.debug("cancel delete for: "+t.toLiteString()),y.delete(t.id)}),a.constVoid))})),p.size>0&&i._log.debug("_cancelAlerts, to cancel = "+p.size,{alerts:Array.from(p.values()).map((function(e){return e.toLiteString()}))}),p.forEach((function(e){b.delete(e.id)&&i._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){i._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:r,toUpdate:o,toRemove:y,toStartChecking:b}},this._collectChanges=function(e){var t=e.toAdd,n=e.toUpdate,r=e.toRemove,o=e.toStartChecking,a=i._addAlerts(Array.from(t.values()),r),s=a.alertsToAdd,l=a.alertsToUpdate,c=a.alertsToRemove;return n.size>0&&i._updateAlerts(Array.from(n.values()),l),o.size>0&&i._startAlertsChecking(Array.from(o.values()),l,s),c.size>0&&i._removeAlerts(c,l),{added:s,updated:l}},this._validateAlertAdd=function(e){try{var t=!de.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==u.wQ.Impact.Critical&&e._raw.impact!==u.wQ.Impact.Advanced&&g.isSome(e.rawId)&&i._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),t||(i._log.error("CAPI provides corrupted alert",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,s.pipe)(e.rawId,g.exists((function(e){return g.isSome(i._alertsRepo.getByRawAlertId(e))})))?(i._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===F.R.Type.Plagiarism&&O.T.isMax(e.progress)?(i._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){i._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){i._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=function(e){var t=e.id;i._recheckedAlerts.delete(t)&&i._log.debug("Stopped watching checking state for alert",t)},this._applyRemoveToAlert=function(e){var t=e.alert,n=e.reason;return i._alertsRepo.removeFromCapiMapping(t),n!==de.bZ.State.Removed.Reason.textChange&&t.clearCapiId(),t.changeState(de.bZ.State.Removed.create(n))},this._finishAlertChecking=function(e){(0,h.kG)(i._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),i._log.debug("Stopped watching checking state for alert",e.id);var t=se.h.create(e);return de.xS.create(t,se.h.create(e.changeState(de.bZ.State.Registered.create(de.bZ.CheckingState.IDLE))))}}return e._prepareUpdate=function(e,t){var n=(0,i.__assign)((0,i.__assign)({},e.toRawAlert()),{rev:t.rev});return u.wQ.withTransformJson(n)&&(0,s.pipe)(t.transformJson,ie.bw((function(e){return n.transformJson=e}))),(0,s.pipe)(t.extraProperties,ie.bw((function(e){return n.extra_properties=e}))),(0,s.pipe)(t.muted,ie.bw((function(e){return n.muted=e}))),n},e.prototype._processBatch=function(e){var t=this;return e.reduce((function(e,n){return fe.match({alertAddOrUpdate:function(n){(0,s.pipe)(n.rawId,g.fold((function(){e.toAdd.set(n.id,n)}),(function(r){(0,s.pipe)(t._alertsRepo.getByRawAlertId(r),g.filter((function(e){return e.allowUpdate})),g.map((function(){(0,s.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((function(n){t._log.debug("got overlap in batch on update"),e.toUpdate.delete(n.id),e.toDispose.set(n.id,n)}))),e.toUpdate.set(n.id,n)})),g.getOrElse((function(){(0,s.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((function(n){t._log.info("got overlap in batch on add"),e.toAdd.delete(n.id),e.toDispose.set(n.id,n)}))),e.toAdd.set(n.id,n)}))),e.toAddOrUpdate.set(r,n)})))},rangeChange:function(t){(0,h.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:function(t){e.toRemoveUnfiltered.push(t)},alertChange:function(t){e.toChangeUnfiltered.push(t)}})(n),e}),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})},e.prototype._getMergeTarget=function(e,t){var n=this;return(0,s.pipe)(e,v.swap,g.fromEither,g.chain((function(e){return e.mergedIn})),g.chain((function(e){var r=(0,s.pipe)(n._alertsRepo.getByRawAlertId(e),g.map((function(e){return v.right(e)})),g.alt((function(){return(0,s.pipe)(g.fromNullable(t.get(e)),g.map((function(e){return v.left(e)})))})));return g.isNone(r)&&n._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),r})),g.filter(we((function(e){return!!e.allowUpdate||(n._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)}))))},e.prototype._addAlerts=function(e,t){var n=this;return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((function(e){return e.toLiteString()}))}),(0,s.pipe)(e,ae.hX(this._validateAlertAdd),ae.u4({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},(function(e,t){n._log.trace("Adding alert: "+t.toLiteString());var r=n._getAlertsWithMatchingRanges(t.getHighlightRanges()[0]),i=n._tryToMatchInvalid(t,r);switch(n._log.trace("Adding alert match result",{inc:t.id,match:i}),i.type){case ve.Type.Merged:var o=i.result[1];de.bZ.isNotRegistered(o.alert)?de.bZ.isRemoved(o.alert)&&n._log.warn("unexpected merge into removed alert",{alert:o,newAlert:t}):n._alertsRepo.addToCapiMapping(o.alert),e.alertsToUpdate.set(o.id,i.result);break;case ve.Type.Restored:o=i.result[1];(0,h.kG)(!e.alertsToRemove.has(o.id),"can't update alert which we wanted to remove earlier"),n._alertsRepo.addToCapiMapping(o.alert),e.alertsToUpdate.set(o.id,i.result);break;case ve.Type.Unmatched:var a=i.result,l=r.filter((function(t){return de.bZ.isDuplicateCandidate(t)&&n._alertDuplicateValidator(a,t)&&!e.alertsToRemove.has(t.id)}));(0,h.kG)(a.allowDuplicates||de.bZ.isApplicableAlert(a),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type"),l.length>0&&n._log.info("Trying to add a duplicated alert",{newAlert:t.toString(),duplicates:l.map((function(e){return e.toString()}))});var c=a.allowDuplicates?{result:ye.Add,toRemove:g.none}:n._tryAddAlert(a,l);switch(c.result){case ye.Add:case ye.OverwriteExisting:n._log.debug("AllAlerts: Append alert to all alerts",a.toLiteString()),n._alertsRepo.addToCapiMapping(a),(0,h.kG)(!e.alertsToRemove.has(a.id),"can't add alert which we wanted to remove earlier",(function(){return a.toLiteString()})),n._alertsRepo.add(a),e.alertsToAdd.set(a.id,se.h.create(a)),(0,s.pipe)(c.toRemove,ie.bw((function(t){if(e.alertsToAdd.has(t.id)){n._alertsRepo.removeFromCapiMapping(t);var r=t.changeState(de.bZ.State.Removed.create(de.bZ.State.Removed.Reason.canceled));n._terminateAlertChecking(r),n._alertsRepo.remove(r)}else n._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:de.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case ye.Skip:n._log.debug("Skip alert with low priority",a.id);break;default:(0,h.vE)(c.result)}break;default:(0,h.vE)(i)}return e})))},e.prototype._updateAlerts=function(e,t){var n=this;this._log.debug("_updateAlerts, to update = "+e.length,{alerts:e.map((function(e){return e.toLiteString()}))}),(0,s.pipe)(e,ae.u4(t,(function(e,t){return n._log.trace("Updating alert: "+t.toLiteString()),(0,s.pipe)(n._alertsRepo.getByRawAlertId(ie.MH(t.rawId)),g.fold((function(){return n._log.warn("tried to update unknown alert",t)}),(function(n){var r=t._raw;t.dispose();var i=e.has(n.id)?e.get(n.id)[0]:se.h.create(n);n.enqueueRawAlertForUpdate(r),e.set(n.id,de.xS.create(i,se.h.create(n)))}))),e})))},e.prototype._startAlertsChecking=function(e,t,n){var r=this;this._log.debug("_startAlertsChecking, to update = "+e.length,{alerts:e.map((function(e){var t=e[0],n=e[1];return[t.toLiteString(),n]}))});var i=function(e,t){var n=e.changeState(de.bZ.State.Registered.create(de.bZ.CheckingState.CHECKING));return r._recheckedAlerts.add(e.id),se.h.create(t.size>0?n.enqueueRangesRemove(t):n)};(0,s.pipe)(e,ae.u4({updatedAlerts:t,addedAlerts:n},(function(e,t){var n=t[0],o=t[1];return(0,s.pipe)(r._alertsRepo.getByAlertId(n.id),g.fold((function(){r._log.warn("tried to start checking unknown alert",{alert:n,ranges:o})}),(function(){if(e.addedAlerts.has(n.id))e.addedAlerts.set(n.id,i(n,o));else{var t=e.updatedAlerts.has(n.id)?e.updatedAlerts.get(n.id)[0]:se.h.create(n);e.updatedAlerts.set(n.id,de.xS.create(t,i(n,o)))}}))),e})))},e.prototype._removeAlerts=function(e,t){var n=this;e.forEach((function(e,r){(0,s.pipe)(n._alertsRepo.getByAlertId(r),g.fold((function(){n._log.warn("tried to remove unknown alert",e)}),(function(){var i=t.has(r)?t.get(r)[0]:se.h.create(e.alert),o=n._applyRemoveToAlert(e);n._terminateAlertChecking(o),t.set(r,de.xS.create(i,se.h.create(o)))})))}))},e.prototype._getAlertsWithMatchingRanges=function(e){var t=this;return(0,s.pipe)(this._positionManager.findIntersections(e),ae.hX((0,m.W9)(J.P.is,J.x.isVisible)),ae.DZ((function(e){return t._alertsRepo.getByAlertId(e.meta.alertId)})),ae.hX((function(e){return!(de.bZ.isApplied(e)&&e.getAppliedRanges().length>0)})))},e.prototype._tryToMatchInvalid=function(e,t){var n=this;return(0,h.kG)(!e.isValid,"added alert should be invalid"),(0,h.kG)(de.bZ.isRegistered(e),"added alert should be in registered state",(function(){return e.toString()})),(0,s.pipe)(g.fromNullable(t.find((function(t){return!t.isValid&&t.canBeMergedWith(e)}))),g.fold((function(){return{result:e,type:ve.Type.Unmatched}}),(function(t){(0,h.kG)((0,s.pipe)(t.rawId,ie.wo((0,a.flow)(n._alertsRepo.getByRawAlertId,g.isNone))),"CAPI mapping should not contain invalid alerts"),n._log.debug("Merging new alert ("+e+") into the existing one aid("+t+")");var r=se.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&de.bZ.isCapiDone(t)?{result:de.xS.create(r,se.h.create(t.changeState(de.bZ.State.init))),type:ve.Type.Restored}:{result:de.xS.create(r,se.h.create(t)),type:ve.Type.Merged}})))},e.prototype._tryAddAlert=function(e,t){return(0,s.pipe)(ge.nI(t),g.map((function(t){(0,h.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert","got "+t.map((function(e){return e.toString()}))+" with input ("+e.toString()+")");var n=t[0];return n.extraProperties.priority<=e.extraProperties.priority?{result:ye.OverwriteExisting,toRemove:g.some(n)}:(e.dispose(),{result:ye.Skip,toRemove:g.none})})),g.getOrElse((function(){return{result:ye.Add,toRemove:g.none}})))},e.prototype._cleanupPendingAlerts=function(e){var t=this;e.removed.forEach((function(e){t._heuristicallyRemovedAlerts.delete(e)&&t._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.info("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()},e.prototype._finishAlertsChecking=function(){var e=this;return(0,s.pipe)(Array.from(this._recheckedAlerts.values()),ae.DZ((function(t){var n=e._alertsRepo.getByAlertId(t);g.isNone(n)&&(e._log.error("tried to finish checking on missing alert",t),e._recheckedAlerts.delete(t));var r=(0,s.pipe)(n,g.filter((function(e){return de.bZ.isRegistered(e)})),g.map((function(t){return(0,a.tuple)(t.id,e._finishAlertChecking(t))})));return g.isNone(r)&&e._log.error("tried to update checking state on non-registered alert",t),r})),(function(e){return{updated:new Map(e)}}))},e}();function we(e){return v.fold(e,e)}!function(e){!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(e.Type||(e.Type={}))}(ve||(ve={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(ye||(ye={}));var Ce=function(){var e=this;this._log=b.C8.Logging.getLogger("AlertManager.repository",b.zW.LogLevel.DEBUG),this._allAlerts=new Map,this._capiAlertsIdMapping=new Map,this.add=function(t){e._allAlerts.set(t.id,t)},this.remove=function(t){e._log.trace("AllAlerts: Clean alert from all alerts",t.toLiteString()),(0,h.kG)(0===t.references,"can not dispose alert in use",(function(){return t.toString()})),(0,h.kG)(!1===t.isValid,"can not dispose valid alert",(function(){return t.toString()})),(0,h.kG)(e._allAlerts.delete(t.id),"alert should exist in alerts list",(function(){return t.toString()})),t.dispose()},this.addToCapiMapping=function(t){t.isValid||(0,s.pipe)(t.rawId,g.fold((function(){return e._log.debug("skip register of local alert in capi mapping",t)}),(function(n){e._log.trace("register alert in capi mapping",t.toLiteString()),(0,h.kG)(void 0===e._capiAlertsIdMapping.get(n),"unexpected overlap of rawid alert",(function(){return t.toString()})),t.validate(),e._capiAlertsIdMapping.set(n,t.id)})))},this.removeFromCapiMapping=function(t){t.isValid&&((0,s.pipe)(t.rawId,ie.bw((function(n){e._log.trace("clean valid alert capi mapping for: "+t.toLiteString()),(0,h.kG)(e._capiAlertsIdMapping.delete(n),"valid alert should had valid raw id",(function(){return t.toString()}))}))),t.invalidate())},this.getByAlertId=function(t){return g.fromNullable(e._allAlerts.get(t))},this.getByRawAlertId=function(t){return(0,s.pipe)(g.fromNullable(e._capiAlertsIdMapping.get(t)),g.chain(e.getByAlertId))},this.swapRaw=function(t,n){var r=(0,s.pipe)(t.rawId,g.exists((function(t){return e._capiAlertsIdMapping.has(t)}))),i=(0,s.pipe)(t.rawId,g.exists((function(t){return e._capiAlertsIdMapping.has(t)})));(0,h.kG)(r||i,"At least one of the swapped alerts should be registered in the system");var o=t._raw;t.silentPatchWithRawAlert(n._raw),n.silentPatchWithRawAlert(o),r&&e._capiAlertsIdMapping.set(ie.MH(t.rawId),t.id),i&&e._capiAlertsIdMapping.set(ie.MH(n.rawId),n.id)},this.toArray=function(){return Array.from(e._allAlerts.values())},this.toMap=function(){return e._allAlerts},this.toJSON=function(){return{allAlerts:Array.from(e._allAlerts.entries()),idMapping:Array.from(e._capiAlertsIdMapping.entries())}}},_e=n(16185),Se=function(){function e(e,t,n,i,u,d,h,S){var x=this;void 0===S&&(S=me.defaultValidator),this._positionManager=e,this._alternativeManager=t,this._getContent=n,this._capiEvents=i,this._capiClient=u,this._documentCounters=d,this._transformRawAlert=h,this._alertDuplicateValidator=S,this._state=l.hg.create(_.r.empty),this.state=this._state.view(_.r.toCheckingResult),this.lensesScores=l.hg.create(R.empty),this._log=b.C8.Logging.getLogger("AlertManager",b.zW.LogLevel.TRACE),this._subs=[],this._addAlerts=new H.xQ,this._removeAlerts=new H.xQ,this._changeAlerts=new H.xQ,this._flush=new H.xQ,this._alertsPerRevision=0,this._alertsRepo=new Ce,this._pipeline=new be(this._positionManager,this._alertsRepo,this._alertDuplicateValidator),this._invalidateAlerts=function(){x.flushAlerts();var e=p.uK(x._getAllAlertsAsArray(),(function(e){return e.isValid})),t=e[0],n=e[1];x._log.debug("Invalidate alerts...",{valid:t.length,invalid:n.length}),t.forEach((function(e){x._alertsRepo.removeFromCapiMapping(e),e.clearCapiId()})),n.forEach((function(e){return e.clearCapiId()}))},this._removeInvalidAlerts=function(e){x._log.debug("Removing invalid alerts by type '"+e+"'...");var t=x._getTypeFilter(e),n=x._getAllAlertsAsArray().filter((function(e){return!e.isValid&&de.bZ.isRegistered(e)&&t(e)}));n.forEach((function(e){return x._removeAlertBuffered(v.right(e.id))})),x._log.debug(n.length+" invalid alerts removed"),x.flushAlerts(),x._log.isEnabled(b.zW.LogLevel.TRACE)&&x._log.trace("Removed alerts",n.map((function(e){return e.toString()})))},this._onCapiEvent=function(e){try{switch("alert_received"===e.kind&&x._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void x._log.warn("got alert with empty mapping",{pname:e.alert.pname});x._addAlertBuffered(de.bZ.create(x._transformRawAlert(e.alert),x._ops,x._positionManager,x._alternativeManager));break;case"alert_removed":x._log.debug("Remove from capi #"+e.alertId+", merged in #"+g.getOrElse((function(){return"None"}))(e.mergedIn)+", hint: "+g.getOrElse((function(){return"None"}))(e.hint)),(0,s.pipe)(x._alertsRepo.getByRawAlertId(e.alertId),g.exists(de.bZ.isBulkApplied))||x._removeAlertBuffered(v.left({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":x._log.debug("Alert change from capi #"+e.alertId),x._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:g.fromNullable(e.extraProperties),transformJson:g.fromNullable(e.transformJson),muted:g.fromNullable(e.muted)});break;case"finish":x._log.debug("Alerts per revision (#"+e.revision+"): "+x._alertsPerRevision),x._alertsPerRevision=0,"idle"===x._capiClient.checkingState&&x._emitDomainEvent(x._pipeline.reset(e))}}catch(t){x._log.warn("Cannot handle alert event "+e.kind,t)}},this._emitDomainEvent=function(e){(0,s.pipe)(e,x._prepareDiff,C.v.createDiff,f.T.recover((function(e){return x._log.error("conflicts on diff creating",e)})),(function(e){return x._log.debug("_emitDomainEvent",w.p.Diff.show.show(e)),e}),_.r.applyDiff,y.UI(f.T.recover((function(e){return x._log.error("conflicts on diff apply",e)}))),(function(e){return x._state.modify(e)}))},this._prepareDiff=function(e){var t=e.added,n=e.updated,r=void 0===n?new Map:n,i=e.removed,l=void 0===i?new Map:i;return r.forEach((function(e,t){(0,s.pipe)(e,o.Yg,de.bZ.fromAlertModel,de.bZ.shouldBeRemoved)&&(r.delete(t),l.set(t,e[0]))})),l.forEach((0,a.flow)(de.bZ.fromAlertModel,x._disposeAlert)),{added:t,updated:r,removed:l}},this._disposeAlert=function(e){if(de.bZ.isApplied(e)&&e.state.undoable.commit(),de.bZ.isNotRegistered(e))try{x._alertsRepo.remove(e)}catch(t){x._log.error("can not remove alert",t),e.disposed||e.dispose()}else x._log.error("unexpected remove of registered alert",e.toString())},this._ops=new he(this._positionManager,this._getContent,this._capiClient,this._alertsRepo),this.loadScores=function(e){x.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;var I=e.rangeChanged.pipe(T.U((function(e){return e.affected})),B.h((function(e){return e.length>0})),T.U((function(e){return W.vM((function(e){return e.meta.alertId}),e.filter(J.P.is))})),B.h((function(e){return e.size>0})),E.b((function(e){return x._log.debug("Range[s] changed",e)})),z.B()),A=X.F(250).pipe(G.O(0),V.T(this._flush)),k=U.RX(this._log);this._subs.push(k("_alertsInvalidation",this._capiEvents.pipe(B.h(c.h.is("session_started")),E.b(this._invalidateAlerts),Y.c(q.T(this._capiEvents.pipe(B.h(c.h.is("finish")),$.P(),Z.h("alert")),this._capiEvents.pipe(B.h(c.h.is("async_check_finished")),$.P(),Z.h("plagiarism")))),E.b(this._removeInvalidAlerts))),k("_capiEvents",this._capiEvents.pipe(E.b(this._onCapiEvent))),k("_alertsProccesing",this._addAlerts.pipe(V.T(this._removeAlerts),V.T(this._changeAlerts),V.T(I),j.f(A),B.h(m.Dw),T.U(this._pipeline.process),E.b(this._emitDomainEvent))),k("_alertsBuffer",I.pipe(V.T(this._capiEvents.pipe(B.h(c.h.is("before_finish","before_async_check_finish","async_check_finished")))),Z.h(U.PU),E.b(this._flush))),k("_alertOpsAlertChanges",this._ops.events.pipe(E.b(this._emitDomainEvent))),k("_lensesScoresChanges",R.fromCapi(this._capiEvents).pipe(E.b(U.wW(this.lensesScores)))),k("documentCountersChanges",r.fromAlerts(this._state.view(C.v.iso.wrap)).pipe(E.b(U.wW(this._documentCounters))))),(0,m.iR)("alerts",(function(){return x.toString()})),(0,m.iR)("triggerRemove",(function(e){x._removeAlertBuffered(v.right(e))}))}return e.prototype.flushAlerts=function(){this._flush.next()},e.prototype.loadAlerts=function(e){var t=this,n=new Map;return(0,m.Dw)(e)&&(this._log.debug(e.length+" external alert(s) where loaded"),e.map(_e.I.splitById).map((function(e){var n=e.id,r=e.local;return{id:n,alert:de.bZ.create((0,s.pipe)(r,u.wQ.matchBy(a.identity,(function(e){return(0,i.__assign)((0,i.__assign)({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,s.pipe)(e.transformJson.alternatives,g.map(d.r3.Group.fromSerialized))}})}),a.identity),t._transformRawAlert),t._ops,t._positionManager,t._alternativeManager)}})).forEach((function(e){var r=e.id,i=e.alert;t._addAlertBuffered(i),r&&n.set(r,i.id)}))),n},e.prototype.toString=function(){return JSON.stringify(this,void 0,2)},e.prototype.toJSON=function(){return{repo:this._alertsRepo}},e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._getTypeFilter=function(e){switch(e){case"alert":return function(e){return!de.bZ.isPlagiarism(e)};case"plagiarism":return function(e){return de.bZ.isPlagiarism(e)};default:return(0,h.vE)(e)}},e.prototype._addAlertBuffered=function(e){this._log.trace("_addAlert("+e.toLiteString()+")"),this._addAlerts.next(e)},e.prototype._changeAlertBuffered=function(e){this._log.trace("_changeAlert("+e.id+")"),this._changeAlerts.next(e)},e.prototype._removeAlertBuffered=function(e){this._log.trace("_removeAlert("+pe.toString(e)+")"),this._removeAlerts.next(e)},e.prototype._getAllAlertsAsArray=function(){return this._alertsRepo.toArray().filter(de.bZ.isNotRemoved)},e}()},53487:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var r,i=n(73805),o=n(64909),a=n(76779),s=n(17753);!function(e){e.create=function(e){var t=function(t){return(0,i.pipe)(e.get(),a.p.get(t),o.map(s.bZ.fromAlertModel))},n=function(e){return(0,i.pipe)(t(e),o.filter(s.bZ.isInteractable))},r=function(e){return(0,i.pipe)(t(e),o.filter(s.bZ.isRegistered))};return{getById:t,getRegistered:r,getInteractable:n,isRegistered:function(e){return(0,i.pipe)(r(e),o.isSome)},isInteractable:function(e){return(0,i.pipe)(n(e),o.isSome)}}}}(r||(r={}))},24273:(e,t,n)=>{"use strict";n.d(t,{k:()=>f});var r=n(489),i=n(65772),o=n(22902),a=n(45980),s=n(73805),l=n(84966),c=n(95574),u=n(81670),d=n(92932),p=n(17753),f=function(){function e(e,t){var n=this;this._alertsReader=e,this._ops=t,this._log=d.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=function(e){return(0,s.pipe)(e,n._alertsReader.getById,i.fromOption((function(){return new Error("alert "+e+" not found in the repo")})))},this.getHighlightRanges=(0,a.flow)(this._findAlert,i.map((function(e){return e.getHighlightRanges()}))),this.hasNewRangesForUpdate=(0,a.flow)(this._findAlert,i.map((function(e){return e.hasNewRangesForUpdate}))),this.applyPendingRangesUpdate=(0,a.flow)(this._findAlert,i.map((function(e){return e.applyPendingRangesUpdate()}))),this.getAppliedRanges=(0,a.flow)(this._alertsReader.getById,i.fromOption((function(){return new Error("alert not found in the repo")})),i.filterOrElse(p.bZ.isApplicableAlert,(function(e){return new Error("alert is not applicable: "+e.alertType)})),i.map((function(e){return e.getAppliedRanges()})))}return e.prototype.apply=function(e,t,n){var r=this;return this._log.trace("apply",e),(0,s.pipe)(this._findAlert(e),i.chain(i.fromPredicate(p.bZ.isApplicableAlert,(function(){return new Error("cannot apply not applicable alert")}))),i.chain((function(e){return(0,s.pipe)(c.vM((function(){return e.apply(t,n)})),i.mapLeft((function(i){return r._log.error("apply single alert error",{error:i,alert:e.toLiteAlert(),alternativeIndex:t,source:n}),i})))})))},e.prototype.undoBulk=function(e){throw new Error("Not implemented")},e.prototype.applyBulk=function(e){var t=this;this._log.trace("applyBulk",e),this.sendBatchFeedback(e,l.DI.BULK_ACCEPTED,p.l$.api);var n=(0,s.pipe)(e,u.T.fromArray((function(e){return(0,s.pipe)(t._findAlert(e),i.mapLeft((function(t){return(0,a.tuple)(t,{id:e})})),i.chain(i.fromPredicate(p.bZ.isRegisteredApplicableAlert,(function(e){return(0,a.tuple)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())}))),i.chain(i.fromPredicate((function(e){return l.wQ.withTransformJson(e._raw)}),(function(e){return(0,a.tuple)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())}))),i.mapLeft((function(e){var n=e[0],r=e[1];return t._log.error(n.message,r),n})))})));return(0,s.pipe)(n,u.T.flatMap(r.uZ(),(function(e){return(0,s.pipe)(c.vM((function(){return t._ops._applyTransformJson({alerts:e.map((function(e){return{alert:e,alternative:p.bZ.getApplicableAlternative(e,0)}})),source:p.l$.api,method:p.bZ.State.Applied.Method.Bulk})})),i.mapLeft((function(e){return t._log.error("applyBulk error",e),e})),i.fold((function(){return u.T.of([],e.map((function(e){return e.id})))}),(function(){return u.T.of(e.map((function(e){return e.id})))})))})))},e.prototype.confirmApplied=function(e){return this._log.trace("commitApplied",e),(0,s.pipe)(e,u.T.fromArray((0,a.flow)(this._findAlert,i.map(p.Ev.castApplied))),i.bimap((function(e){return new Error("Error on trying to confirm applied alerts: "+e.rejected.join(","))}),this._ops._confirmApplied))},e.prototype.dismissBatch=function(e){var t=this;return this._log.trace("dismissBatch",e),(0,s.pipe)(e.map((0,a.flow)(this._findAlert,i.map((function(e){return[e]})))),(0,o.fold)(h),i.chain((function(e){return c.vM((function(){return t._ops._dismissBatch(e)}))})))},e.prototype.applyFeedback=function(e,t,n){var r=this;return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,s.pipe)(this._findAlert(e),i.chain((function(e){return c.vM((function(){r._ops._alertFeedback(e,t,n)}))})))},e.prototype.sendBatchFeedback=function(e,t,n){var r=this;return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,s.pipe)(e,u.T.fromArray(this._findAlert),u.T.tapFailure((function(e){return r._log.error("Cannot send batch feedback for alerts",e.rejected)})),u.T.foldSuccess((function(e){return c.vM((function(){r._ops._alertBatchFeedback(e,t,n)}))})))},e.prototype.takeReference=function(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,s.pipe)(this._findAlert(e.id),i.chain((function(e){return e.takeReference(t)})))},e.prototype.changeMuteState=function(e,t){var n=this;return this._log.trace("changeMuteState",e),(0,s.pipe)(e,u.T.fromArray((function(e){return n._findAlert(e.id)})),u.T.flatMap(r.uZ(),(function(e){return n._ops._changeMuteState(e,t)})))},e.prototype.changeUserInput=function(e,t){var n=this;return(0,s.pipe)(this._findAlert(e),i.chain((function(e){return n._ops._changeUserInput(e,t)})))},e}(),m=r.uZ(),h=(0,i.getApplyMonoid)(m)},44659:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(12738),i=n(51072),o=n(32952),a=function(){function e(t,n,i,o,a,s,l,c){var u=e.NamedChangesSink.factory(c),d={pm:u(e.Receiver.PM,a),dm:u(e.Receiver.PM,s),capi:u(e.Receiver.CAPI,o),dox:u(e.Receiver.DOX,i),userTextSilent:u(e.Receiver.UserText,e._duplexToSync(t,r.$.Mode.silent)),userTextEcho:u(e.Receiver.UserText,e._duplexToSync(t,r.$.Mode.echo))};e.Producer.create(e.Producer.UserText,{changes:t.changes})(d.dm,d.pm,d.capi,d.dox),e.Producer.create(e.Producer.ALERT_APPLY,l)(d.userTextEcho),e.Producer.create(e.Producer.DOX,i)(d.dm,d.pm,d.userTextSilent,d.capi),n.subscribe((function(e){"before_alert"===e.kind&&t.flushChanges()}))}return e.init=function(t,n,r,i,a,s,l){var c=new o.xQ;return new e(t,n,r,i,a,s,l,c),c},e._duplexToSync=function(e,t){return{pushChanges:function(n){e.pushChanges(n,t)}}},e}();!function(e){!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.changes.subscribe((function(t){n.forEach((function(n){return n.pushChanges(e,t)}))}))}}}(e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(e.Receiver||(e.Receiver={})),function(e){function t(e,t,n){return{pushChanges:function(r,o){try{var a=t.pushChanges(o);"function"==typeof a&&(a=i.Vi(a)),void 0!==a&&a.catch((function(t){return n.next({exception:t,details:{from:r,to:e}})}))}catch(t){n.next({exception:t,details:{from:r,to:e}})}}}}e.factory=function(e){return function(n,r){return t(n,r,e)}},e.create=t}(e.NamedChangesSink||(e.NamedChangesSink={}))}(a||(a={}))},52485:(e,t,n)=>{"use strict";n.d(t,{$:()=>P});var r,i,o=n(73805),a=n(49524),s=n(59312),l=n(65948),c=n(32952),u=n(95300),d=n(24209),p=n(76974),f=n(25656),m=n(18625),h=n(66310),g=n(50628),v=n(77176),y=n(2834),b=n(85985),w=n(95093),C=n(62962),_=n(95343),S=n(13444),x=n(25938),I=n(64450),A=n(83078),k=n(36991),E=n(64909),T=n(22232),R=n(65772),L=n(92932),M=n(12738),N=function(){function e(e){var t=this;this._primarySourceChangeProcessor=e,this._log=L.C8.Logging.getLogger("DuplexImpl",L.zW.LogLevel.DEBUG),this._maybePrimarySourceContent=E.none,this._secondarySourceContent=x.RI.unsafeRes(new I.i),this._syncFlash=new c.xQ,this._syncTimer=i.getImmediateTimer(),this.state=new u.X("idle"),this._changesToSecondarySource=new c.xQ,this._changesToSecondarySourceSync=new c.xQ,this.changesToPrimarySource=new c.xQ,this.changesToSecondarySource=this._changesToSecondarySource.pipe((0,h.w)((function(e){switch(e.kind){case"reset":return t._maybePrimarySourceContent=E.some(e.reset),d.T(t._syncTimer.timer,t._syncFlash).pipe((0,g.P)(),(0,v.U)((function(){var n=t._secondarySourceContent.delta.diff(e.reset.delta);return{fullText:e.reset,change:x.RI.delta(n,t._secondarySourceContent.length)}})));case"change":return t._syncTimer.reset(),p.of({fullText:e.fullText,change:e.change});default:return(0,T.vE)(e)}})),(0,y.b)((function(e){var n=e.fullText;"syncing"===t.state.getValue()&&(t._log.debug("Back to consistent state"),t.state.next("idle")),t._maybePrimarySourceContent=E.none,t._secondarySourceContent=n})),(0,v.U)((function(e){return e.change})),(0,b.h)((function(e){return e.delta.ops.length>0})),(0,w.T)(this._changesToSecondarySourceSync),(0,y.b)((function(){t._log.debug("Emit change to secondary source")})),(0,C.n)(),(0,_.x)())}return Object.defineProperty(e.prototype,"flush",{get:function(){return this._flush(),l.of(void 0)},enumerable:!1,configurable:!0}),e.prototype._flush=function(){this._syncFlash.next(void 0)},e.prototype.getSecondarySourceContents=function(){return this._secondarySourceContent},e.prototype.getPrimarySourceContents=function(){var e=this;return(0,o.pipe)(this._maybePrimarySourceContent,E.getOrElse((function(){return e._secondarySourceContent})))},e.prototype.pushChanges=function(e){switch(e.from){case"primary":return this._pushChangesFromPrimarySource(e.change);case"secondary":return this._pushChangesFromSecondarySource(e.change,e.mode);default:(0,T.vE)(e)}},e.prototype._pushChangesFromPrimarySource=function(e){var t=this;return this._log.debug("Got change from primary source"),(0,o.pipe)(this._primarySourceChangeProcessor(this._secondarySourceContent,this._maybePrimarySourceContent,e),R.map((function(e){"flush"===e.kind?(t._flush(),t._changesToSecondarySourceSync.next(x.RI.flush())):t._changesToSecondarySource.next(e)})))},e.prototype._pushChangesFromSecondarySource=function(e,t){var n=this;switch(this._log.debug("Got change from secondary source",{source:t}),e.kind){case"delta":return E.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=E.some(this._secondarySourceContent)),(0,o.pipe)(this._secondarySourceContent,(function(t){return e.prevLen===t.length?(0,o.pipe)(x.RI.res(t.delta.compose(e.delta)),R.fold((function(){return R.left(new Error("Got non-document delta after apply"))}),(function(t){return R.right([e,t])}))):R.left(new Error("Got delta for wrong text, document length: "+t.length+", got change for "+e.prevLen))}),R.fold((function(e){return n._changesToSecondarySourceSync.next(n._secondarySourceContent),R.left(e)}),(function(e){var r=e[0],i=e[1];return n._secondarySourceContent=i,t===M.$.Mode.echo&&n._changesToSecondarySourceSync.next(r),n.changesToPrimarySource.next(r),R.right(void 0)})));case"reset":return E.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=E.some(this._secondarySourceContent)),this._secondarySourceContent=e,"echo"===t&&this._changesToSecondarySourceSync.next(e),this.changesToPrimarySource.next(e),R.right(void 0);case"flush":return this.changesToPrimarySource.next(e),R.right(void 0);default:(0,T.vE)(e)}},e}();!function(e){var t;!function(e){e.reset=function(e){return R.right({kind:"reset",reset:e})},e.change=function(e){return R.right((0,s.__assign)({kind:"change"},e))},e.error=function(e){return R.left(new Error(e))}}(t||(t={})),e.deltaChangeProcessor=function(e,n,r){if(x.RI.isFlush(r))return R.right(r);if(0===e.length)return x.RI.isReset(r)?t.change({fullText:r,change:r}):0===r.prevLen?(0,o.pipe)(x.RI.res(r.delta),R.fold((function(){return t.error("Cannot apply non-document delta to an empty text")}),(function(e){return t.change({fullText:e,change:r})}))):t.error("Cannot apply delta to text. Expected change for len 0, but got "+r.prevLen);if(E.isNone(n))return x.RI.isDelta(r)&&e.length!==r.prevLen?t.error("Cannot apply delta for wrong text length, expected "+e.length+", but got "+r.prevLen):(0,o.pipe)(x.RI.res(e.delta.compose(r.delta)),R.fold((function(){return t.error("Cannot apply invalid delta")}),(function(e){return t.change({fullText:e,change:r})})));if(x.RI.isDelta(r)&&A.MH(n).length!==r.prevLen)return t.error("Cannot apply delta for wrong text length");var i=x.RI.isReset(r)?r.delta:A.MH(n).delta.compose(r.delta);return k.s.deltaEq.equals(i,e.delta)?t.change({fullText:e,change:x.RI.delta(new I.i,e.length)}):(0,o.pipe)(x.RI.res(i),R.fold((function(){return t.error("Cannot apply invalid delta")}),t.reset))},e.fullTextProcessor=function(e,n,r){var i=x.RI.unsafeRes((new I.i).insert(r));if(0===e.length)return t.change({fullText:i,change:i});if(E.isNone(n)){var o=e.delta.diff(i.delta);return t.change({fullText:i,change:x.RI.delta(o,e.length+k.s.calcDiffLength(o))})}return k.s.deltaEq.equals(i.delta,e.delta)?t.change({fullText:i,change:x.RI.delta(new I.i,e.length)}):t.reset(i)}}(r||(r={})),function(e){e.getImmediateTimer=function(){return{timer:p.of(void 0),reset:f.Z}},e.getAuditTimer=function(e){var t=E.none;return{timer:m.P((function(){var n=(0,o.pipe)(t,E.fold((function(){return e}),(function(t){var n=Date.now()-t;return n>e?0:n})));return t=(0,o.pipe)(t,A.vx(E.some(Date.now()))),p.of(void 0).pipe((0,S.g)(n),(0,y.b)((function(){t=E.none})))})),reset:function(){return t=E.none}}}}(i||(i={}));var P,F=n(95574),O=n(8125),B=n(44659);!function(e){e.connectAsPrimarySourceToDuplex=function(e){var t=new c.xQ,n=L.C8.Logging.getLogger("DenaliEditorToDuplexConnector",L.zW.LogLevel.DEBUG),i=new N(r.deltaChangeProcessor),s=B.R.NamedChangesSink.factory(t),l=B.R.Producer.create(B.R.Producer.UserText,{changes:i.changesToPrimarySource})(s(B.R.Receiver.DEd,{pushChanges:function(t){e.pushChanges(t,"user")}})),u=B.R.Producer.create(B.R.Producer.DEd,e)(s(B.R.Receiver.UserText,{pushChanges:function(t){var r=i.pushChanges({from:"primary",change:t});(0,o.pipe)(r,F.L9((function(r){return n.error("Cannot pass invalid change from master",r,t),i.pushChanges({from:"primary",change:e.getContents()})})),R.fold((function(e){n.fatal("Cannot reset duplex with full context",e)}),a.y))}}));return{duplex:i,fails:t,dispose:function(){l.unsubscribe(),u.unsubscribe()}}},e.duplexAsUserSource=function(e){return{changes:e.changesToSecondarySource,pushChanges:function(t,n){return e.pushChanges({from:"secondary",change:t,mode:n})},flushChanges:O.ZT,getContents:function(){return e.getSecondarySourceContents()}}},e.connectAsPrimarySourceWithoutDuplex=function(e){return{changes:e.changes,pushChanges:function(t,n){e.pushChanges(t,n===M.$.Mode.echo?"user":"api")},getContents:function(){return e.getContents()},flushChanges:function(){return e.flushChanges()}}}}(P||(P={}))},99516:(e,t,n)=>{"use strict";n.d(t,{n:()=>r,A:()=>i});var r,i,o=n(45980),a=n(25938),s=n(36991),l=n(8125),c=n(97523),u=n(24209),d=n(99391);!function(e){e.noopSync={pushChanges:l.ZT},e.ignoreResult=function(e){return{pushChanges:function(t){e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,o.flow)(e.pushChanges,c.map(l.ZT))}},e.pushDeleteThenInsert=function(e){return{pushChanges:function(t){(a.RI.isDelta(t)?a.RI.fromArrayOfDeltas(s.s.splitToDeleteThenInsert(t.delta).filter(s.s.nonEmpty),t.prevLen):[t]).forEach((function(t){return e.pushChanges(t)}))}}}}(r||(r={})),function(e){e.merge=function(e){return{changes:u.T.apply(d,e.map((function(e){return e.changes})))}}}(i||(i={}))},66654:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r,i,o=n(45980),a=n(73805),s=n(68983),l=n(92843),c=n(64909),u=n(64510),d=n(10002),p=n(76220),f=n(44827);!function(e){e.modelToCounters=function(e){return f.h.isRegistered(e)?e.counters:p.R.empty}}(r||(r={})),function(e){e.monoid=u.uZ(d.R.Id.ord,d.R.Meta.group),e.eq=u.Eh(d.R.Id.ord,d.R.Meta.eq),e.isEmpty=u.xb,e.lookup=(0,s.W)(u.P5(d.R.Id.ord)),e.applyDiff=function(t){return function(r){return function(c){return(0,a.pipe)(r,l.v.foldMap(e.monoid)(i(t),p(t),n(t)),(0,s.W)(e.monoid.concat)(c),u.hX((0,o.not)(d.R.Meta.isEmpty)))}}},e.updatePercentiles=function(e){return function(t){var n=t;return e.forEach((function(e,t){n=(0,a.pipe)(n,u.cq(d.R.Id.ord)(t,d.R.Meta.ratioToPercentile(e)),c.fold((function(){return(0,a.pipe)(n,u.ZQ(d.R.Id.ord)(t,d.R.Meta.fromPercentile(e)))}),o.identity))})),n}};var t=(0,o.flow)(r.modelToCounters,d.R.Meta.fromAlertCounters),n=function(e){return function(n){return f(e)(n,t)}},i=function(e){return function(n){return f(e)(n,(0,o.flow)(t,d.R.Meta.group.inverse))}},p=function(t){return function(r,o){return e.monoid.concat(n(t)(o),i(t)(r))}},f=function(e){return function(t,n){return(0,a.pipe)(e,u.hX((function(e){return e(t.alert)})),u.UI((function(){return n(t)})))}}}(i||(i={}))},926:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r,i=n(59312),o=n(42726),a=n(76779),s=n(73343),l=n(93508),c=n(57091),u=n(67434),d=n(52479),p=n(66654);!function(e){e.defaultState={alerts:a.p.empty,lenses:p.w.monoid.empty},e.get=function(r,i,o){return i.pipe(l.O(new Map),c.a(r.pipe(l.O(a.p.empty),u.R((function(e,n){return t(n,o.lensFilters)(e)}),e.defaultState)),n))},e.getMock=function(t,n){var r=o.hg.create(e.defaultState);return e.get(t,n,s.t.create(s.t.defaultLensFilters,s.t.defaultTextFilters)).subscribe(d.wW(r)),r};var t=function(e,t){return function(n){var r=a.p.Diff.toRegistered(a.p.diff(n.alerts,e));return{alerts:e,lenses:p.w.applyDiff(t)(r)(n.lenses)}}},n=function(e,t){return(0,i.__assign)((0,i.__assign)({},t),{lenses:p.w.updatePercentiles(e)(t.lenses)})}}(r||(r={}))},38365:(e,t,n)=>{"use strict";n.d(t,{dM:()=>r,j:()=>i});var r,i,o,a,s=n(42654),l=n(76606),c=n(73805),u=n(42726),d=n(57588),p=n(48837),f=n(64909),m=n(83078);!function(e){e.group=p.kT({critical:p.Kh,advanced:p.Kh,free:p.Kh,paid:p.Kh,criticalPriority:p.Kh,advancedPriority:p.Kh,freePriority:p.Kh,paidPriority:p.Kh,unread:p.Kh,muted:p.Kh}),e.eq=s.getStructEq({critical:s.eqNumber,advanced:s.eqNumber,free:s.eqNumber,paid:s.eqNumber,unread:s.eqNumber,criticalPriority:s.eqNumber,advancedPriority:s.eqNumber,freePriority:s.eqNumber,paidPriority:s.eqNumber,muted:s.eqNumber}),e.show=l.aM({critical:l.yt,advanced:l.yt,free:l.yt,paid:l.yt,criticalPriority:l.yt,advancedPriority:l.yt,freePriority:l.yt,paidPriority:l.yt,unread:l.yt,muted:l.yt}),e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(t){return e.eq.equals(t,e.group.empty)}}(r||(r={})),function(e){e.MIN_GOALS=3,e.TOTAL_GOALS=e.MIN_GOALS+2,e.calculateCompleteness=function(t){var n=(0,c.pipe)(t.goals,f.exists((function(e){return e.size>0}))),r=(0,c.pipe)(t.emotions,f.exists((function(e){return e.size>0})));return d.R$.equals(t,d.R$.unset)||(0,c.pipe)(t.domain,m.wo((function(e){return"general"===e})))&&!(f.isSome(t.audience)||f.isSome(t.style)||n||r)?0:Number(n||0)+Number(r||0)+e.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(o||(o={})),function(e){!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(e.CheckingKind||(e.CheckingKind={})),e.Mock={getCheckingForState:function(){return u.hg.create({kind:e.CheckingKind.Document,type:"idle"})}}}(a||(a={}))},82578:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r,i,o=n(42726),a=n(57588),s=n(64909);!function(e){e.unwrap=function(e){return o.Ri.create(s.getOrElse((function(){return e})),s.some)}}(r||(r={})),function(e){e.create=function(e,t,n,i){var l=r.unwrap(t.style),c=r.unwrap(t.audience),u=r.unwrap(t.domain),d=o.hg.create(e),p=d.lens("style").lens(l),f=d.lens("domain").lens(u),m={audience:{items:a.R$.audiences,current:d.lens("audience").lens(c),default:s.some(t.audience)},formality:{items:a.R$.formalityLevels,current:p,default:s.some(t.style),shouldDisable:function(e){return f.view((function(t){return!!t&&!a.R$.isStyleValidWithDomain(t,e)}))}},domain:{items:a.R$.domains,current:f,default:s.some(t.domain),shouldDisable:function(e){return p.view((function(t){return n.isFree?"general"!==e:!a.R$.isStyleValidWithDomain(e,t)}))}},intent:{items:a.R$.goals,current:d.lens("goals")},tone:{items:a.R$.tone,current:d.lens("emotions")}};return{localContext:d,blocks:m,showSetGoalsLoader:o.hg.create(!n.demoMode&&i)}}}(i||(i={}))},81766:(e,t,n)=>{"use strict";n.d(t,{_F:()=>v});var r=n(22788),i=n(45980),o=n(73805),a=n(64909),s=n(22232),l=n(45442),c=n(23124),u=n(40644),d=n(38524),p=n(77176),f=n(28043),m=n(2844),h=n(93508),g=n(57091),v=function(e,t,n,r,i){return l.Z.composeKnot({content:y(e,t,i),root:b(t,n,r)})},y=function(e,t,n){var r=t.view(d.nL.Prism.cards),o=t.pipe(p.U((function(e){return e.itemsOrd}))),m=t.pipe(p.U((0,i.flow)(d.In.getActiveItem,a.map(u.X.getId)),f.x())),h=t.view("activeAlertsCount").view((function(e){return 0===e}));return l.Z.fromSideEffect((function(t){switch(t.action.action.action.kind){case c.H.ActionKind.changePosition:e.changePosition.next({cardId:t.key,height:t.action.action.action.height});break;case c.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key);break;default:(0,s.L0)(t.action.action.action)}}),w(r,o,m,h,n))},b=function(e,t,n){return l.Z.fromSideEffect((function(e){t.next(e.element)}),m.aj(n,e.view("cardsHeight")).pipe(p.U((function(e){return{disableUserActions:e[0],height:e[1]}})),h.O({disableUserActions:!1,height:0})))},w=function(e,t,n,r,i){return e.pipe(g.a(n,r,t),p.U((function(e){var t=e[0],n=e[1],r=e[2],s=e[3],l=t.getAt(0);return t.filter((function(e){return e.positionState.visible||e.positionState.watched&&function(e,t){return!!(0,o.pipe)(t,a.exists((function(t){return t.id===e.id})))||(0,o.pipe)(t,a.exists((function(e){return e.positionState.isHeightValid})))}(e,l)})).map((function(e){return function(e,t,n,r,i){var s=(0,o.pipe)(t,a.exists((function(t){return t===e.id}))),l=function(t){return e.equals(t.cell.item.view)},u=function(t){return r.compare(e,t.cell.item.view)};return{cell:{item:i({isLastCard:n})(e),root:{height:{value:e.positionState.height,watched:e.positionState.watched&&!e.scheduledToDispose,isValid:e.positionState.isHeightValid},position:{top:e.positionState.absTop,animationInProgress:e.positionState.animationInProgress},layer:s||e.visualState.incomplete&&!(0,o.pipe)(e.visualState.from,a.exists((function(e){return"focused"===e})))?c.H.Layer.front:c.H.Layer.back}},root:e.id,hashCode:e.hashCode.bind(e),equals:l,compare:u}}(e,n,r,s,i)}),C(s).compare)})))},C=(0,r.contramap)((function(e){return e.cell.item.view}))},35439:(e,t,n)=>{"use strict";n.d(t,{A:()=>yc});var r,i,o,a,s,l,c,u,d,p,f,m=n(59312),h=n(27378),g=n(42726),v=n(8125),y=n(64909),b=n(51465),w=n(22823),C=n(40644),_=n(45980),S=n(73805),x=n(92932),I=n(28043),A=n(77176),k=n(73313),E=n(66910),T=n(13097),R=n(64437),L=w.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),M=w.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),N=w.u.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),P=w.u.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),F=w.u.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),O=w.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),B=w.u.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),D=w.u.keyframes({"0%, 100%":{opacity:0}}),W=w.u.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),U=w.u.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),H=w.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),z=w.u.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),X=w.u.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),G=w.u.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),V={position:"relative",margin:w.u.rem(.5)+" "+w.u.rem(2)+" "+w.u.rem(.5)+" 0",userSelect:"none"},Y={position:"absolute",width:w.u.percent(100),pointerEvents:"none"},q={opacity:0,animation:L+" "+w.u.seconds(T.v4/4/1e3)+" "+"linear "+w.u.seconds(T.v4/1e3)+" forwards"},$={transformOrigin:"top",animation:M+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},Z={transformOrigin:"bottom",animation:N+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},j={transformOrigin:"top",willChange:"contents"},J={animation:P+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},K={animation:F+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},Q={animation:O+" "+w.u.seconds(T.v4/1e3)+" "+"linear reverse forwards"},ee={animation:O+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},te={animation:B+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},ne={animation:B+" "+w.u.seconds(T.v4/1e3)+" "+"linear reverse forwards"},re={transformOrigin:"top",animation:W+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",willChange:"contents",$nest:(r={},r["& ."+R.g.successWrapperSelector+" > *"]={animation:U+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},r)},ie={position:"absolute",width:w.u.percent(100),transformOrigin:"top",animation:H+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",pointerEvents:"none",$nest:(i={},i["& ."+R.g.fullCardSelector+" > :not(."+R.g.alignButtonHiddenSelector+")"]={animation:z+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},i["& ."+R.g.fullCardSelector+" > ."+R.g.alignButtonHiddenSelector]={animation:D+" "+w.u.seconds(T.v4/1e3)+" "+"linear none"},i["& ."+R.g.fullCardSelector]={transform:"translateY("+w.u.rem(-1)+")"},i)},oe={transformOrigin:"top",animation:X+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",willChange:"contents",$nest:(o={},o["& ."+R.g.fullCardSelector+" > :not(."+R.g.alignButtonHiddenSelector+")"]={animation:G+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},o["& ."+R.g.fullCardSelector+" > ."+R.g.alignButtonHiddenSelector]={animation:D+" "+w.u.seconds(T.v4/1e3)+" "+"linear none"},o)},ae=w.u.stylesheet({wrapper:[V],animationWrapper:[{position:"relative"}],shade:[Y],focused2renderedMain:[q],focused2renderedShade:[Y,$],focused2renderedShadeClockwise:[Y,Z],rendered2focusedMainBase:[j],rendered2focusedMain:[j,J],rendered2focusedMainClockwise:[j,K],addedMain:[Q],rendered2removedShade:[Y,ee],openedMain:[te],closedMain:[ne],focused2successMain:[re],focused2successShade:[ie],success2FocusedMain:[oe]}),se=new Map([[M,ae.focused2renderedShade],[N,ae.focused2renderedShadeClockwise],[O,ae.rendered2removedShade],[H,ae.focused2successShade]]),le=w.u.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),ce=w.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),ue=w.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),de=w.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),pe=w.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),fe=w.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),me=w.u.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),he=w.u.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),ge=w.u.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),ve=w.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),ye=w.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),be={opacity:0,animation:le+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},we={transformOrigin:"top",animation:M+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(a={},a["& ."+R.g.bundleInnerContainerSelector]={animation:ce+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(s={},s["& ."+R.g.bundleFakeCard1Selector]={animation:ue+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},s["& ."+R.g.bundleFakeCard2Selector]={animation:de+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},s)},a)},Ce={transformOrigin:"top",animation:pe+" "+w.u.seconds(T.v4/1500)+" "+"linear forwards",$nest:(l={},l["& ."+R.g.bundleInnerContainerSelector]={animation:ce+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(c={},c["& ."+R.g.bundleFakeCard1Selector]={animation:ue+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},c["& ."+R.g.bundleFakeCard2Selector]={animation:de+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},c)},l)},_e={animation:fe+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(u={},u["& ."+R.g.bundleInnerContainerSelector]={animation:me+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(d={},d["& ."+R.g.bundleFakeCard1Selector]={animation:he+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},d["& ."+R.g.bundleFakeCard2Selector]={animation:ge+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},d)},u)},Se={animation:ve+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(p={},p["& ."+R.g.bundleInnerContainerSelector]={animation:me+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards",$nest:(f={},f["& ."+R.g.bundleFakeCard1Selector]={animation:he+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},f["& ."+R.g.bundleFakeCard2Selector]={animation:ge+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},f)},p)},xe={animation:ye+" "+w.u.seconds(T.v4/1e3)+" "+"linear forwards"},Ie=w.u.stylesheet({focused2renderedBundleMain:[be],focused2renderedBundleShade:[Y,we],focused2renderedBundleShadeClockwise:[Y,Ce],rendered2focusedBundleMain:[j,_e],rendered2focusedBundleMainClockwise:[j,Se],rendered2focusedBundleShade:[Y,xe]}),Ae=new Map([[M,Ie.focused2renderedBundleShade],[pe,Ie.focused2renderedBundleShadeClockwise],[ye,Ie.rendered2focusedBundleShade]]);function ke(e){var t=e.from,n=e.transition;if(!e.incomplete)return{};var r=Re("transitionClassMapper");return(0,S.pipe)(t,y.map((function(e){switch(e){case"added":case"rendered":switch(n.type){case"added":return r.error("Impossible transition: "+e+" -> "+n.type),{main:ae.addedMain};case"focused":return{main:n.clockwise?ae.rendered2focusedMainClockwise:ae.rendered2focusedMain};case"removed":return{shade:ae.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(n.type){case"rendered":return{main:ae.focused2renderedMain,shade:n.clockwise?ae.focused2renderedShadeClockwise:ae.focused2renderedShade};case"removed":return{main:"",shade:n.clockwise?ae.focused2renderedShadeClockwise:ae.focused2renderedShade};default:return{}}case"success":switch(n.type){case"removed":return{main:"",shade:n.clockwise?ae.focused2renderedShadeClockwise:ae.focused2renderedShade};case"focused":return{main:ae.success2FocusedMain};default:return{}}case"presuccess":switch(n.type){case"success":return{main:ae.focused2successMain,shade:ae.focused2successShade};default:return{}}case"removed":switch(n.type){case"added":return r.error("Impossible transition: "+e+" -> "+n.type),{main:ae.addedMain};default:return{}}default:return{}}})),y.getOrElse((function(){switch(n.type){case"added":return{main:ae.addedMain};case"focused":return{main:ae.openedMain};default:return{}}})))}var Ee,Te,Re=(0,v.HP)(x.C8.Logging.getLogger),Le=function(e){var t=e.children;return h.createElement(g.F.div,{role:"animation-wrapper",className:ae.animationWrapper},t)},Me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._elementState=k.f.emptyWithName("card"),t}return(0,m.__extends)(t,e),t.prototype._stateToElement=function(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;default:return null}},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.card;e.actions.next({type:E.l.Type.completeTransitionTo,cardId:t.id,transitionId:t.visualState.transitionId})},t.prototype.render=function(){var e=this,t=this.props,n=t.actions,r=t.card;if(!r.visualState.incomplete)return h.createElement(Le,null,h.createElement("div",{key:r.visualState.transition.type},this._stateToElement(r.visualState.transition.type)));var i=C.X.isBundle(r)?function(e){var t=e.from,n=e.transition;return e.incomplete?(0,S.pipe)(t,y.map((function(e){switch(e){case"added":case"rendered":switch(n.type){case"added":return Re("bundleTransitionClassMapper").error("Impossible transition: "+e+" -> "+n.type),{main:ae.addedMain};case"focused":return{main:n.clockwise?Ie.rendered2focusedBundleMainClockwise:Ie.rendered2focusedBundleMain,shade:Ie.rendered2focusedBundleShade};case"removed":return{shade:ae.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(n.type){case"rendered":return{main:Ie.focused2renderedBundleMain,shade:n.clockwise?Ie.focused2renderedBundleShadeClockwise:Ie.focused2renderedBundleShade};case"removed":return{main:"",shade:n.clockwise?ae.focused2renderedShadeClockwise:ae.focused2renderedShade};default:return{}}case"success":switch(n.type){case"removed":return{main:"",shade:n.clockwise?ae.focused2renderedShadeClockwise:ae.focused2renderedShade};case"focused":return{main:ae.success2FocusedMain};default:return{}}case"presuccess":switch(n.type){case"success":return{main:ae.focused2successMain,shade:ae.focused2successShade};default:return{}}case"removed":switch(n.type){case"added":return Re("bundleTransitionClassMapper").error("Impossible transition: "+e+" -> "+n.type),{main:ae.addedMain};default:return{}}default:return{}}})),y.getOrElse((function(){switch(n.type){case"added":return{main:ae.addedMain};case"focused":return{main:ae.openedMain};default:return{}}}))):{}}(r.visualState):ke(r.visualState),o=i.main,a=i.shade,s=g.hg.create(void 0===a?y.none:(0,S.pipe)(r.visualState.from,y.map((function(e){return{state:e,className:a}}))));return!o&&y.isNone(s.get())&&requestAnimationFrame((function(){return n.next({type:E.l.Type.completeTransitionTo,cardId:r.id,transitionId:r.visualState.transitionId})})),h.createElement(k.f.Context.Provider,{value:this._elementState},h.createElement(Le,null,s.view((0,_.flow)(y.map((function(t){var i=t.state,o=t.className;return h.createElement("div",{className:o,key:"shade"+i+r.activeAlert.id,onAnimationEnd:function(e){Ae.get(e.animationName)!==o&&se.get(e.animationName)!==o||(n.next({type:E.l.Type.completeTransitionTo,cardId:r.id,transitionId:r.visualState.transitionId}),requestAnimationFrame((function(){return s.set(y.none)})))}},e._stateToElement(i))})),y.toUndefined)),h.createElement("div",{className:o,key:"expanded"===r.visualState.transition.type?"focused":r.visualState.transition.type,onAnimationEnd:function(){return n.next({type:E.l.Type.completeTransitionTo,cardId:r.id,transitionId:r.visualState.transitionId})},onTransitionEnd:function(){"presuccess"===r.visualState.transition.type&&n.next({type:E.l.Type.startTransitionTo,cardId:r.id,transition:{type:"success",clockwise:r.visualState.transition.clockwise}})}},this._stateToElement(r.visualState.transition.type))))},t}(h.Component),Ne=n(90351),Pe=n(71031),Fe=n(41439),Oe=n(45836),Be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._createCardToggler=function(e){return function(){return t.props.actions.next({type:E.l.Type.hover,kind:e,cardId:t.props.cardId})}},t}return(0,m.__extends)(t,e),t.prototype.componentWillUnmount=function(){this._createCardToggler("unhover")()},t.prototype.render=function(){var e=this.props,t=e.getActiveAlert,n=e.cardId,r=e.actions,i=e.children,o=e.counter,a=e.className;return h.createElement(g.F.div,(0,m.__assign)({"data-aid":n,onClick:function(e){var n=t();r.next({type:E.l.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:n},clickPoint:{x:e.clientX,y:e.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,g.Sh)(a,$e.wrapper,$e.miniCard)),h.createElement(Oe.XY,{className:$e.contentWrapper},i),h.createElement("div",{className:$e.iconContainer},o&&h.createElement("div",{className:We},o),h.createElement("div",{className:He},h.createElement(Fe.JO.Arrow,{className:$e.activeTopIcon}),h.createElement(Fe.JO.Arrow,{className:$e.activeBottomIcon})),this.props.bulkAcceptable&&h.createElement(Fe.JO.Sparkles,{width:20})))},t}(h.Component),De="baseMiniCounterContainer",We=w.u.joinClasses([De,w.u.style({position:"absolute",height:w.u.percent(100),top:0,right:0,zIndex:T.VN,margin:"auto 0",background:Ne.Il.CoreNeutral0,opacity:1})]),Ue="baseMiniActivateBtnSelector",He=w.u.joinClasses([Ue,w.u.style({position:"absolute",top:0,right:0,height:w.u.percent(100),zIndex:T.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:Ne.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),ze={position:"relative",display:"flex",overflow:"hidden",borderRadius:w.u.rem(T.fx),background:Ne.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:(Ee={"&:hover":{background:Ne.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:w.u.seconds(.2)}},Ee["&:hover ."+Ue]={opacity:1},Ee["&:hover .baseMiniCounterContainer"]={opacity:0},Ee)},Xe={overflow:"hidden",margin:"0 "+w.u.rem(3)+" 0 "+w.u.rem(2),color:Pe.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:w.u.rem(1.5)},Ge={position:"absolute",top:0,right:w.u.rem(.5),bottom:0,display:"flex"},Ve={display:"flex",margin:w.u.rem(.1)+" 0 "+w.u.rem(-1.25),transform:"rotate(180deg)"},Ye={$nest:{"&:before":{position:"absolute",width:w.u.px(10),height:w.u.px(10),borderRadius:w.u.percent(50),content:"''",transform:"scale(.5)"}}},qe={$nest:{"&:before":{margin:"auto 0 auto "+w.u.rem(.75)}}},$e=w.u.stylesheet({wrapper:[ze],contentWrapper:[Xe],iconContainer:[Ge],activeTopIcon:[Ve],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[Ye],miniCard:[Ye,qe]}),Ze=n(79844),je=n(39499),Je=n(57091);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(Te||(Te={}));var Ke,Qe,et,tt=function(e){var t=e.actions,n=e.isLastCard,r=h.useContext(Ze.m.Context).successLens.fixedText.titles,i=g.hg.create(Te.stage0),o=function(){return t.next({type:E.l.Type.switchToNext})};return h.createElement(g.F.div,{className:ct.successWrapper},h.createElement(Oe.P1,{className:ct.successText,onAnimationEnd:function(){i.set(Te.stage1)}},r[(0,v.TN)(r.length)]),h.createElement(g.F.span,null,i.view((function(e){return e>=Te.stage1&&h.createElement("span",{onAnimationEnd:function(){return i.set(Te.stage2)}},h.createElement(Fe.JO.CheckmarkAnimated,{className:ct.successCheckMark}))}))),h.createElement(g.F.span,{className:ct.successBtnHolder},n.pipe(Je.a(i,(function(e,t){return t<Te.stage2?null:e?h.createElement(je.zx.Caps,{className:ct.doneBtn,name:"done",key:"done-btn",onClick:o},"Done"):h.createElement(je.zx.Caps,{className:ct.successBtn,name:"next",key:"next-card",onClick:o},"Next")})))))},nt=w.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),rt={fontWeight:"bold",lineHeight:w.u.rem(2),animation:nt+" "+w.u.seconds(.2)+" linear forwards"},it={position:"relative",borderRadius:w.u.rem(T.Jr),background:Ne.Il.CoreNeutral0,boxShadow:"0 "+w.u.rem(.625)+" "+w.u.rem(T.mJ)+" 0 rgba(198, 203, 222, .45)"},ot={display:"flex",padding:w.u.rem(1.5)+" "+w.u.rem(2),alignItems:"center"},at={marginLeft:w.u.rem(1),minWidth:0,minHeight:0,width:w.u.rem(1.325),height:w.u.rem(1.325),animation:nt+" "+w.u.seconds(.2)+" linear forwards"},st={float:"right",width:w.u.rem(4),textAlign:"center",animation:nt+" "+w.u.seconds(.2)+" linear forwards"},lt={backgroundColor:Ne.Il.CoreGreen50,color:Ne.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:Pe.mb}}},ct=(0,m.__assign)((0,m.__assign)({},w.u.stylesheet({successText:[rt],successCheckMark:[at],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[st],doneBtn:[st,lt]})),{fullCard:w.u.joinClasses([R.g.fullCardSelector,w.u.style(it)]),successWrapper:w.u.joinClasses([R.g.successWrapperSelector,w.u.style(it,ot)])});!function(e){e.Mini=Be,e.Card=Me,e.Success=tt}(Ke||(Ke={})),function(e){e.Item=function(e){var t=e.className,n=e.children,r=e.onChange,i=e.checked,o=e.tabIndex,a=e.id;return h.createElement(g.F.label,(0,m.__assign)({},(0,g.Sh)(vt.radio,t)),i.view((function(e){return h.createElement(h.Fragment,{key:"radio-"+a},h.createElement("input",{onChange:r,tabIndex:o||-1,type:"radio",checked:e,className:vt.radioInputHidden}),h.createElement("span",{className:ht}))})),n)},e.Group=function(t){var n=t.items,r=t.selectedItemIndex,i=t.itemWrapperClassName,o=t.onChange;return h.createElement(g.F.Fragment,null,n.map((function(t,n){return h.createElement(e.Item,{id:n,key:n,onChange:function(){r.set(n),o&&o(n)},checked:r.view((function(e){return n===e})),className:i},t)})))}}(et||(et={}));var ut,dt,pt,ft,mt="radioInput",ht=w.u.joinClasses([mt,w.u.style({display:"inline-block",boxSizing:"border-box",minWidth:w.u.rem(1),width:w.u.rem(1),height:w.u.rem(1),border:w.u.rem(.125)+" solid "+Pe.FW,borderRadius:w.u.percent(50),backgroundColor:Ne.Il.CoreNeutral0,content:"' '"})]),gt={outline:"none",appearance:"none",$nest:(Qe={},Qe["&:checked + .radioInput"]={border:w.u.rem(.25)+" solid "+Ne.Il.CoreBlue50},Qe)},vt=w.u.stylesheet({radioInputHidden:[gt],radio:[{display:"inline-flex",cursor:"default",alignItems:"center"}]}),yt=n(18244),bt=function(e){var t=ke(e.visualState).shade;h.useEffect((function(){t||e.onFocus()}),[]);var n=e.theme||{};return h.createElement(g.F.div,{className:n.container},e.header,h.createElement(g.F.div,{className:n.innerContainer},h.createElement(g.F.div,(0,m.__assign)({},(0,g.Sh)(Tt.wrapper,n.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),h.createElement(g.F.div,(0,m.__assign)({},(0,g.Sh)(Tt.grid,n.content)),h.createElement("div",{className:Tt.mainContent},e.body),h.createElement("div",{className:Tt.footerContent},e.footer),h.createElement("div",{className:Tt.actions},e.subActions,h.createElement("div",{className:Tt.spacerOne}),e.navigation,h.createElement("div",{className:Tt.spacerFloat}),e.mainActions))),e.extra))},wt="& > * + *",Ct=.75,_t={position:"relative"},St={padding:w.u.rem(1)+" "+w.u.rem(.5)+" "+w.u.rem(Ct)+" "+w.u.rem(1)},xt={padding:"0 "+w.u.rem(.5)+" 0 "+w.u.rem(1),$nest:(ut={},ut[wt]={marginTop:w.u.rem(Ct)},ut)},It={padding:"0 "+w.u.rem(.5)+" 0 "+w.u.rem(1),$nest:(dt={},dt[wt]={marginTop:w.u.rem(Ct)},dt)},At={display:"flex",marginLeft:w.u.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},kt={width:w.u.rem(1),flexShrink:1},Et={$nest:(pt={},pt[wt]={marginTop:w.u.rem(Ct)},pt)},Tt=(0,m.__assign)((0,m.__assign)({},w.u.stylesheet({mainContent:[xt],footerContent:[It],actions:[At],spacerOne:[kt],spacerFloat:[{flex:1}],grid:[Et]})),{fullCard:w.u.joinClasses([R.g.fullCardSelector,w.u.style(_t)]),wrapper:w.u.joinClasses([R.g.fullCardSelector,w.u.style(_t,St)])}),Rt=n(6322),Lt=n(84966),Mt=n(83078),Nt=n(18208),Pt=n(94503),Ft=n(17753),Ot=n(41199),Bt=n(50536);!function(e){var t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){return!(e===t.Step2||e===t.Step3||e===t.Step5||e===t.Step6||e===t.Step7)}}(ft||(ft={}));var Dt,Wt=n(83305);!function(e){e.Regular=function(e){return h.createElement("span",(0,m.__assign)({},(0,g.Sh)(Gt.badge,e.className)),e.children)},e.New=function(t){var n=t.className;return h.createElement(e.Regular,{className:n},"New")},e.NewWrapper=function(t){var n=t.children;return h.createElement("div",null,h.createElement(e.New,null),n)},e.Premium=function(t){var n=t.className;return h.createElement(e.Regular,(0,m.__assign)({},(0,g.Sh)(Gt.premiumBadge,n)),h.createElement(Fe.JO.PaidLink,{className:Gt.premiumBadgeIcon,width:12}),"PREMIUM")},e.Business=function(t){var n=t.className;return h.createElement(e.Regular,(0,m.__assign)({},(0,g.Sh)(n)),"BUSINESS")}}(Dt||(Dt={}));var Ut={display:"inline-block",padding:w.u.rem(Ne.Zh.BadgeY)+" "+w.u.rem(Ne.Zh.BadgeX),height:w.u.rem(Ne.L3.Badge),borderRadius:w.u.rem(T.mA),background:Ne.Il.CoreGreen10,color:Ne.Il.CoreGreen70,verticalAlign:"middle",textAlign:"center",textTransform:Ne._5.Badge,letterSpacing:Ne.LK.Badge,fontWeight:Ne.U9.Badge,fontSize:w.u.rem(Ne.Bf.Badge),lineHeight:w.u.rem(Ne.L3.Badge)},Ht={marginRight:Ne.Zh.BadgeX,maxWidth:w.u.rem(Ne.L3.Badge),maxHeight:w.u.rem(Ne.L3.Badge),minWidth:w.u.rem(Ne.L3.Badge),minHeight:w.u.rem(Ne.L3.Badge),verticalAlign:"top"},zt={background:Ne.Il.CoreYellow20,color:Ne.Il.CoreYellow80},Xt={fill:Ne.Il.CoreYellow80},Gt=w.u.stylesheet({badge:[Ut],badgeIcon:[Ht],premiumBadge:[Ut,zt],premiumBadgeIcon:[Ht,Xt]}),Vt=n(58199),Yt=n(52479),qt=n(99391),$t=n(76974),Zt=n(2844),jt=n(93508),Jt=n(66310);function Kt(e){var t=e.value,n=e.initValue,r=void 0===n?Vt.g.MIN:n,i=e.wrapperClass,o=e.progressClass,a=e.isLoading,s=void 0===a?$t.of(!1):a,l=Qt(t,r);return h.createElement(g.F.div,(0,m.__assign)({},(0,g.Sh)(dn.wrapper,i)),h.createElement(en,{width:l,progressClass:o,isLoading:s}))}function Qt(e,t){void 0===t&&(t=Vt.g.MIN);var n=g.hg.create(!1);return requestAnimationFrame((function(){return requestAnimationFrame((function(){return n.set(!0)}))})),Zt.aj(Yt.Dx(e),n,(function(e,n){return n?e:t}))}function en(e){var t=e.width,n=e.progressClass,r=e.isLoading,i=t.pipe(A.U((function(e){return e+"%"}))),o=t.pipe(A.U(Vt.g.prism.reverseGet),A.U((function(e){return e>0?e+.75+"%":0})),jt.O(0)),a=r.pipe(Jt.w((function(e){return e?i:"0"}))),s=t.pipe(A.U(Vt.g.isMin),qt.shareReplay({bufferSize:1,refCount:!0}));return h.createElement(h.Fragment,null,h.createElement(g.F.div,(0,m.__assign)({},(0,g.Sh)(dn.borderContainer,s.pipe(A.U((0,v.RN)(dn.borderContainerZeroWidth,dn.borderContainerWithMinWidth)))),{style:{width:o}})),h.createElement(g.F.div,(0,m.__assign)({},(0,g.Sh)(n||dn.defaultProgress,dn.progressBar,s.pipe(A.U((0,v.RN)(dn.progressBarZeroWidth,dn.progressBarWithMinWidth)))),{style:{width:i}})),h.createElement(g.F.div,{className:dn.loading,style:{width:a}}))}var tn,nn=w.u.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),rn={position:"relative",width:w.u.percent(100),height:w.u.rem(.25),borderRadius:w.u.rem(T.Jr),backgroundColor:Pe.xO},on={position:"relative",top:0,height:w.u.percent(100),borderRadius:w.u.rem(T.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},an={minWidth:w.u.px(4)},sn={position:"absolute",backgroundColor:Ne.Il.CoreNeutral0},ln={minWidth:w.u.px(6)},cn={position:"absolute",minWidth:0,backgroundImage:Pe.b6,backgroundSize:"20px 20px",transition:"none",animation:nn+" 1s linear infinite"},un={backgroundImage:Pe.Xd},dn=w.u.stylesheet({wrapper:[rn,rn],progressBar:[on],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[an],borderContainer:[on,sn],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[ln],loading:[on,cn],defaultProgress:[un]}),pn=n(32577),fn=n(22232);!function(e){!function(e){e.sparkles="sparkles",e.priority="priority"}(e.Icon||(e.Icon={})),function(e){e[e.lowest=0]="lowest",e[e.low=1]="low",e[e.average=2]="average",e[e.high=3]="high",e[e.highest=4]="highest"}(e.Priority||(e.Priority={})),function(e){e.top="top",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight"}(e.Position||(e.Position={})),function(e){e.standard="standard",e.custom="custom"}(e.ViewType||(e.ViewType={})),e.DefaultTimeout="DefaultTimeout",e.TimeoutDisabled="TimeoutDisabled"}(tn||(tn={}));var mn,hn,gn={position:"relative",width:w.u.percent(100)},vn={position:"relative",margin:"0 0 "+w.u.rem(.5)},yn={display:"flex",boxSizing:"border-box",padding:w.u.rem(1)+" "+w.u.rem(2)+" "+w.u.rem(1)+" "+w.u.rem(.75),width:w.u.percent(100),borderRadius:w.u.rem(T.fx),background:Ne.Il.BackgroundNotification,color:Ne.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},bn={width:w.u.percent(100)},wn={display:"inline-block",width:w.u.percent(100)},Cn={margin:w.u.rem(-.5)+" "+w.u.rem(.75)+" "+w.u.rem(-.5)+" 0"},_n={position:"absolute",top:0,right:0,marginTop:w.u.rem(.5),marginRight:w.u.rem(.4),marginLeft:w.u.rem(.5)},Sn={stroke:Pe.FW},xn={margin:"0 0 "+w.u.rem(.5),color:Ne.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:w.u.rem(Ne.xv.BodySize),lineHeight:w.u.rem(1.25)},In={marginTop:w.u.rem(-.1),marginBottom:w.u.rem(-.25),color:Ne.Il.CoreNeutral0,fontSize:w.u.rem(Ne.xv.BodySize),lineHeight:w.u.rem(1.25)},An=w.u.prefixedStylesheet("notifications",{wrapper:[gn],notification:[vn],flexibleNotification:[vn,{display:"flex",width:"auto"}],contentWrapper:[yn],miniContentWrapper:[yn,{position:"relative",width:"auto"}],fullWidthNotification:[vn,yn,bn],content:[wn],miniContent:[{flex:1}],alertIcon:[Cn],closeIconWrapper:[_n],closeIcon:[Sn],header:[xn],description:[In]});!function(e){e.Wrapper=function(t){var r=t.notification,i=t.onClose,o=t.children,a=t.theme,s=void 0===a?{}:a;h.useEffect((function(){return r.actions.next("shown")}),[]);var l={wrapper:s.wrapper||n.wrapper,content:void 0!==s.content?Object.assign({},n.content,s.content):n.content};return h.createElement("div",{className:l.wrapper},h.createElement(e.Base,{metadata:r.metadata,onClose:i,theme:l.content},o))},e.Base=function(n){var r=n.metadata,i=n.onClose,o=n.theme,a=n.children;return h.createElement("div",{className:o.wrapper},t(r,o.icon),h.createElement("div",{className:o.content},a),!function(e){return e.priority===tn.Priority.high||e.priority===tn.Priority.highest}(r)&&h.createElement(e.CloseButton,{onClick:i,className:o.close}))};var t=function(t,n){switch(t.icon){case tn.Icon.sparkles:return h.createElement(Fe.JO.Sparkles,{className:n});case void 0:case tn.Icon.priority:return h.createElement(e.PriorityIcon,{priority:t.priority,className:n});default:return(0,fn.vE)(t.icon)}};e.AdHoc=function(t){var r=t.title,i=t.children,o=t.className,a=t.onClose;return h.createElement("div",(0,m.__assign)({},(0,g.Sh)(n.content.wrapper,o)),h.createElement("div",{className:n.content.content},h.createElement(e.TitledContent,{title:r},i)),h.createElement(e.CloseButton,{onClick:a,className:n.content.close}))},e.PriorityIcon=function(e){var t=e.priority,n=e.className;switch(t){case tn.Priority.lowest:case tn.Priority.low:return h.createElement(Fe.JO.NotificationInfo,{className:n});case tn.Priority.average:return h.createElement(Fe.JO.NotificationWarning,{className:n});case tn.Priority.high:case tn.Priority.highest:return h.createElement(Fe.JO.NotificationError,{className:n});default:return(0,fn.vE)(t)}},e.CloseButton=function(e){var t=e.onClick,n=e.className;return h.createElement(je.zx,{name:"closeNotification",className:n,onClick:t},h.createElement(Fe.JO.Close,{className:An.closeIcon,width:12}))},e.TitledContent=function(t){var n=t.title,r=t.children;return r?h.createElement(h.Fragment,null,h.createElement(Oe.P1,{className:An.header},n),h.createElement(e.Content,null,r)):h.createElement(Oe.P1,{className:An.description},n)},e.Content=function(e){var t=e.children;return h.createElement(Oe.XY,{className:An.description},t)};var n={wrapper:An.wrapper,content:{wrapper:An.fullWidthNotification,icon:An.alertIcon,content:An.content,close:An.closeIconWrapper}}}(mn||(mn={})),function(e){e.Wrapper=function(e){var t=e.notification,n=e.onClose,r=e.children;return h.useEffect((function(){return t.actions.next("shown")}),[]),h.createElement("div",{className:An.flexibleNotification},h.createElement(mn.Base,{metadata:t.metadata,onClose:n,theme:{wrapper:An.miniContentWrapper,icon:An.alertIcon,content:An.miniContent,close:An.closeIconWrapper}},r))}}(hn||(hn={}));var kn,En=n(63979),Tn=n(54071),Rn=n(60653),Ln=n(66831),Mn=n(60430),Nn=n(66265),Pn=n(49708),Fn=n(2834),On=n(95093),Bn=n(17343),Dn=n(40151),Wn=n(10002),Un=n(16323),Hn={$nest:{"&:before":{position:"absolute",width:w.u.px(10),height:w.u.px(10),borderRadius:w.u.percent(50),content:"''",transform:"scale(.5)"}}},zn={opacity:1,transition:"opacity .3s"},Xn={color:Ne.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:Ne.xv.SubheadingLetterSpacing,fontSize:w.u.rem(Ne.xv.SubheadingSize),lineHeight:w.u.rem(Ne.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:w.u.rem(.25)}}},Gn={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:w.u.px(2),left:w.u.rem(-1.1),margin:"auto 0"}}},Vn={$nest:{"&:before":{top:0,bottom:0,left:w.u.rem(-1.1),margin:w.u.rem(.25)+" 0 auto 0"}}},Yn={margin:"0 "+w.u.rem(.4)+" 0 "+w.u.rem(.2),width:w.u.rem(.85),height:w.u.rem(.85),objectFit:"contain"},qn={position:"absolute",top:0,bottom:0,left:w.u.rem(-1),margin:"auto",background:Ne.Il.CoreNeutral0,transform:"translateX(-50%)"},$n={left:w.u.rem(-1),minWidth:w.u.rem(1),minHeight:w.u.rem(1),fill:Ne.Il.CoreYellow50},Zn={minWidth:"initial",minHeight:"initial",padding:w.u.rem(.3)+" "+w.u.rem(.25),cursor:"pointer",borderRadius:w.u.percent(100),marginLeft:w.u.rem(.5),$nest:{"&:hover":{background:Ne.Il.CoreNeutral10}}},jn={display:"flex",alignItems:"center",padding:"0 "+w.u.rem(.25),borderRadius:w.u.rem(T.fx),cursor:"pointer",background:Ne.Il.CoreYellow20,color:Ne.Il.CoreYellow80,marginLeft:w.u.rem(.5),$nest:{"&:hover":{background:Ne.Il.CoreYellow10}}},Jn={minWidth:"initial",minHeight:"initial",fill:Ne.Il.CoreYellow80,marginLeft:w.u.rem(.3)},Kn={display:"flex",alignItems:"flex-start",top:w.u.rem(.125),minWidth:"initial",minHeight:"initial",background:Ne.Il.CoreNeutral0},Qn={color:Ne.Il.CoreNeutral90,textTransform:"none",letterSpacing:Ne.xv.SmallLetterSpacing,fontWeight:Ne.xv.SmallWeight,fontSize:w.u.rem(Ne.xv.SmallSize),lineHeight:w.u.rem(Ne.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},er={color:Ne.Il.CoreNeutral50,textTransform:"none"},tr={width:w.u.rem(1),height:w.u.rem(1)},nr={display:"inline-flex",padding:"0 "+w.u.rem(.25),borderRadius:w.u.rem(T.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},rr={display:"inline-flex",marginLeft:w.u.rem(.1),minWidth:0,minHeight:0},ir=w.u.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[zn],moreHidden:[zn,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[Xn],lens:[Xn,Gn],lensMinimal:[Vn],voxLogo:[Yn],cardLogo:[qn],premiumIcon:[$n],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[Zn],newPremiumLabel:[jn],newPremiumLabelIcon:[Jn],takeawayIcon:[Kn],minimalTitle:[Qn],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[er],toneLogo:[qn,tr],fluencyLabel:[Xn,nr],fluencyInfo:[rr],dot:[Hn]});!function(e){e.none="none",e.persistent="persistent",e.new="new"}(kn||(kn={}));var or=function(e){var t=e.className,n=e.vox,r=e.isMinimalCard,i=h.useContext(Ze.m.Context).vox.styleGuide;return h.createElement("div",(0,m.__assign)({},(0,g.Sh)(t,ir.voxTitle,r?ir.minimalTitle:void 0)),h.createElement("span",null,n.companyName," ",i))},ar=function(e){var t=e.logoUrl,n=e.className;return h.createElement("img",(0,m.__assign)({src:t},(0,g.Sh)(n,ir.voxLogo)))},sr=function(e){var t=e.title,n=e.layoutDensity;return h.createElement(Oe.XY,{className:(0,S.pipe)(n,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return ir.minimalTitle}),(function(){return ir.toneTitle})))},h.createElement(Un.d,{emojiClassName:ir.toneLogo},t))};function lr(e){return Wn.R.outcomeTypeMatch(e.lensType)({correctness:R.m.dotCorrectness,clarity:R.m.dotClarity,premium:R.m.dotAdvanced,engagement:R.m.dotEngagement,delivery:R.m.dotDelivery,vox:R.m.dotVox})}function cr(e,t,n,r,i){var o=e.extraProperties;return Ot.$.isDemoPremium(e)?function(e,t){return{style:R.m.dot,description:h.createElement("div",{className:(0,S.pipe)(t,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return ir.minimalTitle}),(function(){})))},h.createElement(Fe.JO.Paid,(0,m.__assign)({width:14},(0,g.Sh)(ir.cardLogo,ir.premiumIcon))),e.lensName)}}(e,n):y.isSome(o.tone)?function(e,t){return{style:lr(e),description:h.createElement(sr,{title:e.title,layoutDensity:t})}}(e,n):t?y.isSome(o.vox)?function(e,t){return{style:R.m.dotVox,description:h.createElement(h.Fragment,null,(0,S.pipe)(e.logoUrl,y.fold((function(){return null}),(function(e){return h.createElement(ar,{logoUrl:e,className:ir.cardLogo})}))),h.createElement(or,{vox:e,isMinimalCard:t===C.X.RenderOptions.Density.minimal}))}}(o.vox.value,n):Ot.$.isTakeaway(e)?function(e,t){return{style:lr(e),description:h.createElement(h.Fragment,null,h.createElement(Fe.JO.Megaphone,(0,m.__assign)({width:16},(0,g.Sh)(ir.cardLogo,ir.takeawayIcon))),t)}}(e,i):Ot.$.isFree(e)?(0,S.pipe)(n,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return function(e,t){return{style:lr(e),description:t||h.createElement(Oe.XY,{className:ir.minimalTitle},e.miniCardTitle)}}(e,i)}),(function(){return function(e){return{style:lr(e),description:e.lensName}}(e)}))):function(e,t,n){return{style:lr(e),description:h.createElement("div",(0,m.__assign)({},(0,g.Sh)(ir.dualItemLabel,(0,S.pipe)(n,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return ir.minimalTitle}),(function(){}))))),h.createElement("span",{className:ir.dualItemLabel},e.lensName,h.createElement(fr,{highlightStyle:t})))}}(e,r,n):null}var ur,dr=function(e){var t=e.label;return h.createElement("span",{className:ir.fluencyLabel},t,h.createElement(je.RZ,{iconWidth:10,buttonClass:ir.fluencyInfo,iconClass:ir.fluencyInfo,title:h.useContext(Ze.m.Context).card.fluency.tooltip}))},pr=function(e){var t=e.style,n=e.description;return h.createElement("span",(0,m.__assign)({},(0,g.Sh)(ir.lens,ir.dot,t)),n)},fr=function(e){var t=e.highlightStyle;if(t===kn.none)return null;var n=h.useContext(Ze.m.Context),r=t===kn.new?h.createElement("div",{className:ir.newPremiumLabel},n.premiumAlertLabel.new,h.createElement(Fe.JO.Paid,{className:ir.newPremiumLabelIcon,width:12})):h.createElement(Fe.JO.Paid,{className:ir.premiumPersistentTooltipIcon,width:10});return h.createElement(Rn.u,{align:"topCenter",title:n.premiumAlertLabel.tooltip.includedWithPaid},r)},mr=function(e){var t=e.style,n=e.description,r=e.extraStyle;return h.createElement("span",(0,m.__assign)({},(0,g.Sh)(r,ir.lensMinimal,ir.lens,ir.dot,t)),n)},hr=function(e){return(0,S.pipe)(cr(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.children),y.fromNullable,y.map((function(t){return h.createElement("div",{className:e.className},(0,S.pipe)(e.activeAlert.extraProperties.fluencyMessage,y.fold((function(){return(0,S.pipe)(e.layoutDensity,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return h.createElement(mr,(0,m.__assign)({},t))}),(function(){return h.createElement(pr,(0,m.__assign)({},t))})))}),(function(n){return(0,S.pipe)(e.layoutDensity,C.X.RenderOptions.Density.match(h.createElement(h.Fragment,null,h.createElement(pr,(0,m.__assign)({},t)),h.createElement(dr,{label:n})),h.createElement(pr,(0,m.__assign)({},t)),h.createElement(mr,{style:t.style,extraStyle:ir.minimalTitle,description:e.activeAlert.miniCardTitle})))}))))})),y.getOrElse((function(){return h.createElement("div",{"data-purpose":"label-placeholder"})})))},gr=["b","i","br","ul","li"];!function(e){e.renderToHtml=function(e,t){var n=t?{allowedTags:gr.concat(["a"]),linkRegExp:t}:{allowedTags:gr};return yt.yG(e,n)}}(ur||(ur={}));var vr=function(e){var t=e.card,n=t.activeAlert,r=t.id,i=t.visualState,o=e.actions,a=e.mode,s=e.className,l=h.useContext(Ze.m.Context);return h.createElement(je.zx.Tertiary,{key:"toggle-more",name:br(i,l),title:"mini"===a?br(i,l):"",className:s,onClick:yt.hz((function(){var e=C.X.isCardOpen(i);o.next({type:E.l.Type.startTransitionTo,cardId:r,transition:{type:e?"focused":"expanded",clockwise:!0}}),e||o.next({type:E.l.Type.alertFeedback,alertId:n.id,feedbackType:Lt.PZ.EXPANDED})}))},C.X.isCardOpen(i)?h.createElement(Fe.JO.Arrow,{key:"more",className:ir.lessIcon}):h.createElement(Fe.JO.QuestionMark,{key:"expand"}),"default"===a&&br(i,l))},yr=function(e){var t=e.visualState,n=e.children,r=e.className;return h.createElement("div",{className:(C.X.isCardOpen(t)?ir.more:ir.moreHidden)+" "+r},n)};function br(e,t){var n=t.card;return C.X.isCardOpen(e)?n.less:n.more}var wr=function(e,t,n,r,i,o){return(0,m.__assign)({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:w.u.rem(2),borderRadius:i,backgroundColor:Ne.Il.CoreNeutral0,boxShadow:r,content:"' '"},o&&"bottom"!==o?{top:n}:{bottom:n})},Cr="0 "+w.u.rem(.25)+" "+w.u.rem(1.625)+" 0 rgba(198, 203, 222, .25)",_r={marginRight:w.u.rem(1),flexShrink:0,maxWidth:w.u.percent(100)},Sr={padding:"0 "+w.u.rem(1)},xr={padding:"0 "+w.u.rem(1.9)+" 0 "+w.u.rem(1)},Ir={position:"absolute",top:w.u.rem(.27),right:w.u.rem(.5)},Ar={display:"grid",width:w.u.percent(100),gridGap:w.u.rem(.5),gridTemplateColumns:"fit-content(60%) auto min-content"},kr={minWidth:w.u.rem(7)},Er={marginLeft:w.u.rem(.5)},Tr={color:Ne.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:w.u.rem(1.5)},Rr={$nest:{"&:before":wr(w.u.rem(.5),-10,w.u.rem(-.5),Cr,w.u.rem(T.Jr)),"&:after":wr(w.u.rem(1),-20,w.u.rem(-1),Cr,w.u.rem(T.Jr))}},Lr={transition:"opacity .2s"},Mr=w.u.prefixedStylesheet("super",{updateAllBtnCommon:[_r],updateAllBtn:[_r,Sr],updateAllBtnLoading:[_r,xr],updateBtnSpinner:[Ir],optionsContainer:[Ar],optionLabel:[kr],optionRadio:[Er],optionSecondaryAttribute:[Tr],optionExample:[Tr,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic"}],superWrapper:[Rr],loadingWrapper:[Lr],loadingWrapperInvisible:[Lr,{opacity:0,pointerEvents:"none"}]}),Nr=n(17629),Pr=function(e){var t=e.examples,n=e.layoutDensity;return h.createElement(Oe.ZT,{nodeType:"table",styleType:Oe.ZT.Type.Base,className:Vr.wrapper},t.map((function(e,t){return h.createElement("tbody",{key:t,className:Vr.group},e.map((function(e,t){var r=e.text,i=e.title,o=e.color;return h.createElement("tr",{key:t,className:(0,S.pipe)(n,C.X.RenderOptions.Density.matchL((function(){return Vr.item}),(function(){return Vr.itemCompact}),(function(){return Vr.itemMinimal})))},(0,S.pipe)(i,y.map((function(e){return h.createElement("td",{className:Nr.J.colorMatch(o)(Vr)},function(e){return e.split("/").reduce((function(e,t,n){return 0!==n&&e.push(h.createElement("br",{key:n})),e.push(t),e}),[])}(e))})),y.toNullable),h.createElement("td",(0,m.__assign)({colSpan:y.isNone(i)?2:void 0,className:Vr.content},yt.yG(r))))})))})))},Fr={$nest:{"&:not(:last-child):after":{display:"block",height:w.u.rem(1.75),content:"''"}}},Or={$nest:{"&:not(:last-child)":{borderBottom:w.u.rem(.5)+" solid transparent"}}},Br={display:"flex",flexDirection:"column",lineHeight:w.u.rem(1.3125)},Dr={padding:0,verticalAlign:"top",lineHeight:w.u.rem(1.25)},Wr={paddingRight:w.u.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},Ur={color:Ne.Il.CoreNeutral50,fontStyle:"italic",fontFeatureSettings:T.g_+", "+T.xL},Hr={color:Ne.Il.CoreRed50},zr={color:Ne.Il.CoreGreen60},Xr={color:Ne.Il.CoreNeutral90},Gr={color:Ne.Il.CoreNeutral90},Vr=w.u.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[Fr],item:[Or],itemCompact:[Or,{display:"flex",flexDirection:"column"}],itemMinimal:[Or,Br],baseBlock:[Dr],title:[Dr,Wr],content:[Dr,Ur],red:[Dr,Wr,Hr],green:[Dr,Wr,zr],yellow:[Dr,Wr,Xr],fallback:[Dr,Wr,Gr]}),Yr=n(489),qr=n(55415),$r=n(53521),Zr=n(72618);function jr(e){return e?function(t){return e+"/"+t}:_.identity}var Jr,Kr=function(e){return h.createElement(Oe.ZT,(0,m.__assign)({},ei(e),{value:e.value,onChange:e.onChange}))},Qr=function(e){return h.createElement(Kr,(0,m.__assign)({},e,{nodeType:"input"}))},ei=function(e){return(0,m.__assign)({"data-name":(n=e.name,r=h.useContext(k.f.Context).name,void 0===n?n:"string"==typeof n?jr(r)(n):n.view(jr(r))),mount:(t=e.autofocus,t?function(e){return e&&requestAnimationFrame((function(){return e.focus()}))}:void 0),styleType:Oe.ZT.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur},(0,g.Sh)(ni.inputField,e.className));var t,n,r},ti={width:w.u.percent(100),outline:"none",border:"1px solid "+Pe.xO,borderRadius:w.u.rem(T.fx),background:Ne.Il.CoreNeutral0,$nest:{"&::placeholder":{color:Pe.FW,opacity:1},"&:focus":{borderColor:Ne.Il.CoreBlue50}}},ni=w.u.stylesheet({inputField:[ti],textArea:[{resize:"none"}]}),ri=(0,n(51657).createTypeStyle)(),ii=function(e){var t;return{$nest:(t={},t['&[data-indent="'+e+'"]']={marginLeft:w.u.rem(.5*e)},t)}},oi=function(e,t,n,r){var i;return{$nest:(i={},i['&[data-indent="'+t+'"]']={counterIncrement:"card-list"+t,counterReset:r,$nest:{"&:before":{content:"'"+e+"' '\\A\\00a0' counter(card-list"+t+", "+n+") '. '"}}},i)}},ai=function(e){return[oi(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),oi(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),oi(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),oi(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),oi(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),oi(e,5,"lower-roman","card-list6 card-list7 card-list8"),oi(e,6,"decimal","card-list7 card-list8"),oi(e,7,"lower-alpha","card-list8"),oi(e,8,"lower-roman","none")]},si="cards-replacements_labels-",li={list:si+"list",item:si+"item",diff:si+"diff",columnList:si+"columnList",itemInsert:si+"itemInsert",deleteAll:si+"deleteAll",crossed:si+"crossed",deleteQuote:si+"deleteQuote",deletePunctuation:si+"deletePunctuation",deleteDoubleComma:si+"deleteDoubleComma",deleteApostrophe:si+"deleteApostrophe",deleteLetter:si+"deleteLetter",deletePunctuationBeforeLetter:si+"deletePunctuationBeforeLetter",itemOriginal:si+"itemOriginal",itemOriginalContent:si+"itemOriginalContent",removeOrContainer:si+"removeOrContainer",itemContext:si+"itemContext",itemContextShifted:si+"itemContextShifted",or:si+"or",arrowInsertsList:si+"arrowInsertsList",cozyArrowInsertsList:si+"cozyArrowInsertsList",inlineHeader:si+"inlineHeader",fullSentenceBackground:si+"fullSentenceBackground",minimalFullSentenceBackground:si+"minimalFullSentenceBackground",fullSentenceDelete:si+"fullSentenceDelete",fullSentenceHidden:si+"fullSentenceHidden",fullSentenceListItem:si+"fullSentenceListItem",fullSentenceBulletListItem:si+"fullSentenceBulletListItem",fullSentenceDashedListItem:si+"fullSentenceDashedListItem",fullSentenceOrderedListItem:si+"fullSentenceOrderedListItem",fullSentenceOrderedListItemWithFormatting:si+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:si+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:si+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:si+"fullSentenceInsert",fullSentenceInsertPunctuation:si+"fullSentenceInsertPunctuation",itemRemove:si+"itemRemove",oneGapInsert:si+"oneGapInsert",oneGapInput:si+"oneGapInput"},ci={position:"relative",overflow:"hidden",margin:"0 "+w.u.rem(.5)+" "+w.u.rem(.5)+" 0",padding:w.u.rem(.25)+" "+w.u.rem(.5),borderRadius:w.u.rem(T.fx),color:Ne.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:w.u.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},ui={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:w.u.rem(.3125),width:"1px",height:"120%",background:Ne.Il.CoreNeutral0,content:"''",opacity:.8}}},di={position:"relative",marginRight:w.u.rem(.5),whiteSpace:"nowrap"},pi={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:w.u.rem(1)+" 0",padding:w.u.rem(.5),maxHeight:w.u.rem(12),borderRadius:w.u.rem(T.fx),background:Ne.Il.CoreNeutral10,color:Ne.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:T.g_+", "+T.xL},fi={textDecoration:"line-through",position:"relative",marginRight:w.u.rem(.5),maxWidth:"calc(100% - "+w.u.rem(.5)+")",color:Ne.Il.CoreRed40,textDecorationLine:"line-through",overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:w.u.rem(.5),color:Ne.Il.CoreNeutral50,content:"''",verticalAlign:"middle"}}},mi=[ii(0),ii(1),ii(2),ii(3),ii(4),ii(5),ii(6),ii(7),ii(8)],hi={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:T.g_+", "+T.xL},gi={background:Ne.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:Ne.Il.CoreGreen50},"&[data-disabled='true']":{background:Ne.Il.CoreGreen40}}},vi={$nest:{"&:after":{transform:"rotate(-25deg)"}}},yi={paddingRight:w.u.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},bi={paddingRight:w.u.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},wi={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},Ci={display:"flex",flexBasis:"100%"},_i={margin:"0 "+w.u.rem(.5)+" "+w.u.rem(.5)+" 2px",color:Ne.Il.CoreNeutral60},Si={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},xi={marginBottom:w.u.rem(.25),color:Ne.Il.CoreNeutral60,fontWeight:400,fontSize:w.u.rem(.8),lineHeight:w.u.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},Ii={color:Ne.Il.CoreRed50,textDecoration:"line-through",fontWeight:600},Ai={background:Ne.Il.CoreRed50,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:Ne.Il.CoreRed40}}},ki={$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}},Ei={$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}},Ti={width:"100%",marginTop:w.u.rem(.5),marginBottom:w.u.rem(.25),$nest:{"&[data-disabled='true']":{background:Ne.Il.CoreNeutral40}}},Ri={marginTop:w.u.rem(.5),lineHeight:"calc("+w.u.rem(2)+" - "+w.u.px(2)+")",padding:"0 "+w.u.rem(.5),border:w.u.important(w.u.px(1)+" solid "+Ne.Il.CoreNeutral50),color:Ne.Il.CoreNeutral90,$nest:{"&:placeholder-shown":{borderColor:w.u.important(Ne.Il.CoreNeutral20)}}},Li=ri.style(ci,gi),Mi={list:w.u.joinClasses([li.list,w.u.style(hi),ri.style(hi)]),item:w.u.joinClasses([li.item,w.u.style(ci),ri.style(ci)]),itemInsert:w.u.joinClasses([li.itemInsert,w.u.style(ci,gi),Li]),deleteAll:w.u.joinClasses([li.deleteAll,w.u.style({textDecoration:"line-through"}),ri.style({textDecoration:"line-through"})]),crossed:w.u.joinClasses([li.crossed,w.u.style(ui)]),deleteQuote:w.u.joinClasses([li.deleteQuote,w.u.style(ui,vi),ri.style(ui,vi)]),deletePunctuation:w.u.joinClasses([li.deletePunctuation,w.u.style(ui,yi),ri.style(ui,yi)]),deleteDoubleComma:w.u.joinClasses([li.deleteDoubleComma,w.u.style({textDecoration:"line-through"}),ri.style({textDecoration:"line-through"})]),deleteApostrophe:w.u.joinClasses([li.deleteApostrophe,w.u.style(ui,bi),ri.style(ui,bi)]),deleteLetter:w.u.joinClasses([li.deleteLetter,w.u.style(wi),ri.style(wi)]),deletePunctuationBeforeLetter:w.u.joinClasses([li.deletePunctuationBeforeLetter,w.u.style({textDecoration:"line-through"}),ri.style({textDecoration:"line-through"})]),itemOriginal:w.u.joinClasses([li.itemOriginal,w.u.style(fi),ri.style(fi)]),itemOriginalContent:w.u.joinClasses([li.itemOriginalContent,w.u.style({color:Ne.Il.CoreNeutral90}),ri.style({color:Ne.Il.CoreNeutral90})]),removeOrContainer:w.u.joinClasses([li.removeOrContainer,w.u.style(Ci),ri.style(Ci)]),itemContext:w.u.joinClasses([li.itemContext,w.u.style(di)]),itemContextShifted:w.u.joinClasses([li.itemContextShifted,w.u.style(di,{marginRight:"2px"}),ri.style(di,{marginRight:"2px"})]),or:w.u.joinClasses([li.or,w.u.style(_i),ri.style(_i)]),arrowInsertsList:w.u.joinClasses([li.arrowInsertsList,w.u.style(Si),ri.style(Si)]),columnList:w.u.joinClasses([li.columnList,w.u.style(Si,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),ri.style(Si)]),cozyArrowInsertsList:w.u.joinClasses([li.arrowInsertsList,w.u.style(Si,{flex:2,flexBasis:"0%"}),ri.style(Si)]),inlineHeader:w.u.joinClasses([li.inlineHeader,w.u.style(xi),ri.style(xi)]),fullSentenceBackground:w.u.joinClasses([li.fullSentenceBackground,w.u.style(pi),ri.style(pi)]),minimalFullSentenceBackground:w.u.joinClasses([li.minimalFullSentenceBackground,w.u.style(pi,{lineHeight:w.u.rem(1.3125)}),ri.style(pi,{lineHeight:w.u.rem(1.3125)})]),fullSentenceDelete:w.u.joinClasses([li.fullSentenceDelete,w.u.style(Ii),ri.style(Ii)]),fullSentenceHidden:w.u.joinClasses([li.fullSentenceHidden,w.u.style({display:"none"})]),fullSentenceListItem:w.u.joinClasses([li.fullSentenceListItem,w.u.style.apply(w.u,mi),ri.style.apply(ri,mi)]),fullSentenceBulletListItem:w.u.joinClasses([li.fullSentenceBulletListItem,w.u.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),ri.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:w.u.joinClasses([li.fullSentenceDashedListItem,w.u.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),ri.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:w.u.joinClasses([li.fullSentenceOrderedListItem,w.u.style.apply(w.u,(0,m.__spreadArrays)(ai(""),mi)),ri.style.apply(ri,(0,m.__spreadArrays)(ai(""),mi))]),fullSentenceOrderedListItemWithFormatting:w.u.joinClasses([li.fullSentenceOrderedListItemWithFormatting,w.u.style.apply(w.u,(0,m.__spreadArrays)(ai(""),mi)),ri.style.apply(ri,(0,m.__spreadArrays)(ai(""),mi))]),fullSentenceBulletListItemWithFormatting:w.u.joinClasses([li.fullSentenceBulletListItemWithFormatting,w.u.style.apply(w.u,(0,m.__spreadArrays)(mi,[Ei])),ri.style.apply(ri,(0,m.__spreadArrays)(mi,[Ei]))]),fullSentenceDashedListItemWithFormatting:w.u.joinClasses([li.fullSentenceDashedListItemWithFormatting,w.u.style.apply(w.u,(0,m.__spreadArrays)(mi,[ki])),ri.style.apply(ri,(0,m.__spreadArrays)(mi,[ki]))]),fullSentenceInsert:w.u.joinClasses([li.fullSentenceInsert]),fullSentenceInsertPunctuation:w.u.joinClasses([li.fullSentenceInsertPunctuation]),diff:w.u.joinClasses([li.diff,w.u.style({fontWeight:"bolder"}),ri.style({fontWeight:"bolder"})]),itemRemove:w.u.joinClasses([li.itemRemove,w.u.style(ci,Ai)]),oneGapInsert:w.u.joinClasses([li.oneGapInsert,w.u.style(ci,gi,Ti),Li]),oneGapInput:w.u.joinClasses([li.oneGapInput,w.u.style(Ri)])};function Ni(e,t){if(e.length<=4)return null;var n=function(e,t){if(e===t)return;var n=e.length,r=t.length;if(r>n){if(t.substr(0,n)===e)return{from:n,to:n,oldFragment:"",newFragment:t.substr(n)};if(t.substr(r-n)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,r-n)}}if(r<n){if(e.substr(n-r)===t)return{from:0,to:n-r,oldFragment:e.substr(0,n-r),newFragment:""};if(e.substr(0,r)===t)return{from:r,to:n,oldFragment:e.substr(r),newFragment:""}}var i=r<n?r:n,o=function(e,t,n){var r=0;for(;e[r]===t[r]&&r<n;)r+=1;return r}(e,t,i),a=function(e,t,n,r,i){var o=0;for(;e[n-o-1]===t[r-o-1]&&i-o>=0;)o+=1;return o}(e,t,n,r,i);o+a>n&&(a-=o+a-n);o+a>r&&(a-=o+a-r);return{from:o,to:n-a,oldFragment:e.substr(o,n-a-o),newFragment:t.substr(o,r-a-o)}}(e,t);if(void 0===n)return null;var r=n.from,i=n.to,o=n.oldFragment,a=n.newFragment,s=1===a.length&&r>0&&e[r-1]===a,l=1===o.length&&0===a.length&&t[r-1]===o,c=r,u=a;return(s||l)&&(c=r-1),s&&(u=a+a),l&&(u=o),u.length>3?null:[e.substring(0,c),u,e.substring(i)]}w.u.cssRule("."+li.fullSentenceInsert+", ."+li.fullSentenceInsertPunctuation,{color:Ne.Il.CoreGreen60,fontWeight:600}),w.u.cssRule("."+li.fullSentenceDelete+" + ."+li.fullSentenceInsert,{marginLeft:w.u.rem(.25)}),w.u.cssRule("."+li.fullSentenceOrderedListItemWithFormatting+",\n."+li.fullSentenceDashedListItemWithFormatting+",\n."+li.fullSentenceBulletListItemWithFormatting,{color:Ne.Il.CoreGreen60,fontWeight:600}),function(e){e.getClass=function(e,t){return null!==(n=t)&&1===n.length&&/["']/.test(n)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'][.,;]/)}(t)?e.deleteQuote:function(e){return null!==e&&e.replace(/\s/g,"").length<3&&null!==e.match(/[.,;:!?\\\/-]/)}(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t)?e.deletePunctuationBeforeLetter:e.deleteAll;var n}}(Jr||(Jr={}));var Pi=function(e){var t=e.transform,n=e.title,r=e.disabled,i=e.boldifier,o=void 0===i?Wi:i,a=e.classes,s=void 0===a?Mi:a,l=e.onClick;return h.createElement(je.zx,{animationMode:Zr.m.FromClickPoint,name:"apply-insert",onClick:l,title:n,disabled:r,className:s.itemInsert},t.map((function(e,t){return h.createElement(h.Fragment,{key:t},o(e,Mi.diff))})))},Fi=function(e){var t=e.transform,n=e.title,r=e.classes,i=void 0===r?Mi:r,o=e.onClick;return h.createElement(je.zx,(0,m.__assign)({animationMode:Zr.m.FromClickPoint,name:"apply-remove"},{onClick:o,title:n,className:i.itemRemove}),t.map((function(e,t){return h.createElement(zi,{key:t,element:e})})))},Oi=function(e){var t=e.transform,n=e.title,r=e.classes,i=void 0===r?Mi:r,o=e.onClick,a=e.children;return h.createElement("div",{className:i.removeOrContainer},t.map((function(e,r){return"text"===e.type?h.createElement("span",{key:r,className:r===t.length-1?i.itemContextShifted:i.itemContext},e.text):h.createElement(je.zx,(0,m.__assign)({key:r,animationMode:Zr.m.FromClickPoint,name:"apply-remove-or"},{onClick:o,title:n,className:i.itemRemove}),h.createElement(zi,{element:e}))})),a)},Bi=function(){return h.createElement("span",{className:Mi.or},h.useContext(Ze.m.Context).card.or)},Di=function(e){var t=e.transform,n=e.boldifier,r=void 0===n?Wi:n;return h.createElement("div",{className:Mi.itemOriginal},h.createElement("span",{className:Mi.itemOriginalContent},t.map((function(e,t){return h.createElement(h.Fragment,{key:t},r(e,Mi.diff))}))))},Wi=qr.ei("text"),Ui=function(e,t){var n=e.text;return"text"===e.type?n:h.createElement("span",{className:t},n)};function Hi(e,t){return function(n){return h.createElement($i,{index:t,oldText:e,newText:n.text})}}var zi=function(e){var t=e.element,n=e.strikeClass;return"delete"===t.type?h.createElement("span",(0,m.__assign)({},(0,g.Sh)(Jr.getClass(Mi,t.text),n)),t.text):h.createElement(h.Fragment,null,t.text)};var Xi,Gi,Vi=/^\W/,Yi=(0,_.flow)((0,v.RN)((function(e){switch(e.type){case $r.GP.Delete:return Mi.fullSentenceDelete;case $r.GP.Insert:return Vi.test(e.text)?Mi.fullSentenceInsertPunctuation:Mi.fullSentenceInsert;case $r.GP.Text:case $r.GP.List:return"";default:return(0,fn.vE)(e)}}),(function(e){switch(e.type){case $r.GP.Delete:return Mi.fullSentenceHidden;case $r.GP.List:case $r.GP.Text:case $r.GP.Insert:return"";default:return(0,fn.vE)(e)}})),(function(e){return function(t){return(0,m.__assign)({children:t.text},(0,g.Sh)(e(t)))}}),Yr.UI),qi=(0,_.flow)((0,v.RN)((function(e){switch(e.type){case $r.GP.Delete:return Mi.fullSentenceHidden;case $r.GP.List:return"bullet"===e.kind?Mi.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?Mi.fullSentenceDashedListItemWithFormatting:Mi.fullSentenceOrderedListItemWithFormatting;case $r.GP.Insert:case $r.GP.Text:return"";default:return(0,fn.vE)(e)}}),(function(e){switch(e.type){case $r.GP.Delete:return Mi.fullSentenceHidden;case $r.GP.List:return"bullet"===e.kind?Mi.fullSentenceBulletListItem:"dashed"===e.kind?Mi.fullSentenceDashedListItem:Mi.fullSentenceOrderedListItem;case $r.GP.Insert:case $r.GP.Text:return"";default:return(0,fn.vE)(e)}})),(function(e){return function(t){return t.type===$r.GP.List?(0,m.__assign)((0,m.__assign)({},(0,g.Sh)(e(t))),{"data-indent":t.indent}):(0,m.__assign)({children:t.text},(0,g.Sh)(e(t)))}}),Yr.UI),$i=function(e){var t=e.index,n=void 0===t?0:t,r=e.oldText,i=e.newText,o=Ni(r,i);return h.createElement(h.Fragment,null,o?[o[0],h.createElement("span",{key:n,className:Mi.diff},o[1]),o[2]]:i)},Zi=function(e){return h.createElement(Oe.XY,{className:(0,S.pipe)(e.layoutDensity,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return Mi.minimalFullSentenceBackground}),(function(){return Mi.fullSentenceBackground})))},(0,S.pipe)(e.replacements.kind===$r._k.WithFormatting?qi(e.showDiff)(e.replacements.labels):Yi(e.showDiff)(e.replacements.labels),(0,Yr.Su)((function(e,t){return h.createElement("span",(0,m.__assign)({key:e},t))}))))},ji=function(e){var t=h.useContext(Ze.m.Context).card,n=""===e.gapValue;return h.createElement(h.Fragment,null,h.createElement(Qr,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:function(t){return e.onChange(t.target.value)},className:Mi.oneGapInput}),h.createElement(Pi,{title:n?"":t.todoAction(e.replacements.tooltipText),boldifier:Ui,onClick:e.onClick,classes:{itemInsert:Mi.oneGapInsert,inlineHeader:Mi.inlineHeader},disabled:n,transform:Ji(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},Ji=function(e,t,n){return(0,m.__spreadArrays)(e,[{type:$r.GP.Insert,text:Ki(e)+(t||"")+Ki(n)}],n)},Ki=function(e){return e.length?" ":""},Qi=function(e){var t=e.replacementsLabels,n=e.layoutDensity,r=e.onClick,i=h.useContext(Ze.m.Context).card.todoAction(t.tooltipText);switch(t.type){case $r.b$.Type.InsertList:return h.createElement(Oe.Xk,{className:Mi.list},t.labels.map((function(e,t){return h.createElement(Pi,(0,m.__assign)({},{key:t,title:i,onClick:r(t)},{transform:e}))})));case $r.b$.Type.DeleteList:return h.createElement(Oe.Xk,{className:Mi.list},t.labels.map((function(e,t){return h.createElement(Fi,(0,m.__assign)({},{key:t,title:i,onClick:r(t)},{transform:e}))})));case $r.b$.Type.Arrow:return function(e,t,n,r){var i=e.labels,o=e.original,a=e.onlyReplacements,s=(1===o.length?[o[0].text,i[0][0].text].map(Hi):[Ui,Ui])[0];return h.createElement(Oe.Xk,{className:Mi.list},!a&&h.createElement(Di,{transform:o}),h.createElement("div",{className:n===C.X.RenderOptions.Density.cozy?Mi.cozyArrowInsertsList:i.length>2?Mi.columnList:Mi.arrowInsertsList},i.map((function(e,n){return h.createElement(Pi,(0,m.__assign)({},{key:n,title:t,onClick:r(n)},{transform:e,boldifier:s}))}))))}(t,i,n,r);case $r.b$.Type.InsertOr:return h.createElement(Oe.Xk,{className:Mi.list},h.createElement(Pi,(0,m.__assign)({transform:t.labels[0]},{title:i,onClick:r(0)},{boldifier:Ui})),h.createElement(Bi,null),h.createElement(Pi,(0,m.__assign)({transform:t.labels[1]},{title:i,onClick:r(1)},{boldifier:Ui})));case $r.b$.Type.DeleteOr:return h.createElement(Oe.Xk,{className:Mi.list},t.labels.map((function(e,n){return h.createElement(Oi,(0,m.__assign)({},{key:n,title:i,onClick:r(n)},{transform:e}),n===t.labels.length-2&&h.createElement(Bi,null))})));case $r.b$.Type.FullSentence:case $r.b$.Type.OneGap:return null;default:return(0,fn.vE)(t)}},eo=(0,v.HP)(x.C8.Logging.getLogger);!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=function(t){return(0,S.pipe)(y.fromNullable(t.match(e.actionRegex)),y.chain((function(e){switch(e[1]){case"set-goals":return y.some(E.l.Type.openSetGoals);default:return y.none}})))}}(Gi||(Gi={}));var to=function(e){var t=e.description,n=e.prefix,r=e.actions,i=e.layoutDensity,o=h.useContext(Ze.m.Context),a=h.useContext(Ln.G.Context),s=Mn.P.useElWatcher(),l=s.ref,c=s.onMount;Mn.P.useSubscriptionTo(l.pipe(Nn.oA,Jt.w((function(e){return Array.from(e.getElementsByTagName("a")).reduce((function(e,t){var n=Pn.R(t,"click").pipe(Fn.b((function(e){return e.preventDefault()})));return(0,S.pipe)(y.fromNullable(t.getAttribute("href")),y.chain(Gi.parse),y.fold((function(){return eo("Description").error("Invalid action",t),e.pipe(On.T(n))}),(function(i){return e.pipe(On.T(a.getTooltipObservable(t,o.card.actionDescription[i],"auto",y.none),n.pipe(Bn.h({type:i}),Fn.b(r))))})))}),Dn.E)}))));var u=(0,S.pipe)(i,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return ma.minimalDescription}),(function(){return ma.description})));return void 0!==n?h.createElement(Oe.XY,{mount:c,className:u},n,h.createElement("span",(0,m.__assign)({},ur.renderToHtml(t,Gi.actionRegex)))):h.createElement(Oe.XY,(0,m.__assign)({mount:c,className:u},ur.renderToHtml(t,Gi.actionRegex)))},no=function(e){var t=e.card,n=e.isChecking;return Ft.bZ.isRated(t.activeAlert)?h.createElement(Kt,{value:C.X.isCardPresuccess(t.visualState)?Vt.g.MAX:t.meta.percentile,initValue:C.X.isCardPresuccess(t.visualState)?t.meta.percentile:Vt.g.MIN,isLoading:n}):null},ro=function(e){var t=e.card,n=Qt(C.X.isCardPresuccess(t.visualState)?Vt.g.MAX:t.meta.percentile,C.X.isCardPresuccess(t.visualState)?t.meta.percentile:Vt.g.MIN);return h.createElement(g.F.Fragment,null,n.pipe(A.U(Vt.g.prism.reverseGet),A.U((function(e){return h.createElement(En.P,{percentage:e,colorType:En.P.ColorType.neoBlue,iconSize:En.P.IconSize.extraSmall,theme:{radialProgressBar:ma.circleProgress,radialProgressText:ma.circleText}})}))))},io=function(e){var t=e.card,n=e.feedbackActions,r=h.useContext(Ze.m.Context);return h.createElement(h.Fragment,null,h.createElement(je.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:yt.hz((function(){return n.next({type:E.l.Type.alertIgnore,alertId:t.activeAlert.id,cardId:t.id,eligibleForDismissSurvey:C.X.isEligibleForDismissSurvey(t)})}))},h.createElement(Fe.JO.Ignore,null)),h.createElement(lo,{activeAlert:t.activeAlert,onMute:(0,S.pipe)(t.muteCategory,y.map((function(e){return yt.hz((function(){return n.next({type:E.l.Type.muteAlertCategory,categoryId:e})}))}))),onWrong:yt.hz(yt.hz((function(){return n.next({type:E.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Lt.PZ.WRONG_SUGGESTION})}))),onOffensive:yt.hz(yt.hz((function(){return n.next({type:E.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Lt.PZ.OFFENSIVE_CONTENT})}))),onVisibilityChange:function(e){return n.next({type:E.l.Type.moreActionsButtonToggle,mode:e?"open":"closed"})}}))},oo=function(e){var t=e.onClick,n=h.useContext(Ze.m.Context);return h.createElement(je.zx.Flat,{name:"mute",onClick:t},h.createElement(Fe.JO.Mute,null),n.card.mute)},ao=function(e){var t=e.onClick,n=h.useContext(Ze.m.Context);return h.createElement(je.zx.Flat,{name:"incorrect",onClick:t},h.createElement(Fe.JO.Report,null),n.card.wrong)},so=function(e){var t=e.activeAlert,n=e.onClick,r=h.useContext(Ze.m.Context);return(0,S.pipe)(t.extraProperties.vox,Mt.dH((function(){return null}),h.createElement(je.zx.Flat,{name:"offensive",onClick:n},h.createElement(Fe.JO.Report,null),r.card.offensive)))},lo=function(e){var t=e.activeAlert,n=e.onMute,r=e.onWrong,i=e.onOffensive,o=e.onVisibilityChange,a=t.getTransform(),s=y.isSome(n);return s||y.isSome(a)?h.createElement(pn.L,{label:h.createElement(je.zx.Ghost,{name:"moreActions"},h.createElement(Fe.T1.MoreVertical,null)),align:"right",theme:{dropdownContainer:ma.dropdownContainer},name:"moreActions",onVisibilityChange:o},(0,S.pipe)(n,y.map((function(e){return h.createElement(oo,{onClick:e})})),Mt.QP),(0,S.pipe)(a,y.map((function(){return h.createElement(h.Fragment,null,s&&h.createElement(pn.L.Delimiter,null),h.createElement(ao,{onClick:r}),h.createElement(so,{activeAlert:t,onClick:i}))})),Mt.QP)):null},co=function(e){var t=e.card,n=e.onClick,r=e.mode,i=void 0===r?"default":r,o=h.useContext(Ze.m.Context),a=h.useContext(Pt.a.Context),s=h.useCallback((function(e){a.has(Pt.a.Flag.onlyTrustedEvents)&&!e.isTrusted||n()}),[]),l=t.renderOptions.features.has(C.X.RenderOptions.Features.showAnonymousUserFooters)?{disabled:!0,title:o.card.disabledForAnonymous}:{title:"mini"===i?o.card.addToDict:""};return t.activeAlert.extraProperties.hasAddToDictionary?h.createElement(je.zx.Tertiary,(0,m.__assign)({},l,{name:"add-to-dict",onClick:s}),h.createElement(Fe.JO.Dict,null),o.card.addToDict):null},uo=function(e){var t=e.title,n=e.checkingInProgress,r=e.checkingMessage,i=e.applyMessage,o=e.onClick;return h.createElement(je.zx.Primary,{key:"update-all",name:"update-all",title:t,className:n.pipe(A.U((0,v.RN)(Mr.updateAllBtnLoading,Mr.updateAllBtn))),disabled:n,children:n.pipe(A.U((0,v.RN)(h.createElement(h.Fragment,{key:"update-all-checking"},Nt.kC(r),h.createElement(Tn.$,{size:18,strokeWidth:2,wrapperClassName:Mr.updateBtnSpinner,variation:"white"})),h.createElement(h.Fragment,{key:"update-all-checked"},Nt.kC(i))))),onClick:yt.hz(o)})},po=function(e){var t=e.card;return(0,S.pipe)(Co(t.activeAlert,t.renderOptions.layoutDensity),y.map((function(e){return h.createElement(yr,{key:"card-actions-details",visualState:t.visualState,className:ma.more},e)})),y.toNullable)},fo=function(e){var t=e.card,n=e.actions;return wo(t.activeAlert,t.renderOptions.layoutDensity)?h.createElement(vr,{key:"card-actions-button",mode:"default",actions:n,card:t}):h.createElement(co,{key:"card-actions-button",card:t,mode:"default",onClick:yt.hz((function(){return n.next({type:E.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Lt.PZ.ADD_TO_DICTIONARY})}))})},mo=function(e){return h.createElement(Wt.TG,{alignment:"bottom",eventType:"onclick",stepId:ft.StepId.Step4,title:"Accept a correction",message:"Click on a suggestion to apply it to your text.",findFirstButton:{dotPosition:"rightTop"},themes:{containerWrapperClassName:ma.onboardingNotification}},e.children)},ho=function(e){var t=e.onClick,n=e.rl,r=e.layoutDensity;return h.createElement(mo,null,h.createElement(Qi,{replacementsLabels:n,onClick:t,layoutDensity:r}))},go=function(e){var t=e.text;return h.createElement(Oe.P1,(0,m.__assign)({className:ma.title},ur.renderToHtml(t)))},vo=function(e){var t=e.text;return h.createElement(Oe.P1,(0,m.__assign)({className:ma.titleMinimal},ur.renderToHtml(t)))},yo=function(e){var t=e.alert;return h.createElement(Oe.H4,(0,m.__assign)({className:ma.title},ur.renderToHtml(t.title)))},bo=function(e){var t=e.alert,n=e.meta,r=e.options,i=e.children;return h.createElement(hr,{bundle:n.bundleInfo,className:ma.label,activeAlert:t,showCardLabel:r.features.has(C.X.RenderOptions.Features.showLabel),premiumAlertLabelHighlight:r.features.has(C.X.RenderOptions.Features.showNewPremiumCardLabels)?kn.new:r.features.has(C.X.RenderOptions.Features.showPersistentPremiumCardLabels)?kn.persistent:kn.none,layoutDensity:r.layoutDensity},i)};function wo(e,t){var n=e.details,r=e.examples,i=e.getTransform,o=e.explanation;return!e.extraProperties.hasAddToDictionary&&(!(!y.isSome(r)&&!y.isSome(n))||!(t!==C.X.RenderOptions.Density.minimal||!y.isSome(i())||null==o||""===o))}var Co=function(e,t){if(!wo(e,t))return Mt.cS();var n=(0,S.pipe)(t,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return ma.minimalDescription}),(function(){return ma.description})));return y.some(h.createElement(h.Fragment,null,(0,S.pipe)(t,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return y.isNone(e.details)?h.createElement(Oe.XY,(0,m.__assign)({className:n},ur.renderToHtml(e.explanation,Gi.actionRegex))):null}),(function(){return null}))),(0,S.pipe)(e.details,y.map((function(e){return h.createElement(Oe.XY,(0,m.__assign)({className:n},ur.renderToHtml(e)))})),y.toNullable),(0,S.pipe)(e.examples,y.map((function(e){return h.createElement(Pr,{layoutDensity:t,examples:e})})),y.toNullable)))},_o=function(e){var t=e.isChecking;return h.createElement(g.F.Fragment,null,t.pipe(A.U((function(e){return h.createElement(Tn.$,{className:e?ma.spinner:ma.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2})}))))},So=function(e){var t=h.useState(!0),n=t[0],r=t[1];return n?h.createElement(To,{type:e.type,actions:e.actions,onClose:function(){return r(!1)}}):null},xo=function(e){var t=e.card,n=e.actions;return Ot.$.isDemoPremium(t.activeAlert)?h.createElement(Oo,{card:t,actions:n}):!Ot.$.isFree(t.activeAlert)&&t.renderOptions.features.has(C.X.RenderOptions.Features.showPremiumTrialFooters)?h.createElement(Mo,{actions:n}):t.renderOptions.features.has(C.X.RenderOptions.Features.showAnonymousUserFooters)?h.createElement(Lo,{actions:n,card:t}):Ot.$.isTakeaway(t.activeAlert)?h.createElement(Bo,{actions:n,card:t}):(0,S.pipe)(t.renderOptions.layoutDensity,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.cozy)((function(){return h.createElement(Ro,{card:t,actions:n})}),(function(){return(0,S.pipe)(t.activeAlert.extraProperties.fluencyMessage,y.fold((function(){return h.createElement(Ro,{card:t,actions:n})}),(function(e){return h.createElement(No,{fluencyLabel:e})})))})))};function Io(e,t,n){n.next({type:E.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}var Ao,ko=function(e){var t=e.card,n=e.actions,r=h.useContext(Ze.m.Context).card.matchesNavigation;return h.createElement(g.F.Fragment,null,(0,S.pipe)(t,A.U((function(e){return h.createElement("div",{key:e.activeAlert.id,className:ma.bundleNavWrapper},h.createElement(Oe.XY,{className:ma.bundleTitle},C.X.bundleTitle(e)),h.createElement("div",{className:ma.bundleNavMatchesRow},h.createElement(je.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:ma.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:function(){return Io("left",e,n)}},h.createElement(Fe.JO.Arrow,{className:ma.bundleNavLeftButtonIcon})),h.createElement(Oe.ck,{className:ma.bundleNavCount},r.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),h.createElement(je.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:ma.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:function(){return Io("right",e,n)}},h.createElement(Fe.JO.Arrow,{className:ma.bundleNavRightButtonIcon}))))}))))},Eo=function(e){var t=e.card,n=e.actions,r=e.isChecking;return h.createElement(h.Fragment,null,(0,S.pipe)(t.renderOptions.layoutDensity,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return Ft.bZ.isRated(t.activeAlert)?h.createElement(h.Fragment,null,h.createElement(ro,{card:t}),h.createElement(vo,{text:t.activeAlert.miniCardTitle})):h.createElement(bo,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions},h.createElement(vo,{text:t.activeAlert.miniCardTitle}))}),(function(){return h.createElement(h.Fragment,null,h.createElement(bo,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),h.createElement(go,{text:t.activeAlert.title}),h.createElement(no,{card:t,isChecking:r}))}))),h.createElement(to,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity}))},To=function(e){var t=h.useContext(Ze.m.Context),n=t.card.onboarding[e.type],r=n.title,i=n.content;return h.useLayoutEffect((function(){return function(){return e.actions.next({type:E.l.Type.onboardingClose,value:e.type})}}),[]),h.createElement(mn.AdHoc,{key:"new-notification",title:h.createElement(h.Fragment,null,r,h.createElement(Dt.Regular,{className:ma.newLabel},t.new)),className:ma.newCheckNotification,onClose:e.onClose},i)},Ro=function(e){var t=e.actions,n=e.card,r=h.useContext(Ze.m.Context);return Mn.P.useEffectOnDidMount((function(){n.meta.showMuteQuotedAdvice&&t.next({type:E.l.Type.muteQuotedAdviceShow})})),n.meta.showMuteQuotedAdvice?h.createElement(Ao.Base,{className:na},h.createElement("span",null,r.card.muteCitedText(h.createElement("a",{"data-name":"open-preferences-link",onClick:function(){return t.next({type:E.l.Type.openPreferences})}},r.documentSettings.editorSettings))),h.createElement(je.zx,{name:"dismiss-mute-quoted-advice",onClick:function(){return t.next({type:E.l.Type.dismissMuteQuotedAdvice})}},h.createElement(Fe.JO.Close,null))):null},Lo=function(e){var t=e.actions,n=e.card,r=h.useContext(Ze.m.Context),i=n.activeAlert.extraProperties.hasAddToDictionary?r.anonymousUserAddToDictionarySignInPrompt:r.anonymousUserGenericSignInPrompt;return h.createElement(Ao.Base,{className:ma.anonymousUserNotice},i((function(){t.next({type:E.l.Type.toSignIn})})))},Mo=function(e){var t=e.actions;return h.createElement(Ao.Small,{className:ia},h.createElement(Fe.JO.PaidLink,{className:ma.iconWrapper,width:12}),h.useContext(Ze.m.Context).premiumFreeTrial((function(){t.next({type:E.l.Type.premiumTrialFooterCtaClick})})))},No=function(e){var t=e.fluencyLabel,n=h.useContext(Ze.m.Context).card.fluency,r=Object.keys(Rt.n5.PrimaryLanguage).filter((function(e){return e!==Rt.n5.PrimaryLanguage.Other})).map((function(e){return e.toLowerCase()})),i=t.toLowerCase(),o=(0,S.pipe)(y.fromNullable(r.find((function(e){return i.includes(e)}))),y.map(Nt.kC),y.getOrElse((function(){return"multilingual"})),n.cardFooter);return h.createElement(Oe.x4,{className:ma.fluencyNotice},o,h.createElement(Rn.u,{title:n.tooltip},h.createElement(Fe.JO.Info,{width:10,className:ma.fluencyInfo})))};!function(e){function t(e){return function(t){var n=t.children,r=t.className;return h.createElement(e,(0,m.__assign)({},(0,g.Sh)(ma.cardFooter,r)),n)}}e.Small=t(Oe.x4),e.Base=t(Oe.XY)}(Ao||(Ao={}));var Po,Fo,Oo=function(e){var t=e.card,n=e.actions;return h.createElement(Ao.Small,{className:t.renderOptions.upgradeDemoPremiumNotice===Bt.YH.yellow?ma.demoPremiumNoteYellow:ma.demoPremiumNoteGray},h.useContext(Ze.m.Context).demoPremiumNote((function(){n.next({type:E.l.Type.toUpgrade})})))},Bo=function(e){var t=e.card,n=e.actions,r=h.useContext(Ze.m.Context),i=(0,S.pipe)(t.activeAlert.extraProperties.takeaway,y.chain((function(e){return e.feedback}))),o=y.isSome(i);return h.createElement("div",{className:ma.takeawayFooter},r.card.takeaway.feedback,h.createElement(je.zx.Ghost,{name:"takeaway-like",title:r.card.takeaway.yes,className:ma.takeawayFooterButtonGhost,disabled:o,active:Mt.r3(Lt.TO.TAKEAWAY_LIKE)(i),onClick:yt.hz((function(){return n.next({type:E.l.Type.takeawayFeedback,alertId:t.activeAlert.id,feedbackType:Lt.TO.TAKEAWAY_LIKE})}))},h.createElement(Fe.JO.OkCircle,null)),h.createElement(je.zx.Ghost,{name:"takeaway-dislike",title:r.card.takeaway.no,className:ma.takeawayFooterButtonGhost,disabled:o,active:Mt.r3(Lt.TO.TAKEAWAY_DISLIKE)(i),onClick:yt.hz((function(){return n.next({type:E.l.Type.takeawayFeedback,alertId:t.activeAlert.id,feedbackType:Lt.TO.TAKEAWAY_DISLIKE})}))},h.createElement(Fe.JO.MinusCircle,null)))},Do={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",textDecoration:"none",$nest:{"&:link, &:visited":{color:Ne.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:T.g_+", "+T.xL},"& ul":{margin:w.u.rem(.75)+" 0 0",padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:w.u.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:w.u.rem(.5)}}},Wo={lineHeight:w.u.rem(1.3125)},Uo={$nest:{"& i":{color:Ne.Il.CoreNeutral50},"& > * + *":{marginTop:w.u.rem(.75)}}},Ho={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:Pe.kl}}},zo={marginTop:w.u.important(0),lineHeight:w.u.rem(1.125)},Xo={fontSize:w.u.rem(Ne.xv.SubheadingSize),lineHeight:w.u.rem(Ne.xv.SubheadingLineHeight)},Go={width:w.u.rem(2),height:w.u.rem(2)},Vo={position:"absolute",top:"calc(50% - "+w.u.rem(1)+")",left:"calc(50% - "+w.u.rem(1)+")",width:w.u.rem(2),height:w.u.rem(2),transition:"opacity .2s"},Yo={marginLeft:w.u.rem(.5),backgroundColor:Ne.Il.CoreGreen50,color:Ne.Il.CoreNeutral0,fontWeight:600},qo={position:"absolute",marginTop:w.u.rem(-8.5),marginLeft:w.u.rem(-2),$nest:{"&:after":{position:"absolute",bottom:w.u.rem(-.525),left:w.u.rem(.7),borderTop:w.u.rem(.625)+" solid "+Ne.Il.BackgroundNotification,borderRight:w.u.rem(.5)+" solid transparent",borderLeft:w.u.rem(.5)+" solid transparent",content:"' '"}}},$o={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},Zo={position:"absolute",top:w.u.rem(.75),left:w.u.rem(.4)},jo={color:Ne.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:Ne.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:Ne.Il.CoreBlue50},"&:hover":{borderBottom:"1px solid "+Ne.Il.CoreBlue40,color:Ne.Il.CoreBlue40}}}}},Jo={display:"flex",borderRadius:T.LB+" "+T.LB+" "+w.u.rem(T.Jr)+" "+w.u.rem(T.Jr),color:Ne.Il.CoreNeutral50,padding:w.u.rem(.5)+" "+w.u.rem(.75)+" "+w.u.rem(.5)+" "+w.u.rem(1),fontSize:w.u.rem(.6875),lineHeight:w.u.rem(1.125)},Ko={padding:"0 "+w.u.rem(.6),minWidth:w.u.rem(.625),minHeight:w.u.rem(.625)},Qo={display:"grid",gridTemplateColumns:"auto min-content min-content",alignItems:"center",columnGap:w.u.rem(.25),borderRadius:T.LB+" "+T.LB+" "+w.u.rem(T.Jr)+" "+w.u.rem(T.Jr),background:Ne.Il.CoreNeutral10,color:Ne.Il.CoreNeutral50,padding:w.u.rem(.5)+" "+w.u.rem(1)+" "+w.u.rem(.5)+" "+w.u.rem(1),fontSize:w.u.rem(.75),lineHeight:w.u.rem(1.125)},ea={$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:Ne.Il.CoreNeutral20}}},ta="muteQuotedAdvice",na=w.u.joinClasses([ta,w.u.style({$nest:{"& a":{borderBottom:"1px solid "+Ne.Il.CoreBlue50,color:Ne.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:Ne.Il.CoreBlue50},"&:hover":{borderBottom:"1px solid "+Ne.Il.CoreBlue40,color:Ne.Il.CoreBlue40}}},"& i:hover":{strokeWidth:w.u.px(2)}}})]),ra="premiumFreeTrial",ia=w.u.joinClasses([ra,w.u.style({$nest:{"& svg":{fill:Ne.Il.CoreYellow80},"& a":{fontWeight:800,color:Ne.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:Ne.Il.CoreYellow80},"&:hover":{borderBottom:"1px solid "+Ne.Il.CoreYellow60,color:Ne.Il.CoreYellow60}}}}})]),oa={display:"block",padding:w.u.rem(1)+" "+w.u.rem(1)+" "+w.u.rem(1)+" "+w.u.rem(1.5),width:w.u.percent(100),borderRadius:T.LB+" "+T.LB+" "+w.u.rem(T.Jr)+" "+w.u.rem(T.Jr),$nest:(Xi={"& a":{cursor:"pointer",transition:"color .2s"}},Xi["&.muteQuotedAdvice"]={display:"flex",padding:w.u.rem(1)+" "+w.u.rem(1)+" "+w.u.rem(1)+" "+w.u.rem(2),background:Ne.Il.CoreNeutral10,color:Ne.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},Xi["&.premiumFreeTrial"]={padding:w.u.rem(1)+" "+w.u.rem(1)+" "+w.u.rem(1)+" "+w.u.rem(2),position:"relative",background:Ne.Il.CoreYellow20,color:Ne.Il.CoreNeutral90},Xi)},aa={position:"absolute",top:w.u.rem(.8),left:w.u.rem(.5),minWidth:w.u.rem(1),minHeight:w.u.rem(1)},sa={background:Ne.Il.CoreNeutral1,color:Ne.Il.CoreNeutral50,$nest:{"& a":{borderBottom:"1px solid "+Ne.Il.CoreNeutral50,$nest:{"&:link, &:visited":{color:Ne.Il.CoreNeutral50},"&:hover":{borderBottom:"1px solid "+Ne.Il.CoreNeutral50,color:Ne.Il.CoreNeutral50}}}}},la={background:Ne.Il.CoreYellow10,color:Ne.Il.CoreYellow60,$nest:{"& a":{borderBottom:"1px solid "+Ne.Il.CoreYellow60,$nest:{"&:link, &:visited":{color:Ne.Il.CoreYellow60},"&:hover":{borderBottom:"1px solid "+Ne.Il.CoreYellow60,color:Ne.Il.CoreYellow60}}}}},ca={fontWeight:"bold",fontSize:w.u.rem(.875),lineHeight:w.u.rem(1.125),flex:2},ua={padding:w.u.rem(.625)+" 0 "+w.u.rem(.1875)+" "+w.u.rem(.5),marginBottom:w.u.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},da={fontSize:w.u.rem(.75),lineHeight:w.u.rem(1.125),color:Ne.Il.CoreNeutral90},pa={display:"flex",justifyContent:"flex-end",alignItems:"center",height:w.u.rem(1.5),$nest:{"& > * + *":{marginLeft:w.u.rem(.25)},"& > *":{borderRadius:w.u.rem(T.fx)}}},fa={height:w.u.rem(2),minHeight:w.u.rem(2),width:w.u.rem(2),fill:Ne.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:Ne.Il.CoreBlue50},"&[data-disabled='true']":{fill:Ne.Il.CoreNeutral30}}},ma=w.u.stylesheet({description:[Do],minimalDescription:[Do,Wo],more:[Uo],onboardingNotification:[{display:"block"}],title:[Ho],titleMinimal:[Ho,zo],label:[Xo],dropdownContainer:[Go],spinner:[Vo],spinnerInvisible:[Vo,{opacity:0,pointerEvents:"none"}],newLabel:[Yo],newCheckNotification:[qo],baseNotice:[$o],iconWrapper:[Zo],anonymousUserNotice:[$o,jo],fluencyNotice:[$o,Jo],fluencyInfo:[Ko],takeawayFooter:[Qo],takeawayFooterButtonGhost:[ea],cardFooter:[oa],circleProgress:[aa],circleText:[{display:"none"}],demoPremiumNoteGray:[sa],demoPremiumNoteYellow:[la],bundleTitle:[ca],bundleNavWrapper:[ua],bundleNavCount:[da],bundleNavMatchesRow:[pa],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[fa],bundleNavLeftButtonIcon:[fa,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[fa,{transform:"rotate(270deg)"}]}),ha=w.u.style({margin:w.u.rem(1)+" 0"}),ga=w.u.style({marginLeft:w.u.rem(.5),lineHeight:w.u.rem(1.3125),fontSize:w.u.rem(.875),color:Ne.Il.CoreNeutral90}),va=w.u.style({marginTop:"0 !important",$nest:{"&:not(:last-child)":{marginBottom:w.u.rem(1)}}}),ya=w.u.style({marginTop:"0 !important",marginLeft:w.u.rem(1)}),ba={color:Ne.Il.CoreRed60,fontSize:w.u.rem(.75),lineHeight:w.u.rem(1.125)},wa=w.u.style(ba),Ca=w.u.style(ba,{visibility:"hidden"}),_a=n(31484),Sa=n(34095),xa=n(55935),Ia=n(32952),Aa=n(24209),ka=n(41398),Ea=n(85985),Ta=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=h.useContext(Ze.m.Context);return h.createElement(Na,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:(0,_.constant)(h.createElement(Eo,{card:t,actions:n,isChecking:r})),cardFooter:function(e){return h.createElement(h.Fragment,null,h.createElement(po,{card:t}),h.createElement("div",{className:Ja.fullSentenceCardFooterBtns},h.createElement(uo,{title:o.card.todoAction(t.activeAlert.todoAction),applyMessage:t.activeAlert.todoAction,checkingMessage:t.activeAlert.todoAction,checkingInProgress:e,onClick:yt.hz((function(){n.next({type:E.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:E.l.getCardType(t)})}))})))}})},Ra=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=e.transform,a=h.useContext(Ze.m.Context),s=g.hg.create(!0);return Mn.P.useSubscriptionTo((0,S.pipe)(s,xa.T(1),Fn.b((function(e){return n.next({type:E.l.Type.fullSentenceHighlightChangesToggle,showChanges:e})})))),h.createElement(Na,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:(0,_.constant)(h.createElement(g.F.Fragment,null,h.createElement(bo,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),t.renderOptions.layoutDensity===C.X.RenderOptions.Density.minimal&&h.createElement(Dt.Regular,{className:Ja.minimalBetaLabel},a.beta),h.createElement(Da,{isNew:t.renderOptions.isNew,actions:n}),(0,S.pipe)(t.renderOptions.layoutDensity,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return h.createElement(to,{prefix:h.createElement(Dt.Regular,{className:Ja.betaLabel},a.beta),description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))),h.createElement(_a.T9,{classes:{rendered:Ja.replacement,removing:Ja.replacementHidden},timeout:250,content:s.pipe(Je.a(o,(function(e,n){return(0,S.pipe)(n,y.fold((function(){return x.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:t.id}),null}),(function(n){return h.createElement(Zi,{replacements:n,showDiff:e,layoutDensity:t.renderOptions.layoutDensity})})))})))}),h.createElement(no,{card:t,isChecking:r}))),cardFooter:function(e){return h.createElement(h.Fragment,null,h.createElement(po,{card:t}),h.createElement(g.F.div,{className:Ja.fullSentenceCardFooterBtns},h.createElement(uo,{title:o.pipe(A.U(y.fold((function(){return""}),(function(e){return a.card.todoAction(e.tooltipText)})))),applyMessage:t.activeAlert.todoAction,checkingMessage:t.activeAlert.todoAction,checkingInProgress:e,onClick:yt.hz((function(){n.next({type:E.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:E.l.getCardType(t)})}))}),h.createElement(Sa.Ys,{className:Ja.fullSentenceCardCheckbox,checked:s,name:"set-goals"},a.card.showChangesToggle)))}})},La=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=e.transform,a=h.useContext(Ze.m.Context),s=(0,S.pipe)(t.userInput,y.getOrElse((0,_.constant)("")));return h.createElement(Na,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return h.createElement(h.Fragment,{key:"content"},h.createElement(bo,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),h.createElement(Da,{isNew:t.renderOptions.isNew,actions:n}),h.createElement(g.F.div,{className:e.pipe(A.U((0,v.RN)(Ja.transformContainerInvisible,Ja.transformContainer)))},h.createElement(_a.T9,{classes:{rendered:Ja.replacement,removing:Ja.replacementHidden},timeout:250,content:o.pipe(A.U(y.fold((function(){return x.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:t.id}),null}),(function(e){return h.createElement(ji,{key:"label",gapValue:s,replacements:e,layoutDensity:t.renderOptions.layoutDensity,onFocus:function(){return n.next({type:E.l.Type.focusUserInput,cardId:t.id,kind:"focus"})},onChange:function(e){return n.next({type:E.l.Type.changeUserInput,alertId:t.activeAlert.id,cardId:t.id,userInput:e})},onClick:yt.hz((function(){return n.next({type:E.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:E.l.getCardType(t)})}))})}))))})),h.createElement(Oe.Xk,{className:e.pipe(A.U((0,v.RN)(Ja.transformHint,Ja.transformHintInvisible)))},a.card.updatingSuggestion),h.createElement(no,{card:t,isChecking:r}),(0,S.pipe)(t.renderOptions.layoutDensity,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return h.createElement(to,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},cardFooter:(0,_.constant)(h.createElement(po,{card:t}))})},Ma=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=e.transform,a=h.useContext(Ze.m.Context);return h.createElement(Na,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return h.createElement(h.Fragment,null,h.createElement(bo,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),h.createElement(g.F.div,{className:e.pipe(A.U((0,v.RN)(Ja.transformContainerInvisible,Ja.transformContainer)))},h.createElement(_a.T9,{classes:{rendered:Ja.replacement,removing:Ja.replacementHidden},timeout:250,content:o.pipe(A.U(y.fold((function(){return x.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:t.id}),null}),(function(e){return h.createElement(ho,{rl:e,onClick:function(e){return yt.hz((function(){n.next({type:E.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:e,cardType:E.l.getCardType(t)})}))},layoutDensity:t.renderOptions.layoutDensity})}))))})),h.createElement(Oe.Xk,{className:e.pipe(A.U((0,v.RN)(Ja.transformHint,Ja.transformHintInvisible)))},a.card.updatingSuggestion),h.createElement(no,{card:t,isChecking:r}),(0,S.pipe)(t.renderOptions.layoutDensity,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return h.createElement(to,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},cardFooter:(0,_.constant)(h.createElement(po,{card:t}))})},Na=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=e.cardBody,a=e.cardFooter,s=h.useMemo((function(){var e=g.hg.create(!1),t=new Ia.xQ,n=Aa.T(t.pipe(ka.M(r),Ea.h((function(e){e[0];return e[1]})),Fn.b((function(){return e.set(!0)}))),r.pipe(xa.T(1),Ea.h((function(e){return!e})),Fn.b((function(){return e.set(!1)}))));return{transformHidden:e,onMouseOver:t,transformHiddenObservable:n}}),[]),l=s.transformHidden,c=s.onMouseOver,u=s.transformHiddenObservable;return Mn.P.useSubscriptionTo(u),h.createElement(bt,{visualState:t.visualState,onFocus:function(){return n.next({type:E.l.Type.alertCardShow,cardType:E.l.getCardType(t)})},onMouseOver:function(){n.next({type:E.l.Type.hover,kind:"hover",cardId:t.id}),c.next()},onMouseOut:function(){return n.next({type:E.l.Type.hover,kind:"unhover",cardId:t.id})},theme:(0,m.__assign)({content:i.pipe(A.U((0,v.RN)(Ja.loadingWrapperInvisible,Ja.loadingWrapper)))},Ba(t.renderOptions)),extra:h.createElement(h.Fragment,null,h.createElement(_o,{isChecking:i}),h.createElement(xo,{card:t,actions:n})),body:o(l),mainActions:h.createElement(io,{card:t,feedbackActions:n}),footer:a(l),subActions:h.createElement(fo,{card:t,actions:n})})},Pa=function(e){var t=e.card,n=e.actions,r=e.isChecking;return h.createElement(bt,{visualState:t.visualState,onFocus:function(){return n.next({type:E.l.Type.alertCardShow,cardType:E.l.getCardType(t)})},theme:Ba(t.renderOptions),body:h.createElement(Eo,{card:t,actions:n,isChecking:r}),mainActions:h.createElement(io,{card:t,feedbackActions:n}),footer:h.createElement(po,{card:t}),subActions:h.createElement(fo,{card:t,actions:n}),extra:h.createElement(h.Fragment,null,h.createElement(xo,{card:t,actions:n}))})},Fa=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=e.transform;return C.X.hasTransform(t)?C.X.hasFullSentenceTransform(t)?h.createElement(Ra,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:o}):C.X.hasOneGapTransform(t)?h.createElement(La,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:o}):h.createElement(Ma,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:o}):C.X.isSimple(t)?h.createElement(Ta,{card:t,actions:n,isChecking:r,isCheckingGlobal:i}):h.createElement(Pa,{card:t,actions:n,isChecking:r})},Oa=function(e){return{container:(0,S.pipe)(e,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.cozy)((function(){return Ja.cozyCardContainer}),(function(){return Ja.compactCardContainer})))}},Ba=function(e){return(0,m.__assign)((0,m.__assign)({},Oa(e.layoutDensity)),{wrapper:(0,S.pipe)(e.layoutDensity,C.X.RenderOptions.Density.matchOrDefault(C.X.RenderOptions.Density.minimal)((function(){return Ja.minimalCardWrapper}),(function(){})))})},Da=function(e){return h.createElement(g.F.Fragment,null,e.isNew.pipe(A.U(y.fold(_.constNull,(function(t){return h.createElement(So,{type:t,actions:e.actions,key:"new-notification"})}))),jt.O(null)))},Wa=.25,Ua={opacity:0,pointerEvents:"none"},Ha={transition:"opacity "+w.u.seconds(Wa)},za={transition:"opacity "+w.u.seconds(Wa),transitionDelay:w.u.seconds(Wa)},Xa={position:"absolute",top:w.u.rem(2),color:Ne.Il.CoreNeutral40,lineHeight:w.u.rem(2),transition:"opacity "+w.u.seconds(Wa),transitionDelay:w.u.seconds(Wa)},Ga={transition:"opacity "+w.u.seconds(Wa)},Va={fontSize:w.u.rem(Ne.xv.BodySize),lineHeight:w.u.rem(2.0625)},Ya={marginRight:w.u.rem(.25)},qa={padding:w.u.rem(.75)+" "+w.u.rem(.5)+" "+w.u.rem(.5)+" "+w.u.rem(1)},$a={position:"absolute",top:w.u.rem(.8),right:w.u.rem(1),margin:0},Za={margin:w.u.rem(1)+" 0 "+w.u.rem(1.5),borderRadius:w.u.rem(T.Jr),background:Ne.Il.CoreNeutral0,boxShadow:"0 "+w.u.rem(.625)+" "+w.u.rem(T.mJ)+" 0 rgba(198, 203, 222, .45)"},ja={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:w.u.rem(T.Jr),background:Ne.Il.CoreNeutral0},Ja=(0,m.__assign)((0,m.__assign)({},w.u.stylesheet({invisible:[Ua],loadingWrapper:[Ha],transformContainer:[za],loadingWrapperInvisible:[Ha,Ua],transformContainerInvisible:[za,Ua,{transitionDelay:"initial"}],transformHint:[Xa],transformHintInvisible:[Xa,Ua,{transitionDelay:"initial"}],replacement:[Ga],replacementHidden:[Ga,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[Va],betaLabel:[Ya],minimalCardWrapper:[qa],minimalBetaLabel:[$a],compactCardContainer:[ja]})),{cozyCardContainer:w.u.joinClasses([R.g.cozyCardContainerSelector,w.u.style(Za)])}),Ka=function(e){var t=e.card,n=e.actions,r=h.useContext(Ze.m.Context).card.feedbackForm,i=g.hg.create(void 0),o=g.hg.create(!1);return(0,S.pipe)(t.visualState.transition,y.fromPredicate((function(e){return"feedback_form"===e.type})),y.fold((function(){return x.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",t),null}),(function(e){var a=e.options;return h.createElement(bt,{onFocus:function(){return n.next({type:E.l.Type.alertIgnoreFeedbackFormShow,alertId:t.activeAlert.id})},theme:Ba(t.renderOptions),visualState:t.visualState,body:h.createElement(h.Fragment,null,h.createElement(bo,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),h.createElement(Oe.H4,{className:ha},r.dismissReason),h.createElement(et.Group,{itemWrapperClassName:va,selectedItemIndex:i,items:a.map((function(e){return h.createElement("div",{className:ga},e.text)})),onChange:function(){return o.set(!1)}})),mainActions:h.createElement(h.Fragment,null),footer:h.createElement(h.Fragment,null,h.createElement(g.F.div,{"aria-hidden":o,className:o.view((0,v.RN)(wa,Ca))},r.error),h.createElement("div",null,h.createElement(je.zx.Primary,{name:"submitCardFeedbackForm",onClick:function(){var e=i.get();return void 0===e?o.set(!0):yt.hz((function(){return n.next({type:E.l.Type.alertIgnoreFormSubmit,alertId:t.activeAlert.id,reason:a[e].key})}))()}},r.submit),h.createElement(je.zx.Ghost,{className:ya,name:"skipCardFeedbackForm",onClick:yt.hz((function(){return n.next({type:E.l.Type.alertIgnoreFormSubmit,alertId:t.activeAlert.id,reason:"skipped"})}))},r.skip))),subActions:h.createElement(h.Fragment,null)})})))},Qa=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.action,i=e.hasEmoji;return h.createElement("div",(0,m.__assign)({},(0,g.Sh)(n.wrapper,Is.ctaText)),i?h.createElement(Un.d,{emojiClassName:(0,g.Sh)(Is.cardLogo,n.logo).className},r):r)},es=function(e){var t=e.vox,n=e.theme,r=void 0===n?{}:n;return h.createElement(h.Fragment,null,(0,S.pipe)(t.logoUrl,y.map((function(e){return h.createElement(ar,(0,m.__assign)({},(0,g.Sh)(Is.cardLogo,r.logo),{logoUrl:e}))})),y.toNullable),h.createElement(or,(0,m.__assign)({vox:t},(0,g.Sh)(Is.cta,r.label),{isMinimalCard:!1})))},ts=function(e){return[Wn.R.outcomeTypeMatch(e.lensType)({correctness:R.m.dotCorrectness,clarity:R.m.dotClarity,premium:R.m.dotAdvanced,engagement:R.m.dotEngagement,delivery:R.m.dotDelivery,vox:R.m.dotVox}),Is.cta]},ns=function(){var e=h.useContext(Ze.m.Context);return h.createElement(Dt.Regular,{className:Is.newLabel},e.new)};!function(e){e.Bundle=function(e){var t=e.card,n=e.actions,r=ts(t.activeAlert)[0];return h.createElement(Ke.Mini,(0,m.__assign)({},(0,g.Sh)(ws.wrapper,ws.bundleContainer,ws.dot,r),{actions:n,cardId:t.id,getActiveAlert:function(){return t.alerts[0]},bulkAcceptable:t.meta.bulkAcceptable,counter:h.createElement(Oe.CL,{className:ws.alertsCounter},t.alerts.length)}),h.createElement(g.F.div,{className:ws.miniContainer},h.createElement("div",{className:ws.highlightedText},C.X.bundleTitle(t))))},e.Standard=function(e){var t=e.card,n=e.actions,r=ts(t.activeAlert),i=r[0],o=r[1];return h.createElement(Ke.Mini,(0,m.__assign)({},(0,g.Sh)(ws.wrapper,ws.dot,i),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert},bulkAcceptable:t.meta.bulkAcceptable}),h.createElement(g.F.div,{className:ws.miniContainer},h.createElement("div",{className:ws.highlightedText},t.activeAlert.highlightTexts[0]),h.createElement("div",{className:ws.middleDot},""),(0,S.pipe)(t.activeAlert.extraProperties.vox,y.map((function(e){return h.createElement(es,{vox:e,theme:{logo:ws.cardLogo}})})),y.getOrElse((function(){return h.createElement(h.Fragment,null,h.createElement(Qa,{hasEmoji:Ot.$.hasTone(t.activeAlert),action:t.activeAlert.miniCardTitle,theme:{wrapper:o,logo:ws.cardLogo}}),Ot.$.isDemoPremium(t.activeAlert)&&h.createElement(Fe.JO.Paid,{width:14,className:Is.premiumIcon}))}))),(0,S.pipe)(t.renderOptions.isNew,A.U((function(e){return y.isSome(e)?h.createElement(ns,{key:"new-label"}):null})))))},e.TwoLined=function(e){var t=e.card,n=e.actions,r=ts(t.activeAlert),i=r[0],o=r[1];return h.createElement(Ke.Mini,(0,m.__assign)({},(0,g.Sh)(ps.wrapper,ps.dot,i),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert},bulkAcceptable:t.meta.bulkAcceptable}),h.createElement("div",{className:ps.miniContainer},(0,S.pipe)(t.activeAlert.extraProperties.vox,y.map((function(e){return h.createElement(es,{vox:e,theme:{logo:ps.cardLogo,label:ps.subTitle}})})),y.getOrElse((function(){return h.createElement(h.Fragment,null,h.createElement(Qa,{hasEmoji:Ot.$.hasTone(t.activeAlert),action:t.activeAlert.miniCardTitle,theme:{wrapper:(0,g.Sh)(o,ps.ctaText,ps.subTitle).className,logo:ps.cardLogo}}),Ot.$.isDemoPremium(t.activeAlert)&&h.createElement(Fe.JO.Paid,{width:14,className:ps.premiumIcon}),Ot.$.isTakeaway(t.activeAlert)&&h.createElement(Fe.JO.Megaphone,{width:16,className:ps.takeawayIcon}))}))),h.createElement("div",{className:as},t.activeAlert.highlightTexts[0])))}}(Fo||(Fo={}));var rs="0 1px 8px rgba(109, 117, 141, .18)",is={$nest:{"&:before":{top:w.u.rem(.85),left:0}}},os="miniTwoLinedHighlightedText",as=w.u.joinClasses([os,w.u.style({overflow:"hidden",marginTop:w.u.rem(-.25),color:Ne.Il.CoreNeutral90,textOverflow:"ellipsis"})]),ss={height:w.u.rem(3.25),borderRadius:w.u.rem(T.Jr),boxShadow:rs,$nest:(Po={"&:hover":{boxShadow:rs}},Po["&:hover .miniTwoLinedHighlightedText"]={borderColor:"transparent"},Po)},ls={top:w.u.rem(.7)},cs={fontWeight:w.u.important(400),fontSize:w.u.rem(.75)},us={position:"absolute",top:w.u.rem(.7),left:w.u.rem(.5),minWidth:"initial",minHeight:"initial",width:w.u.rem(1.25),height:w.u.rem(.85),background:Ne.Il.CoreNeutral0,fill:Ne.Il.CoreYellow50},ds={position:"absolute",top:w.u.rem(.5),left:w.u.rem(.5),minWidth:"initial",minHeight:"initial",background:Ne.Il.CoreNeutral0},ps=w.u.stylesheet({dot:[is],wrapper:[ss],miniContainer:[{flexDirection:"column"}],cardLogo:[ls],subTitle:[cs],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],premiumIcon:[us],takeawayIcon:[ds]}),fs={height:w.u.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},ms={$nest:{"&:before":{top:w.u.px(1),bottom:0,left:0}}},hs={height:w.u.important(w.u.rem(2.5)),borderRadius:w.u.rem(T.Jr)},gs={color:Ne.Il.CoreNeutral50,display:"flex",width:w.u.rem(2),height:w.u.percent(100),justifyContent:"center",alignItems:"center"},vs={overflow:"hidden",color:Ne.Il.CoreNeutral90,textOverflow:"ellipsis"},ys={display:"inline-block",padding:"0 "+w.u.rem(.5)},bs={top:0,bottom:0,left:w.u.rem(.5),margin:"auto"},ws=w.u.stylesheet({wrapper:[fs],dot:[ms],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[hs],alertsCounter:[gs],highlightedText:[vs],middleDot:[ys],cardLogo:[bs]}),Cs={color:Ne.Il.CoreNeutral50,fontWeight:300},_s={position:"absolute",left:w.u.rem(.5),width:w.u.rem(1),height:w.u.rem(1),background:Ne.Il.CoreNeutral0},Ss={marginLeft:w.u.rem(.5)},xs={position:"absolute",top:0,bottom:0,left:w.u.rem(.5),margin:"auto",minWidth:"initial",minHeight:"initial",width:w.u.rem(1),height:w.u.rem(1),background:Ne.Il.CoreNeutral0,fill:Ne.Il.CoreYellow50},Is=w.u.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[Cs],cardLogo:[_s],newLabel:[Ss],premiumIcon:[xs]});function As(e){var t=e.href,n=e.children,r=e.className;return h.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:r,href:t},n)}var ks,Es={MLA:"https://owl.purdue.edu/owl/research_and_citation/mla_style/mla_formatting_and_style_guide/mla_works_cited_electronic_sources.html",APA:"https://owl.purdue.edu/owl/research_and_citation/apa_style/apa_formatting_and_style_guide/reference_list_electronic_sources.html",Chicago:"https://owl.purdue.edu/owl/research_and_citation/chicago_manual_17th_edition/cmos_formatting_and_style_guide/web_sources.html"},Ts={display:"block",color:Ne.Il.CoreNeutral90,fontWeight:"bold"},Rs={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Ls={display:"block",color:Ne.Il.CoreBlue50,fontWeight:"normal"},Ms={color:Pe.VR},Ns={color:Pe.VR},Ps={color:Ne.Il.CoreCyan50,fontWeight:"bold",fontSize:w.u.rem(.9375)},Fs={marginTop:w.u.rem(.3),color:Ne.Il.CoreNeutral90},Os={position:"relative",marginLeft:w.u.rem(-.5)},Bs={position:"absolute",top:0,left:0,display:"flex",margin:w.u.rem(.5625)+" 0 0 "+w.u.rem(.4375),color:Pe.VR,pointerEvents:"none"},Ds={display:"block",padding:w.u.rem(1.4375)+" 0 0 "+w.u.rem(.4375),borderRadius:w.u.rem(T.fx),backgroundColor:Pe.zh,transitionDuration:w.u.seconds(0),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:Pe.jj}}},Ws={display:"flex",color:Ne.Il.CoreBlue50,pointerEvents:"all",alignItems:"center"},Us={minWidth:w.u.rem(1),minHeight:w.u.rem(1),stroke:Ne.Il.CoreBlue50},Hs={width:w.u.percent(100),pointerEvents:"all"},zs={color:Ne.Il.CoreBlue50,textDecoration:"none"},Xs={position:"absolute",right:0,bottom:0,marginLeft:w.u.rem(.5)},Gs={$nest:{"& i":{color:Pe.UE}}},Vs=w.u.stylesheet({plagiarismTitle:[Ts],plagiarismTitleContent:[Rs],titleUrl:[Rs,Ls],titleBy:[Ms],plagiarismP2:[Ns],percent:[Ps],textToCopy:[Rs,Fs],referenceWrapper:[Os],referenceData:[Bs],copyableReference:[Ds],citationStyleSelect:[Ws],citationStyleIcon:[Us],citationStyleDdlButton:[Hs],descriptionLink:[zs],expandBtn:[Xs],more:[Gs]}),Ys=function(e){return yt.yG(e,{allowedTags:["b","i","br"]})},qs=function(e){var t=e.card,n=h.useContext(Ze.m.Context);return h.createElement(Oe.XY,{className:Vs.plagiarismP2},n.plagiarism.percentileDescription(h.createElement("span",{className:Vs.percent},t.meta.percentile,"%")))},$s=function(e){var t=e.title,n=e.url;return h.createElement(Oe.Xk,{className:Vs.plagiarismTitle},h.createElement("div",(0,m.__assign)({className:Vs.plagiarismTitleContent},Ys(t))),(0,S.pipe)(n,y.map((function(e){return h.createElement(je.zx,{name:"url-button",href:e,target:"_blank",rel:"noopener noreferrer",styleType:Oe.ZT.Type.Base,className:Vs.titleUrl},e)})),y.toNullable))},Zs=function(e){var t=e.title,n=e.authors;return h.createElement(Oe.Xk,{className:Vs.plagiarismTitle},h.createElement("div",(0,m.__assign)({className:Vs.plagiarismTitleContent},Ys(t))),(0,S.pipe)(n,y.map((function(e){return h.createElement(Oe.XY,{className:Vs.plagiarismTitleContent},"",h.createElement("span",{className:Vs.titleBy},"by"),"",h.createElement("span",(0,m.__assign)({},Ys(e))))})),y.toNullable))},js=function(e){var t=e.alert;return"publication"===t.plagiarismType.source?h.createElement(Zs,{title:t.title,authors:t.plagiarismType.authors}):h.createElement($s,{title:t.title,url:t.plagiarismType.url})},Js=function(){var e,t=h.useContext(Ze.m.Context);return h.createElement(Oe.XY,null,t.plagiarism.cardDescription((e=Vs.descriptionLink,function(t){var n=t.type;return h.createElement(As,{href:Es[n],className:e},n)})))},Ks=function(e){var t=e.card,n=e.dismissActions,r=h.useContext(Ze.m.Context),i=t.alerts.map((function(e){return e.id}));return h.createElement(je.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:yt.hz((function(){return n.next({type:E.l.Type.dismissBatch,alerts:i})}))},h.createElement(Fe.JO.Ignore,null))},Qs=function(e){var t=e.visualState;return h.createElement(yr,{visualState:t,className:Vs.more},h.createElement(Js,null))},el=function(e){var t=e.onLeftClick,n=e.onRightClick,r=e.currentMatch,i=e.totalMatch,o=e.replaceOneMatch,a=void 0===o||o,s=e.disableOnEnd,l=void 0===s||s,c=e.style,u=h.useContext(Ze.m.Context).card.matchesNavigation;return 0===i?null:1===i&&a?h.createElement("div",(0,m.__assign)({},(0,g.Sh)(rl.matchesRow,c.matchesRow||!1)),h.createElement(Oe.ck,(0,m.__assign)({},(0,g.Sh)(rl.matchesCount,c.matchesCount||!1)),u.numberOfMatches(i))):h.createElement("div",(0,m.__assign)({},(0,g.Sh)(rl.matchesRow,c.matchesRow||!1)),h.createElement(je.zx.Ghost,{disabled:l&&0===r,name:"left",title:u.prev,onClick:t},h.createElement(Fe.JO.Arrow,(0,m.__assign)({},(0,g.Sh)(rl.leftButtonIcon,c.leftButtonIcon||!1)))),h.createElement(Oe.ck,(0,m.__assign)({},(0,g.Sh)(rl.matchesCount,c.matchesCount||!1)),u.currentMatchPosition(r+1,i)),h.createElement(je.zx.Ghost,{disabled:l&&r===i-1,name:"right",title:u.next,onClick:n},h.createElement(Fe.JO.Arrow,(0,m.__assign)({},(0,g.Sh)(rl.rightButtonIcon,c.rightButtonIcon||!1)))))},tl={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:w.u.rem(.25)}}},nl={textTransform:"uppercase",letterSpacing:w.u.px(.8),lineHeight:w.u.rem(2)},rl=w.u.stylesheet({matchesRow:[tl],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[nl]}),il=function(e){var t=e.card,n=e.actions;return h.createElement(el,{onLeftClick:function(){return n.next({type:E.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:"left"})},onRightClick:function(){return n.next({type:E.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:"right"})},currentMatch:t.activeAlertIndex,totalMatch:t.alerts.length,style:{}})},ol=n(57175),al=n(95300),sl=n(50628),ll=function(){function e(){}return e.copy=function(e,t){this._clearSelection();var n=this._createHiddenSpan(e);return this.select(n),this._copy(e,t).then((function(){n.parentElement.removeChild(n)})).catch((function(e){throw n.parentElement.removeChild(n),e}))},e.select=function(e){if(window.getSelection&&document.createRange){var t=window.getSelection();(n=document.createRange()).selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else if("createTextRange"in document.body&&"selection"in document){var n;(n=document.body.createTextRange()).moveToElementText(this),n.select()}},e._clearSelection=function(){var e=window.getSelection?window.getSelection():document.selection;"removeAllRanges"in e?e.removeAllRanges():"empty"in e&&e.empty()},e._createHiddenSpan=function(e){var t=document.createElement("span");return t.setAttribute("style",["all: unset","position: fixed","top -999px","left -999px","opacity: 0","background transparent","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),t.textContent=e,document.body.appendChild(t),t},e._copy=function(e,t){return new Promise((function(n,r){try{(t?window.clipboardData.setData("text",e):document.execCommand("copy"))?n():r(new Error("Copy API doesn't work"))}catch(e){r(e)}}))},e.copyApiAvailable=new al.X(!0),e}();try{Pn.R(window,"click").pipe(sl.P()).subscribe((function(){document.queryCommandSupported("copy")||ll.copyApiAvailable.next(!1)}))}catch(e){ll.copyApiAvailable.next(!1)}!function(e){e.Context=h.createContext(ol.S.invariantContent("CopyToClipboard")),e.ContextMock=function(t){var n=t.children;return h.createElement(e.Context.Provider,{value:function(e){return ll.copy(e,!1)},children:n})}}(ks||(ks={}));var cl,ul=function(e){var t=e.textToCopy,n=e.children;return h.createElement(ks.Context.Consumer,null,(function(e){return h.createElement(je.zx.Flat,{key:"copy_title",name:"copy_title",title:"Click to copy",className:Vs.copyableReference,onClick:function(){return e(t,"referenceCopied")}},n,h.createElement("div",(0,m.__assign)({className:Vs.textToCopy},(r=t,yt.yG(r,{allowedTags:["b","i","br"]})))));var r}))},dl={mla:"MLA",apa:"APA",chicago:"Chicago"},pl=qr.XP(dl),fl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,m.__extends)(t,e),t._renderPublication=function(e){var t=g.hg.create("mla");return h.createElement(g.F.div,{key:"publication",className:Vs.referenceWrapper},t.view((function(n){return h.createElement(h.Fragment,null,h.createElement(ul,{key:"rf1"+n,textToCopy:e.citationStyle[n]}),h.createElement(Oe.x4,{className:Vs.referenceData},h.createElement(Ze.m.Context.Consumer,null,(function(e){return e.plagiarism.publicationReferenceDescription(h.createElement(pn.L,{vAlign:"top",name:"plagiarism",label:h.createElement(je.zx,{name:"citation-style-select",active:!1,className:Vs.citationStyleSelect},dl[n])},pl.map((function(e){return h.createElement(je.zx.Flat,{className:Vs.citationStyleDdlButton,key:e,name:"citation-button-"+e,active:t.view((function(t){return t===e})),onClick:function(){return t.set(e)}},dl[e])}))))}))))})))},t._renderWeb=function(e,t){return h.createElement("div",{key:"web",className:Vs.referenceWrapper},h.createElement(ul,{textToCopy:e+(0,S.pipe)(t.url,y.fold((function(){return""}),(function(e){return". "+e})))},h.createElement(Ze.m.Context.Consumer,null,(function(e){var t=e.plagiarism;return h.createElement(Oe.x4,{className:Vs.referenceData},t.webReferenceDescription)}))))},t.prototype.render=function(){var e=this.props.alert;return"publication"===e.plagiarismType.source?t._renderPublication(e.plagiarismType):t._renderWeb(e.title,e.plagiarismType)},t}(h.Component),ml=function(e){var t=e.card,n=e.actions;return h.createElement(bt,{visualState:t.visualState,onFocus:function(){return n.next({type:E.l.Type.alertCardShow,cardType:E.l.CardType.defaultCard})},theme:Oa(t.renderOptions.layoutDensity),body:h.createElement(h.Fragment,null,h.createElement(qs,{card:t}),h.createElement(js,{alert:t.activeAlert}),h.createElement(fl,{alert:t.activeAlert,feedbackActions:n})),mainActions:h.createElement(Ks,{card:t,dismissActions:n}),footer:h.createElement(Qs,{visualState:t.visualState}),navigation:h.createElement(il,{actions:n,card:t}),subActions:h.createElement(vr,{actions:n,card:t,mode:"mini"})})};!function(e){e.Standard=function(e){var t=e.card,n=e.actions,r=t.alerts[0];return h.createElement(Ke.Mini,(0,m.__assign)({cardId:t.id,getActiveAlert:function(){return r}},(0,g.Sh)(Al.wrapper,Al.dot,Al.dotOutcomesPlagiarism),{actions:n}),h.createElement("div",{className:Al.miniContainer},h.createElement("span",(0,m.__assign)({key:"title"},(0,g.Sh)(Al.text,"publication"===r.plagiarismType.source&&Al.fullText)),r.title),"web"===r.plagiarismType.source?(0,S.pipe)(r.plagiarismType.url,y.map(Nt.Wq),y.filter(v.Dw),y.map((function(e){return h.createElement("span",{key:"url",className:Al.domain}," ",e)})),y.toNullable):(0,S.pipe)(r.plagiarismType.authors,y.map((function(e){return h.createElement("span",{key:"publication",className:Al.publication}," ",e)})),y.toNullable)))},e.TwoLined=function(e){var t=e.card,n=e.actions,r=t.alerts[0],i="web"===r.plagiarismType.source?(0,S.pipe)(r.plagiarismType.url,y.map(Nt.Wq),y.filter(v.Dw)):r.plagiarismType.authors;return h.createElement(Ke.Mini,(0,m.__assign)({cardId:t.id,getActiveAlert:function(){return r}},(0,g.Sh)(bl.wrapper,Al.dotOutcomesPlagiarism,(0,S.pipe)(i,y.fold((function(){return bl.dotInTheMiddle}),(function(){return bl.dot})))),{actions:n}),h.createElement("div",{className:bl.miniContainer},(0,S.pipe)(i,y.map((function(e){return h.createElement("span",{className:bl.subTitle},e)})),y.toNullable),h.createElement("span",(0,m.__assign)({key:"title"},(0,g.Sh)(bl.text)),r.title)))}}(cl||(cl={}));var hl={overflow:"hidden",color:Ne.Il.CoreNeutral90,textOverflow:"ellipsis"},gl={height:w.u.rem(3.5)},vl={overflow:"hidden",marginBottom:w.u.rem(-.25),textOverflow:"ellipsis",fontSize:w.u.rem(.75)},yl={$nest:{"&:before":{top:w.u.rem(.85),bottom:0}}},bl=w.u.stylesheet({text:[hl],wrapper:[gl],miniContainer:[{display:"flex",flexDirection:"column"}],dotInTheMiddle:[{top:0,bottom:0,left:0}],subTitle:[vl],dot:[yl]}),wl={overflow:"hidden",color:Ne.Il.CoreNeutral90,textOverflow:"ellipsis"},Cl={maxWidth:w.u.percent(100),flexShrink:0},_l={height:w.u.rem(3)},Sl={overflow:"hidden",maxWidth:w.u.percent(100),textOverflow:"ellipsis",flexShrink:0},xl={$nest:{"&:before":{top:w.u.px(1),bottom:0}}},Il={$nest:{"&:before":{backgroundColor:Ne.Il.CoreCyan50}}},Al=w.u.stylesheet({text:[wl],fullText:[Cl],wrapper:[_l],miniContainer:[{display:"flex"}],domain:[Sl],publication:[{overflow:"hidden",textOverflow:"ellipsis"}],dot:[xl],dotOutcomesPlagiarism:[Il]});function kl(e,t,n){var r=t.activeAlert,i=t.activeHighlightIndex,o=r.getHighlightRanges(),a=(i+("left"===e?o.length-1:1))%o.length;n.next({type:E.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:a},direction:e})}var El,Tl=function(e){var t=e.card,n=e.actions,r=e.selectedLabelIndex,i=e.isChecking,o=h.useContext(Ze.m.Context),a=g.hg.create(!1);return Mn.P.useSubscriptionTo(i.pipe(Fn.b((function(e){return a.set(e)})))),h.createElement(uo,{applyMessage:t.activeAlert.todoAction,checkingMessage:o.card.checking,title:o.card.todoAction(t.activeAlert.todoAction),checkingInProgress:a,onClick:function(){n.next({type:E.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:r.get(),cardType:E.l.getCardType(t)})}})},Rl=function(e){var t=e.card,n=e.actions;return h.createElement(el,{onLeftClick:function(){return kl("left",t,n)},onRightClick:function(){return kl("right",t,n)},currentMatch:t.activeHighlightIndex,totalMatch:t.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}})},Ll=function(e){var t=e.activeAlert,n=e.selectedLabelIndex,r=e.actions,i=h.useContext(Ze.m.Context);return h.createElement("div",{className:Mr.optionsContainer},t.labels.map((function(e,t){return h.createElement(h.Fragment,{key:"option-"+t},h.createElement(et.Item,{className:Mr.optionLabel,onChange:function(){n.set(t),r.next({type:E.l.Type.alternativeReplacementRadioButtonClick,index:t})},checked:n.view((function(e){return e===t}))},h.createElement(Oe.XY,{className:Mr.optionRadio},e.label)),h.createElement(Oe.x4,{className:Mr.optionExample},e.replacementTexts.join("; ")),h.createElement(Oe.x4,{className:Mr.optionSecondaryAttribute},i.card.matchesNavigation.numberOfMatches(e.matches)))})))},Ml=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=g.hg.create(0);return h.createElement(bt,{visualState:t.visualState,onFocus:function(){return n.next({type:E.l.Type.alertCardShow,cardType:E.l.getCardType(t)})},theme:(0,m.__assign)({wrapper:Mr.superWrapper,content:i.pipe(A.U((0,v.RN)(Mr.loadingWrapperInvisible,Mr.loadingWrapper)))},Oa(t.renderOptions.layoutDensity)),extra:h.createElement(_o,{isChecking:i}),body:h.createElement(h.Fragment,null,h.createElement(bo,{alert:t.activeAlert,options:t.renderOptions,meta:t.meta}),h.createElement(yo,{alert:t.activeAlert}),h.createElement(no,{card:t,isChecking:r}),h.createElement(to,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity}),h.createElement(Ll,{activeAlert:t.activeAlert,selectedLabelIndex:o,actions:n})),mainActions:h.createElement(io,{card:t,feedbackActions:n}),footer:h.createElement(h.Fragment,null,h.createElement(po,{card:t}),h.createElement(Tl,{selectedLabelIndex:o,card:t,actions:n,isChecking:r})),navigation:h.createElement(Rl,{card:t,actions:n}),subActions:h.createElement(vr,{actions:n,card:t,mode:"mini"})})};!function(e){e.Full=function(e){var t=e.card,n=e.actions,r=C.X.useCardStates(t),i=r.isChecking,o=r.isCheckingGlobal,a=r.transform;return h.createElement(g.F.Fragment,null,t.pipe(I.x((function(e,t){return e.hashCode()===t.hashCode()})),A.U((0,_.flow)(C.X.match({plagiarism:function(e){return h.createElement(ml,{card:e,actions:n})},super:function(e){return h.createElement(Ml,{card:e,actions:n,isChecking:i,isCheckingGlobal:o})},default:function(e){return h.createElement(Fa,{card:e,actions:n,isChecking:i,transform:a,isCheckingGlobal:o})}}),C.X.foldCard))))},e.Mini=function(t){var n=t.card,r=t.actions;return h.createElement(g.F.Fragment,null,n.pipe(A.U((function(t){return t.renderOptions.showBundle?h.createElement(e.MiniSingleLined,{card:t,actions:r}):C.X.RenderOptions.Density.matchL((function(){return h.createElement(e.MiniSingleLined,{card:t,actions:r})}),(function(){return h.createElement(e.MiniTwoLined,{card:t,actions:r})}),(function(){return h.createElement(e.MiniTwoLined,{card:t,actions:r})}))(t.renderOptions.layoutDensity)}))))},e.MiniSingleLined=function(e){var t=e.card,n=e.actions;function r(e){return e.renderOptions.showBundle?h.createElement(Fo.Bundle,{card:e,actions:n}):h.createElement(Fo.Standard,{card:e,actions:n})}return(0,S.pipe)(t,C.X.match({plagiarism:function(e){return h.createElement(cl.Standard,{card:e,actions:n})},super:r,default:r}),C.X.foldCard)},e.MiniTwoLined=function(e){var t=e.card,n=e.actions;function r(e){return h.createElement(Fo.TwoLined,{card:e,actions:n})}return(0,S.pipe)(t,C.X.match({plagiarism:function(e){return h.createElement(cl.TwoLined,{card:e,actions:n})},super:r,default:r}),C.X.foldCard)},e.Success=Ke.Success,e.FeedbackForm=function(e){var n=e.cardData,r=e.actions;function i(e){return h.createElement(Ka,{card:e,actions:r})}return(0,S.pipe)(n,C.X.match({plagiarism:function(e){return t("CardComponent").getLogger("FeedbackForm").error("Tried to draw a feedback form for a plagiarism alert",e),null},default:i,super:i}),C.X.foldCard)};var t=(0,v.HP)(x.C8.Logging.getLogger)}(El||(El={}));var Nl,Pl,Fl,Ol=n(70276);!function(e){e.Full=function(e){var n=e.card,o=e.actions,a=C.X.useCardStates(n),s=a.isChecking,l=a.isCheckingGlobal,c=a.transform,u=function(e){return i("CardBundle").error("rendering fallback for card",e),null},d=n.pipe((function(e){return e.lift(new Ol.G((function(e){return e.activeAlert.id})))}),Jt.w((function(e){return e.pipe(I.x((function(e,t){return e.activeAlertIndex===t.activeAlertIndex})),A.U((function(t){return{activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,S.pipe)(e,I.x((function(e,t){return e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId})),qt.shareReplay({bufferSize:1,refCount:!0}))}})))})));return h.createElement(r,{card:n,actions:o},h.createElement(t,{state:d,stateToClassMapper:function(e,t){return e?e.activeAlertId===t.activeAlertId||e.activeAlertIndex===t.activeAlertIndex?{prev:(0,_a.EJ)(lc.inBundleToUpdatedCardOld),next:(0,_a.EJ)(lc.inBundleToUpdatedCardNew)}:e.activeAlertIndex<t.activeAlertIndex?{prev:(0,_a.EJ)(lc.inBundleToNextCardOld),next:(0,_a.EJ)(lc.inBundleToNextCardNew)}:{prev:(0,_a.EJ)(lc.inBundleToPrevCardOld),next:(0,_a.EJ)(lc.inBundleToPrevCardNew)}:{prev:(0,_a.EJ)(""),next:(0,_a.EJ)("")}}},(function(e){return h.createElement(g.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:_.constVoid},(0,S.pipe)(e.state.card,A.U((0,_.flow)(C.X.match({plagiarism:u,super:u,default:function(t){var n=t.alerts.length,r=1===n?lc.bundleInnerContainer:2===n?lc.bundleInnerContainer2Cards:lc.bundleInnerContainerNCards;return h.createElement(g.F.div,{className:r},h.createElement(Fa,{card:t,actions:o,isChecking:s,transform:"prev"===e.type?$t.of(t.transform):c,isCheckingGlobal:l}))}}),C.X.foldCard))))})))};var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,m.__extends)(t,e),t}(_a.l5),n=function(e){var t=e.alertCount;return 1===t?h.createElement(h.Fragment,null):2===t?h.createElement("div",{className:lc.bundleFakeCard1}):h.createElement(h.Fragment,null,h.createElement("div",{className:lc.bundleFakeCard1}),h.createElement("div",{className:lc.bundleFakeCard2}))},r=function(e){var t=e.children,r=e.card,i=e.actions;return h.createElement(g.F.div,{className:lc.bundleCardWrapper},h.createElement(ko,{card:r,actions:i}),h.createElement(g.F.div,{className:lc.cardBundleContainer},t,(0,S.pipe)(function(e){return(0,S.pipe)(e,A.U((function(e){return C.X.isBundle(e)?y.some(e.alerts.length):y.none})))}(r),A.U(y.map((function(e){return h.createElement(n,{key:e,alertCount:e})}))),A.U(y.toNullable))))},i=(0,v.HP)(x.C8.Logging.getLogger)}(Fl||(Fl={}));var Bl,Dl,Wl,Ul=.25,Hl="0 1px 8px rgba(109, 117, 141, .18)",zl=w.u.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),Xl=w.u.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),Gl=w.u.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),Vl=w.u.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),Yl=w.u.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),ql={position:"relative",borderRadius:w.u.rem(T.Jr),background:Ne.Il.CoreNeutral0,boxShadow:Hl,zIndex:2},$l={marginTop:w.u.rem(.75)},Zl={marginTop:w.u.rem(1.25)},jl={position:"absolute",top:w.u.px(-5),right:w.u.rem(.5),left:w.u.rem(.5),zIndex:-1,display:"block",height:w.u.percent(100),borderRadius:w.u.rem(T.Jr),backgroundColor:Ne.Il.CoreNeutral1,boxShadow:Hl,content:"' '"},Jl={position:"absolute",top:w.u.px(-10),right:w.u.rem(1),left:w.u.rem(1),zIndex:-2,display:"block",height:w.u.rem(2),borderRadius:w.u.rem(T.Jr),backgroundColor:Ne.Il.CoreNeutral10,boxShadow:Hl,content:"' '"},Kl={borderRadius:w.u.rem(.75),background:Ne.Il.CoreNeutral20,margin:w.u.rem(-.25)+" "+w.u.rem(-.25),padding:w.u.rem(.25)+" "+w.u.rem(.25),$nest:(Nl={},Nl["& ."+R.g.cozyCardContainerSelector]={margin:0,boxShadow:"none"},Nl["& ."+R.g.fullCardSelector]={padding:w.u.rem(.75)+" "+w.u.rem(.5)+" "+w.u.rem(.5)+" "+w.u.rem(1)},Nl["& [role=dropdown-list]"]={transform:"translateY("+w.u.rem(-.5)+")"},Nl)},Ql={position:"absolute",top:w.u.rem(.8),right:w.u.rem(1),margin:0},ec={borderRadius:w.u.rem(T.Jr),background:Ne.Il.CoreNeutral0,boxShadow:Hl},tc={display:"block",position:"absolute",top:0,$nest:(Pl={},Pl["& ."+R.g.bundleInnerContainerSelector]={margin:0},Pl)},nc={animation:Yl+" "+w.u.seconds(Ul)+" ease-out"},rc={animation:Gl+" "+w.u.seconds(Ul)+" ease-out"},ic={animation:Xl+" "+w.u.seconds(Ul)+" ease-in"},oc={animation:Vl+" "+w.u.seconds(Ul)+" ease-in"},ac={display:"none",animation:zl+" "+w.u.seconds(Ul)+" ease-in"},sc={animation:zl+" "+w.u.seconds(Ul)+" ease-in"},lc=(0,m.__assign)((0,m.__assign)({},w.u.stylesheet({bundleInnerContainer:[ql],bundleCardWrapper:[Kl],minimalBetaLabel:[Ql],compactCardContainer:[ec],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[tc],inBundleToPrevCardOld:[tc,nc],inBundleToPrevCardNew:[rc],inBundleToNextCardOld:[tc,ic],inBundleToNextCardNew:[oc],inBundleToUpdatedCardOld:[ac],inBundleToUpdatedCardNew:[sc]})),{bundleInnerContainer:w.u.joinClasses([R.g.bundleInnerContainerSelector,w.u.style(ql)]),bundleInnerContainer2Cards:w.u.joinClasses([R.g.bundleInnerContainerSelector,w.u.style(ql,$l)]),bundleInnerContainerNCards:w.u.joinClasses([R.g.bundleInnerContainerSelector,w.u.style(ql,Zl)]),bundleFakeCard1:w.u.joinClasses([R.g.bundleFakeCard1Selector,w.u.style(jl)]),bundleFakeCard2:w.u.joinClasses([R.g.bundleFakeCard2Selector,w.u.style(Jl)])}),cc=function(e){var t=e.onClick,n=e.collapsed,r=h.useContext(Ze.m.Context).priorityList;return h.createElement(je.zx.Tertiary,{name:"card-list-more",className:pc.toggleNonPriority,title:h.createElement("div",{className:pc.tooltip},r.toggleButtonTooltip(n)),onClick:t},n?r.expand:r.collapse)},uc={padding:w.u.rem(.5)+" "+w.u.rem(.25),width:w.u.rem(12.75),whiteSpace:"normal",lineHeight:w.u.rem(1)},dc={$nest:{"&[data-textpos='everywhere']":{marginTop:w.u.rem(1),padding:"0 "+w.u.rem(2)},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:Ne.Il.CoreNeutral10}}},pc=w.u.stylesheet({tooltip:[uc],toggleNonPriority:[dc]}),fc=function(e){var t=e.actions,n=e.visualState,r="added"===n.transition.type;return h.createElement(h.Fragment,null,"hidden"!==n.transition.type&&h.createElement("div",{className:vc.moreBtnContainer},h.createElement(cc,{collapsed:r,onClick:function(){return t.next({type:E.l.Type.toggleNonPriorityCards,nextListState:r?"expanded":"collapsed"})}})))},mc=function(e){var t=e.visualState,n=h.useContext(Ze.m.Context).priorityList;return h.createElement(h.Fragment,null,"rendered"===t.transition.type&&h.createElement("div",{className:vc.hintContainer},h.createElement(Oe.x4,null,n.hint)))},hc={display:"flex",height:w.u.rem(3),alignItems:"center",justifyContent:"center"},gc={padding:w.u.rem(.5),borderRadius:w.u.rem(T.fx),backgroundColor:Ne.Il.CoreNeutral10},vc=w.u.stylesheet({moreBtnContainer:[hc],hintContainer:[gc]});!function(e){e.Card=function(e){return b.UI.Node.make((function(t){var n=t.view,r=n("view");return h.createElement(g.F.Fragment,null,r.pipe(I.x((function(e,t){return e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type})),A.U((function(t){return C.X.Priority.isExpand(t)?h.createElement(fc,{actions:e,visualState:t.visualState}):C.X.Priority.isExpandHint(t)?h.createElement(mc,{visualState:t.visualState}):h.createElement(Ke.Card,{miniCard:h.createElement(El.Mini,{card:r,actions:e}),fullCard:C.X.isBundle(t)?h.createElement(Fl.Full,{card:r,actions:e}):h.createElement(El.Full,{card:r,actions:e}),successCard:h.createElement(El.Success,{isLastCard:n("isLastCard"),actions:e}),feedbackForm:h.createElement(El.FeedbackForm,{cardData:t,actions:e}),actions:e,card:t})}))))}))}}(Bl||(Bl={})),function(e){e.BulkAccept=function(e){return b.UI.Node.make((function(){return null}))}}(Dl||(Dl={})),function(e){e.PriorityToggle=function(e){return b.UI.Node.make((function(){return null}))}}(Wl||(Wl={}));var yc,bc=n(23124),wc=n(95053);!function(e){var t;!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.CardListContent=function(t){return b.UI.List.make(wc.aW.getFoldableWithIndex(),e.Cell(t))},e.CardList=function(t){return b.UI.Knot.make(e.ScrollableBox,{content:e.CardListContent(t)})},e.ScrollableBox=b.UI.Grid.make((function(e){var n=e.notify,r=e.view,i=e.slots;return h.createElement(g.F.div,(0,m.__assign)({},(0,g.Sh)(r("disableUserActions").pipe(A.U((0,v.RN)(_c.disableUserActions,void 0))),_c.scrollContent),{"data-purpose":"scrollable-box",style:{height:r("height")},mount:function(e){return n({kind:t.onMount,element:y.fromNullable(e)})()}}),i.content)})),e.Cell=function(t){return b.UI.Knot.make(e.IdProvider,{cell:b.UI.Knot.make(bc.H.Cell,{item:b.UI.Composite.make(e.CardStyleProvider,b.UI.Union.make("kind",{alertCard:Bl.Card(t),priorityToggle:Wl.PriorityToggle(t),bulkAccept:Dl.BulkAccept(t)}))})})},e.CardStyleProvider=b.UI.Grid.make((function(e){var t=e.slots;return h.createElement("div",{className:_c.cardWrapper},t.children)})),e.IdProvider=b.UI.Grid.make((function(e){var t=e.slots,n=e.state;return h.createElement(g.F.div,{"data-id":n},t.cell)}))}(yc||(yc={}));var Cc={margin:w.u.rem(.5)+" 0",background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:w.u.rem(-.5),width:w.u.rem(.5),height:w.u.percent(100),background:"none",content:"''"}}},_c=w.u.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[Cc]})},23124:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});var r,i=n(59312),o=n(27378),a=n(42726),s=n(19962),l=n(51465),c=n(22823),u=n(13097),d=n(16782),p=n(41398),f=n(66310),m=n(24209),h=n(49708),g=n(85985),v=n(17343),y=n(76974),b=n(13444),w=n(50628),C=n(40151),_=n(2834),S=n(16528),x=n(28043),I=n(60430),A=n(77176),k=n(93508);!function(e){var t,n;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(n=e.ActionKind||(e.ActionKind={})),e.Cell=l.UI.Grid.make((function(e){var r=e.slots,l=e.state,c=e.notify,u=new d.t,E=l.pipe(p.M(u),f.w((function(e){var t=e[0],n=e[1];return t.position.animationInProgress?m.T(h.R(n,"transitionend").pipe(g.h((function(e){return e.target===n&&"transform"===e.propertyName})),v.h(void 0)),y.of(void 0).pipe(b.g(200))).pipe(w.P()):C.c()})),_.b(c({kind:n.completePositionAnimation}))),T=l.pipe(p.M(u),f.w((function(e){var t=e[0],n=e[1];return t.height.watched?S.YC(n).pipe(g.h((function(e){return t.height.value!==e.height||!t.height.isValid||e.height>0}))):C.c()})),x.x(),_.b((function(e){var t=e.height;return c({kind:n.changePosition,height:t})()})));I.P.useSubscriptionTo(m.T(E,T));var L=l.pipe(A.U((function(e){return e.position.top})),A.U((function(e){return s.ux.translateY(e)})),x.x()),M=l.pipe(A.U((function(e){return e.layer===t.front?1:0})),x.x()),N=l.pipe(A.U((function(e){return e.position})),x.x((function(e,t){return e.top===t.top})),A.U((function(e){return e.animationInProgress?R.animate:void 0})),k.O(void 0));return o.createElement(a.F.div,(0,i.__assign)({},(0,a.Sh)(R.item,N),{style:{transform:L,zIndex:M},mount:function(e){null!==e&&u.next(e)}}),r.item)}))}(r||(r={}));var E={position:"absolute",boxSizing:"border-box",width:c.u.percent(100),contain:"layout"},T={transition:"transform "+c.u.seconds(u.v4/1e3)+" linear"},R=c.u.stylesheet({item:[E],animate:[T]})},71831:(e,t,n)=>{"use strict";n.d(t,{g:()=>c});var r=n(489),i=n(73805),o=n(64909),a=n(45442),s=n(42490),l=n(77176),c=function(e,t){return a.Z.fromSideEffect((function(n){var a=n.kind===s.H.Dialogue.Action.Kind.doneClicked?function(e,t){return{kind:t.kind,unmutedCategories:(0,i.pipe)(e.state.get(),o.map((function(e){var t=e.categories;return Array.from(t.values())})),o.getOrElse((function(){return new Array})),r.hX((function(e){return!e.isMuted})),r.UI((function(e){return e.id})))}}(e,n):n;s.H.Dialogue.Action.shouldCloseDialogue(a)&&t.onClose(),e.actionEvents.next(a)}),e.state.pipe(l.U(o.getOrElse((function(){return s.H.Dialogue.State.empty})))))}},17082:(e,t,n)=>{"use strict";n.d(t,{B:()=>q});var r,i,o=n(73805),a=n(51465),s=n(27378),l=n(9261);!function(e){e.close="close"}(r||(r={})),function(e){e.Static=a.UI.Grid.make((function(e){return s.createElement(l.Pj,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:e.notify({kind:r.close})},e.slots.content)}))}(i||(i={}));var c,u=n(42490),d=n(59312),p=n(42726),f=n(43675),m=n(22232),h=n(90351),g=n(22823),v=n(79844),y=n(39499),b=n(41439),w=n(45836),C=n(60430),_=n(77176),S=a.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return C.P.useEffectOnDidMount(n({kind:u.H.Dialogue.Action.Kind.modalOpened})),s.createElement(l.u_,{className:V.wrapper,close:n({kind:u.H.Dialogue.Action.Kind.closeClicked})},s.createElement(l.u_.Header,{className:V.modalHeader},s.createElement(s.Fragment,null,t.header),s.createElement("div",{className:V.subHeader},t.subheader)),s.createElement(l.u_.Body,{name:"mutedModalBody",className:V.modalBody},s.createElement(s.Fragment,null,t.categories)),s.createElement(l.u_.Footer,{className:V.modalFooter},s.createElement(s.Fragment,null,t.footer)))})),x=a.UI.Node.make((function(e){var t=e.view,n=e.notify,r=e.state,i=s.useContext(v.m.Context).mutedAlerts.dialogue.suggestions;return s.createElement(p.F.div,{className:V.categoryRow},s.createElement(w.XY,{className:V.categoryName},t("description")),s.createElement(w.x4,{className:V.categoryCount},(0,o.pipe)(r,_.U((function(e){return e.isMuted?i(e.alertsCount):""})))),s.createElement(p.F.div,{className:V.categoryState},(0,o.pipe)(r,_.U((function(e){return s.createElement(L,{name:"mutedAlertsOnOff_"+e.id,isOn:!e.isMuted,onClick:n({kind:u.H.Dialogue.Action.Kind.categoryClicked,categoryId:e.id,isMuted:!e.isMuted})})})))))})),I=a.UI.List.make(f.A7(),x),A=a.UI.Node.make((function(e){var t=e.view,n=e.notify;return s.createElement(p.F.Fragment,null,(0,o.pipe)(t("count"),_.U((function(e){return s.createElement(R,{count:e,key:"mutedCountInfo"})}))),s.createElement(y.zx.Primary,{name:"mutedModalDone",onClick:n({kind:u.H.Dialogue.Action.Kind.doneClicked})},"Done"))})),k=a.UI.Node.make((function(){var e=s.useContext(v.m.Context).mutedAlerts.dialogue.header;return s.createElement(w.H1,null,e)})),E=a.UI.Node.make((function(){var e=s.useContext(v.m.Context).mutedAlerts.dialogue.subHeader;return s.createElement(w.XY,null,e)})),T=a.UI.Knot.make(S,{header:k,subheader:E,categories:I,footer:A}),R=function(e){var t=e.count,n=s.useContext(v.m.Context).mutedAlerts.dialogue.footerSuggestions;return 0===t?null:s.createElement("div",{className:V.countInfo},s.createElement(b.JO.GreenOk,{className:V.okIcon,width:16}),s.createElement(w.XY,null,n(t)))},L=function(e){var t=e.isOn,n=e.name,r=e.onClick,i=s.useContext(v.m.Context).mutedAlerts.dialogue;return s.createElement(y.zx.Ghost,(0,d.__assign)({},(0,p.Sh)(V.categoryStateButton,t&&X),{name:n,onClick:r}),t?i.off:i.on)},M=(0,o.pipe)(a.UI.squash(T),a.UI.contramapState((function(e){return{categories:e.categories,footer:e}})),a.UI.mapAction((function(e){switch(e.key){case"categories":return e.action.action;case"footer":case"root":return e.action;default:(0,m.vE)(e)}}))),N={display:"flex",flexDirection:"column",minHeight:g.u.rem(23),maxHeight:g.u.rem(33),width:g.u.rem(36),backgroundColor:h.Il.CoreNeutral0,textAlign:"left"},P={padding:"0 "+g.u.rem(2)+" "+g.u.rem(1)+" "+g.u.rem(2)},F={marginBottom:0,paddingBottom:0,backgroundColor:h.Il.CoreNeutral0,flexShrink:0},O={marginTop:g.u.rem(.5625),paddingBottom:g.u.rem(.6875),borderBottom:"1px solid "+h.Il.CoreNeutral20},B={minHeight:g.u.rem(4)},D={display:"flex",color:h.Il.CoreNeutral90,alignItems:"center",flex:1,justifyContent:"flex-start"},W={marginLeft:g.u.rem(-.5)},U={display:"flex",padding:g.u.rem(.75)+" 0",alignItems:"center",$nest:{"&:not(:first-of-type)":{borderTop:"1px solid "+h.Il.CoreNeutral20}}},H={display:"flex",paddingRight:g.u.rem(.25),width:g.u.rem(12.25),color:h.Il.CoreNeutral90,fontWeight:600,lineHeight:g.u.rem(1.3125),justifyContent:"flex-start"},z={display:"flex",paddingRight:g.u.rem(.25),width:g.u.rem(12.25),color:h.Il.CoreNeutral50,lineHeight:g.u.rem(1.3125),justifyContent:"flex-start"},X="isOn",G={marginTop:g.u.rem(-.25),marginBottom:g.u.rem(-.25),color:h.Il.CoreBlue50,textTransform:"none",letterSpacing:0,fontWeight:600,fontSize:g.u.rem(h.xv.BodySize),$nest:(c={"&[data-textpos=everywhere]":{paddingRight:g.u.rem(.5),paddingLeft:g.u.rem(.5)}},c["&."+X]={color:h.Il.CoreRed50},c)},V=g.u.stylesheet({wrapper:[N],modalBody:[P],modalHeader:[F],subHeader:[O],modalFooter:[B],countInfo:[D],okIcon:[W],categoryRow:[U],categoryName:[H],categoryCount:[z],categoryState:[{display:"flex",justifyContent:"flex-end"}],categoryStateButton:[G]}),Y={kind:u.H.Dialogue.Action.Kind.closeClicked},q=(0,o.pipe)(a.UI.Knot.make(i.Static,{content:M}),a.UI.squash,a.UI.contramapState((function(e){return{content:e}})),a.UI.mapAction((function(e){var t=e.action;return t.kind===r.close?Y:t})))},93162:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r,i=n(27378),o=n(42726),a=n(90351),s=n(51465),l=n(22823),c=n(13097),u=n(79844),d=n(39499),p=n(32577),f=n(41439),m=n(77176);!function(e){var t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=s.UI.Node.make((function(e){var n=e.state,r=e.notify,a=i.useContext(u.m.Context).priorityLens,s=o.hg.create(!1);return i.createElement(o.F.Fragment,null,n.pipe(m.U((function(e){var n=e.allAlertsCount,l=e.priorityAlertsCount,c="priority"===e.selectedLens,u=c?l:n;return i.createElement(p.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:k.dropdownContainer,dropdownList:k.dropdownContent},onVisibilityChange:function(e){return s.set(e)},label:i.createElement(o.F.Fragment,null,s.pipe(m.U((function(e){return i.createElement("div",{className:e?k.labelOpened:k.labelClosed},c?a.prioritySuggestion:a.allSuggestion,u>0&&i.createElement("span",{className:k.alertCount}," "," ",u," "),i.createElement(f.JO.Arrow,{direction:e?f.n4.up:f.n4.down,className:k.labelArrow}))}))))},i.createElement(d.zx.Flat,{name:"priorityAlerts",className:c?k.boldLensButton:k.lensButton,onClick:r(t.switchToPriority)},i.createElement(f.JO.Star,{width:12}),a.prioritySuggestion,c?i.createElement(f.JO.Yes,{className:k.checkMarkIcon}):null),c&&l===n?i.createElement("div",{className:k.disabledLensButton},i.createElement(f.JO.Formatting.BulletList,{width:21}),a.disabledAllSuggestion):i.createElement(d.zx.Flat,{name:"allAlerts",className:c?k.lensButton:k.boldLensButton,onClick:r(t.switchToAll)},i.createElement(f.JO.Formatting.BulletList,{width:21}),a.allSuggestion,c?null:i.createElement(f.JO.Yes,{className:k.checkMarkIcon})),i.createElement("div",{className:k.separator}),i.createElement("div",{className:k.description},i.createElement(f.JO.Info,{className:k.descriptionIcon}),i.createElement("div",null,a.description)))}))))}))}(r||(r={}));var h={display:"flex",width:l.u.rem(16)},g={zIndex:c.FY,marginTop:0,fontSize:l.u.rem(.875),lineHeight:l.u.rem(1.3125)},v={display:"flex",boxSizing:"border-box",padding:l.u.rem(.1875)+" "+l.u.rem(.25)+" "+l.u.rem(.1875)+" "+l.u.rem(.25),height:l.u.rem(1.5),borderRadius:l.u.rem(c.fx),color:a.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:l.u.rem(.025),fontSize:l.u.rem(.625),lineHeight:l.u.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:a.Il.CoreNeutral20}}},y={backgroundColor:a.Il.CoreNeutral10},b={color:a.Il.CoreNeutral50,whiteSpace:"pre"},w={minWidth:l.u.rem(1),minHeight:l.u.rem(1),marginLeft:l.u.rem(.5625)},C={padding:"0 "+l.u.rem(.5),color:a.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},_={display:"flex",padding:"0 "+l.u.rem(.5),height:l.u.rem(2),color:a.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},S={margin:l.u.rem(.5)+" "+l.u.rem(1),width:"calc(100% - "+l.u.rem(2)+")",height:l.u.px(1),backgroundColor:a.Il.CoreNeutral20},x={display:"flex",padding:"0 "+l.u.rem(.5)+" "+l.u.rem(.5)+" "+l.u.rem(.5),fontSize:l.u.rem(.75),lineHeight:l.u.rem(1.125),alignItems:"center"},I={marginBottom:"auto",minHeight:l.u.rem(1.25)},A={color:a.Il.CoreBlue60,cursor:"pointer"},k=l.u.stylesheet({dropdownContainer:[h],dropdownContent:[g],labelClosed:[v],labelOpened:[v,y],alertCount:[b],labelArrow:[w],lensButton:[C],disabledLensButton:[_],boldLensButton:[C,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[S],description:[x],descriptionIcon:[I],descriptionLink:[A]})},51100:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r,i,o=n(27378),a=n(42726),s=n(51465),l=n(9261),c=n(59312),u=n(73805),d=n(64909),p=n(94503),f=n(79844),m=n(39499),h=n(34095),g=n(16323),v=n(45836),y=n(90351),b=n(22823),w=n(71031),C=n(13097),_=n(41439),S=function(e){var t=e.upgradeAction,n=e.size,r=e.title,i=e.className,s=r||o.useContext(f.m.Context).goPremium;return o.createElement(m.zx,(0,c.__assign)({name:"upgrade"},(0,a.Sh)(i,"big"===n?O.baseBig:"link"===n?O.link:O.baseSmall),{onClick:t}),"link"===n?o.createElement(_.JO.PaidLink,{width:14,className:O.linkIcon}):o.createElement(_.JO.Paid,{className:"big"===n?O.bigIcon:O.icon}),s)},x={background:y.Il.CoreGreen60,borderRadius:b.u.rem(C.fx),boxShadow:"0 2px 5px "+b.u.color(w.UE).fade(.35).toRGBA().toString(),color:y.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:b.u.rem(C.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:b.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:b.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},I={padding:"0 "+b.u.rem(3)+" 0 "+b.u.rem(2),fontSize:b.u.rem(.8125),lineHeight:b.u.rem(3)},A={padding:"0 "+b.u.rem(2)+" 0 "+b.u.rem(.5),fontSize:b.u.rem(.6875),lineHeight:b.u.rem(2)},k={background:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:b.u.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:b.u.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},E={padding:"0 "+b.u.rem(3)+" 0 "+b.u.rem(2),fontSize:b.u.rem(.8125),lineHeight:b.u.rem(3)},T={padding:"0 "+b.u.rem(2)+" 0 "+b.u.rem(.5),fontSize:b.u.rem(.6875),lineHeight:b.u.rem(2)},R={fill:y.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:y.Il.CoreNeutral0}}},L={marginRight:b.u.rem(.2)},M={color:y.Il.CoreGreen60,fontSize:b.u.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},N={color:y.Il.CoreGreen60},P={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},F={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},O=b.u.stylesheet({base:[x],baseBig:[x,I],baseSmall:[x,A],baseUpHookRedesign:[x,k],baseBigUpHookRedesign:[I,k,E],baseSmallUpHookRedesign:[A,k,T],icon:[R],bigIcon:[R,L],link:[M],linkUpHookRedesign:[M,N],linkIconUpHookRedesign:[P],linkIcon:[F]}),B=n(60430),D=n(2834),W=n(45980),U=.8125,H={display:"flex",flexDirection:"column",maxHeight:"90vh",width:b.u.rem(41.5),backgroundColor:y.Il.CoreNeutral0,textAlign:"left"},z={padding:b.u.rem(1.125)+" "+b.u.rem(2)+" "+b.u.rem(1),paddingBottom:b.u.rem(1)},X={paddingBottom:0,backgroundColor:y.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:"calc(100% - "+b.u.rem(4)+")",height:b.u.px(1),background:y.Il.CoreNeutral20,content:"''"}}},G={display:"block",margin:b.u.rem(U)+" 0",color:y.Il.CoreNeutral90,fontWeight:y.xv.SmallLightWeight,lineHeight:b.u.rem(1.5)},V={minHeight:b.u.rem(4)},Y={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:b.u.rem(1.25),borderBottom:"1px solid "+y.Il.CoreNeutral20}}},q="setGoalsToneButton",$={marginBottom:b.u.rem(-.5),maxWidth:b.u.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:(r={},r["& > ."+q]={margin:"0 0 "+b.u.rem(.5),marginLeft:b.u.important(0),$nest:{"&:not(:last-child)":{marginRight:b.u.rem(.5)}}},r)},Z={width:b.u.rem(7),textTransform:"capitalize",lineHeight:b.u.rem(2)},j={marginTop:b.u.rem(U)},J={margin:"0 0 "+b.u.rem(1.5)+" "+b.u.rem(7)},K={margin:"0 0 "+b.u.rem(1.5)+" "+b.u.rem(7)},Q={display:"flex",width:b.u.percent(100),justifyContent:"space-between"},ee={color:y.Il.CoreNeutral90,fontWeight:300,fontSize:b.u.rem(.8125)},te=b.u.stylesheet({wrapper:[H],modalBody:[z],modalHeader:[X],itemDescription:[G],modalFooter:[V],row:[Y],toneButtons:[$],rowHeader:[Z],extraContent:[j],title:[J],description:[K],image:[{position:"absolute"}],footerWrapper:[Q],checkboxText:[ee]}),ne=function(e){var t=e.name,n=e.items,r=e.sticky,i=e.theme,a=void 0===i?{}:i,s=e.extraContent,l=e.children;return o.createElement("div",{className:te.row},o.createElement("div",null,o.createElement(v.H3,{className:te.rowHeader},t),s),o.createElement("div",null,o.createElement(m.zx.Group,{sticky:r,className:a.buttonsGroup},n.map((function(e){return o.createElement(m.zx.White,(0,c.__assign)({className:a.button,name:"context-"+t+"-"+e.key},e))}))),o.createElement(v.x4,{className:te.itemDescription},l)))},re=function(e){var t=e.items,n=e.current,r=e.shouldDisable,i=e.itemTitle,o=void 0===i?W.identity:i;return{sticky:!0,items:t.map((function(e){return{key:e,active:n.view((function(t){return t===e})),onClick:function(){return n.set(e)},disabled:r&&r(e),children:o(e)}}))}},ie=function(e,t){var n=e.items,r=e.current;return{items:n.map((function(e){return{key:e,active:r.view((function(t){return(0,u.pipe)(t,d.exists((function(t){return t.has(e)})))})),onClick:function(){return r.modify((function(t){var n=(0,u.pipe)(t,d.fold((function(){return new Set}),(function(e){return new Set(e)})));return n.has(e)?n.delete(e):n.add(e),d.some(n)}))},children:t(e)}}))}},oe=function(e){var t=e.blocks,n=e.features,r=e.showOnLoad,i=e.close,a=e.upgrade,s=e.reset,c=e.showOnLoadChanged,u=o.useContext(p.a.Context);return o.createElement(l.u_,{className:te.wrapper},o.createElement(l.u_.Header,{className:te.modalHeader},o.createElement(se,null)),o.createElement(l.u_.Body,{name:"goalsBody",className:te.modalBody},o.createElement(ae,{features:n,upgradeAction:a,blocks:t})),o.createElement(l.u_.Footer,{className:te.modalFooter},o.createElement(le,{supportsSetGoalsLoader:!n.demoMode&&u.has(p.a.Flag.supportsSetGoalsLoader),onDone:i,reset:s,showOnLoad:r,showOnLoadChanged:c})))},ae=function(e){var t=e.blocks,n=e.features,r=e.upgradeAction,i=o.useContext(f.m.Context).goals,s=t.audience,l=t.formality,p=t.domain,m=t.tone,h=t.intent;return o.createElement(o.Fragment,null,o.createElement(ne,(0,c.__assign)({name:"audience"},re(s)),s.current.view((function(e){return e&&i.sections.audience[e]((0,u.pipe)(t.audience.default,d.exists((function(t){return t===e}))))}))),o.createElement(ne,(0,c.__assign)({name:"formality"},re(l)),l.current.view((function(e){return e?i.sections.formality[e]:""}))),o.createElement(ne,(0,c.__assign)({name:"domain"},re((0,c.__assign)((0,c.__assign)({},p),{itemTitle:function(e){return"mail"===e?"email":e}})),{extraContent:o.createElement(a.F.div,{className:te.extraContent},n.isFree?o.createElement(S,{size:"link",upgradeAction:r}):null)}),p.current.view((function(e){return n.isFree?i.sections.domain.free:e?i.sections.domain[e]:""}))),o.createElement(ne,(0,c.__assign)({name:"tone",theme:{buttonsGroup:te.toneButtons,button:q}},ie(m,(function(e){return o.createElement(g.d,{key:e},i.sections.tone.options[e])}))),i.sections.tone.experimental),o.createElement(ne,(0,c.__assign)({name:"intent"},ie(h,(function(e){return i.sections.intent.options[e]}))),i.sections.intent.experimental))},se=function(){var e=o.useContext(f.m.Context).goals;return o.createElement(o.Fragment,null,o.createElement(ce,null),o.createElement(v.H1,{className:te.title},e.title),o.createElement(v.XY,{className:te.description},e.header))},le=function(e){var t=e.supportsSetGoalsLoader,n=e.showOnLoad,r=e.showOnLoadChanged,i=e.reset,s=e.onDone,l=o.useContext(f.m.Context).goals,u=a.hg.create(n);return B.P.useSubscriptionTo(u.pipe(D.b(r))),o.createElement("div",(0,c.__assign)({},(0,a.Sh)(t&&te.footerWrapper)),t&&o.createElement(h.Ys,{checked:u,name:"set-goals"},o.createElement(v.x4,{className:te.checkboxText},l.footer.showModalOnStart)),o.createElement(m.zx.Group,null,o.createElement(m.zx.Ghost,{name:"reset",onClick:i},l.footer.reset),o.createElement(m.zx.Primary,{name:"closeSetContext",onClick:s},l.footer.done)))},ce=function(){return o.createElement("svg",{className:te.image,width:"69",height:"80",viewBox:"0 0 69 80"},o.createElement("g",{fill:"none",fillRule:"evenodd"},o.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),o.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),o.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),o.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),o.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),o.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})))},ue=n(50628),de=n(77176);!function(e){var t;e.Modal=s.UI.Node.make((function(e){var n=e.state,r=e.notify;return B.P.useSubscriptionTo(n.pipe(ue.P(),D.b((function(e){return r({kind:t.open,source:e.source})()})))),o.createElement(a.F.Fragment,null,n.pipe(de.U((function(e){var n=r({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad});return o.createElement(l.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:n},o.createElement(oe,{blocks:e.blocks,features:e.features,close:n,upgrade:r({kind:t.upgrade}),reset:r({kind:t.reset}),showOnLoad:e.showOnLoad,showOnLoadChanged:function(e){return r({kind:t.showOnLoadChanged,value:e})()}}))}))))})),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(i||(i={}))},20403:(e,t,n)=>{"use strict";n.d(t,{q:()=>K});var r,i=n(27378),o=n(42726),a=n(22232),s=n(51465),l=n(79844),c=n(87325),u=n(39499),d=n(9261),p=function(){return i.createElement("svg",{width:"128",height:"177"},i.createElement("defs",null,i.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),i.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),i.createElement("mask",{id:"b",fill:"#fff"},i.createElement("use",{xlinkHref:"#a"})),i.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),i.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),i.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),i.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),i.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})))},f=n(54071),m=n(45836),h=n(77176),g=n(59312),v=n(76024);!function(e){function t(e,t){var n=t/60,r=v.nH(e/n);return r.s=r.h>0&&r.m>10?0:Math.floor(r.s),r}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}}(r||(r={}));var y=n(18208),b=n(64909),w=n(90351),C=n(22823),_=n(71031),S=n(13097),x=n(41439),I=n(73805),A=n(2844),k=n(66310),E=n(93508),T=n(16118),R=n(76974),L=n(13444),M=function(e){var t=e.score,n=e.documentIsEmpty,r=e.sidebarOpen,a=void 0===r?o.hg.create(!0):r,s=e.successIcon,l=e.progressIcon,c=e.zeroIcon,u=void 0===c?null:c,d=t.pipe(h.U(b.map((function(e){return e.rank})))),p=A.aj(t,n,(function(e,t){return(0,I.pipe)(e,b.fold((function(){return!1}),(function(e){return 100===e.rank&&!t})))})),f=a.pipe(k.w((function(e){return e?d.pipe(E.O(b.none),T.G(),k.w((function(e){var t=e[0],n=e[1];return(0,I.pipe)(n,b.fold((function(){return R.of(u)}),(function(e){return p.pipe(E.O(!1),T.G(),k.w((function(n){var r=n[0];return n[1]?R.of(s):(0,I.pipe)(t,b.filter((function(){return!r})),b.fold((function(){return R.of(l(e)).pipe(L.g(1),E.O(l(0)))}),(function(){return R.of(l(e))})))})))})))}))):R.of(null)})),E.O(null));return i.createElement(o.F.Fragment,null,f)},N=n(52479);function P(e){var t=e.value,n=e.className,r=e.leftCustomClass,a=e.rightCustomClass,s=o.hg.create(!1);requestAnimationFrame((function(){return requestAnimationFrame((function(){return s.set(!0)}))}));var l=A.aj(N.Dx(t),s,(function(e,t){return t?Math.max(5,Math.abs(e-50))+"%":0})),c=function(e,t,n){return N.Dx(e).pipe(h.U((function(e){return e<50?t:n})))};return i.createElement(o.F.div,(0,g.__assign)({},(0,o.Sh)(function(e){return N.Dx(e).pipe(h.U((function(e){return e<50?U.leftSideWrapper:U.rightSideWrapper})))}(t),n)),i.createElement(o.F.div,(0,g.__assign)({},(0,o.Sh)(c(t,U.leftSideProgress,U.rightSideProgress),r&&a&&c(t,r,a)),{style:{width:l}})))}!function(e){e.Label=function(e){var t=e.value,n=e.className,r=i.useContext(l.m.Context).performance,o=t>66?r.aboveAverage:t>50?r.average:r.belowAverage;return i.createElement(m.x4,{className:n},o)}}(P||(P={}));var F,O={position:"relative",zIndex:1,display:"flex",width:C.u.percent(100),height:C.u.rem(.25),borderRadius:C.u.rem(S.fx)},B={height:C.u.percent(100),backgroundColor:_.FW,transition:"width .8s ease-in-out 0s"},D={marginRight:C.u.percent(50),borderTopLeftRadius:C.u.rem(.25),borderBottomLeftRadius:C.u.rem(.25)},W={marginLeft:C.u.percent(50),borderTopRightRadius:C.u.rem(.25),borderBottomRightRadius:C.u.rem(.25)},U=C.u.stylesheet({wrapper:[O],leftSideWrapper:[O,{justifyContent:"flex-end"}],rightSideWrapper:[O,{justifyContent:"flex-start"}],progress:[B],leftSideProgress:[B,D],rightSideProgress:[B,W]}),H=n(63979),z={display:"flex",flexDirection:"column",maxHeight:"90vh",width:C.u.rem(32),height:C.u.rem(41),background:w.Il.CoreNeutral0},X={padding:C.u.rem(2.75)+" "+C.u.rem(1)+" 0 "+C.u.rem(2),minHeight:C.u.rem(5.1),height:C.u.rem(5.1),backgroundColor:w.Il.CoreNeutral0},G={marginRight:C.u.rem(1),paddingBottom:C.u.rem(.3),borderBottom:"1px solid "+_.xO},V={padding:"0 "+C.u.rem(1)+" "+C.u.rem(1)+" "+C.u.rem(2)},Y={padding:"0 "+C.u.rem(1.9),minHeight:C.u.rem(4),height:C.u.rem(4)},q={position:"absolute",top:C.u.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},$={display:"flex",flexDirection:"column",marginTop:C.u.rem(7.15),marginBottom:C.u.rem(2),paddingRight:C.u.rem(1),alignItems:"center"},Z={wordSpacing:C.u.rem(.05),fontSize:C.u.rem(.875),lineHeight:C.u.rem(1.5)},j={padding:C.u.rem(1.3)+" "+C.u.rem(2.6),textAlign:"center"},J=C.u.prefixedStylesheet("statistics",{wrapper:[z],modalHeader:[X],modalHeaderUnderline:[G],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[V],modalFooter:[Y],loader:[q],zeroStateContainer:[$],performanceText:[Z],zeroStateText:[Z,j]});!function(e){e.number="number",e.time="time",e.percentage="percentage"}(F||(F={}));var K,Q=function(e){switch(e){case F.number:case F.percentage:return Ae.numberRowData;case F.time:return Ae.timeRowData;default:return(0,a.vE)(e)}},ee=function(e){var t=e.type,n=e.value,r=e.info,o=e.children,s=e.dataName;return i.createElement("div",{className:Ae.row,"data-name":s},i.createElement("div",{className:Q(t)},i.createElement("div",{className:Ae.metricTitle},o),i.createElement("div",{className:Ae.metric},function(e,t){switch(e){case F.number:return(Math.round(10*t)/10).toLocaleString();case F.time:return v.g2(t);case F.percentage:return Math.round(t)+"%";default:return(0,a.vE)(e)}}(t,n))),r&&i.createElement(u.RZ,{title:r}))},te=function(e){var t=e.state,n=i.useContext(l.m.Context).performance,a=t.stats,s=t.score,c=t.documentIsEmpty;return i.createElement(i.Fragment,null,i.createElement("section",{className:Ae.titleSection},i.createElement("div",{className:Ae.titleColumns},i.createElement(o.F.div,(0,g.__assign)({},(0,o.Sh)(J.performanceText,Ae.headerDescription)),100===s.rank?n.score100:n.scoreUnder100(s.rank)),i.createElement(M,{score:R.of(b.some(s)),documentIsEmpty:R.of(c),successIcon:i.createElement(x.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:Ae.checkmark}),progressIcon:function(e){return i.createElement(H.P,{key:"modal-performance-progress",colorType:H.P.ColorType.royalBlue,fontSize:H.P.FontSize.small,percentage:e,theme:ke})}}))),i.createElement("section",{className:Ae.wordCountSection},i.createElement(m.H2,{className:Ae.sectionHeaderUnderline},n.wordCount),i.createElement("div",{className:Ae.wordCountColumns},i.createElement("div",{className:Ae.firstColumn},i.createElement(ee,{type:F.number,value:Math.max(a.chars-1,0)},n.characters),i.createElement(ee,{type:F.number,value:a.words},n.words),i.createElement(ee,{type:F.number,value:a.sentences},y._6(a.sentences,n.sentence,n.sentences))),i.createElement("div",{className:Ae.secondColumn},i.createElement(ee,{type:F.time,value:r.calculateReadingTime(a.words)},n.readingTime),i.createElement(ee,{type:F.time,value:r.calculateSpeakingTime(a.words)},n.speakingTime)))),i.createElement("section",{className:Ae.readabilitySection},i.createElement("div",{className:Ae.sectionHeaderWrapper},i.createElement(m.H2,null,n.readability),i.createElement(m.CL,null,n.sectionTitleDescription)),i.createElement("div",{className:Ae.readabilityColumns},i.createElement("div",{className:Ae.firstColumn},i.createElement(ee,{type:F.number,value:a.wordLength},n.wordLengthTitle),i.createElement(ee,{type:F.number,value:a.sentenceLength},n.sentenceLengthTitle),i.createElement(ee,{type:F.number,value:a.readabilityScore,info:n.readabilityDescription,dataName:"readability"},n.readabilityScore)),i.createElement("div",{className:Ae.secondColumn},i.createElement("div",{className:Ae.row},i.createElement(P,{value:a.wordLengthIndex,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),i.createElement(P.Label,{value:a.wordLengthIndex,className:Ae.progressLabel})),i.createElement("div",{className:Ae.row},i.createElement(P,{value:a.sentenceLengthIndex,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),i.createElement(P.Label,{value:a.sentenceLengthIndex,className:Ae.progressLabel})),i.createElement("div",{className:Ae.verticalPillar}))),i.createElement(m.CL,{className:Ae.readabilityDescr},a.readabilityDescription)),i.createElement("section",null,i.createElement("div",{className:Ae.sectionHeaderWrapper},i.createElement(m.H2,null,n.vocabulary),i.createElement(m.CL,null,n.sectionTitleDescription)),i.createElement("div",{className:Ae.vocabularyColumns},i.createElement("div",{className:Ae.firstColumn},i.createElement(ee,{type:F.percentage,value:a.uniqueWords,info:n.uniqueWords},n.uniqueWordsTitle),i.createElement(ee,{type:F.percentage,value:a.rareWords,info:n.rareWords},n.rareWordsTitle)),i.createElement("div",{className:Ae.secondColumn},i.createElement("div",{className:Ae.row},i.createElement(P,{value:a.uniqueWords,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),i.createElement(P.Label,{value:a.uniqueWords,className:Ae.progressLabel})),i.createElement("div",{className:Ae.row},i.createElement(P,{value:a.rareWords,className:Ae.progressBar,leftCustomClass:Ae.leftProgress,rightCustomClass:Ae.rightProgress}),i.createElement(P.Label,{value:a.rareWords,className:Ae.progressLabel})),i.createElement("div",{className:Ae.verticalPillar})))))},ne={marginBottom:C.u.rem(2.4)},re={display:"flex",marginTop:C.u.rem(.9),marginRight:C.u.rem(1),justifyContent:"space-between"},ie={marginBottom:C.u.rem(1.5)},oe={display:"flex",marginTop:C.u.rem(.8)},ae={marginBottom:C.u.rem(2.4)},se={display:"flex",marginTop:C.u.rem(.8)},le={display:"flex",marginTop:C.u.rem(.8)},ce={flexBasis:C.u.percent(50)},ue={position:"relative",paddingLeft:C.u.rem(.5),flexBasis:C.u.percent(50)},de={display:"flex",height:C.u.rem(2),alignItems:"center"},pe={display:"flex",justifyContent:"space-between"},fe={width:C.u.rem(10),fontFeatureSettings:S.Q9+", "+S.g_},me={width:C.u.rem(13)},he={marginRight:C.u.rem(1),paddingBottom:C.u.rem(.5),borderBottom:"1px solid "+_.xO},ge={width:C.u.percent(80),whiteSpace:"pre-line"},ve={display:"inline-block",color:w.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:C.u.rem(.875),lineHeight:C.u.rem(2)},ye={display:"inline-block",color:w.Il.CoreNeutral90,fontSize:C.u.rem(.875),lineHeight:C.u.rem(2)},be={width:C.u.rem(3.2),height:C.u.rem(3.2),fontWeight:"bold"},we={width:C.u.rem(6),backgroundColor:_.xO},Ce={marginLeft:C.u.rem(1.125)},_e={backgroundImage:_.BZ},Se={backgroundImage:_.Xd},xe={display:"block",paddingTop:C.u.rem(.5)},Ie={position:"absolute",top:C.u.rem(.5),left:C.u.rem(3.5),width:C.u.rem(.0625),height:C.u.rem(3),backgroundColor:_.jj},Ae=C.u.stylesheet({titleSection:[ne],titleColumns:[re],wordCountSection:[ie],wordCountColumns:[oe],readabilitySection:[ae],readabilityColumns:[se],vocabularyColumns:[le],firstColumn:[ce],secondColumn:[ue],row:[de],rowData:[pe],numberRowData:[pe,fe],timeRowData:[pe,me],sectionHeaderUnderline:[he],sectionHeaderWrapper:[he,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[ge],metric:[ve],metricTitle:[ye],checkmark:[{alignItems:"center"}],circleProgressBar:[be],progressBar:[we],progressLabel:[Ce],leftProgress:[_e],rightProgress:[Se],readabilityDescr:[xe],verticalPillar:[Ie]}),ke={radialProgressBar:Ae.circleProgressBar};!function(e){var t;e.ModalView=s.UI.Grid.make((function(n){var r=n.slots,o=n.state,a=(0,n.notify)({kind:t.close});return i.createElement(d.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:a},i.createElement(e.ModalContent,{state:o,downloadButton:r.downloadButton,onClose:a}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=function(t){var n=t.state,r=t.downloadButton,o=t.onClose;return i.createElement(d.u_,{className:J.wrapper},i.createElement(d.u_.Header,{className:J.modalHeader},i.createElement(e.Header,{state:n})),i.createElement(d.u_.Body,{name:"performanceBody",className:J.modalBody,wrapperClassName:n.pipe(h.U((function(e){return e.type===c.g.State.Type.EMPTY?J.modalEmpty:J.modalReady})))},i.createElement(e.Body,{state:n})),i.createElement(d.u_.Footer,{className:J.modalFooter},i.createElement(g,{downloadButton:r,onClose:o})))};var n=function(){var e=i.useContext(l.m.Context);return i.createElement("div",{className:J.zeroStateContainer},i.createElement(p,null),i.createElement("div",{className:J.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=function(e){var t=e.state,n=i.useContext(l.m.Context);return i.createElement(o.F.Fragment,null,t.pipe(h.U((function(e){return i.createElement(m.H2,{key:"statisticsHeader",className:e.type===c.g.State.Type.READY?J.modalHeaderUnderline:""},n.performance.title)}))))};var r=function(){return i.createElement(f.$,{size:64,className:J.loader,variation:"blue"})};e.Body=function(e){var t=e.state;return i.createElement(o.F.Fragment,null,t.pipe(h.U((function(e){switch(e.type){case c.g.State.Type.EMPTY:return null;case c.g.State.Type.LOADING:case c.g.State.Type.ERROR:return i.createElement(r,{key:"statisticsLoading"});case c.g.State.Type.SHORT_CONTENT:return i.createElement(n,{key:"statisticsEmpty"});case c.g.State.Type.READY:return i.createElement(te,{key:"statisticsContent",state:e});default:return(0,a.vE)(e)}}))))};var g=function(e){var t=e.downloadButton,n=e.onClose;return i.createElement(i.Fragment,null,t,i.createElement(u.zx.Primary,{name:"close-stats",onClick:n},"Close"))}}(K||(K={}))},52268:(e,t,n)=>{"use strict";n.d(t,{wK:()=>f,JT:()=>m,hM:()=>h});var r=n(73805),i=n(64909),o=n(8125),a=n(22232),s=n(88903),l=n(45442),c=n(15228),u=n(77176);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}function p(e){switch(e){case c.g.SuccessType.applied:case c.g.SuccessType.large:return"growComplete";default:return"growStart"}}function f(e,t,n){return function(){return e.pipe(u.U((function(e){var r=function(e,t,n){var r=t.successLens;switch(e){case c.g.SuccessType.zero:return r.emptyText;case c.g.SuccessType.small:return r.smallText;case c.g.SuccessType.large:return r.largeText;case c.g.SuccessType.applied:return n?r.fixedTextDemoPremiumUpHook:{title:r.fixedText.titles[(0,o.TN)(9)]};default:return(0,a.vE)(e)}}(e,n,t);return{kind:p(e),caption:i.some(d(r))}})))}}function m(e){return function(){return e.pipe(u.U((function(e){return{kind:p(e),caption:i.none}})))}}function h(e){return l.Z.animatingFlow(e,(function(e){return(0,r.pipe)(e,i.fold((function(){return i.some(s.F2("fadein"))}),(function(){return i.some(s.Hk("fadeout","fadein"))})))}))}},56157:(e,t,n)=>{"use strict";n.d(t,{q:()=>T});var r=n(27378),i=n(73805),o=n(42726),a=n(83078),s=n(90351),l=n(51465),c=n(22823),u=n(45836),d=n(77176),p=l.UI.Node.make((function(){return r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),r.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"}))))})),f=l.UI.Node.make((function(){return r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),r.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"}))})),m=l.UI.Node.make((function(e){var t=e.view;return r.createElement("div",{"data-name":"success-lens-text",className:k.newSuccessText},r.createElement(u.H4,{key:"title"},t("title")),r.createElement("div",{className:k.newSuccessDescription},r.createElement(o.F.div,{className:k.newSuccessDescriptionText},(0,i.pipe)(t("firstLine"),d.U(a.QP)))))})),h=l.UI.Union.asOption(m),g=l.UI.Grid.make((function(e){var t=e.slots;return r.createElement(o.F.div,{className:k.newSuccessContainer},t.image,t.caption)})),v=l.UI.Knot.make(g,{image:p,caption:h}),y=l.UI.Knot.make(g,{image:f,caption:h}),b=l.UI.Union.make("kind",{growStart:v,growComplete:y}),w=c.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),C=c.u.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),_={animation:w+" 300ms linear forwards"},S={position:"absolute",top:0,width:c.u.percent(100),animation:C+" 200ms linear forwards"},x={width:c.u.percent(100),marginTop:c.u.rem(.5)},I={marginTop:c.u.rem(.25)},A={fontSize:c.u.rem(s.xv.NewSuccessDescriptionSize),color:s.Il.CoreNeutral50,letterSpacing:s.xv.NewSuccessDescriptionLetterSpacing,lineHeight:c.u.rem(s.xv.NewSuccessDescriptionLineHeight),fontWeight:s.xv.NewSuccessDescriptionWeight},k=c.u.stylesheet({success_fadein:[_],success_fadeout:[S],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[x],newSuccessDescription:[I],newSuccessDescriptionText:[A]}),E=l.UI.Transition.make({fadein:k.success_fadein},{fadeout:k.success_fadeout}),T=l.UI.Animated.make(E,b)},45440:(e,t,n)=>{"use strict";n.d(t,{r:()=>v});var r,i=n(27378),o=n(73805),a=n(64909),s=n(51465),l=n(22823),c=n(79176),u=n(79844),d=n(41439),p=n(45836),f=s.UI.Grid.make((function(e){var t=e.slots;return i.createElement("div",{className:C.grid},i.createElement("div",{className:C.iconWrapper},t.icon),i.createElement("div",{className:C.titleWrapper},t.title),i.createElement("div",{className:C.bottomWrapper},t.bottom))})),m=s.UI.Node.make((function(){var e=i.useContext(u.m.Context).successLens.paidView;return i.createElement(p.H4,null,e.title)})),h=s.UI.Node.make((function(){return i.createElement(d.JO.GreenOk,{width:32})})),g=s.UI.Knot.make(f,{icon:h,title:m,bottom:s.UI.Union.make("kind",(r={},r[c.n.State.hidden]=s.UI.Node.empty,r[c.n.State.expanded]=c.n.TogglableExpandedPanel,r))}),v=(0,o.pipe)(s.UI.squash(g),s.UI.contramapState((function(e){return(0,o.pipe)(e,a.fold((function(){return{bottom:{kind:c.n.State.hidden}}}),(function(e){return{bottom:{kind:c.n.State.expanded,showCloseButton:!1,alertsState:e}}})))}))),y={marginTop:l.u.rem(3.5)},b={marginTop:l.u.rem(1.375)},w={marginTop:l.u.rem(2.675)},C=l.u.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[b],bottomWrapper:[w]})},79126:(e,t,n)=>{"use strict";n.d(t,{Q:()=>d});var r=n(45980),i=n(64909),o=n(22232),a=n(77176),s=n(66265),l=n(93508),c=n(66310),u=n(79176);function d(e){return(0,r.flow)(a.U((function(e){switch(e.key){case u.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(u.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,o.vE)(e.action)}case u.n.State.minimized:switch(e.action.action){case"onClick":return i.some(u.n.State.expanded);default:return(0,o.vE)(e.action.action)}default:return(0,o.vE)(e)}})),s.oA,l.O(u.n.State.minimized),c.w((function(t){return e.pipe(a.U(i.fold((function(){return{kind:u.n.State.hidden}}),(function(e){switch(t){case u.n.State.minimized:return{kind:u.n.State.minimized,alertsCount:e.count};case u.n.State.expanded:return{kind:u.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case u.n.State.hidden:return{kind:u.n.State.hidden};default:return(0,o.vE)(t)}}))))})))}},79176:(e,t,n)=>{"use strict";n.d(t,{n:()=>Te});var r,i,o,a,s,l,c,u,d,p,f=n(51465),m=n(27378),h=n(73805),g=n(42726),v=n(22232),y=n(64909),b=n(79844),w=n(39499),C=n(59312),_=n(19962),S=n(90351),x=n(22823),I=n(71031),A=n(94503),k=n(41439),E=n(54071),T=n(14611),R=n(52479),L=n(58199),M=n(77176),N=n(57091),P=n(93508);!function(e){function t(e){return 0===e?"":e>=1e3?Math.min(Math.trunc(e/1e3),9)+"k+":String(e)}var n=function(e){var t=e.className,n=e.isChecking,r=e.type,i=e.animateFade,o=void 0===i||i,a=T.f.fadeOutState(n),s=a.state,l=a.complete,c="checking-complete";return m.createElement(g.F.div,(0,C.__assign)({},(0,g.Sh)(ae.loader,t),{role:"loader"}),o?s.pipe(M.U((function(e){return"end"===e?m.createElement("div",{key:"checking-complete",className:c}):m.createElement(E.$,{key:"spinner",variation:r,size:"100%",className:"fadeOut"===e?ae.fadeOut:void 0,onTransitionEnd:l})}))):n.pipe(M.U((function(e){return e?m.createElement(E.$,{variation:r,size:"100%"}):m.createElement("div",{className:c})}))))},r=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,o=e.count,a=e.type,s=void 0===a?"white":a,l=e.suffix,c=void 0===l?"":l,u=m.useContext(A.a.Context);return m.createElement(g.F.div,(0,C.__assign)({},(0,g.Sh)(ae.roundCounter,R.ab(s,E.$.getClassName(ae)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 32",className:ae.circular},m.createElement("g",null,m.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),m.createElement("text",(0,C.__assign)({x:"16",y:"17"},_.h5(u.has(A.a.Flag.supportsSVGDominantBaseline)),{fontSize:o>=100?14:18,"data-name":n},(0,g.Sh)(G,i.counterContent)),t(o),c))))},i=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,o=e.count,a=e.type,s=void 0===a?"white":a,l=e.suffix,c=void 0===l?"":l,u=m.useContext(A.a.Context);return m.createElement(g.F.div,(0,C.__assign)({},(0,g.Sh)(ae.ovalCounter,R.ab(s,E.$.getClassName(ae)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 20",className:ae.circular},m.createElement("rect",{width:"32",height:"20",rx:"10"}),m.createElement("text",(0,C.__assign)({x:"16",y:"10.5"},_.h5(u.has(A.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":n},(0,g.Sh)(G,i.counterContent)),t(o),c)))};e.Counter=function(e){var t=e.theme,n=void 0===t?{}:t,o=e.count,a=e.type,s=void 0===a?"white":a,l=o>=100?i:r;return m.createElement(l,{theme:(0,C.__assign)((0,C.__assign)({},n),{counterWrapper:(0,g.Sh)(n.counterWrapper,ae.flexCounter).className}),count:o,type:s})},e.OutcomeCounter=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,o=e.count,a=e.type,s=void 0===a?"white":a,l=e.suffix,c=e.fontSize,u=void 0===c?12:c,d=m.useContext(A.a.Context);return m.createElement(g.F.div,(0,C.__assign)({},(0,g.Sh)(ae.outcomeCounter,R.ab(s,E.$.getClassName(ae)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 18",className:ae.circular},m.createElement("rect",(0,C.__assign)({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(o,!!l),{height:18,rx:9})),m.createElement("text",(0,C.__assign)({x:"50%",y:"10px"},_.h5(d.has(A.a.Flag.supportsSVGDominantBaseline)),{fontSize:u,"data-name":n},(0,g.Sh)(G,i.counterContent)),t(o),l)))},e.MainMeter=function(e){var t=e.count,i=e.isChecking,o=e.className,a=0===t;return m.createElement("div",(0,C.__assign)({},(0,g.Sh)(ae.meter,o)),m.createElement(n,{isChecking:i,type:a?"green":"red"}),0===t?m.createElement(k.JO.Grammarly,null):m.createElement(r,{count:t,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=function(e){var t=e.count,i=e.isChecking;return m.createElement("div",{className:ae.lensNavMeter},m.createElement(n,{isChecking:i,type:"red"}),m.createElement(r,{count:t,type:"white",name:"toolbar-mistakes"}))},e.PlagiarismMeter=function(e){var t=e.count,r=e.isChecking,o=e.className;return m.createElement("div",(0,C.__assign)({},(0,g.Sh)(ae.plagiarismMeter,o)),m.createElement(n,{isChecking:r,type:"violet",animateFade:!1}),m.createElement(g.F.div,{className:ae.wrapper},t.pipe(N.a(r),M.U((function(e){var t=e[0],n=e[1];return 0===t?m.createElement(k.JO.NotificationInfo,{className:ae.plagiarismIcon,key:"icon",width:20}):!n&&m.createElement(i,{count:t,type:"violet",key:"value",suffix:m.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")})})),P.O(null))))},e.PlagiarismOutcomesMeter=function(t){var r=t.count,i=t.isChecking,o=t.className;return m.createElement("div",(0,C.__assign)({},(0,g.Sh)(ae.plagiarismMeter,o)),m.createElement(n,{isChecking:i,type:"cyan",animateFade:!1}),m.createElement(g.F.div,{className:ae.wrapper},r.pipe(N.a(i),M.U((function(t){var n=t[0],r=t[1];return L.g.isMin(n)?m.createElement(k.JO.CheckmarkOutcomes,{className:ae.plagiarismOutcomeIcon,key:"icon",width:20}):!r&&m.createElement(e.OutcomeCounter,{count:L.g.prism.reverseGet(n),type:"cyan",key:"value",suffix:m.createElement("tspan",{fontSize:11},"%")})})),P.O(null))))}}(p||(p={}));var F,O=1.25,B={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:x.u.percent(100),height:x.u.percent(100)},D={position:"absolute",width:x.u.percent(150),height:x.u.percent(150),transform:"translate(-17%, -17%)"},W={position:"relative",display:"inline-flex"},U={width:x.u.percent(100),height:x.u.percent(100)},H={minWidth:x.u.rem(2),width:x.u.percent(100),height:x.u.rem(O)},z={maxWidth:x.u.rem(2),height:x.u.rem(O)},X="counterText",G=x.u.joinClasses([X,x.u.style({fontWeight:"bold",textAnchor:"middle",fill:S.Il.CoreNeutral0})]),V={fill:I.zh,$nest:(r={},r["& .counterText"]={fill:I.FW},r)},Y={fill:S.Il.CoreRed50,$nest:(i={},i["& .counterText"]={fill:S.Il.CoreNeutral0},i)},q={fill:S.Il.CoreGreen50,$nest:(o={},o["& .counterText"]={fill:S.Il.CoreNeutral0},o)},$={fill:S.Il.CoreBlue50,$nest:(a={},a["& .counterText"]={fill:S.Il.CoreNeutral0},a)},Z={fill:"transparent",$nest:(s={},s["& .counterText"]={fill:I.FW},s)},j={fill:I.lh,$nest:(l={},l["& .counterText"]={fill:S.Il.CoreNeutral0},l)},J={fill:I.AX,$nest:(c={},c["& .counterText"]={fill:S.Il.CoreNeutral0},c)},K={fill:S.Il.CoreYellow60,$nest:(u={},u["& .counterText"]={fill:S.Il.CoreNeutral0},u)},Q={fill:S.Il.CoreCyan50,$nest:(d={},d["& .counterText"]={fill:S.Il.CoreNeutral0},d)},ee={width:x.u.rem(1.5),height:x.u.rem(1.5)},te={margin:"0 "+x.u.rem(.25)},ne={width:x.u.rem(2),height:x.u.rem(O)},re={margin:x.u.rem(-1)+" 0"},ie={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:S.Il.CoreCyan50}}},oe={width:x.u.rem(2),height:x.u.rem(1.125),position:"relative"},ae=x.u.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[B],loader:[D],wrapper:[W],roundCounter:[W,U],ovalCounter:[W,H],flexCounter:[W,z],gray:[V],red:[Y],green:[q],blue:[$],white:[Z],violet:[j],yellow:[J],orange:[K],cyan:[Q],meter:[W,ee],lensNavMeter:[W,ee,te],plagiarismMeter:[W,ne],plagiarismIcon:[re],plagiarismOutcomeIcon:[re,ie],outcomeCounter:[W,{position:"absolute",left:0},oe]}),se=n(45836),le=n(13097),ce={position:"relative",borderRadius:x.u.rem(le.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none"},ue={padding:x.u.rem(1)+" "+x.u.rem(2)},de={display:"flex",boxSizing:"border-box",padding:x.u.rem(1.25)+" "+x.u.rem(.5)+" "+x.u.rem(1.25)+" "+x.u.rem(1.25),height:x.u.rem(3),cursor:"pointer",justifyContent:"flex-start",alignItems:"center",$nest:{"&:before":{position:"absolute",right:x.u.rem(.5),bottom:x.u.rem(-.5),left:x.u.rem(.5),zIndex:-20,display:"block",height:x.u.rem(2),borderRadius:x.u.rem(le.fx),backgroundColor:S.Il.CoreNeutral0,boxShadow:"0 "+x.u.rem(.25)+" "+x.u.rem(1.625)+" 0 rgba(198, 203, 222, .25)",content:"' '"}}},pe={marginLeft:x.u.rem(.8),fontSize:x.u.rem(.85),lineHeight:x.u.rem(1)},fe={display:"flex",width:x.u.percent(100),alignItems:"center",justifyContent:"space-between"},me={position:"relative",padding:x.u.rem(1)+" "+x.u.rem(2)+" "+x.u.rem(2),userSelect:"none"},he={position:"absolute",top:x.u.rem(.2),right:x.u.rem(.3),cursor:"pointer"},ge={paddingRight:x.u.rem(1),textAlign:"left",fontSize:x.u.rem(.75),lineHeight:x.u.rem(1.15)},ve={marginTop:x.u.rem(.6),fontSize:x.u.rem(.875),flexShrink:0},ye={display:"flex",marginBottom:x.u.rem(.6),justifyContent:"flex-end",flexShrink:0},be={marginRight:"auto",lineHeight:x.u.rem(1.3125)},we={marginTop:x.u.rem(.21),minWidth:x.u.rem(1.5),flexShrink:0},Ce={display:"flex",width:x.u.percent(100),justifyContent:"center",alignItems:"center"},_e={display:"flex",width:x.u.percent(100),height:x.u.rem(2),borderRadius:x.u.rem(le.fx),backgroundColor:S.Il.CoreYellow60,color:S.Il.CoreNeutral0,fontWeight:"bold",justifyContent:"center",alignItems:"center",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:S.Il.CoreYellow50}}},Se={display:"flex",marginTop:x.u.rem(1),justifyContent:"center"},xe={position:"absolute",top:x.u.rem(.7),left:x.u.rem(.22),fill:S.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:S.Il.CoreNeutral90}}},Ie=x.u.stylesheet({wrapper:[ce],maximizedWrapper:[ue],minimizedWrapper:[de],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[pe],minimizedContent:[fe],maximizedContainer:[me],maximizedCloseButtonContainer:[he],maximizedHeader:[ge],alertCategoryContainer:[ve],alertCategory:[ye],categoryHumanContainer:[be],alertCounterContainer:[we],premiumButtonWrapper:[Ce],premiumButton:[_e],premiumButtonContainer:[Se],icon:[xe]}),Ae=n(64437),ke=function(e){return f.UI.Grid.make((function(t){var n=t.slots;return m.createElement(g.F.div,(0,C.__assign)({},(0,g.Sh)(Ie.wrapper,e,Ae.m.fullCard)),m.createElement(k.JO.PaidLink,{width:14,className:Ie.icon}),n.body)}))},Ee=f.UI.Node.make((function(e){var t=e.notify;return m.createElement(g.F.div,{className:Ie.maximizedCloseButtonContainer},m.createElement(se.zx,{name:"close",onClick:t("onClick")},m.createElement(k.JO.Close,{width:11})))}));!function(e){!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(e.ActionsKind||(e.ActionsKind={}))}(F||(F={}));var Te,Re=f.UI.Node.make((function(e){var t=e.state,n=e.notify,r=m.useContext(b.m.Context);return m.createElement(m.Fragment,null,m.createElement("div",{className:Ie.maximizedHeader},m.createElement(g.F.Fragment,null,t.pipe(M.U((function(e){var t=e.count;return t>0?t>1?m.createElement(m.Fragment,{key:"plural"},r.sidebar.content.premiumIssues.foundTitlePlural.description1,"",t,"",r.sidebar.content.premiumIssues.foundTitlePlural.description2):m.createElement(m.Fragment,{key:"singular"},r.sidebar.content.premiumIssues.foundTitleSingular.description1,"",t,"",r.sidebar.content.premiumIssues.foundTitleSingular.description2):null}))))),m.createElement(g.F.div,{className:Ie.alertCategoryContainer},t.pipe(M.U((function(e){return e.alerts.map((function(e){return m.createElement("div",{key:e.category,className:Ie.alertCategory},m.createElement("div",{className:Ie.categoryHumanContainer},e.categoryHuman),m.createElement("div",{className:Ie.alertCounterContainer},m.createElement(p.Counter,{count:e.count,type:"orange"})))}))})))),m.createElement("div",{className:Ie.premiumButtonContainer},m.createElement("div",{ref:function(e){n({kind:F.ActionsKind.onUpgradeButtonMount,element:y.fromNullable(e)})()},className:Ie.premiumButtonWrapper},m.createElement(w.zx,{name:"upgrade",styleType:se.ZT.Type.Base,className:Ie.premiumButton,onClick:n({kind:F.ActionsKind.onUpgrade})},r.seeWhatsInPremium))))})),Le=f.UI.Composite.make(ke(Ie.maximizedWrapper),f.UI.Group.make({closeButton:f.UI.Union.make("kind",{hidden:f.UI.Node.empty,visible:Ee}),content:Re})),Me=(0,h.pipe)(f.UI.squash(Le),f.UI.mapAction((function(e){switch(e.key){case"content":switch(e.action.kind){case F.ActionsKind.onUpgrade:return{kind:"upgrade"};case F.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,v.vE)(e.action)}case"closeButton":switch(e.action.action){case"onClick":return{kind:"collapse"};default:return(0,v.vE)(e.action.action)}default:return(0,v.vE)(e)}})),f.UI.contramapState((function(e){return{closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}}))),Ne=f.UI.Node.make((function(e){var t=e.state,n=m.useContext(b.m.Context);return m.createElement(g.F.div,{className:Ie.minimizedContent},m.createElement("div",{className:Ie.minimizedText},n.premiumSuggestions),t.pipe(M.U((function(e){var t=e.alertsCount;return t>0&&m.createElement(p.OutcomeCounter,{type:"orange",key:"advancedCounter-counter",count:t})}))))})),Pe=f.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return m.createElement("div",{className:Ie.shadowWrapper,onClick:n("onClick")},t.body)})),Fe=f.UI.Knot.make(Pe,{body:f.UI.Composite.make(ke(Ie.minimizedWrapper),Ne)}),Oe=(0,h.pipe)(f.UI.squash(Fe),f.UI.contramapState((function(e){return{body:e}})));!function(e){var t,n,r;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(r=e.State||(e.State={})),e.TogglableExpandedPanel=f.UI.Union.make("kind",((t={})[r.hidden]=f.UI.Node.empty,t[r.expanded]=Me,t)),e.ToggablePanel=f.UI.Union.make("kind",((n={})[r.hidden]=f.UI.Node.empty,n[r.minimized]=Oe,n[r.expanded]=Me,n))}(Te||(Te={}))},14611:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r,i=n(49708),o=n(77176),a=n(93508),s=n(85985),l=n(17343),c=n(36303),u=n(24209),d=n(99391),p=n(83840),f=n(8473),m=n(15789),h=n(2768),g=n(50628),v=n(79462),y=n(28043),b=n(32952),w=n(66310),C=n(76974);!function(e){var t=function(){function e(){}return Object.defineProperty(e,"observable",{get:function(){return this._obs||(this._obs=i.R(document,"visibilitychange").pipe(o.U((function(){return document.hidden})),a.O(document.hidden),s.h(Boolean),l.h(void 0),c.r(1)))},enumerable:!1,configurable:!0}),e}();function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.T.apply(d,e.map((function(e){return e.pipe(p.i())}))).pipe(f.o((function(e){return e.hasValue})),m.D())}e.Hidden=t,e.mergeUntilAnyCompletes=n,e.createAnimationObservable=function(e,r,i){return n(function(e,t,n){return v.y.create((function(r){var i,o=window.requestAnimationFrame(a);function a(s){i||(i=s);var l=s-i;l<n?(r.next(Math.round(e+l/n*(t-e))),o=window.requestAnimationFrame(a)):(r.next(t),r.complete())}return function(){return window.cancelAnimationFrame(o)}})).pipe(y.x())}(e,r,i).pipe(h.R(t.observable)),t.observable.pipe(l.h(r),g.P()))},e.fadeOutState=function(e){var t=new b.xQ;return{state:e.pipe(w.w((function(e){return e?C.of("inProgress"):u.T(C.of("fadeOut"),t.pipe(l.h("end")))}))),complete:function(){return t.next(!0)}}},e.rafSequence=function(e,t){return void 0===t&&(t=!1),v.y.create((function(n){var r;function i(){n.next(e.shift()),e.length&&(r=requestAnimationFrame(i))}return t?i():r=requestAnimationFrame(i),function(){return cancelAnimationFrame(r)}}))}}(r||(r={}))},42499:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var r,i=n(18625),o=n(49708);!function(e){var t="scrollaction";e.emit=function(e){return window.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=i.P((function(){return o.R(window,t)}))}(r||(r={}))},40250:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var r,i=n(73805),o=n(64909);!function(e){e.update=function(e,t,n){return e.update(t,n)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,n){return(0,i.pipe)(e.get(t),o.filter((function(e){return n(e.value)})))},e.find=function(e,t){return e.find(t)}}(r||(r={}))},19787:(e,t,n)=>{"use strict";n.d(t,{m:()=>x});var r,i=n(489),o=n(45980),a=n(73805),s=n(42726),l=n(64909),c=n(22788),u=n(89943),d=n(8125),p=n(83078),f=n(10002),m=n(32952),h=n(52479),g=n(77176),v=n(67434),y=n(28043),b=n(41398),w=n(99391),C=n(41199),_=n(50634),S=n(38524);!function(e){var t=function(){this.alertHovered=new m.xQ,this.alertClicked=new m.xQ,this.highlightedAlert=s.hg.create(l.none)};e.Mock=t}(r||(r={}));var x=function(e,t,n,r){var s=this;this._ded=e,this._state=t,this._markAlertMapper=n,this._alertsReader=r,this._focusedCard=this._state.view(S.nL.getActiveCard),this._focusedLens=this._state.view("currentLens"),this._marksToAlertTupleArray=function(e){return(0,a.pipe)(e,l.map((0,o.flow)(i.DZ((function(e){return s._markAlertMapper.getAlertByMark(e)})),i.DY(c.contramap((function(e){var t=e.alert;return{type:t.lensType,priority:t.lensPriority}}))(f.R.ord)))))},this.alertHovered=h.b2.inRaf(this._ded.hoveredMarks).pipe(g.U(this._marksToAlertTupleArray),g.U(l.map(i.UI((function(e){return e.alert})))),v.R((function(e,t){return(0,a.pipe)(t,l.chain((function(t){return(0,a.pipe)(e,l.filter((function(e){return-1!==t.indexOf(e)})),l.fold((function(){return l.fromNullable(t[0])}),l.some))})))}),l.none),g.U(l.filter((function(e){return s._alertsReader.isInteractable(e.id)&&!C.$.isPlagiarism(e)}))),y.x()),this.alertClicked=h.b2.inRaf(this._ded.activeMarks).pipe(g.U(this._marksToAlertTupleArray),b.M(this._focusedCard,this._focusedLens),v.R((function(e,t){var n=t[0],r=t[1],i=t[2],o=function(t){return(0,a.pipe)(e,l.exists((function(e){return e.alert.id===t.alert.id})))},s=function(e){return(0,a.pipe)(r,l.exists((function(t){return t.activeAlert.id===e.alert.id})))},c=function(e){return i.meta.filter(e.alert)};return(0,a.pipe)(n,l.chain((function(e){return(0,a.pipe)(e,u.N6([(0,d.W9)(o,s),s,(0,d.W9)(o,c),c,o]),l.fold((function(){return l.fromNullable(e[0])}),l.some))})))}),p.cS()),y.x(l.getEq(_.E.eq).equals),w.shareReplay({refCount:!0,bufferSize:1}))}},73343:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var r,i=n(59312),o=n(45980),a=n(8125),s=n(17753),l=n(10002),c=(0,a.W9)(s.bZ.isRegistered,(0,o.not)(s.bZ.isMuted)),u=function(e){return function(t){return(0,a.W9)(c,e(t))}};!function(e){var t,n;e.create=function(e,t){var n=u((function(t){return e[t]})),r=(0,a.W9)(n(l.R.SpecialId.AllAlerts),s.bZ.isBulkAcceptable);return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:function(e,n){return(0,a.W9)(u((function(e){return t[e]}))(e),function(e){return function(t){return e||s.bZ.isPriority(t)}}(n))},alertVisibleInSidebar:n,getLensesFilter:function(t){return e[t]},alertCanBeDisplayed:c,alertIsBulkAcceptable:r}};var r=function(e){return function(t){return e===t.lensId}};e.defaultLensFilters=((t={})[l.R.SpecialId.Clarity]=r(l.R.SpecialId.Clarity),t[l.R.SpecialId.Correctness]=r(l.R.SpecialId.Correctness),t[l.R.SpecialId.Delivery]=r(l.R.SpecialId.Delivery),t[l.R.SpecialId.Engagement]=r(l.R.SpecialId.Engagement),t[l.R.SpecialId.Plagiarism]=r(l.R.SpecialId.Plagiarism),t[l.R.SpecialId.Vox]=r(l.R.SpecialId.Vox),t[l.R.SpecialId.Premium]=r(l.R.SpecialId.Premium),t[l.R.SpecialId.AllAlerts]=s.bZ.belongsToAllAlerts,t[l.R.SpecialId.Closed]=o.constFalse,t[l.R.SpecialId.Priority]=s.bZ.belongsToPriorityLens,t[l.R.SpecialId.PredictionTakeaways]=s.bZ.belongsToPredictionTakeaways,t[l.R.SpecialId.PredictionEmogenie]=s.bZ.belongsToPredictionEmogenie,t[l.R.SpecialId.RealTimeProofit]=r(l.R.SpecialId.RealTimeProofit),t),e.defaultTextFilters=(0,i.__assign)((0,i.__assign)({},e.defaultLensFilters),((n={})[l.R.SpecialId.Closed]=s.bZ.isCriticalImpact,n[l.R.SpecialId.Premium]=(0,a.Kg)(e.defaultLensFilters[l.R.SpecialId.Premium],s.bZ.belongsToAllAlerts),n)),e.priorityTextFilters=function(e){var t;return(t={})[l.R.SpecialId.Premium]=(0,a.W9)(e[l.R.SpecialId.Premium],s.bZ.isPriority),t}}(r||(r={}))},95722:(e,t,n)=>{"use strict";n.d(t,{Oe:()=>r,rG:()=>i,Bd:()=>o});var r,i,o,a=n(59312),s=n(42654),l=n(17753);!function(e){e.eq=(0,s.contramap)((function(e){return e.alert}))(l.bZ.ordId),e.isPending=function(e){return null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate)},e.isOneOf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e===t.state.current.visualState}))}},e.notAnyOf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return e!==t.state.current.visualState}))}},e.canBeChanged=function(t){return function(n){return t&&o.applied===n.state.current.visualState?t===o.disposed:l.bZ.State.isBulkApplied(n.alert.state)||e.notAnyOf(o.applied,o.disposed)(n)}},e.isOrWillBe=function(e){return function(t){return null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e}},e.willBe=function(e){return function(t){return null!==t.state.scheduled&&t.state.scheduled.visualState===e}}}(r||(r={})),function(e){e.updateRanges=function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return(0,a.__assign)((0,a.__assign)({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(o||(o={})),function(e){e.isApplied=function(t){return t===e.applied}}(o||(o={}))},20892:(e,t,n)=>{"use strict";n.d(t,{v:()=>S});var r=n(59312),i=n(489),o=n(45980),a=n(73805),s=n(49524),l=n(25656),c=n(24645),u=n(60705),d=n(65772),p=n(64909),f=n(22232),m=n(83078),h=n(89943),g=n(68983),v=n(8125),y=n(92932),b=n(17753),w=n(41199),C=n(78090),_=n(95722),S=function(){function e(e,t,n,r,i,l,c,u){var f=this;this._alert=e,this._alertsService=t,this._alertRangeService=n,this._changeMarksInDEd=r,this._create=i,this._update=l,this._remove=c,this._onTransitionEnd=u,this._currentState=_.rG.from(_.Bd.initial),this._scheduledState=_.rG.from(_.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=function(e){if(!e.to.updateRanges||!(0,a.pipe)(f._alertRangeService.hasNewRangesForUpdate(f.id),d.fold(o.constFalse,s.y)))return p.none;var t=(0,a.pipe)(f._alertRangeService.applyPendingRangesUpdate(f.id),d.mapLeft((function(e){return x("markAlert").error("cannot apply pending ranges",e)})),p.fromEither,p.chain(s.y),p.filter((function(e){var t=e.addedHighlightedRanges,n=e.removedHighlightedRanges;return t.length>0||n.length>0})));return(0,a.pipe)(t,p.map((function(e){return{commit:function(){return e.removedHighlightedRanges[1]()},ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}})))},this._dispose=function(){f._marksMap.clear(),d.either.map(f._alertRef,(function(e){return e.dispose()}))},this._disposeIfEmpty=function(){0===f._marksMap.size&&f._dispose()},d.either.mapLeft(this._alertRef,(function(e){return x("markAlert").warn("can not take alertRef",e)}))}return Object.defineProperty(e.prototype,"state",{get:function(){return{current:this._currentState,scheduled:this._scheduledState}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alert",{get:function(){return this._alert()},enumerable:!1,configurable:!0}),e.prototype.scheduleApply=function(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,f.kG)(e!==_.Bd.initial,"Cannot schedule change "+this.id+" from "+this._currentState.visualState+" to initial state"),this._currentState.visualState!==_.Bd.initial||e!==_.Bd.disposed&&!_.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=_.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=_.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=_.rG.from(_.Bd.disposed),this._dispose()),this},e.prototype.scheduleUpdate=function(){this._throwWhenInFinaleState(),this._scheduledState=_.rG.updateRanges(this._scheduledState||this._currentState,!0)},e.prototype.scheduleForceUpdate=function(){this._throwWhenInFinaleState(),this._scheduledState=_.rG.forceUpdate(this._scheduledState||this._currentState,!0)},e.prototype.apply=function(){var e=this;if(_.Oe.isPending(this)){this._throwWhenInFinaleState();var t=this._getTransition();(0,a.pipe)(this.change(),p.filter((function(e){return e.rawMark.length>0})),p.map((function(n){e._handleBasicEvent(n.rawMark),n.commit(),e._onTransitionEnd(t,e)})))}},e.prototype.applyWith=function(e){var t=(0,r.__spreadArrays)([this],e);this._handleMultipleHighlights(t,(function(e){return e.change()}))},e.prototype.markByIndex=function(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return p.none}},Object.defineProperty(e.prototype,"mark",{get:function(){return this.markByIndex(0)},enumerable:!1,configurable:!0}),e.prototype._iterateOverMarkAlerts=function(e,t){e.forEach((function(e){var n=e.change,r=e.ma;n.rawMark.forEach((function(e){"create"===e.action?r._setMarkAndCheckFinaleState(e.id,(0,a.pipe)(t.created.get(e.id)||d.left(new Error("Cannot get unknown mark")),p.fromEither)):"remove"===e.action&&r._removeMark(e.id)})),n.commit(),r._disposeIfEmpty()}))},e.prototype._handleMultipleHighlights=function(e,t){var n=e.map((function(e){return[e,t(e)]})).filter((function(e){var t=e[0],n=e[1];return(0,a.pipe)(n,p.filter((function(e){return 0!==e.rawMark.length||(x("markAlert").warn("rawAction must have rawMark array",{rawAction:e.action,state:(0,r.__assign)((0,r.__assign)({},t.toJSON()),{alert:void 0})}),!1)})),p.isSome)})).map((function(e){var t=e[0],n=e[1];return{ma:t,change:m.MH(n)}}));if(0!==n.length){var i=h.VS(n.map((function(e){return e.change.rawMark}))),o=this._changeMarksInDEd(i);this._iterateOverMarkAlerts(n,o)}},Object.defineProperty(e.prototype,"_mark",{get:function(){return this._markbyIndex(0)},enumerable:!1,configurable:!0}),e.prototype._markbyIndex=function(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:p.none},e.prototype._setMarkAndCheckFinaleState=function(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)},e.prototype._setMark=function(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)},e.prototype._removeMark=function(e){this._marksMap.delete(e)},e.prototype.change=function(){var e=this;(0,f.kG)(_.Oe.isPending(this),"Next state should be scheduled to change it",(function(){return JSON.stringify({currentState:e._currentState,aid:e.id})}));var t=this._commitTransition();return t.from.visualState!==t.to.visualState||t.to.forceUpdate||t.to.updateRanges?p.some(this._getRawActionForApply(t)):p.none},e.prototype._handleBasicEvent=function(e){var t=this,n=this._changeMarksInDEd(e);e.forEach((function(e){if(e.action===c.v.Change.ActionType.remove)t._removeMark(e.id);else{var r=(0,a.pipe)(p.fromNullable(t._marksMap.get(e.id)),p.chain(s.y),p.alt((function(){return(0,a.pipe)((e.action===c.v.Change.ActionType.create?n.created.get(e.id):n.updated.get(e.id))||d.left(new Error("Cannot get unknown mark")),p.fromEither)})));t._setMark(e.id,r)}})),this._disposeIfEmpty()},e.prototype._getTransition=function(){var e=this;return(0,f.kG)(_.Oe.isPending(this),"Next state should be scheduled to change it",(function(){return JSON.stringify({currentState:e._currentState,aid:e.id})})),{from:this._currentState,to:this._scheduledState}},e.prototype._commitTransition=function(){var e=this._getTransition();return this._currentState=(0,r.__assign)((0,r.__assign)({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e},e.prototype._getRawActionForApply=function(e){var t=this;switch(e.from.visualState){case _.Bd.initial:return(0,a.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit()}))),{action:"create",commit:l.Z,rawMark:this._getHighlightRanges((function(n){return t._create((function(){return n}),e)(n.meta.id)}))};default:switch(e.to.visualState){case _.Bd.disposed:var n=_.Bd.isApplied(e.from.visualState)||b.bZ.State.isRemoved(this.alert.state)&&w.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(o.constVoid).length>0?this._getAppliedRanges((function(e,t){return{id:t().meta.id,range:t}})):this._getHighlightRanges((function(e){return{id:e.meta.id,range:function(){return e}}}));return{action:"remove",commit:(0,a.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit})),p.getOrElse((function(){return o.constVoid}))),rawMark:n.map((function(e){return t._remove(e.range)(e.id)}))};case _.Bd.applied:var i=this._getHighlightRanges((function(e){return t._remove((function(){return e}))(e.meta.id)})),c=(0,a.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit})),p.getOrElse((function(){return o.constVoid}))),u=this._getAppliedRanges((function(n,r){return t._create(r,e)(r().meta.id)}));return{action:"replace",commit:c,rawMark:(0,r.__spreadArrays)(i,u)};default:var d=function(){return b.bZ.State.isBulkApplied(t._alert("_getRawActionForApply").state)?t._getAppliedRanges((function(e,t){return t()})):t._getHighlightRanges(s.y)};return(0,a.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(n){var r=n.commit,i=n.ranges;return t._getReplaceAction(e,d(),i.removed,r)})),p.getOrElse((function(){return{action:"update",commit:l.Z,rawMark:d().map((function(n){return t._update((function(){return n}),e)(n.meta.id)}))}})))}}},e.prototype._getReplaceAction=function(e,t,n,i){var o=this;return{action:"replace",commit:i,rawMark:(0,r.__spreadArrays)(n.map((function(e){return o._remove((function(){return e}))(e.meta.id)})),t.map((function(t){return o._create((function(){return t}),e)(t.meta.id)})))}},e.prototype._getAppliedRanges=function(e){var t=this;return(0,a.pipe)(this._alertRangeService.getAppliedRanges(this.id),d.fold((function(e){return x("markAlert").error("cannot get applied ranges",{error:e.message,alert:w.$.snapshot(t._alert("_getAppliedRanges"))}),[]}),i.Su(e)))},e.prototype._getHighlightRanges=function(e){var t=this;return(0,a.pipe)(this._alertRangeService.getHighlightRanges(this.id),d.fold((function(n){return x("markAlert").warn("cannot get highlight ranges via range service",{error:n,alert:t._alert("_getHighlightRanges")}),(0,a.pipe)(t._alert("_getHighlightRanges_Fallback").getHighlightRanges(),i.UI(e))}),i.UI(e)))},e.prototype._throwWhenNotAllowedState=function(e){var t=this._alert("_throwWhenNotAllowedState");(0,f.kG)(!(!w.$.isDefault(t)&&!w.$.isSuper(t))||(!e||b.bZ.State.isBulkApplied(t.state)||!_.Bd.isApplied(e)),"Applied state isn't allowed for "+this.id)},e.prototype._throwWhenInFinaleState=function(e){(0,f.kG)(e&&_.Oe.isOneOf(_.Bd.applied)(this)?e===_.Bd.disposed||b.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):_.Oe.notAnyOf(_.Bd.disposed)(this),"'"+this._currentState.visualState+"' MarkAlert '"+this.id+"' cannot be changed"+(e?" to '"+e+"' ":""))},e.prototype.toJSON=function(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,a.pipe)(this._mark,p.map((function(e){return e.id})),p.toUndefined),range:(0,a.pipe)(this._mark,p.map((function(e){return e.range})),p.toUndefined)},alert:this._alert("toJSON")}},e.prototype.equals=function(e){return _.Oe.eq.equals(this,e)},e.prototype.hashCode=function(){return(0,C.AC)(this.id)},e}();!function(e){e.compareTo=function(e){var t=(0,g.W)(u.SV.distanceFrom)(e);return function(e,n){return(0,v.qu)(Math.min.apply(Math,e.alert.getHighlightRanges().map(t)),Math.min.apply(Math,n.alert.getHighlightRanges().map(t)))}}}(S||(S={}));var x=(0,v.HP)(y.C8.Logging.getLogger)},42490:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r,i,o,a=n(59312),s=n(73805),l=n(42726),c=n(22232),u=n(64909),d=n(42654),p=n(64510),f=n(489),m=n(76606),h=n(45980),g=n(84966),v=n(80358),y=n(43675),b=n(8125),w=n(65772),C=n(22788),_=n(97523),S=n(92932),x=n(17753),I=n(73510),A=n(52479),k=n(32952),E=n(85985),T=n(77176),R=n(2834),L=n(16118),M=n(40151),N=n(76779);!function(e){e.create=function(e){return{getAlertMuteCategory:function(t){return(0,s.pipe)(e.getById(t),u.chain((function(e){return e.muteCategory})),u.map((function(e){return e.id})))}}},e.getAlerts=function(e,t){var n={byCategory:new Map(t.map((function(e){return[e,[]]}))),all:[]};return(0,s.pipe)(e.get(),N.p.reduce(n,(function(e,n){var r=n.alert;return(0,s.pipe)(r.muteCategory,u.filter((function(e){return t.includes(e.id)})),u.map((function(e){return e.id})),u.alt((function(){return u.fromNullable(t.find(x.bZ.belongsToSpecialCategory(r)))})),u.fold((function(){return e}),(function(t){return e.byCategory.get(t).push(r),e.all.push(r),e})))})))}}(r||(r={})),function(e){var t,n;!function(e){!function(e){e.ord=C.ordString,e.show=m._3,e.create=function(e){return e}}(e.Id||(e.Id={})),e.isSpecial=function(e){return Object.values(g.JW.SpecialCategory).includes(e)},e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=function(e){return p.hX((function(t){return e(t.id)}))},e.filterWithCount=function(e,t){return function(n){var i=Array.from(n.keys()),o=r.getAlerts(t,i).byCategory;return(0,s.pipe)(n,p.DZ((function(t){return e(t.id)?u.some((0,a.__assign)((0,a.__assign)({},t),{alertsCount:o.get(t.id).filter(x.bZ.isRegistered).length})):u.none})))}}}(n=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){var i;!function(e){var t;!function(e){e.BeforeCategoriesMuted="BeforeCategoriesMuted",e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isMuteEvent=function(e){return e.type===t.BeforeCategoriesMuted},e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(i=e.Events||(e.Events={})),e.create=function(e,o,a,c,d){var p=S.C8.Logging.getLogger("MutedAlertsModel"),m=l.hg.create(new Map),b=new k.xQ,C=new I.w.Keeper;return C.push(e.pipe(E.h(v.h.is("session_started")),T.U((function(e){return t=e.userMutedCategories,n=t.map((function(e){return[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]})),new Map(n);var t,n})),R.b(A.wW(m)),R.b((function(){return b.next({type:i.Type.CategoriesChanged})}))).subscribe(),m.pipe(L.G(),T.U((function(e){return function(e,n){return{muted:y.uz(t.Id.ord)(e,n),unmuted:y.uz(t.Id.ord)(n,e)}}(e[0],e[1])})),T.U(function(e){return function(t){var n=t.muted,i=t.unmuted;return{toMute:r.getAlerts(e,n).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Muted})),toUnmute:r.getAlerts(e,i).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Unmuted}))}}}(a)),R.b((function(e){var t=e.toMute,n=e.toUnmute;t.length>0&&c.changeMuteState(t,x.bZ.MuteStateType.Muted),n.length>0&&c.changeMuteState(n,x.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:b,mutedCategories:m,muteCategories:function(e,n){(0,s.pipe)(o.sendFeedback({kind:g.Mw.MUTE,userMuteScope:d,userMuteCategories:e}),_.mapLeft((function(e){p.warn("Alerts could not be muted on CAPI",e)})))();var l=r.getAlerts(a,e),c=l.all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Muted}));0===c.length&&p.warn("No alerts were muted on category mute",{categoryIds:e});var h=function(e,n,r){return function(i){var o=new Map(i);return e.forEach((function(e,i){t.isSpecial(i)?o.set(i,{id:i,scope:n,description:t.specialCategoryDescription}):(0,s.pipe)(f.P5(0,e),u.chain((function(e){return e.muteCategory})),u.fold((function(){return r.error("No alerts to mute",i)}),(function(e){return o.set(i,{id:e.id,description:e.description,scope:n})})))})),o}}(l.byCategory,d,p)(m.get());return n&&b.next({type:i.Type.BeforeCategoriesMuted,muteScope:d,categories:e.map((function(e){return h.get(e)})),affectedAlerts:c}),m.set(h),b.next({type:i.Type.CategoriesChanged}),w.right(void 0)},unmuteCategories:function(e){return(0,s.pipe)(o.sendFeedback({kind:g.Mw.UNMUTE,userMuteScope:d,userMuteCategories:e}),_.mapLeft((function(e){p.warn("Alerts could not be un-muted on CAPI",e)})))(),0===r.getAlerts(a,e).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Unmuted})).length&&p.warn("No alerts were unmuted on category mute",{categoryIds:e}),m.modify(function(e,t){return function(n){var r=new Map(n);return e.forEach((function(e){n.has(e)?r.delete(e):t.error("Tried to unmute a category which is not muted",e)})),r}}(e,p)),b.next({type:i.Type.CategoriesChanged}),w.right(void 0)},getMutedCategories:function(){return(0,s.pipe)(m.get(),n.filterWithCount((0,h.not)(t.isSpecial),a))},getMutedSpecialCategories:function(){return(0,s.pipe)(m.get(),n.filter(t.isSpecial))},loadCachedMutedCategories:function(e){m.set(e)},dispose:function(){return C.dispose()}}},function(e){e.create=function(){return{events:M.c(),mutedCategories:l.hg.create(new Map),getMutedCategories:function(){return new Map},getMutedSpecialCategories:function(){return new Map},muteCategories:function(e,t){return w.right(void 0)},unmuteCategories:function(e){return w.right(void 0)},loadCachedMutedCategories:b.ZT,dispose:b.ZT}}}(e.Mock||(e.Mock={}))}(e.CategoriesModel||(e.CategoriesModel={}))}(i||(i={})),function(e){!function(e){e.eq=d.getStructEq({id:i.Category.Id.ord,description:d.eqString,isMuted:d.eqBoolean,alertsCount:d.eqNumber})}(e.Category||(e.Category={})),function(t){function n(e){return(0,a.__assign)((0,a.__assign)({},e),{isMuted:!0})}function r(e){return(0,s.pipe)(e,p.UI(n))}function i(e){return{categories:e,count:Array.from(e.values()).reduce((function(e,t){return t.isMuted?e:e+t.alertsCount}),0)}}!function(e){e.empty={categories:new Map,count:0}}(t.State||(t.State={})),function(e){var t;!function(e){e.categoryClicked="categoryClicked",e.doneClicked="doneClicked",e.closeClicked="closeClicked",e.modalOpened="modalOpened"}(t=e.Kind||(e.Kind={})),e.shouldCloseDialogue=function(e){return e.kind===t.closeClicked||e.kind===t.doneClicked}}(t.Action||(t.Action={})),function(t){t.create=function(t){var n=l.hg.create(u.none),o=n.view(u.map(i)),d=new k.xQ,p=d.subscribe(function(t,n){return function(i){switch(i.kind){case e.Dialogue.Action.Kind.categoryClicked:t.modify(u.map((function(e){var t=new Map(e),n=e.get(i.categoryId);return t.set(i.categoryId,(0,a.__assign)((0,a.__assign)({},n),{isMuted:i.isMuted})),t})));break;case e.Dialogue.Action.Kind.doneClicked:n.unmuteCategories(i.unmutedCategories),t.set(u.none);break;case e.Dialogue.Action.Kind.closeClicked:t.set(u.none);break;case e.Dialogue.Action.Kind.modalOpened:t.set(u.some((0,s.pipe)(n.getMutedCategories(),r)));break;default:(0,c.vE)(i)}}}(n,t));return{state:o,actionEvents:d,dispose:function(){return p.unsubscribe()}}}}(t.ViewModel||(t.ViewModel={}))}(e.Dialogue||(e.Dialogue={}))}(o||(o={}))},45429:(e,t,n)=>{"use strict";n.d(t,{DV:()=>J,eZ:()=>K,UC:()=>Q});var r,i,o,a=n(59312),s=n(45980),l=n(73805),c=n(49524),u=n(12447),d=n(59443),p=n(95574),f=n(22232),m=n(83078),h=n(8125),g=n(55415),v=n(64909),y=n(65772),b=n(92932),w=n(17753),C=n(10002),_=n(52479),S=n(66265),x=n(16528),I=n(76974),A=n(77176),k=n(17343),E=n(93508),T=n(28043),R=n(18625),L=n(66310),M=n(40151),N=n(24209),P=n(91224),F=n(38194),O=n(598),B=n(83401),D=n(41398),W=n(55721),U=n(95093),H=n(16118),z=n(85985),X=n(40644),G=n(66910),V=n(91402),Y=n(38524),q=n(71517),$=n(46616),Z=n(13338),j=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,l.pipe)(e.view(Y.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,l.pipe)(t.get(n),v.map((function(e){var t=e.value;return 0===(0,Z.v_)({cardTop:i.converters.windowToViewport(r),cardHeight:t.positionState.height,viewportHeight:i.viewport.height,padding:{before:0,after:0}})})))})),m.MH)}};!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=function(t,n){return void 0===t&&(t=e.CARD_CONTENT_OFFSET_REM),void 0===n&&(n=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM),function(e,r){return Math.round((e?n:t)*r)}}}(r||(r={})),function(e){e.cardPositionGetter=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return p.vM((function(){return(0,l.pipe)(e.view(Y.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,l.pipe)(t.get(n),v.map((function(e){var t=e.value;return(0,l.pipe)(r,v.fold((function(){return(0,s.flow)(q.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop,i.converters.viewportToWindow)(t.positionState.absTop)}),s.identity))})))})),m.MH)}))}},e.cardPositionInViewportGetter=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return p.vM((function(){return(0,l.pipe)(e.view(Y.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,l.pipe)(t.get(n),v.chain((function(e){var o,a,c,u=e.value;return(0,l.pipe)(r,v.map(i.converters.windowToViewport),v.alt((function(){return v.some((0,s.flow)(q.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop)(u.positionState.absTop))})),v.map((o=u,a=function(e,t){return(0,l.pipe)(t.get(e),v.map((function(e){var n=e.index;return{before:(0,l.pipe)(t.getAt(n-1),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0}))),after:(0,l.pipe)(t.getAt(n+1),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0})))}})),v.getOrElse((function(){return{before:0,after:0}})))}(n,t),c=i.viewport,function(e){var t=(0,Z.v_)({cardTop:e,cardHeight:o.positionState.height,viewportHeight:c.height,padding:a});return q.L.FromViewportTop.ISO.modify(q.L.concatC(-t))(e)})),v.map(i.converters.viewportToWindow))})))})),m.MH)}))}}}(i||(i={})),function(e){var t=function(e,t,n,r){var i=r.viewport.get(),o=r.scrollTop.get(),a=q.L.converters(o,q.r.FromWindowTop.ISO.unwrap(i.top),r.paddingTop.get());return p.vM((function(){return(0,l.pipe)(Y.nL.getLens(n),v.chain((function(t){return t.items.get(e)})),v.map((function(e){return q.L.AbsTop.ISO.wrap(e.value.positionState.absTop)})),v.map((function(e){return a.absTopToViewportTop(e)})),v.fold((function(){throw new f.ej("Cannot get offset for unknown card")}),(function(e){var n=a.windowToViewport(t);return q.L.FromViewportTop.ISO.unwrap(e)-q.L.FromViewportTop.ISO.unwrap(n)})))}))};e.moveCardToPositionSyncGetter=function(e,n){return function(r){return(0,l.pipe)(t(r.cardId,r.position,e.get(),n),y.chain((function(e){return n.moveCardsBy(e,"moveCardToPositionAnimated")})))}},e.moveCardToPositionAnimatedGetter=function(e,n){return function(r){return(0,l.pipe)(t(r.cardId,r.position,e.get(),n),y.fold((function(e){return V._(e)}),(function(e){return n.moveCardsByAnimated(e,"moveCardToPositionAnimated")})))}}}(o||(o={}));var J,K,Q,ee=n(32917);!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(J||(J={})),function(e){e.cardSuggestedPositionGetter=function(e,t){return function(n,r,i,o){var a="cardTop"===o?0:t(r);return(0,l.pipe)(e(n,(0,l.pipe)(i,v.map(q.r.FromWindowTop.ISO.modify(q.L.concatC(-a))))),y.map((function(e){return{top:e,contentOffset:a}})))}},e.getSuperScrollMapper=function(t,n,a){var s=o.moveCardToPositionAnimatedGetter(t,n),l=o.moveCardToPositionSyncGetter(t,n),c=r.contentOffsetGetter();return{setCardPosition:function(e,t,n,r){var i={top:r,contentOffset:c(t,a.get())};return(n?s({cardId:e,position:r}):I.of(l({cardId:e,position:r})).pipe(A.U(p.MH))).pipe(k.h(i),E.O(i),T.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(i.cardPositionGetter(t,n),(function(e){return c(e,a.get())})),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(i.cardPositionInViewportGetter(t,n),(function(e){return c(e,a.get())})),willFitViewport:j(t,n)}}}(K||(K={})),function(e){e.getMapper=function(e,t,n){return{moveAlertHighlightInViewport:function(t,n,r){return e.ensureAlertHighlightInViewport(t,q.r.FromWindowTop.ISO.unwrap(n),r)},getMarkAlertPosition:function(r){return(0,l.pipe)(e.getMarkByAlert(r),v.chain((function(i){return(0,l.pipe)(i.getRect(),y.map(u.n.relativeToViewport),y.map((function(e){return v.some(e.top)})),y.getOrElse((function(){return n.debug("Cached alert is missing, falling back to flush"),function(n){return t.flushChanges(),(0,l.pipe)(e.getMarkByAlert(n),v.chain((function(e){return(0,l.pipe)(v.fromEither((0,l.pipe)(e.getRect(),y.map(u.n.relativeToViewport),y.map((function(e){return e.top})))))})))}(r)})),v.map(q.r.FromWindowTop.ISO.wrap))})))}}}}(Q||(Q={}));var te,ne;!function(){function e(e,t){this._cardPositions=e,this._markPositions=t,this._log=b.C8.Logging.root.getLogger("AlignmentViewModel")}e.prototype.alignCardToMark=function(e,t,n){var r=this,i=e.id,o=e.renderOptions.features,a=e.activeAlert,s=e.activeHighlightIndex;return R.P((function(){return I.of(r._markPositions.getMarkAlertPosition({alert:a,highlightIndex:s}))})).pipe(L.w(v.fold(M.c,(function(e){return I.of(e)}))),A.U((function(e){return{mark:e,card:p.MH(r._cardPositions.getCardSuggestedPositionInViewport(i,o.has(X.X.RenderOptions.Features.showLabel),v.some(e),"cardContentTop"))}})),L.w((function(e){var l=e.card,c=e.mark;return N.T(r._cardPositions.setCardPosition(i,o.has(X.X.RenderOptions.Features.showLabel),t===J.ANIMATE_ALL,q.r.FromWindowTop.ISO.modify(q.L.concatC(-l.contentOffset))(c)),_.Ft(r._markPositions.moveAlertHighlightInViewport({alert:a,highlightIndex:s},q.r.FromWindowTop.ISO.modify(q.L.concatC(l.contentOffset))(l.top),t===J.ANIMATE_ALL?d.uq.initial:d.uq.none))(n))})),k.h(_.PU),P.K((function(e){return r._log.error("Cannot align card to mark",e),M.c()})),F.B())},e.prototype.alignMarkToCard=function(e,t,n){var r=this,i=e.id,o=e.renderOptions.features,a=e.activeHighlightIndex,s=e.activeAlert;return R.P((function(){return I.of(r._markPositions.getMarkAlertPosition({alert:s,highlightIndex:a}))})).pipe(S.oA,L.w((function(e){var t=p.MH(r._cardPositions.getCardSuggestedPositionInViewport(i,o.has(X.X.RenderOptions.Features.showLabel),v.none,"cardContentTop"));return r._cardPositions.setCardPosition(i,o.has(X.X.RenderOptions.Features.showLabel),!1,q.r.FromWindowTop.ISO.modify(q.L.concatC(-t.contentOffset))(e)).pipe(T.x(),k.h((0,l.pipe)(n,v.filter((function(e){return r._cardPositions.willFitViewport(i,q.r.FromWindowTop.ISO.modify(q.L.concatC(-t.contentOffset))(e))})),v.getOrElse((function(){return q.r.FromWindowTop.ISO.modify(q.L.concatC(t.contentOffset))(t.top)})))))})),L.w((function(e){return r._markPositions.moveAlertHighlightInViewport({alert:s,highlightIndex:a},e,t===J.ANIMATE_ALL?d.uq.fake:d.uq.none)})),k.h(_.PU),P.K((function(e){return r._log.error("Cannot align mark to card",e),M.c()})),F.B())},e.prototype.alignMarkTo=function(e,t,n,r){var i=this;return R.P((function(){return I.of(i._markPositions.getMarkAlertPosition(t))})).pipe(A.U(v.map((0,s.flow)(q.r.FromWindowTop.ISO.modify((function(e){return e-q.r.FromWindowTop.ISO.unwrap(n)})),q.r.FromWindowTop.ISO.unwrap))),S.oA,L.w((function(e){return i._markPositions.moveAlertHighlightInViewport(t,n,r===J.ANIMATE_ALL?d.uq.initial:d.uq.none).pipe(k.h(e))})),L.w((function(t){var n=p.MH(i._cardPositions.getCardSuggestedPositionInViewport(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),v.none,"cardContentTop"));return i._cardPositions.setCardPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),!1,q.r.FromWindowTop.ISO.modify(q.L.concatC(t))(n.top))})),k.h(_.PU),P.K((function(e){return i._log.error("Cannot align mark to suggested position",e),M.c()})),F.B())},e.prototype.alignCardTo=function(e,t,n){var r=this,i=n!==J.NO_ANIMATION;return R.P((function(){return I.of(p.MH(r._cardPositions.getCardSuggestedPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),v.some(t),"cardTop")))})).pipe(L.w((function(t){return r._cardPositions.setCardPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),i,t.top)})),k.h(_.PU),P.K((function(e){return r._log.error("Cannot align card to required top",e),M.c()})),F.B())}}();!function(e){var t=function(){this.alignCardToMark=function(){return M.c()},this.alignMarkToCard=function(){return M.c()},this.alignCardTo=function(){return M.c()},this.alignMarkTo=function(){return M.c()}};e.Mock=t}(te||(te={})),function(e){var t;!function(e){var t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=function(e,n,r){return n.top+r>e.bottom?t.below:e.top>n.bottom?t.above:t.intersects}}(t||(t={})),e.createAlignmentOnTypingEffect=function(e,t,n){var r=e.view(Y.nL.mapper((function(e){var t=e.currentLens;return(0,l.pipe)(v.some(t),v.filter(Z.Bk))}))).pipe(A.U(v.chain(Y.In.getActiveItemWithAlert),v.filter(Z.S4)),S.cp((function(e){return n.pipe(L.w(_.b2.rafScheduler),L.w((function(){return t.alignCardToMark(e,J.NO_ANIMATION,!1)})))})));return{id:"alignmentOnTyping",when:C.R.isWithAlertsId,what:Y.nL.Effect.Applicator.create(r.pipe(O.c(B.F())))}},e.createAlignOnDisjointedAreasEffect=function(e,n,r,i){var o=e.view((0,s.flow)(Y.nL.getLens,v.filter((function(e){return v.isNone(Y.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0})))),a=o.pipe(A.U(v.isSome),T.x(),L.w(_.Ft(r.changes.pipe(E.O(_.PU),L.w(_.b2.rafScheduler),A.U((function(){return v.some(function(e){var t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}}(r))})),A.U(v.filter((function(e){return e.top-e.bottom!=0})))))),D.M(o.pipe(A.U(v.map((function(e){return e.items})))),m.vB((function(r,o){return(0,l.pipe)(ee.YA(e,i),v.map((function(e){return{top:q.r.FromWindowTop.ISO.unwrap(e.top),bottom:q.r.FromWindowTop.ISO.unwrap(e.bottom)}})),v.chain((function(e){return(0,l.pipe)(function(e,n,r){var i=(0,l.pipe)(e.getAt(0),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0}))),o=t.getRelativePosition(n,r,i);switch(o){case t.RelativePosition.above:return(0,l.pipe)(e.getAt(0),v.map((function(e){return{card:e,top:n.top}})));case t.RelativePosition.below:return(0,l.pipe)(e.getAt(0),v.map((function(e){return{card:e,top:n.bottom-e.positionState.height}})));case t.RelativePosition.intersects:return v.none;default:return(0,f.vE)(o)}}(o,r,e),v.map((function(e){var t=e.card,r=e.top;return n.alignCardTo(t,q.r.FromWindowTop.ISO.wrap(r),J.NO_ANIMATION)})))})),v.getOrElse(M.c))}))),L.w(v.fold(M.c,c.y)));return{id:"alignOnDisjointedAreas",when:C.R.isWithAlertsId,what:Y.nL.Effect.Applicator.create(a.pipe(O.c(B.F())))}},e.createAlignOnResizeSideEffect=function(e,t,n,r){void 0===r&&(r=_.b2.rafScheduler);var i=e.view(Y.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).view(v.filter((function(e){var t=e.currentLens;return(0,Z.Bk)(t)}))).view(v.chain((function(e){var t=e.currentLens,n=e.alertSource;return(0,l.pipe)(Y.In.getActiveItemWithAlert(t),v.filter(Z.S4),v.map((function(e){return{card:e,source:n,lensId:t.id}})))}))),o=x.Qr.pipe(W.p(100),U.T(n),D.M(i,(function(e,t){return t})),L.w(r),L.w(v.fold(M.c,(function(e){var n=e.card;return t.alignCardToMark(n,J.NO_ANIMATION,!1)}))));return{id:"alignOnResizeSideEffect",when:C.R.isWithAlertsId,what:Y.nL.Effect.Applicator.create(o.pipe(O.c(B.F())))}},e.createAlignmentSideEffect=function(e,t,n,r){void 0===r&&(r=_.b2.rafScheduler);var i=(0,h.Kg)(G.l.isAlertMinicardButtonClick,G.l.isSwitchToClosestByViewport,G.l.isAlertCardShow,G.l.isCardExpand),o=N.T(e.view(Y.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).pipe(E.O(v.none),A.U(v.map((function(e){return e.currentLens.id}))),H.G(),z.h((function(e){var t=e[0],n=e[1];return(0,l.pipe)(m.vB((function(e,t){return e!==t}))(t,n),v.exists(c.y))})),k.h(v.none)),e.view(Y.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).pipe(z.h(v.exists((function(e){var t=e.currentLens;return(0,Z.Bk)(t)}))),A.U(v.chain((function(e){var t=e.currentLens,n=e.alertSource;return(0,l.pipe)(Y.In.getActiveItemWithAlert(t),v.filter(Z.S4),v.map((function(e){return{card:e,source:n,lensId:t.id}})))}))))).pipe(T.x((0,s.flow)(m.vB((function(e,t){return e.lensId===t.lensId&&e.card.activeAlert.id===t.card.activeAlert.id&&e.card.visualState.transition.type===t.card.visualState.transition.type&&e.card.activeHighlightIndex===t.card.activeHighlightIndex})),v.exists(c.y)))),u=n.pipe(z.h(i),A.U(v.some),E.O(v.none),H.G(),z.h((0,s.flow)((0,s.tupled)(m.vB((function(e,t){return!G.l.isAlertCardShow(t)||!G.l.isAlertMinicardButtonClick(e)}))),v.getOrElse(s.constFalse))),A.U((function(e){var t=e[1];return(0,l.pipe)(t,v.filter(G.l.isAlertMinicardButtonClick),v.map(g.ei("clickPoint")))})),E.O(v.none)).pipe(L.w((function(e){return o.pipe(z.h(v.exists((function(e){return e.source===w.l$.sidebar}))),A.U((0,s.flow)(v.chain((function(t){return v.some((0,a.__assign)((0,a.__assign)({},t),{clickPoint:e}))})))))}))),d=o.pipe(z.h(v.exists((function(e){return e.source!==w.l$.sidebar}))),A.U((function(e){return(0,l.pipe)(e,v.chain((function(e){return v.some((0,a.__assign)((0,a.__assign)({},e),{clickPoint:v.none}))})))}))),p=N.T(u,d).pipe(E.O(v.none),H.G(),A.U((function(e){var t=e[0],n=e[1];return(0,l.pipe)(n,v.map((function(e){return{card:e.card,source:e.source,animate:(0,l.pipe)(t,m.wo((function(t){return t.lensId===e.lensId}))),clickPoint:(0,l.pipe)(n,v.chain(g.ei("clickPoint")),v.map((0,s.flow)(g.ei("y"),q.r.FromWindowTop.ISO.wrap)))}})))})),L.w(v.fold(M.c,r)),L.w((function(e){var n=e.card,r=e.source;return function(e,n,r,i){if(r===w.l$.text)return t.alignCardToMark(e,n?J.ANIMATE_ALL:J.NO_ANIMATION,!0);if(r===Y.h8.forceText)return t.alignCardToMark(e,J.NO_ANIMATION,!1);var o=r===w.l$.sidebar;return t.alignMarkToCard(e,o?n?J.ANIMATE_ALL:J.ANIMATE_MARK:J.NO_ANIMATION,i)}(n,e.animate,r,e.clickPoint)})));return{id:"alignmentSideEffect",when:C.R.isWithAlertsId,what:Y.nL.Effect.Applicator.create(p.pipe(O.c(B.F())))}}}(ne||(ne={}))},96892:(e,t,n)=>{"use strict";n.d(t,{dv:()=>k,Xx:()=>ie});var r,i=n(95686),o=n(45980),a=n(73805),s=n(32952),l=n(42726),c=n(84966),u=n(59312),d=n(72635);!function(e){var t;e.URI="IOOption",e.ioOption=(0,u.__assign)({URI:e.URI},(0,d.getOptionM)(i.io)),t=(0,a.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,n){return function(r){return e.ioOption.fold(r,t,n)}},e.fromM=e.ioOption.fromM}(r||(r={}));var p,f,m=n(22232),h=n(83078),g=n(8125),v=n(64909),y=n(489),b=n(65772),w=n(92932),C=n(71102),_=n(42654),S=n(41199);!function(e){var t,n,r;e.eq=_.fromEquals((function(t,r){return e.isActive(t)&&e.isActive(r)?C.getEq(n.eq).equals(t.alerts,r.alerts)&&t.count===r.count&&t.appearanceBehavior===r.appearanceBehavior&&t.kind===r.kind&&t.showNewLabel===r.showNewLabel&&t.applied===r.applied:t.kind===r.kind})),function(e){e.deactivated="deactivated",e.minimized="minimized",e.expanded="expanded"}(t=e.Kind||(e.Kind={})),function(e){e.eq=_.fromEquals((function(e,t){return S.$.eq.equals(e.alert,t.alert)}))}(n=e.AlertInBulk||(e.AlertInBulk={})),e.isExpanded=function(e){return e.kind===t.expanded},e.isMinimized=function(e){return e.kind===t.minimized},e.isDeactivated=function(e){return e.kind===t.deactivated},e.isActive=function(t){return(0,o.not)(e.isDeactivated)(t)},e.isVisibleInViewport=function(t){return e.isActive(t)&&t.appearanceBehavior===r.visibleInViewport},e.isInTransition=function(t){return e.isActive(t)&&t.appearanceBehavior===r.inTransition},e.isCollapsedInMiniButton=function(t){return e.isActive(t)&&r.isCollapsedInMiniButton(t.appearanceBehavior)},function(e){e.visibleInViewport="visibleInViewport",e.invisible="invisible",e.firstTimeCollapse="firstTimeCollapse",e.collapseInMiniButton="collapseInMiniButton",e.inTransition="inTransition"}(r=e.AppearanceBehavior||(e.AppearanceBehavior={})),function(e){e.isInvisible=function(t){return[e.invisible,e.inTransition].includes(t)},e.isCollapsedInMiniButton=function(t){return[e.collapseInMiniButton,e.firstTimeCollapse].includes(t)}}(r=e.AppearanceBehavior||(e.AppearanceBehavior={}))}(p||(p={})),function(e){!function(e){e.mount="mount",e.apply="apply",e.dismiss="dismiss",e.ignore="ignore",e.highlight="highlight",e.individualUndo="individualUndo",e.showPanel="showPanel"}(e.Kind||(e.Kind={}))}(f||(f={}));var x=n(17753),I=n(10002),A=n(66910);var k,E=function(){function e(t,n){void 0===n&&(n=new URLSearchParams),this.base=t,this.params=n;var r=e._toString(t,n).length;(0,m.kG)(r<e.MAX_URL_LENGTH,"url exceeded length limit",String(r))}return e.prototype.addParams=function(t){var n,r=Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1];return e.append(n,r),e}),(n=this.params,new URLSearchParams(n.toString())));return new e(this.base,r)},e.prototype.toString=function(){return e._toString(this.base,this.params)},e._toString=function(e,t){var n=t.toString();return e+(n.length?"?"+n:"")},e.MAX_URL_LENGTH=2083,e}(),T=n(52479),R=n(73510),L=n(95053),M=n(598),N=n(40151),P=n(76974),F=n(66310),O=n(91402),B=n(77176),D=n(79462),W=n(83401),U=n(77843),H=n(93508),z=n(95093),X=n(85985),G=n(36919),V=n(2834),Y=n(24209),q=n(49524),$=n(67434),Z=n(38194),j=n(40250),J=n(45429),K=n(40644),Q=n(50536),ee=n(87280),te=n(62712),ne=n(38524);!function(e){e.changeAlertEffect=function(e,t,n,r,i,o,s){return{id:"changeAlertEffect",when:I.R.isWithAlertsId,what:ne.nL.Effect.SwitchAlert.create(t.actionEvents.pipe(F.w((function(t){var l=e.get();if(!ne.nL.hasCards(l))return O._(new m.ej("Cannot update state without cards"));switch(t.type){case A.l.Type.alertMinicardButtonClick:return(0,a.pipe)(r.getRegistered(t.alertHighlight.alert.id),v.fold((function(){return s.error("somehow we got click on non registered alert",{alert:S.$.snapshot(t.alertHighlight.alert),alertInRepo:(0,a.pipe)(r.getById(t.alertHighlight.alert.id),v.map(S.$.fromModel),v.map(S.$.snapshot)),state:ne.nL.snapshot(Q.Mq.snapshot)(l)}),N.c()}),(function(){return P.of(t.alertHighlight)})));case A.l.Type.cardMatchesNavigationButtonClick:var c=t.transitionTo;switch(c.kind){case"anotherAlert":return(0,a.pipe)("right"===t.direction?n.nextAlert(c.card):(0,a.pipe)(n.prevAlert(c.card),h.vx(n.anyRegisteredAlert(c.card))),v.fold(N.c,(function(e){return P.of({alert:e,highlightIndex:0})})));case"sameAlert":return(0,a.pipe)(r.getRegistered(c.card.activeAlert.id),v.fold(N.c,(function(){return P.of({alert:c.card.activeAlert,highlightIndex:c.highlightIndex})})));default:return(0,m.vE)(c)}case A.l.Type.switchToClosestByViewport:return function(e,t,n){var r=function(e){return(0,a.pipe)(t,v.map((function(t){return t.alignMarkToCard(e,J.DV.ANIMATE_ALL,v.none).pipe(M.c(N.c()))})),v.getOrElse((function(){return N.c()})))};return(0,a.pipe)(n((function(t){return(t.lensId===e.id||e.id===I.R.SpecialId.AllAlerts)&&!x.bZ.isPremium(t)}),"middleOfTheViewport"),v.fold(N.c,(function(t){return(0,a.pipe)(ne.In.getActiveItemWithAlert(e),v.filter((function(e){return e.activeAlert.id===t.alert.id})),v.fold((function(){return P.of(t)}),r))})))}(l.currentLens,i,o);default:return N.c()}})),B.U((function(e){return{alertHighlight:e,alertSource:x.l$.sidebar,options:{order:"lensOrder"}}}))))}},e.updateBulkStatusMarkEffect=function(e,t){return{id:"cardsViewModel.updateBulkStatusMark",when:I.R.isWithAlertsId,what:ne.nL.Effect.Applicator.create((0,a.pipe)(e,v.map((function(e){return e.pipe(F.w(T.b2.rafScheduler),B.U((function(e){return function(n){var r=(p.isActive(e)?j.l.filter(n.currentLens.items,(0,g.W9)(K.X.isAlertCard,(function(t){return(0,a.pipe)(e.alerts,y.Ew((function(e){return e.alert.id===t.activeAlert.id})),v.isSome)}))).keys().map((function(e){return[e,!0]})):j.l.filter(n.currentLens.items,K.X.isAlertCard).keys().map((function(e){return[e,!1]}))).reduce((function(e,n){var r=n[0],i=n[1];return(0,a.pipe)(j.l.update(e,r,(function(e){return t.toggleBulkAccept(e,i)})),b.fold((function(){return e}),o.identity))}),n.currentLens.items);return ne.nL.Prism.lensCards.set(r,n)}})))})),v.getOrElse((function(){return ne.nL.Effect.Applicator.Source.empty}))))}},e.createSendActiveAlertFeedbacksEffect=function(e,t,n,r){var i=e.view(ne.nL.getActiveAlert).pipe(B.U(v.filter((function(e){return v.isSome(n.getRegistered(e.id))&&!x.bZ.isInPremiumLens(e)}))),F.w(v.fold(N.c,(function(e){return D.y.create((function(){return(0,a.pipe)(t.applyFeedback(e.id,{kind:c.PZ.LOOKED},x.l$.sidebar),b.fold(r.handler("Failed to send LOOKED feedback").error,o.constVoid)),function(){v.isSome(n.getRegistered(e.id))&&(0,a.pipe)(t.applyFeedback(e.id,{kind:c.PZ.CLOSED},x.l$.sidebar),b.fold(r.handler("Failed to send CLOSED feedback: ").error,o.constVoid))}}))}))));return{id:"sendActiveAlertFeedbacksEffect",when:o.constTrue,what:ne.nL.Effect.Applicator.create(i.pipe(M.c(W.F())))}}}(k||(k={}));var re,ie=function(){function e(e,t,n,r,i,l,u,d,p,f,y){var C=this;this._ops=e,this._navigationEvents=t,this._cardFactory=n,this._alertsService=r,this._markOnboardingAsSeen=i,this._markMuteQuotedAdviceAsDismissed=l,this._sendToUpgradeExperiment=d,this._sendToSignInExperiment=p,this._checksFeedCapabilities=y,this._log=w.C8.Logging.getLogger("CardsViewModelImpl",w.zW.LogLevel.DEBUG),this._subs=new R.w.Keeper,this._flushCompleteTransition=new s.xQ,this._flushPositionAnimation=new s.xQ,this.actionEvents=new s.xQ,this.completePositionAnimation=new s.xQ,this.changePosition=new s.xQ,this._transitionBuffer=U.F(100).pipe(H.O(0),z.T(this._flushCompleteTransition)),this._positionAnimationBuffer=U.F(100).pipe(H.O(0),z.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(X.h(A.l.isStartTransitionTo),B.U((function(e){return function(t){var n=t.currentLens,r=C._applyStartVSChange(n.items,[[e.cardId,e.transition]]);return ne.nL.Prism.lensCards.set(r,t)}}))),this._completeTransitionStateChanges=this.actionEvents.pipe(X.h(A.l.isCompleteTransitionTo),G.f(this._transitionBuffer),X.h(g.Dw),B.U((function(e){return function(t){var n=t.currentLens,r=C._applyCompleteVSChange(n.items,e.map((function(e){return[e.cardId,e.transitionId]})));return C._log.isEnabled(w.zW.LogLevel.TRACE)&&C._log.trace("batch transition complete",{events:e,diff:L.aW.diff(n.items,r)}),ne.nL.Prism.lensCards.set(r,t)}}))),this._changePositionEffect=this.changePosition.pipe(B.U((function(e){var t=e.cardId,n=e.height;return function(e){var r=(0,a.pipe)(j.l.update(e.currentLens.items,t,(function(e){return C._checksFeedCapabilities.changePosition(ee.Z.changeHeight(e.positionState,n))(e)})),b.fold((function(){return e.currentLens.items}),o.identity));return ne.nL.Prism.lensCards.set(r,e)}}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(G.f(this._positionAnimationBuffer),X.h(g.Dw),B.U((function(e){return function(t){var n=t.currentLens.items,r=e.map((function(e){return[e,!1]})).reduce((function(e,t){var n=t[0],r=t[1];return(0,a.pipe)(j.l.update(e,n,(function(e){return C._checksFeedCapabilities.changePosition(ee.Z.changeAnimationInProgress(e.positionState,r))(e)})),b.fold((function(){return e}),o.identity))}),n);return ne.nL.Prism.lensCards.set(r,t)}}))),this._switchToNextChanges=this.actionEvents.pipe(X.h((function(e){return e.type===A.l.Type.switchToNext})),B.U((function(){return function(e){return e.patch({currentLens:(0,a.pipe)(e.currentLens.findNextAlert(),v.fold((function(){return(0,a.pipe)(ne.nL.getActiveAlert(e),v.fold((function(){throw new m.ej("Can not switch from non-existing card")}),(function(t){return e.currentLens.releaseAlert(t)})))}),(function(t){return e.currentLens.select(t)}))),switchOrder:"lensOrder",alertSource:x.l$.sidebar})}}))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(X.h(A.l.isDismissMuteQuotedAdvice),V.b(this._markMuteQuotedAdviceAsDismissed),B.U((function(){return function(e){var t=j.l.filter(e.currentLens.items,(0,g.W9)(K.X.isAlertCard,(function(e){return S.$.isInQuotes(e.activeAlert)}))).keys().map((function(e){return[e,!1]})).reduce((function(e,t){var n=t[0];return(0,a.pipe)(j.l.update(e,n,C._cardFactory.hideMuteQuotedAdvice),b.fold((function(){return e}),o.identity))}),e.currentLens.items);return ne.nL.Prism.lensCards.set(t,e)}}))),this._toggleNonPriorityCards=this.actionEvents.pipe(X.h(A.l.isToggleNonPriorityCards),B.U((function(){return function(e){return e.patch({currentLens:(0,ne.yi)(e.currentLens)?e.currentLens.toggleNonPriorityList():e.currentLens})}}))),this._changeUserInput=this.actionEvents.pipe(X.h(A.l.isChangeUserInput),V.b((function(e){var t=e.alertId,n=e.userInput;C._alertsService.changeUserInput(t,n)})),B.U((function(e){var t=e.cardId,n=e.userInput;return function(e){var r=(0,a.pipe)(j.l.update(e.currentLens.items,t,(function(e){return ne.nL.Items.deprecatedMapper((function(e){return C._cardFactory.updateUserInput(e,n?v.some(n):v.none)}),o.identity,o.identity)(e)})),b.fold((function(){return e.currentLens.items}),o.identity));return ne.nL.Prism.lensCards.set(r,e)}}))),this._applyTakeawayFeedback=this.actionEvents.pipe(X.h(A.l.isTakeawayFeedbackAction),B.U((function(e){var t=e.alertId,n=e.feedbackType;return function(e){var r=j.l.filter(e.currentLens.items,(0,g.W9)(K.X.isAlertCard,(function(e){return e.activeAlert.id===t}))).keys().map((function(e){return[e,n]})).reduce((function(e,t){var n=t[0],r=t[1];return(0,a.pipe)(j.l.update(e,n,(function(e){return C._cardFactory.updateTakeawayFeedback(e,v.some(r))})),b.fold((function(){return e}),o.identity))}),e.currentLens.items);return ne.nL.Prism.lensCards.set(r,e)}}))),this._sendToUpgrade=(0,a.pipe)(this._sendToUpgradeExperiment,v.map((function(e){return e(C.actionEvents)}))),this._sendToSignIn=(0,a.pipe)(this._sendToSignInExperiment,v.map((function(e){return e(C.actionEvents)}))),this._sendFeedback=(0,o.flow)((function(e,t){return C._alertsService.applyFeedback(e,t,x.l$.sidebar)}),b.fold(this._log.handler("error calling alert service to send a feedback").error,o.constVoid)),this._showIgnoreForm=new s.xQ,this._showIgnoreFormEffect=(0,a.pipe)(this._showIgnoreForm,B.U((function(e){return function(t){return ne.nL.Prism.lensCards.set(C._applyStartVSChange(t.currentLens.items,[[e.cardId,{type:"feedback_form",clockwise:!0,options:e.options}]]),t)}}))),this._handleAlertIgnore=(0,o.flow)(oe((function(e){return function(){return C._sendFeedback(e,{kind:c.PZ.IGNORE})}}),(function(e){return function(){return C._showIgnoreForm.next(e)}})),(function(e){return C.actionEvents.pipe(X.h(A.l.isAlertIgnoreAction)).subscribe((function(t){return e(t)()}))})),this.applicatorEffects={id:"cardsViewModel.effects",when:I.R.isWithAlertsId,what:ne.nL.Effect.Applicator.create(Y.T(this._startTransitionStateChanges,this._completeTransitionStateChanges,this._changePositionEffect,this._transitionEndStateChanges,this._switchToNextChanges,this._dismissMuteQuotedAdvice,this._changeUserInput,this._applyTakeawayFeedback,this.actionEvents.pipe(X.h(A.l.isNavigation),V.b(this._navigationEvents),M.c(N.c())),(0,a.pipe)(this._sendToUpgrade,v.fold(N.c,q.y)),(0,a.pipe)(this._sendToSignIn,v.fold(N.c,q.y)),this._toggleNonPriorityCards,this._showIgnoreFormEffect))},this.hovered=this.actionEvents.pipe(X.h(A.l.isHoverAction),V.b((function(){return C._ops.flush()})),$.R((function(e,t){return"hover"===t.kind?v.some(t.cardId):(0,a.pipe)(e,v.filter((function(e){return e!==t.cardId})))}),v.none),Z.B()),this.flushTransitionTo=function(){return C._flushCompleteTransition.next()},this.flushPositionAnimation=function(){return C._flushPositionAnimation.next()},this._subs.push(this._handleAlertFeedbacks(),this._handleTakeawayFeedbacks(),this._handleIngoreFormSubmit(),this._handleAlertIgnore(f),this._applyAlerts(),this._dismissAlertsBatch(),this._newFeatureSeen()),(0,a.pipe)(u,h.bw((function(e){return C._subs.push(C._handleMuteCategories(e))})))}return e.prototype._applyStartVSChange=function(e,t){var n=this;return t.reduce((function(e,t){var r=t[0],i=t[1];return(0,a.pipe)(j.l.update(e,r,(function(e){return ne.nL.Items.deprecatedMapper((function(e){return n._cardFactory.transitionTo(e,i)}),o.identity,(function(e){return te.J.transitionTo(e,i)}))(e)})),b.fold((function(){return e}),o.identity))}),e)},e.prototype._applyCompleteVSChange=function(e,t){var n=this;return t.reduce((function(e,t){var r=t[0],i=t[1];return(0,a.pipe)(e.get(r),v.map((function(e){return e.value})),v.fold((function(){return b.right(e)}),(function(t){return"removed"===t.visualState.transition.type?b.right(e.remove(r)):j.l.update(e,r,(function(e){return e.visualState.transitionId===i?ne.nL.Items.deprecatedMapper((function(e){return n._cardFactory.completeTransition(e,i)}),o.identity,(function(e){return te.J.completeTransition(e,i)}))(e):e}))})),b.fold((function(){return e}),o.identity))}),e)},e.prototype._handleAlertFeedbacks=function(){var e=this;return this.actionEvents.pipe(X.h(A.l.isAlertFeedbackAction)).subscribe((function(t){var n=t.alertId,r=t.feedbackType;return e._sendFeedback(n,{kind:r})}))},e.prototype._handleTakeawayFeedbacks=function(){var e=this;return this.actionEvents.pipe(X.h(A.l.isTakeawayFeedbackAction)).subscribe((function(t){var n=t.alertId,r=t.feedbackType;return e._sendFeedback(n,{kind:r})}))},e.prototype._handleIngoreFormSubmit=function(){var e=this;return this.actionEvents.pipe(X.h(A.l.isAlertIgnoreFeedbackFormSubmit)).subscribe((function(t){var n=t.alertId,r=t.reason;return e._sendFeedback(n,{kind:c.PZ.IGNORE,reason:r})}))},e.prototype._handleMuteCategories=function(e){var t=this;return this.actionEvents.pipe(X.h(A.l.isMuteCategoryAction)).subscribe((function(n){return(0,a.pipe)(e.muteCategories([n.categoryId],!0),b.fold(t._log.handler("error calling categories model to mute category").error,o.constVoid))}))},e.prototype._applyAlerts=function(){var e=this;return this.actionEvents.pipe(X.h(A.l.isAlertApplyAction)).subscribe((function(t){return(0,a.pipe)(e._alertsService.apply(t.alertId,t.alternativeIndex,x.l$.sidebar),b.fold(e._log.handler("error calling alert service to apply an alert").error,o.constVoid))}))},e.prototype._dismissAlertsBatch=function(){var e=this;return this.actionEvents.pipe(X.h(A.l.isDismissAlertsBatchAction)).subscribe((function(t){return(0,a.pipe)(e._alertsService.dismissBatch(t.alerts),b.fold(e._log.handler("error calling alert service to dismiss alerts batch").error,o.constVoid))}))},e.prototype._newFeatureSeen=function(){var e=this;return this.actionEvents.pipe(X.h(A.l.isOnboardingClose)).subscribe((function(t){return(0,a.pipe)(e._markOnboardingAsSeen(t.value))}))},e.prototype.dispose=function(){this._subs.dispose()},e}();!function(e){var t=function(){var e=this;this.animate=l.hg.create(!0),this.clockwise=l.hg.create(!0),this.toggleAnimations=function(){return e.animate.modify((function(e){return!e}))},this.completePositionAnimation=new s.xQ,this.actionEvents=new s.xQ,this.flushTransitionTo=o.constVoid,this.sideEffect={id:"cardsViewModelMock",when:I.R.isWithAlertsId,what:ne.nL.Effect.Applicator.create(N.c())},this.changePosition=new s.xQ,this.dispose=g.ZT};e.Mock=t,function(e){e.sendToUpgrade=function(e,t,n){return function(r){return r.pipe(X.h((function(e){return e.type===A.l.Type.toUpgrade})),B.U((function(){return function(r){return n(),e.actions.openUrl(new E(t.funnel.plans).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenaliPremiumPreviewCard"})),r}})))}},e.sendToSignIn=function(e,t){return function(n){return n.pipe(X.h((function(e){return e.type===A.l.Type.toSignIn})),B.U((function(){return function(n){return e.actions.openUrl(new E(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),n}})))}}}(e.Experiments||(e.Experiments={}))}(re||(re={}));var oe=function(e,t){return function(n){return function(o){return(0,a.pipe)(o.eligibleForDismissSurvey,i.of,r.chain((function(e){return(0,a.pipe)(n,i.map((function(t){return t?v.none:v.some(e)})))})),r.fold((function(){return e(o.alertId)}),(function(e){return t({cardId:o.cardId,options:e})})))}}}},24740:(e,t,n)=>{"use strict";n.d(t,{$:()=>W});var r,i=n(489),o=n(45980),a=n(73805),s=n(36991),l=n(67394),c=n(64909),u=n(65772),d=n(80229),p=n(17753),f=n(22232),m=n(59312),h=n(95574),g=n(53521);function v(e,t){var n=t.text;t.ops.reduce((function(t,n,r){return l.JU.isInsertString(n)?(e.insertString(n.insert,n,r),t):l.JU.isInsertGap(n)?(e.insertGap("",n,r),t):l.JU.isInsert(n)?t:l.JU.isDelete(n)?(e.remove(t.slice(0,n.delete),n,r),t.slice(n.delete)):l.JU.isRetain(n)?(e.retain(t.slice(0,n.retain),n,r),t.slice(n.retain)):(0,f.vE)(n)}),n)}function y(e){return 0===e.replace(/ /g,"").length}function b(e,t){(0,a.pipe)(e,i.Z$,c.fold((function(){y(t.text)||e.push(t)}),(function(n){n.type===t.type?n.text+=t.text:e.push(t)})))}function w(e){return(0,a.pipe)(h.vM((function(){return(0,a.pipe)(e,d.UI((function(t){var n=[];return v({insertString:function(t,n){if(n.type===l.JU.Type.Main)throw new k("Remove transform contains main insert",e)},insertGap:function(){throw new k("Remove transform contains gap insert",e)},retain:function(e,t){t.type!==l.JU.Type.Optional&&b(n,{type:g.GP.Text,text:e})},remove:function(e,t){var r=t.type;b(n,{type:r!==l.JU.Type.Main||y(e)?g.GP.Text:g.GP.Delete,text:e})}},t),n})),i.xH)})),u.chain((0,o.flow)(u.fromPredicate((function(e){return e.length>0}),(function(){return new k("Remove transform contains no data",e)})),u.map((function(e){return{type:r.Type.Remove,remove:e}})))))}function C(e){return(0,a.pipe)(h.vM((function(){return(0,a.pipe)(e,d.UI((function(t){var n=[];return v({insertString:function(t,n){if(n.type===l.JU.Type.Main)throw new k("Multi-remove transform contains main insert",e)},insertGap:function(){throw new k("Multi-remove transform contains gap insert",e)},retain:function(e){b(n,{type:g.GP.Text,text:e})},remove:function(e,t){var r=t.type;b(n,{type:r!==l.JU.Type.Main||y(e)?g.GP.Text:g.GP.Delete,text:e})}},t),n})))})),u.chain((0,o.flow)(u.fromPredicate((function(e){return e.length>=2&&e.every((function(e){return e.length>=2}))}),(function(){return new k("Incomplete multi-remove",e)})),u.map((function(e){return{type:r.Type.RemoveOr,removes:e}})))))}function _(e){return(0,a.pipe)(h.vM((function(){return(0,a.pipe)(e,d.UI((function(t){var n=[];return v({insertString:function(e,t){var r=t.type;b(n,{type:r!==l.JU.Type.Optional?g.GP.Insert:g.GP.Text,text:e})},insertGap:function(){throw new k("Insert transform contains gap insert",e)},retain:function(e,t){(t.type!==l.JU.Type.Optional||n.length>0)&&b(n,{type:g.GP.Text,text:e})},remove:function(t,n){if(n.type===l.JU.Type.Main)throw new k("Insert transform contains main delete",e)}},t),n})))})),u.chain((0,o.flow)(d.nI,u.fromOption((function(){return new k("Incomplete insert",e)})),u.map((function(e){return{type:r.Type.Insert,inserts:e}})))))}function S(e){var t=e.reduce((function(e,t){var n=t[0],r=t[1],i=n.map((function(e){return e.text})).join("");return e.substitutions.push(i),e.inserts.push(r),i.length>e.longestSubstitution.length&&(e.longestSubstitution=i),e}),{substitutions:[],inserts:[],longestSubstitution:""}),n=t.substitutions,o=t.longestSubstitution,s=t.inserts,l=(0,a.pipe)(n,d.UI((function(e){return o.split(e).join("")})));return(0,a.pipe)(i.yL(s,l,(function(e,t){return t&&e.push({type:g.GP.Text,text:t}),e})),d.nI,u.fromOption((function(){return new Error("Substitution processing error")})),u.map((function(e){return{type:r.Type.Substitution,remove:[{type:g.GP.Delete,text:o}],inserts:e}})))}function x(e){if(!("list"in e))return c.none;switch(e.list){case"bullet":case"dashed":case"ordered":return c.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return c.none}}function I(e){return(0,a.pipe)(e,u.fromPredicate((function(e){return 1===e.length}),(function(){return new k("Expected full-sentence transform to have 1 alternative",e)})),u.map((0,o.flow)(d.YM,(function(t){var n={blockStart:0,ops:[],kind:g._k.PlainText};return v({insertString:function(e,t){var r=e.split("\n");if(1===r.length)n.ops.push({type:g.GP.Insert,text:e});else for(var i=(0,a.pipe)(t.attributes,x,c.fold((function(){return o.constVoid}),(function(e){var t=e.kind,r=e.indent;return function(){n.ops.splice(n.blockStart,1,{type:g.GP.List,kind:t,indent:r}),n={kind:g._k.WithFormatting,ops:n.ops,blockStart:n.blockStart}}}))),s=0,l=r.length-1;s<=l;s++){var u=r[s];u&&n.ops.push({type:g.GP.Insert,text:u}),s<l&&(i(),n.blockStart=n.ops.length,n.ops.push({type:g.GP.Insert,text:"\n"}))}},insertGap:function(){throw new k("Full sentence transform contains gap insert",e)},retain:function(e){n.ops.push({type:g.GP.Text,text:e})},remove:function(e){n.ops.push({type:g.GP.Delete,text:e})}},t),n}))),u.chain((0,o.flow)(c.fromPredicate((function(e){return e.ops.length>0})),u.fromOption((function(){return new k("Got empty full sentence transform",e)})),u.map((function(e){var t=e.ops,n=e.kind;return{type:r.Type.FullSentence,ops:t,kind:n}})))))}function A(e){return(0,a.pipe)(h.vM((function(){return(0,f.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,a.pipe)(e,d.YM,(function(e){var t=[],n=[],r=!1;return v({insertString:function(e,i){var o=i.type;b(r?n:t,{type:o!==l.JU.Type.Optional?g.GP.Insert:g.GP.Text,text:e})},insertGap:function(){(0,f.kG)(!r,"One gap transform does not contain exactly one gap insert"),r=!0},retain:function(e,i){var o=i.type,a=r?n:t;(o!==l.JU.Type.Optional||a.length>0)&&b(a,{type:g.GP.Text,text:e})},remove:o.constVoid},e),(0,f.kG)(r,"One gap transform does not contain exactly one gap insert"),(0,f.kG)(t.length>0||n.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:n}}))})),u.map((function(e){var t=e.left,n=e.right;return{type:r.Type.OneGap,left:t,right:n}})),u.mapLeft(k.fromError(e)))}!function(e){!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.FullSentence=4]="FullSentence",e[e.OneGap=5]="OneGap"}(e.Type||(e.Type={})),function(e){e.parse=function(t){var n=t[0];if(n.isFullSentence)return e.FullSentence;switch(n.type){case l.r3.Type.Insert:return e.Insert;case l.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case l.r3.Type.Substitution:return n.ops.find(l.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,f.vE)(n.type)}}}(e.Type||(e.Type={})),e.create=function(t){var n=e.Type.parse(t);switch(n){case e.Type.Remove:return w(t);case e.Type.RemoveOr:return C(t);case e.Type.Insert:return _(t);case e.Type.Substitution:return function(e){return(0,a.pipe)(h.vM((function(){return(0,a.pipe)(e,d.UI((function(t){var n=[[],[]];return v({insertString:function(e,t){t.type!==l.JU.Type.Optional&&b(n[1],{type:g.GP.Insert,text:"\n"===e?" ":e})},insertGap:function(){throw new k("Substitution transform contains gap insert",e)},remove:function(e){b(n[0],{type:g.GP.Delete,text:e})},retain:function(e,t){if(t.type!==l.JU.Type.Optional||0!==n[0].length){var r={type:g.GP.Text,text:e};n[0].push(r),n[1].push(r)}}},t),(0,f.kG)(n[0].length>0,"Substituted part is empty"),(0,f.kG)(n[1].length>0,"Inserts are empty"),n})))})),u.chain(S),u.mapLeft(k.fromError(e)))}(t);case e.Type.FullSentence:return I(t);case e.Type.OneGap:return A(t);default:return(0,f.vE)(n)}}}(r||(r={}));var k=function(e){function t(t,n){var r=e.call(this,t)||this;return r.alternatives=n,r}return(0,m.__extends)(t,e),t.fromError=function(e){return function(n){var r=new t(n.message,e);return r.stack=n.stack,r}},t.prototype.toString=function(){return"Hydration error: "+this.message+"\n  ops: "+this.alternatives.map((function(e){return e.ops.map(l.JU.anonymize)}))},t}(f.sH),E=n(8125),T=n(92932),R=function(e,t){switch(e.kind){case"replacement":return function(e,t){(0,f.kG)((0,E.Dw)(e),"transforms should have at least one element");var n=e[0];return L(n)>-1?g.nV.create(M(n),e.map(N),t,!0):g.zE.create(e,t)}(e.content.map((function(e){return[{type:g.GP.Insert,text:e}]})),t);case"transform":return function(e,t){(0,f.kG)((0,E.Dw)(e),"transforms should have at least one element");var n=e[0];return L(n)>-1?g.nV.create(M(n),e.map(N),t):function(e){return 2===e.length&&F(e)}(e)?g.fi.create(e[0],e[1],t):F(e)?g.zE.create(e,t):g.n6.create(e,t)}(e.content.map(D),t);default:return(0,f.vE)(e.kind)}};function L(e){return e.findIndex((function(e){return"arrow"===e.type}))}function M(e){return e.slice(0,L(e))}function N(e){return e.slice(L(e)+1)}function P(e){return e.every((function(e){return"delete"!==e.type}))}function F(e){return e.every(P)}function O(e,t){return{re:new RegExp("^("+e+")([\\s\\S]*)$"),createResult:t}}var B=[O("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(function(e){return{type:g.GP.Delete,text:e[2]}})),O("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(function(e){return{type:g.GP.Insert,text:e[2]}})),O("()",(function(e){return{type:g.GP.Arrow}})),O("([^<>]+)",(function(e){return{type:g.GP.Text,text:e[1]}}))];function D(e){function t(e){for(var t=0,n=B;t<n.length;t++){var r=n[t],i=e.match(r.re);if(null!==i)return[r.createResult(i),i[i.length-1]]}}function n(t){var n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>",""].map((function(e){return t.indexOf(e)}));if(n.findIndex((function(e){return 0===e}))>0)throw new Error("Couldn't parse transform: "+e);if(n=n.filter((function(e){return e>0})),(0,E.Dw)(n)){var r=Math.min.apply(Math,n);return[{type:g.GP.Text,text:t.substring(0,r)},t.substring(r)]}return[{type:g.GP.Text,text:t},""]}for(var r=[],i=e,o=!1,a=0,s=void 0;(0,E.Dw)(i);){var l=t(i);void 0===l&&(o=!0);var c=l||n(i),u=c[0],d=c[1];s&&s.type===g.GP.Text&&u.type===g.GP.Text?s.text+=u.text:(s&&s.type===g.GP.Delete&&u.type===g.GP.Insert&&(r.push({type:g.GP.Arrow}),a++),r.push(u)),u.type===g.GP.Arrow&&a++,s=r[r.length-1],i=d}return(o||!(0,E.Dw)(r)||a>1)&&T.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:r.length,arrowCount:a}),r}var W=(0,o.flow)((function(e){return(0,o.flow)((function(t){return U(e,p.eT.isFullSentence(t.cardType))(t.alternatives)}),u.chain(r.create))}),(function(e){return function(t){return(0,a.pipe)(t.content,u.fold((function(e){return u.right(R(e,t.todo))}),(0,o.flow)(e,u.map((function(e){return function(e,t){switch(e.type){case r.Type.Substitution:return g.nV.create(e.remove,e.inserts,t);case r.Type.Insert:return 2===e.inserts.length?g.fi.create(e.inserts[0],e.inserts[1],t):g.zE.create(e.inserts,t);case r.Type.Remove:return g.n6.create([e.remove],t);case r.Type.RemoveOr:return g.fz.create(e.removes,t);case r.Type.FullSentence:return function(e,t){switch(e.kind){case g._k.WithFormatting:return g.i3.createWithFormatting(e.ops,t);case g._k.PlainText:return g.i3.createPlainText(e.ops,t);default:return(0,f.vE)(e)}}(e,t);case r.Type.OneGap:return g.G7.create(e,t);default:return(0,f.vE)(e)}}(e,t.todo)})))))}}));function U(e,t){var n=(0,o.flow)(e,(function(e){return e.delta.reduce((function(e,t){return s.s.isInsertString(t)?e+t.insert:e}),"")}));return(0,o.flow)(function(e,t){return function(n){return(0,a.pipe)(n,i.DZ((function(n){return(0,a.pipe)(n.type,c.map((function(r){var i=n.ops[0];if(i&&l.JU.isOptionalRetain(i)){var o=l.JU.length(i);return{text:e(o,n.lengthAffected-o),ops:n.ops.slice(1),type:r,isFullSentence:t}}return{text:e(0,n.lengthAffected),ops:n.ops,type:r,isFullSentence:t}})))})),d.nI)}}(n,t),u.fromOption((function(){return new Error("Alternative array is empty")})))}},50634:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var r,i=n(42654);!function(e){e.eq=(0,i.getStructEq)({alert:(0,i.contramap)((function(e){return e.id}))(i.eqStrict),highlightIndex:i.eqStrict}),e.getEq=function(){return e.eq}}(r||(r={}))},78264:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var r,i=n(73805),o=n(8125),a=n(64909),s=n(65772),l=n(22232),c=n(92932),u=n(17753),d=n(10002),p=n(38524),f=n(78792),m=(0,o.HP)(c.C8.Logging.getLogger);!function(e){e.selectNextAlertByLens=function(e,t,n){return void 0===n&&(n=function(){return a.none}),function(r){if(!e(r))return t(r);var o=r.currentLens;return o.kind===p._L.abstract?a.none:(0,i.pipe)(o.findNextAlert(),a.alt((function(){return n(r)})),a.map(f.lb.toLensAlert))}},e.selectNextAlertInText=function(e,t,n){return void 0===n&&(n=function(){return!0}),function(r){var o=r.currentLens;return o.kind===p._L.abstract?a.none:o.kind===p._L.persistent?(0,i.pipe)(p.nL.getActiveAlertHighlight(r),a.fold((function(){return o.findNextAlert()}),(function(t){return e.findNextAlertInTextByLens(t,o.id,p.nL.nonPriorityAlertsVisible(r))})),a.alt((function(){return n()&&(p.nL.isInGlobalSuccess(r)||d.R.isOutcomeId(r.currentLens.id)&&e.hasZeroFreeAlerts())?e.findPremiumAlert():a.none})),a.map(f.lb.toLensAlert)):(0,i.pipe)(function(n){return(0,i.pipe)(n.currentLens.findNextAlert(),a.map(f.lb.toLensAlert),a.alt((function(){return(0,i.pipe)(p.nL.getActiveAlertHighlight(n),a.fold((function(){return t(u.bZ.isRegisteredApplicableAlert,"cursor")}),(function(t){return e.findNextAlertInText(t,u.bZ.isApplicableAlert)})),a.map((function(e){return{alert:e.alert,highlightIndex:e.highlightIndex,lensId:d.R.SpecialId.AllAlerts}})))})))}(r),a.alt((function(){return(0,i.pipe)(e.findPremiumAlert(),a.map(f.lb.toLensAlert))})))}},e.createAlertByCursorGetter=function(e,t){return function(n,r){return t.findClosestAlertHighlight(e(r),n)}},e.getStateTransformer=function(e,t,n,r){return void 0===r&&(r=f.GU),function(o){var c=o.state,f=o.metadata;if(!p.nL.hasCards(c)||!r(c))return s.left({state:c,metadata:f});var h=m("AutoFocus.stateTransformer");h.trace("_updateActiveState",{state:c,metadata:f});var g=t.get()&&"text"!==c.alertSource;return(0,i.pipe)(p.nL.getActiveAlert(c),a.filter(u.bZ.isInDuplicatedState),a.fold((function(){return h.debug("Oops. Current alert removed, focusing next one...")}),(function(e){return h.info("Oops. Current alert removed as it's a duplicate, focusing next one...",e.toString())}))),(0,i.pipe)(n(c),a.map((function(t){return(0,l.kG)(a.isSome(e.getRegistered(t.alert.id)),"lens alert should be in registered state",(function(){return t.alert.toString()})),t})),a.fold((function(){return c.currentLens.kind===p._L.active?s.right(s.right({lensId:d.R.SpecialId.AllAlerts,alertSource:c.alertSource,options:{order:c.switchOrder,toFocus:p.nL.Effect.SwitchLens.FocusBehavior.noFocus}})):s.left({state:c,metadata:f})}),(function(e){var t=e.alert,n=e.highlightIndex,r=e.lensId;return c.currentLens.meta.filter(t)?s.left(g?{state:p.nL.Prism.getLens().set(c.currentLens.select({alert:t,highlightIndex:n}),c),metadata:{sourceId:"LSM.updateActiveState"}}:{state:c,metadata:f}):s.right(g?s.left({alertHighlight:{alert:t,highlightIndex:n},alertSource:c.alertSource,options:{lensId:r,order:c.switchOrder,toFocus:p.nL.Effect.SwitchLens.FocusBehavior.focusFirst}}):s.right({lensId:r,alertSource:c.alertSource,options:{order:c.switchOrder,toFocus:p.nL.Effect.SwitchLens.FocusBehavior.noFocus}}))})))}}}(r||(r={}))},50536:(e,t,n)=>{"use strict";n.d(t,{Nf:()=>r,Ls:()=>I,YH:()=>i,IG:()=>o,EB:()=>E,Mq:()=>a});var r,i,o,a,s=n(59312),l=n(22902),c=n(45980),u=n(73805),d=n(60705),p=n(64909),f=n(22232),m=n(83078),h=n(65772),g=n(89943),v=n(92932),y=n(17753),b=n(10002),w=n(58199),C=n(41199),_=n(40644),S=n(17031),x=n(87280);function I(e,t,n,r,i,a,l){var d=function(e){function t(t,n,r){var i=v.C8.Logging.getLogger("CardFactory");return(0,u.pipe)(n,p.filter((function(e){return!r||(0,u.pipe)(t,p.exists((function(t){return e.id===t.id&&e.rev===t.revision})))})),p.alt((function(){return(0,u.pipe)(t,p.chain((function(t){return(0,u.pipe)(e(t),h.fold((function(e){return i.error("Could not hydrate transform",e,{alertId:t.id}),n}),(function(e){return p.some({id:t.id,rev:t.revision,labels:e})})))})))})))}return function(e){var n=e.activeAlert.type===C.$.Type.super||e.activeAlert.type===C.$.Type.plagiarism||e.activeAlert.type===C.$.Type.premium||y.eT.isSimple(e.activeAlert.extraProperties.cardType)?p.none:t(e.activeAlert.getTransform(),e.cachedTransform,!(e.meta.checking!==_.X.Meta.CheckingState.Idle||e.activeAlertRemoved));return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,n,e.userInput)}}(e),g=v.C8.Logging.getLogger("CardFactory");function b(e,t){var n=new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,t,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput);return"focused"===t.transition.type||"expanded"===t.transition.type?d(n):n}function w(e,t){var n=S.t.to(e.visualState,t);return(0,u.pipe)(b(e,n),(function(n){return t.type===e.visualState.transition.type||"expanded"!==t.type&&"focused"!==t.type?n:U(n,x.Z.invalidateHeight(e.positionState))}))}function I(e,t,n,r){var i=new Set(t.map((function(e){return e.id}))),o=new Set(e.removedAlertsIds),a=(0,u.pipe)(n,p.map((function(t){return r.compare(e,t)>0})),p.getOrElse(c.constTrue));i.has(e.activeAlert.id)&&o.add(e.activeAlert.id);var s=e.alerts.reduce((function(t,n,r){return!i.has(n.id)||_.X.isFocused(e)&&n.id===e.activeAlert.id?{remainingAlerts:t.remainingAlerts.concat([n]),activeAlertIndex:t.activeAlertIndex}:{remainingAlerts:t.remainingAlerts,activeAlertIndex:t.activeAlertIndex+(r<e.activeAlertIndex?-1:0)}}),{remainingAlerts:[],activeAlertIndex:e.activeAlertIndex}),l=s.remainingAlerts,d=s.activeAlertIndex,f=_.X.willBeDisposed(e,i)?new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,i,e.cachedTransform,e.userInput):new _.X(e.id,l,d,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,o,e.cachedTransform,e.userInput);return f.scheduledToDispose?w(f,{type:"removed",clockwise:a}):f}function F(e,t,a,c,d,m,h,g){var v=function(e,t){var n=t[e];return(0,f.kG)(!!n,"Active alert index should point to an alert"),n}(a,t),w=P(v),I=(0,s.__spreadArrays)(t).sort(y.bZ.ord.compare).map((function(e){return C.$.fromModelWithTakeawayFeedback(e,l.getTakeawayFeedback(e.id))})),k=I[0];(0,f.kG)(!!k,"The card must contain at least 1 alert");var E=(0,u.pipe)(i,p.chain((function(e){return e.getAlertMuteCategory(t[0].id)}))),T=new _.X(e,I,A(v.id,I),c,x.Z.empty,S.t.initial({type:"rendered",clockwise:!0}),new _.X.Meta.Impl(d.percentile,d.explanation,d.checking,d.ranges,n.features.has(o.Features.enableMuteQuotedAdvice)&&C.$.isInQuotes(k),d.bulkAcceptable,d.bundleInfo),m,o.toCardRenderOptions(n,m,r(k),g),E,k.getHighlightRanges()[0].end,k.id,new Set,p.none,w);return(0,u.pipe)(h,p.fold((function(){return T}),(function(e){return b(T,e)})))}function O(e,n,r,i,o){var a=n.alert,s=n.highlightIndex;void 0===o&&(o=function(e){return e}),(0,f.kG)(!e.removedAlertsIds.has(a.id),"Cannot select removed alert");var l=e.alerts.filter((function(t){return!e.removedAlertsIds.has(t.id)})),m=(0,u.pipe)(r,p.map((function(t){return i.compare(e,t)>0})),p.getOrElse(c.constTrue)),h=(0,u.pipe)(r,p.exists((function(t){return t.id===e.id}))),g=h?e.positionState:x.Z.invalidateHeight(e.positionState),v=h&&_.X.isCardOpen(e.visualState)?"expanded":"focused",y=(0,u.pipe)(t.getById(a.id),p.chain(P)),b=A(a.id,l),w=(0,u.pipe)(r,p.fold((function(){return S.t.initial({type:v,clockwise:m})}),(function(t){return S.t.to(e.visualState,{type:v,clockwise:m})})));return d(new _.X(e.id,l,b,s,g,w,o(e.meta,a),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,y))}var B=function(e){return t.isRegistered(e.id)};function D(e){var t=e.alerts;return p.fromNullable(t.slice(e.activeAlertIndex+1).find(B))}function W(e){var t=e.alerts;return p.fromNullable(t.slice(0,e.activeAlertIndex).reverse().find(B))}function U(e,t){return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,t,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}return{shouldAnimateAlertApply:n.shouldAnimateAlertApply,create:F,createFromAlert:function(e){return function(t){return F(t.id,[t],0,0,_.X.Meta.empty(y.bZ.isApplicableAlert(t)?t.explanation:void 0),e,p.none,!1)}},createFocused:function(e){return M(e,(function(t,r,i){return F(t,[r],0,i,N(r,n),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!1)}),(function(t,n,r){return F(t,n,r,0,T(n),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!1)}))},createFocusedBundle:function(e){return function(t,n,r,i){return F(t,r,i,0,E(n,r,r[i]),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!0)}},createRendered:function(e){return M(e,(function(t,r){return F(t,[r],0,0,N(r,n),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!1)}),(function(t,n){return F(t,n,0,0,T(n),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!1)}))},createRenderedBundle:function(e){return function(t,n,r){return F(t,r,0,0,E(n,r,r[0]),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!0)}},createAdded:function(e){return M(e,(function(t,r){return F(t,[r],0,0,N(r,n),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!1)}),(function(t,n){return F(t,n,0,0,T(n),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!1)}))},createAddedBundle:function(e){return function(t,n,r){return F(t,r,0,0,E(n,r,r[0]),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!0)}},select:O,prevAlert:W,nextAlert:D,anyRegisteredAlert:function(e){var n=e.alerts;return(0,u.pipe)(n.filter((function(e){return t.isRegistered(e.id)})),(function(e){return e[e.length-1]}),p.fromNullable)},selectNextAlert:function(e,t,n){return void 0===n&&(n=function(e){return e}),e.activeAlertRemoved&&!e.scheduledToDispose?(0,u.pipe)(D(e),m.vx(W(e)),p.map((function(r){return O(e,{alert:r,highlightIndex:0},p.none,t,n)})),p.getOrElse((function(){return e}))):e},unselect:function(e,t,n){var r=(0,u.pipe)(t,p.map((function(t){return n.compare(e,t)>0})),p.getOrElse(c.constTrue)),i=(0,u.pipe)(t,p.exists((function(t){return t.id===e.id})))?e.positionState:x.Z.invalidateHeight(e.positionState);return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,i,e.scheduledToDispose||a&&!C.$.isPriority(e.activeAlert)&&"hidden"===e.visualState.transition.type?e.visualState:S.t.to(e.visualState,{type:"rendered",clockwise:r}),e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},addBundleAlerts:function(e,t){(0,f.kG)(e.renderOptions.showBundle,"cannot add new alerts to a non-bundled card");var n=e.alerts.concat(t.map((function(e){return C.$.fromModelWithTakeawayFeedback(e,l.getTakeawayFeedback(e.id))}))).sort(C.$.ord.compare);return new _.X(e.id,n,A(e.activeAlert.id,n),e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},addPlagiarismAlerts:function(e,t){var n=e.alerts.concat(t.map(C.$.fromModel)).sort(C.$.ord.compare).filter((function(t){var n=C.$.isPlagiarism(t);return n||g.error("Encountered non-plagiarism alert in plagiarism card",{alert:t,cardId:e.id}),n}));return L(new _.X(e.id,n,A(e.activeAlert.id,n),e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput),n)},remove:I,changePlagiarismMetaWithAlerts:L,updateWith:function(e,t,r){(0,f.kG)(void 0!==e.alerts.find((function(e){return e.id===t.id})),"can not receive updates for unknown alert",(function(){return t.toString()}));var i=function(e,t){var r;r=y.bZ.getCheckingState(t)===y.bZ.CheckingState.CHECKING?"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type?_.X.Meta.CheckingState.Checking:_.X.Meta.CheckingState.Full:_.X.Meta.CheckingState.Idle;var i=R(t,r,n,e.meta.bulkAcceptable);return new _.X(e.id,e.alerts.map((function(e){return e.id===t.id?C.$.fromModelWithTakeawayFeedback(t,l.getTakeawayFeedback(e.id)):e})),e.activeAlertIndex,k(e,i),e.positionState,e.visualState,i,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}(e,t);switch(t.state.type){case y.bZ.State.Type.REGISTERED:var o="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?d(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?w(o,{type:"focused",clockwise:i.visualState.transition.clockwise}):o;case y.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((function(e){return y.bZ.isCapiDone(e)&&e.allowUpdate&&y.bZ.isRated(i.activeAlert)}))?I(i,[t],p.none,r):w(i,{type:"presuccess",clockwise:i.visualState.transition.clockwise});case y.bZ.State.Type.APPLIED:case y.bZ.State.Type.BEING_APPLIED:return I(i,[t],p.none,r);default:return(0,f.vE)(t.state)}},changePosition:U,transitionTo:w,completeTransition:function(e,t){return b(e,S.t.complete(e.visualState,t))},hideMuteQuotedAdvice:function(e){return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new _.X.Meta.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1,e.meta.bulkAcceptable,e.meta.bundleInfo),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},toggleBulkAccept:function(e,t){return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new _.X.Meta.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,e.meta.showMuteQuotedAdvice,t,e.meta.bundleInfo),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},updateUserInput:function(e,t){return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,t)},updateTakeawayFeedback:function(e,t){return new _.X(e.id,e.alerts.map((function(n,r){return r===e.activeAlertIndex?C.$.updateTakeawayFeedback(n,t):n})),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}}}function A(e,t){var n=t.findIndex((function(t){return t.id===e}));return(0,f.kG)(-1!==n,"Alert must exist"),n}function k(e,t){if((0,f.kG)(t.ranges.length>0,"Incorrect card meta: rangeIds empty. Card ID "+e.id+", activeAlert: "+e.activeAlert.toString()),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;var n=e.meta.ranges[e.activeHighlightIndex];return(0,f.kG)(void 0!==n,"AHI not found in rangeIds"),(0,u.pipe)(p.some(t.ranges.findIndex((function(e){return e.meta.id===n.meta.id}))),p.filter((function(e){return-1!==e})),p.alt((function(){return g.OI(t.ranges,n,d.SV.ordEnd)})),p.getOrElse((function(){return t.ranges.length-1})))}function E(e,t,n){var r=t.map((function(e){return e.getHighlightRanges()[0]}));return new _.X.Meta.Impl(w.g.fromRatio(n.progress),n.explanation,_.X.Meta.CheckingState.Idle,r,!1,!1,p.some(e))}function T(e){var t=e.map((function(e){return e.getHighlightRanges()[0]})),n=(0,u.pipe)(e.map((function(e){return w.T.groupSum.concat(w.T.MAX,w.T.groupSum.inverse(e.progress))})),(0,l.fold)(w.T.groupSum),w.g.fromRatio);return new _.X.Meta.Impl(n,"",_.X.Meta.CheckingState.Idle,t,!1,!1,p.none)}function R(e,t,n,r){var i=n.features.has(o.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new _.X.Meta.Impl(w.g.fromRatio(e.progress),e.explanation,t,e.getHighlightRanges(),i,r,p.none)}function L(e,t){var n=T(t);return new _.X(e.id,e.alerts,e.activeAlertIndex,k(e,n),e.positionState,e.visualState,n,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}function M(e,t,n){switch(e){case b.R.SpecialId.Plagiarism:return n;case b.R.SpecialId.AllAlerts:case b.R.SpecialId.Correctness:case b.R.SpecialId.Clarity:case b.R.SpecialId.Engagement:case b.R.SpecialId.Delivery:case b.R.SpecialId.Priority:case b.R.SpecialId.PredictionTakeaways:case b.R.SpecialId.PredictionEmogenie:case b.R.SpecialId.Vox:case b.R.SpecialId.RealTimeProofit:return t;default:return(0,f.vE)(e)}}function N(e,t){return R(e,y.bZ.getCheckingState(e)===y.bZ.CheckingState.IDLE?_.X.Meta.CheckingState.Idle:_.X.Meta.CheckingState.Full,t,!1)}function P(e){return y.bZ.isOneGap(e)&&""!==e.userInput?p.some(e.userInput):p.none}!function(e){e.mock={getTakeawayFeedback:function(){return p.none}}}(r||(r={})),function(e){e.yellow="yellow",e.gray="gray"}(i||(i={})),function(e){var t;e.toCardRenderOptions=function(e,n,r,i){var o=new Set;return(n===b.R.SpecialId.AllAlerts||e.features.has(t.showCardLabelInOutcomes)&&n!==b.R.SpecialId.Plagiarism)&&o.add(_.X.RenderOptions.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&o.add(_.X.RenderOptions.Features.enableMuteQuotedAdvice),e.features.has(t.showBulkAcceptIcon)&&o.add(_.X.RenderOptions.Features.showBulkAcceptIcon),e.features.has(t.showAnonymousUserFooters)&&o.add(_.X.RenderOptions.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&o.add(_.X.RenderOptions.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&o.add(_.X.RenderOptions.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&o.add(_.X.RenderOptions.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&o.add(_.X.RenderOptions.Features.showPersistentPremiumCardLabels),{features:o,layoutDensity:e.cardLayoutDensityMode,isNew:r,upgradeDemoPremiumNotice:e.upgradeDemoPremiumNotice,showBundle:i}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showBulkAcceptIcon="showBulkAcceptIcon",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels"}(t=e.Features||(e.Features={})),e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:_.X.RenderOptions.Density.cozy,shouldAnimateAlertApply:y.bZ.isAccepted,upgradeDemoPremiumNotice:i.yellow}}(o||(o={})),function(e){e.snapshot=function(e){return{cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,u.pipe)(e.alerts.map((function(e){return e.id}))),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex}}}(a||(a={}))},10584:(e,t,n)=>{"use strict";n.d(t,{R7:()=>f});var r=n(45980),i=n(64909),o=n(10002),a=n(66910),s=n(52479),l=n(77176),c=n(62712),u=n(38524),d=n(13338),p={cardsBeyondViewport:5,cardsAroundActive:100},f=function(e,t,n,f,m,h,g){void 0===h&&(h=p),void 0===g&&(g=s.b2.rafScheduler);var v=function(e){return!e.positionState.visible&&e.visualState.incomplete?(m.next({type:a.l.Type.completeTransitionTo,cardId:e.id,transitionId:e.visualState.transitionId}),u.nL.Items.deprecatedMapper((function(e){return n.completeTransition(e,e.visualState.transitionId)}),r.identity,(function(e){return c.J.completeTransition(e,e.visualState.transitionId)}))(e)):e},y=e.pipe(l.U(u.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return i.some({currentLens:t,alertSource:n})})))),b=(0,d.nM)(y,t.viewport,t.scrollTop,t.paddingTop,g).pipe(l.U((function(e){return{viewport:e.viewport,scrollTop:e.scrollTop,paddingTop:e.paddingTop,completeTransition:v}})),l.U((0,d.GC)({cardsBeyondViewport:h.cardsBeyondViewport,cardsAroundActive:h.cardsAroundActive,changePosition:f})));return{id:"manageCardsVisibility",when:o.R.isWithAlertsId,what:u.nL.Effect.Applicator.create(b)}}},32917:(e,t,n)=>{"use strict";n.d(t,{i$:()=>f,YA:()=>m});var r=n(45980),i=n(73805),o=n(64909),a=n(52479),s=n(55935),l=n(93508),c=n(99391),u=n(38524),d=n(71517),p=n(46616),f=function(e){return a.Hl(e.scrollTop.pipe(s.T(1)),100,!0).pipe(l.O(!1),c.shareReplay({bufferSize:1,refCount:!0}))},m=function(e,t){var n=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(u.nL.getLens).get(),o.chain((function(e){var t=e.items,a=e.cardsHeight;return(0,i.pipe)(t.getAt(0),o.map((function(e){var t=(0,r.flow)(d.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop);return{top:t,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(a))(t)}})))})))}},41394:(e,t,n)=>{"use strict";n.d(t,{o:()=>v});var r=n(73805),i=n(42726),o=n(65772),a=n(8125),s=n(92932),l=n(32952),c=n(79462),u=n(14611),d=n(16118),p=n(77176),f=n(93508),m=n(2834),h=n(76974),g=n(71517),v=function(e){var t=this;this._validateOffset=e,this._log=s.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.hg.create(0),this.paddingTop=i.hg.create(0),this.viewport=i.hg.create({top:g.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.xQ,this.moveCardsBy=function(e,n){return t._log.debug("Cards list moved by "+e+", from: "+n),t.scrollOffset.next(e),o.right(void 0)},this.moveCardsByAnimated=function(e,n){return t._log.debug("Cards list moved by "+e+", from: "+n),c.y.create((function(n){return(0,r.pipe)(t._validateOffset(e,t),o.fold((function(e){return n.thrownError(e),a.ZT}),(function(){var r=2*t.viewport.get().height,i=Math.abs(e)>r?(e>0?1:-1)*r:e,o=e-i,a=u.f.createAnimationObservable(0,i,200).pipe(d.G(),p.U((function(e){var t=e[0];return e[1]-t})),f.O(o),m.b((function(e){return t.scrollOffset.next(e)}))).subscribe({error:function(e){return n.error(e)},complete:function(){return n.complete()}});return function(){return a.unsubscribe()}})))}))}};!function(){function e(){this.scrollOffset=h.of(42)}e.prototype.getContentOffset=function(e){throw new Error("Method not implemented.")},e.prototype.moveCardsBy=function(e,t){throw new Error("Method not implemented.")},e.prototype.moveCardsByAnimated=function(e,t){throw new Error("Method not implemented.")}}()},71517:(e,t,n)=>{"use strict";n.d(t,{r:()=>r,L:()=>i});var r,i,o=n(42654),a=n(19542),s=n(64681);!function(e){!function(e){e.ISO=(0,s.k4)()}(e.FromWindowTop||(e.FromWindowTop={}))}(r||(r={})),function(e){!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(o.eqNumber).equals}(e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(e.CardTop||(e.CardTop={})),e.concatC=function(e){return function(t){return e+t}};var t=function(e){return new a.aD(e)};e.converters=function(n,r,i){var o=t(e.concatC(i)).get,a=t(e.concatC(-n)).get;return{windowToViewport:t(e.concatC(-r)).get,viewportToWindow:t(e.concatC(r)).get,cardTopToViewport:a,viewportToCardTop:t(e.concatC(n)).get,absTopToViewportTop:function(e){return a(o(e))},absTopToCardTop:o}}}(i||(i={}))},46616:(e,t,n)=>{"use strict";n.d(t,{Db:()=>i});var r,i,o,a=n(42654),s=n(71517);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(r||(r={})),function(e){var t=function(e,t,n){this.scrollTop=e,this.viewport=t,this.converters=s.L.converters(e,s.r.FromWindowTop.ISO.unwrap(t.top),n)};e.Impl=t}(i||(i={})),function(e){var t=(0,a.getStructEq)({top:a.eqNumber,height:a.eqNumber});e.eqDimensionsTuple=(0,a.getTupleEq)(t,t)}(o||(o={}))},13338:(e,t,n)=>{"use strict";n.d(t,{S4:()=>w,Bk:()=>C,v_:()=>S,Sd:()=>x,nM:()=>k,GC:()=>E});var r=n(45980),i=n(73805),o=n(83078),a=n(64909),s=n(42654),l=n(89943),c=n(95053),u=n(77176),d=n(28043),p=n(66310),f=n(52479),m=n(2844),h=n(85985),g=n(87280),v=n(17031),y=n(38524),b=n(71517),w=function(e){return-1!==["focused","expanded"].indexOf(e.visualState.transition.type)&&!e.scheduledToDispose},C=function(e){return e.isCardsHeightValid&&(0,i.pipe)(y.In.getActiveItem(e),o.wo((function(e){return!e.scheduledToDispose})))},_=function(e){return e.isCardsHeightValid&&(0,i.pipe)(y.In.getActiveItem(e),o.wo((function(e){return!e.scheduledToDispose})))};function S(e){var t=e.cardTop,n=e.cardHeight,r=e.viewportHeight,i=e.padding,o=b.L.FromViewportTop.ISO.unwrap(t),a=o+n;return n>r?o:o<0?n+i.before<r?o-i.before:o:a>r?n+i.after<r?a-r+i.after:a-r:o<i.before?n+i.after+i.before<r?o-i.before:n+i.after<r?o-i.after:i.before:r-a<i.after&&n+i.after<r?i.after-(r-a):0}var x=function(e){return e.pipe(u.U(a.filter((function(e){var t=e.currentLens;return _(t)}))))},I=a.getEq(s.getStructEq({id:s.fromEquals(s.strictEqual),positionState:s.getStructEq({height:s.fromEquals(s.strictEqual),absTop:s.fromEquals(s.strictEqual)}),visualState:v.t.eq})),A=a.getEq(s.fromEquals((function(e,t){return I.equals(y.In.getActiveItem(e),y.In.getActiveItem(t))&&e.items.size===t.items.size&&l.Hx(e.items.keys(),t.items.keys(),(function(e,t){return e===t}))}))),k=function(e,t,n,r,o){return e.pipe(u.U(a.map((function(e){return e.currentLens.id}))),d.x(s.eqStrict.equals),u.U(a.isSome),p.w(f.Ft(m.aj(t,n,r,x(e).pipe(u.U(a.map((function(e){return e.currentLens}))),d.x(A.equals),p.w(o))))),h.h((function(e){e[0],e[1],e[2];var t=e[3];return(0,i.pipe)(t,a.exists(_))})),u.U((function(e){return{viewport:e[0],scrollTop:e[1],paddingTop:e[2]}})))},E=function(e){var t=e.cardsBeyondViewport,n=e.cardsAroundActive,s=e.changePosition;return function(e){var l=e.viewport,u=e.scrollTop,d=e.paddingTop,p=e.completeTransition;return function(e){var f=e.currentLens,m=function(e,t,n,r){return e.size<2||Math.floor(t.height/Math.min(o.MH(e.getAt(0)).positionState.height,o.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:{from:Math.max(0,c.aW.lowerBound(e,(function(e){return e.positionState.absTop+e.positionState.height<n}))-r),to:Math.min(e.size,c.aW.lowerBound(e,(function(e){return e.positionState.absTop<n+t.height}))+r)}}(f.items,l,u-d,t),h=!1,v=f.items.map((function(e,t,o){var l=(0,r.flow)(function(e,t){return function(n){return n.positionState.visible!==t?e(g.Z.changeVisible(n.positionState,t))(n):n}}(s,e.positionState.watched||function(e){return m.from<=e&&m.to>e||(0,i.pipe)(f.cardIndex,a.exists((function(t){return e>=t-n&&e<=t+n})))}(o)),function(e){return function(t){return!t.positionState.visible&&t.positionState.animationInProgress?e(g.Z.changeAnimationInProgress(t.positionState,!1))(t):t}}(s),p)(e);return l!==e?(h=!0,l):e}));return h?y.nL.Prism.lensCards.set(v,e):e}}}},62712:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});var r,i=n(71102),o=n(42654),a=n(78090),s=n(89881),l=n(17031);!function(e){e.id="BulkAcceptItemId";var t=i.getEq(o.fromEquals((function(e,t){return e.alert.id===t.alert.id})));e.eq=o.fromEquals((function(e,n){return e.alerts.length===n.alerts.length&&t.equals(e.alerts,n.alerts)})),e.isBulkAcceptItem=function(e){return e.kind===s.h.bulkAccept},e.updateAlerts=function(e,t){return new c(t,e.visibilityState,e.positionState,e.visualState,e.showNewLabel)},e.changePosition=function(e){return function(t){return new c(e.alerts,e.visibilityState,t,e.visualState,e.showNewLabel)}},e.completeTransition=function(e,t){return new c(e.alerts,e.visibilityState,e.positionState,l.t.complete(e.visualState,t),e.showNewLabel)},e.transitionTo=function(e,t){return new c(e.alerts,e.visibilityState,e.positionState,l.t.to(e.visualState,t),e.showNewLabel)}}(r||(r={}));var c=function(){function e(e,t,n,i,o){void 0===o&&(o=!1),this.alerts=e,this.visibilityState=t,this.positionState=n,this.visualState=i,this.showNewLabel=o,this.kind=s.h.bulkAccept,this.id=r.id}return e.prototype.equals=function(e){return r.eq.equals(this,e)},e.prototype.hashCode=function(){return(0,a.AC)(this.alerts.map((function(e){return e.alert.id})).join())},e}()},78792:(e,t,n)=>{"use strict";n.d(t,{GU:()=>L,lb:()=>M});var r=n(59312),i=n(95686),o=n(45980),a=n(73805),s=n(65772),l=n(64909),c=n(22232),u=n(92932),d=n(17753),p=n(10002),f=n(32952),m=n(77176),h=n(76974),g=n(24209),v=n(99391),y=n(66310),b=n(52479),w=n(69935),C=n(91224),_=n(41398),S=n(28043),x=n(2834),I=n(598),A=n(83401),k=n(41199),E=n(40644),T=n(38524),R=n(20490),L=function(e){return e.currentLens.shouldVerify},M=function(){function e(e,t,n,c,x,I){var A=this;this._state=e,this._stateProvider=t,this._alertsReader=n,this._alertsService=c,this._stateSideEffects=x,this._stateTransformer=I,this.focusLens=function(e,t,n){void 0===n&&(n={toFocus:T.Zz.defaultOptions.focusBehavior}),A._log.debug("focusLens "+e),A._switchLensActions.next({lensId:e,alertSource:t,options:n})},this.focusAlert=function(e,t,n){A._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:n}})},this._log=u.C8.Logging.getLogger("FocusedLensManagerImpl"),this._switchLensActions=new f.xQ,this._switchAlertActions=new f.xQ,this._addMetadata=function(e){return function(t){return t.pipe(m.U((function(t){return{source:t,metadata:e}})))}},this._focusLensEffect=function(e){var t=e.lensId,n=e.alertSource,r=e.options,i=r.toFocus,o=void 0===i?T.Zz.defaultOptions.focusBehavior:i,s=r.order;if(A._log.debug("_focusLensEffect ",{alertSource:n,lensId:t}),p.R.isClosedId(t))return(0,a.pipe)(h.of(T.nL.Effect.Applicator.Source.override((0,R.T)())),A._addMetadata({sourceId:"LSM.focusLensEffect"}));var l=A._state.get(),c=l.patch({switchOrder:s||l.switchOrder,alertSource:n});return(0,a.pipe)(A._stateProvider.getLensEventsByLensId(c,t,{focusBehavior:o}),A._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=function(e){var t=e.alertHighlight,n=e.alertSource,r=e.options;A._log.isEnabled(u.zW.LogLevel.TRACE)&&A._log.trace("focusAlert("+t.alert+")");var i=A._state.get(),o=n===T.DR.toAllAlerts,s=i.patch({switchOrder:r.order||i.switchOrder,alertSource:o?d.l$.sidebar:n});return(0,a.pipe)(A._stateProvider.getLensEventsByAlert(s,function(e,t,n,r){if(e===p.R.SpecialId.Priority||e===p.R.SpecialId.PredictionTakeaways||e===p.R.SpecialId.PredictionEmogenie||e===p.R.SpecialId.RealTimeProofit)return e;if(void 0!==r)return r;if(e===p.R.SpecialId.Closed||e===p.R.SpecialId.AllAlerts||n)return p.R.SpecialId.AllAlerts;return t}(i.currentLens.id,t.alert.lensId,o,r.lensId),t),A._addMetadata({sourceId:"LSM.focusAlertEffect"}))};var E=this._state.get();this._effects=g.T.apply(v,(0,r.__spreadArrays)(this._stateSideEffects.map((function(e){var t=e.when,n=e.what,r=e.id;return A._state.view("currentLens","id").view(t).pipe(y.w(b.Ft((0,a.pipe)(A._effectToApplicator(n),A._addMetadata({sourceId:r})))))})),[g.T(this._switchAlertActions.pipe(m.U(this._focusAlertEffect)),this._switchLensActions.pipe(m.U(this._focusLensEffect))).pipe(w.B())])),this._subs=[this._effects.pipe(C.K((function(e,t){return A._log.error("Got error from effects: ",e),t})),_.M(this._state,(function(e,t){var n=e.source,r=e.metadata;return{state:n(t),metadata:r}})),C.K((function(e,t){return A._log.error("Got error while applying new state: ",e),t})),m.U(this._stateTransformer),C.K((function(e,t){return A._log.error("Got error while transforming state: ",e),t}))).subscribe((function(e){return(0,a.pipe)(e,s.fold((function(e){var t=e.state,n=e.metadata;A._log.isEnabled(u.zW.LogLevel.TRACE)&&A._log.trace("lens state from: "+n.sourceId,t),(0,a.pipe)(A._checkState(t),s.fold((function(e){return A._log.error("incorrect state transition detected",{error:e,state:t})}),(function(){return A._state.set(t)})))}),s.fold((function(e){return A._switchAlertActions.next(e)}),(function(e){return A._switchLensActions.next(e)}))))})),(0,a.pipe)(this._state,m.U(T.nL.getActiveAlert),S.x(l.getEq(k.$.eq).equals),y.w(b.aI((function(e){return(0,a.pipe)(A._alertsService.takeReference(e,"activeCard"),s.mapLeft((function(e){return A._log.error("can not take alertRef",e)})),s.fold(i.of(o.constVoid),(function(e){return e.dispose})))})))).subscribe()],T.nL.hasCards(E)&&(0,a.pipe)(T.nL.getActiveAlertHighlight(E),l.filter((function(e){return A._alertsReader.isRegistered(e.alert.id)})),l.fold((function(){return A._switchLensActions.next({lensId:E.currentLens.id,alertSource:E.alertSource,options:{order:E.switchOrder,toFocus:T.nL.Effect.SwitchLens.FocusBehavior.noFocus}})}),(function(e){return A._switchAlertActions.next({alertHighlight:e,alertSource:E.alertSource,options:{lensId:E.currentLens.id,order:E.switchOrder}})})))}return e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._effectToApplicator=function(e){var t=this;switch(e.type){case T.nL.Effect.Type.Applicator:return e.source;case T.nL.Effect.Type.SwitchLens:return e.source.pipe(x.b((function(e){return t._switchLensActions.next(e)})),I.c(A.F()));case T.nL.Effect.Type.SwitchAlert:return e.source.pipe(x.b((function(e){return t._switchAlertActions.next(e)})),I.c(A.F()));default:return(0,c.vE)(e)}},e.prototype._checkState=function(e){try{if(T.nL.hasCards(e)){var t=e.currentLens.items.filter(E.X.isFocused);(0,c.kG)(t.size<=1,"cannot have more than one focused card",(function(){return JSON.stringify(t)}))}}catch(e){return s.left(e)}return s.right(void 0)},e.toLensAlert=function(e){var t=e.alert;return{alert:t,highlightIndex:e.highlightIndex,lensId:t.lensId}},e}()},20490:(e,t,n)=>{"use strict";n.d(t,{T:()=>E,o:()=>T});var r=n(59312),i=n(45980),o=n(73805),a=n(22232),s=n(92843),l=n(64909),c=n(8125),u=n(83078),d=n(92932),p=n(41120),f=n(17753),m=n(10002),h=n(76779),g=n(66654),v=n(76974),y=n(85985),b=n(28043),w=n(77176),C=n(24209),_=n(16118),S=n(66310),x=n(93508),I=n(41199),A=n(38524),k=n(31346),E=function(){return A.nL.create({alertSource:f.l$.api,switchOrder:"lensOrder",currentLens:k.BI.create(i.constFalse)})},T=function(){function e(e,t,n,a,s,l,c,u){var p=this;this._checkingState=e,this._alertsReader=t,this._lenses=n,this._positionManager=a,this._lensPreviewVM=s,this._lensViewFactory=l,this._alertsHandlerFactory=c,this._alertsFilterService=u,this._transformAlertsDiffToApplicator=function(e){return function(t){return function(n){return A.nL.hasCards(n)?n.patch({currentLens:e(t,(0,i.not)(f.bZ.isMuted))(n.currentLens)}):n}}},this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._lensAlerts=function(e){var t=p._alertsFilterService.alertVisibleInSidebar(e.id);return(0,o.pipe)(p._checkingState.get(),h.p.reduce([],(function(e,n){var i=n.alert;return t(i)?(0,r.__spreadArrays)(e,[i]):e})),(function(e){return e.sort(f.bZ.ord.compare)}))}}return e._mapByActiveLensId=function(e,t,n,r){if(m.R.isOutcomeId(e))return r();switch(e){case m.R.SpecialId.Plagiarism:return t();case m.R.SpecialId.Premium:return n();case m.R.SpecialId.AllAlerts:case m.R.SpecialId.Priority:case m.R.SpecialId.PredictionTakeaways:case m.R.SpecialId.PredictionEmogenie:case m.R.SpecialId.RealTimeProofit:return r();default:return(0,a.vE)(e)}},e._conditionedApplicator=function(e,t){return function(n){return function(r){return e(r,n)?t(n)(r):r}}},e._filterALEvents=function(e){return function(t){return v.of((0,o.pipe)(t,h.p.Diff.filter((function(t){return e(t.alert)})))).pipe(y.h((0,i.not)(s.v.isEmpty)))}},e.prototype.emptyState=function(e){return void 0===e&&(e=m.R.SpecialId.AllAlerts),A.nL.create({currentLens:this._createLens(e,this._lensPreviewVM.getLens(e).get(),[],l.none),alertSource:f.l$.api,switchOrder:"lensOrder"})},e.prototype.getLensEventsByLensId=function(e,t,n){var r=this;void 0===n&&(n={});var i=this._getActiveLensMeta(t),a=this._lensAlerts(i),s=this._createState(e,l.none,i,t,a),c=n.focusBehavior?this._getAlertToFocus(n.focusBehavior,s):l.none;e.currentLens.id===t&&A.nL.hasCards(e)&&e.currentLens.activeAlertsCount!==a.length&&this._log.warn("Lens contains inconsistent number of alerts",i.id);var u=A.nL.hasCards(s)?(0,o.pipe)(c,l.fold((function(){return s}),(function(n){return r._createState(e,l.some(n),i,t,a)}))):s;return this._generateEventsFromState(u,this._alertsHandlerFactory(t))},e.prototype.getLensEventsByAlert=function(e,t,n){(0,a.kG)(l.isSome(this._alertsReader.getById(n.alert.id)),"Can't focus non existing alert",n.alert.id);var r=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(n.alert)&&A.nL.hasCards(e)?A.nL.Prism.getLens().set(e.currentLens.select(n),e):this._createState(e,l.some(n),r,t,this._lensAlerts(r));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))},e.prototype.findClosestAlertHighlight=function(e,t){var n=this;return(0,o.pipe)(this._positionManager.findClosestToPosition(e,(function(e){return p.P.is(e)&&p.x.isVisible(e)&&!p.x.isApplied(e)&&(0,o.pipe)(n._alertsReader.getRegistered(e.meta.alertId),l.exists((function(r){return n._alertsFilterService.alertCanBeDisplayed(r)&&t(r)&&r.getHighlightRanges().some((function(t){return t.meta.id===e.meta.id}))})))})),l.chain((function(e){return(0,o.pipe)(n._alertsReader.getRegistered(e.meta.alertId),l.map((function(t){var r={alert:I.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((function(t){return t.meta.id===e.meta.id}))};return r.highlightIndex<0&&(n._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:r.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(n._positionManager.findRanges((function(e){return p.P.is(e)&&e.meta.alertId===t.id}))),hasPendingRanges:t.hasNewRangesForUpdate}),r.highlightIndex=0),r})))})))},e.prototype.findNextAlertInText=function(e,t){var n=e.alert,r=e.highlightIndex,i=n.getHighlightRanges();return(0,a.kG)(r<i.length,"AHI is out of highlightRanges length","hr length: "+i.length+", ahi: "+r),this.findClosestAlertHighlight(i[r].end,t)},e.prototype.findNextAlertInTextByLens=function(e,t,n){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,n))},e.prototype.findPremiumAlert=function(){return this._lensPreviewVM.getLens(m.R.SpecialId.Premium).get().count>0?(0,o.pipe)(this._checkingState.get(),h.p.find((0,i.flow)(f.bZ.fromAlertModel,(0,c.W9)(f.bZ.isRegistered,f.bZ.isPremium))),l.map((function(e){return{alert:I.$.fromModel(e.alert),highlightIndex:0}}))):l.none},e.prototype.hasZeroFreeAlerts=function(){return 0===this._lensPreviewVM.getLens(m.R.SpecialId.AllAlerts).get().priorityCount},e.prototype._getMetaChangesObservable=function(t){return A.nL.isPersistent(t)?this._lensPreviewVM.getLens(t.currentLens.id).view(e._updateMetaSource(t.currentLens.id)):A.nL.isLensview(t)?this._lenses.pipe(b.x(g.w.eq.equals),w.U((0,i.flow)(g.w.lookup(t.currentLens.id),l.map(e._updateMetaSource(t.currentLens.id)),l.getOrElse((function(){return A.nL.Effect.Applicator.Source.identity}))))):A.nL.Effect.Applicator.Source.empty},e.prototype._generateEventsFromState=function(t,n){var r=this;return C.T(this._checkingState.pipe(_.G(),w.U((function(e){var t=e[0],n=e[1];return h.p.diff(t,n)})),S.w(e._filterALEvents(t.currentLens.meta.filter)),w.U(e._conditionedApplicator((function(e,t){var n=(0,o.pipe)(t,h.p.Diff.filter((0,i.not)((function(t){return A.nL.fitsAlert(e)(t.alert)}))));return s.v.isEmpty(n)||r._log.info("tried to send event with alerts that do not fit current lens, skipping",{diff:h.p.Diff.show.show(n)}),s.v.isEmpty(n)}),this._transformAlertsDiffToApplicator(n)))),this._getMetaChangesObservable(t)).pipe(x.O(A.nL.Effect.Applicator.Source.override(t)))},e.prototype._getActiveLensMeta=function(t){var n=this,r=e._mapByActiveLensId(t,(function(){return n._lensPreviewVM.getLens(m.R.SpecialId.Plagiarism).get()}),(function(){return n._lensPreviewVM.getLens(m.R.SpecialId.Premium).get()}),(function(){return n._lensPreviewVM.getLens(t).get()}));return(0,a.kG)(void 0!==r,"unknown lensId:"+t),r},e.prototype._createState=function(e,t,n,r,i){var s=this,c=e.alertSource,d=e.switchOrder;(0,a.kG)(u.wo((function(e){var t=e.alert;return l.isSome(s._alertsReader.getInteractable(t.id))}))(t),"we can create state only with alert in registered state",(function(){return(0,o.pipe)(t,l.fold((function(){return"null"}),(function(e){return e.toString()})))}));var p=this._createLens(r,n,i,t);return A.nL.create({currentLens:p,alertSource:c,switchOrder:d})},e.prototype._createLens=function(e,t,n,r){var i=(0,o.pipe)(r,l.map((function(e){var t=e.alert,r=e.highlightIndex;return{alertIndex:n.findIndex((0,A.Tl)(t)),highlightIndex:r}})));return this._lensViewFactory.create(e,t,n,i)},e.prototype._getAlertToFocus=function(e,t){switch(e.kind){case A.nL.Effect.SwitchLens.FocusBehaviorType.noFocus:return l.none;case A.nL.Effect.SwitchLens.FocusBehaviorType.focusFirst:return A.nL.hasCards(t)?t.currentLens.findFirstAlert():l.none;case A.nL.Effect.SwitchLens.FocusBehaviorType.focusAlert:return l.some(e.alertHighlight);default:(0,a.vE)(e)}},e._updateMetaSource=function(e){return function(t){return function(n){return e===n.currentLens.id?A.nL.Prism.getLens().set(n.currentLens.updateMeta(t),n):n}}},e}()},55969:(e,t,n)=>{"use strict";n.d(t,{is:()=>a,kn:()=>s,ad:()=>l,gi:()=>c});var r=n(22232),i=n(10002),o=n(31346),a=function(e){return function(t){if(i.R.isOutcomeId(t))return o.vj.WithSuccess.getAlertHandler(e);switch(t){case i.R.SpecialId.Plagiarism:return o.vj.Plagiarism.getAlertsHandler();case i.R.SpecialId.Premium:return o.vj.Premium.getAlertsHandler();case i.R.SpecialId.AllAlerts:case i.R.SpecialId.Priority:case i.R.SpecialId.PredictionTakeaways:case i.R.SpecialId.PredictionEmogenie:case i.R.SpecialId.RealTimeProofit:return o.vj.WithSuccess.getAlertHandler(e);default:return(0,r.vE)(t)}}},s=function(e,t){return function(n){return e(n)?o.vj.Bundles.getAlertsHandler():t(n)}},l=(function(){function e(e,t,n,r){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n,this._inner=r}e.prototype.create=function(e,t,n,r){return i.R.isOutcomeId(e)||i.R.isAllAlerts(e)?o.rN.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._alertsReader):this._inner.create(e,t,n,r)}}(),function(){function e(e,t,n,r,i){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n,this._lensPredicate=r,this._inner=i}return e.prototype.create=function(e,t,n,r){return this._lensPredicate(t)?o.d8.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._alertsReader):this._inner.create(e,t,n,r)},e}()),c=function(){function e(e,t,n){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n}return e.prototype.create=function(e,t,n,a){var s=this,l=function(){return o.Z$.create(e,t,n.filter(s._alertsFilterService.alertVisibleInSidebar(e)),a,s._cardFactory,s._alertsReader)};if(i.R.isOutcomeId(e))return l();switch(e){case i.R.SpecialId.Plagiarism:return o.Y6.create(t,n,a,this._cardFactory,this._alertsReader);case i.R.SpecialId.Premium:return o.Ti.create(t,n,this._cardFactory,this._alertsReader);case i.R.SpecialId.AllAlerts:case i.R.SpecialId.Priority:case i.R.SpecialId.PredictionTakeaways:case i.R.SpecialId.PredictionEmogenie:case i.R.SpecialId.RealTimeProofit:return l();default:return(0,r.vE)(e)}},e}()},31346:(e,t,n)=>{"use strict";n.d(t,{Z$:()=>M,d8:()=>N,Ti:()=>P,Y6:()=>F,BI:()=>O,rN:()=>B,vj:()=>i});var r,i,o=n(59312),a=n(26001),s=n(489),l=n(42654),c=n(45980),u=n(73805),d=n(84966),p=n(22232),f=n(83078),m=n(64909),h=n(8125),g=n(89943),v=n(65772),y=n(92843),b=n(55415),w=n(17753),C=n(10002),_=n(95053),S=n(78090),x=n(40250),I=n(41199),A=n(40644),k=n(50536),E=n(87280),T=n(89881),R=n(62712),L=n(38524),M=function(){function e(t,n,r,o,a,s,l,c){this.id=t,this.meta=n,this.cardIndex=r,this._cardFactory=l,this._alertsReader=c,this._remove=e.remove,this.type=L.Nm.lensview,this.kind=L._L.persistent,this.withPriorityList=!1,this.cardsHeight=0,this.isCardsHeightValid=!1,this.itemsOrd=e._ord,(0,p.kG)((0,u.pipe)(this.cardIndex,f.wo((function(e){return e>-1}))),"card index should be non negative number"),this.items=i.updateVisibleCardsPositions(this._cardFactory,o,r,s,a),this.cardsHeight=i.calculateCardsHeight(this.items),this.isCardsHeightValid=(0,u.pipe)(L.In.getActiveItem(this),f.wo((function(e){return e.positionState.isHeightValid})))&&(0,u.pipe)(this.items.getAt(i.getRegularIndex(this.cardIndex)),f.wo((function(e){return e.positionState.isHeightValid})))}return e.initCardsHash=function(e,t,n,r,i,o){var a=this;(0,p.kG)((0,u.pipe)(r,f.wo((function(e){var t=e.alertIndex;return void 0!==n[t]}))),"Can not find alert for provided alertIndex");var s=_.aW.create(n.map((function(n,o){return(0,u.pipe)(r,m.exists((function(e){var t=e.alertIndex;return o===t})))?i.createFocused(e)(a.getCardId(t,n),n,(0,u.pipe)(r,m.fold((function(){return 0}),(function(e){return e.highlightIndex})))):i.createRendered(e)(a.getCardId(t,n),n)})),A.X.getId,o.compare);return{cardIndex:(0,u.pipe)(r,m.chain((function(e){var t=e.alertIndex;return s.find((function(e){return e.activeAlert.id===n[t].id}))})),m.map((function(e){return e.index}))),hash:s}},e.create=function(t,n,i,o,a,s){var l=e.initCardsHash(t,n,i,o,a,e._ord),c=l.hash;return new e(t,n,l.cardIndex,c,r.skip,m.none,a,s)},e.getCardId=function(e,t){return e.id+"_"+t.id},Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return(0,u.pipe)(L.In.getActiveItemWithAlert(this),m.exists((function(e){return w.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,u.pipe)(L.In.getActiveItem(this),m.exists((function(e){return e.scheduledToDispose})))||m.isNone(this.items.find((function(e){return!e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,u.pipe)(i.getRegularCard(this.items,this.cardIndex),m.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),m.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.regularHeight=function(e){return(0,u.pipe)(i.getRegularCard(e.items,e.cardIndex),m.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),m.map((function(e){return e.positionState.height})))},e.prototype.getCardId=function(t){return e.getCardId(this.meta,t)},e.prototype.releaseAlert=function(e){return this._remove([e])(this)},e.prototype.onAnimationFinish=function(t){return(0,p.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(e.isAlertVisible,this._cardFactory)(t)(this)},e.prototype.select=function(e){var t=this,n=D(this),i=x.l.find(this.items,(0,h.W9)(W,(function(t){return t.activeAlert.id===e.alert.id})));(0,p.kG)(m.isSome(i),"Can not find card for provided alert. Unknown card or it is already disposed.",(function(){return e.alert.toString()}));var o=f.MH(i),a=o.value,s=o.index,l=(0,u.pipe)(n,m.map((function(e){return t.items.add(t._cardFactory.unselect(e,m.some(a),t.itemsOrd))})),m.getOrElse((function(){return t.items}))).add(this._cardFactory.select(a,e,n,this.itemsOrd));return new this.constructor(this.id,this.meta,m.some(s),l,r.force,this.regularHeight,this._cardFactory,this._alertsReader)},e.prototype.unselect=function(){var e=this,t=(0,u.pipe)(D(this),m.map((function(t){return e.items.add(e._cardFactory.unselect(t,m.none,e.itemsOrd))})),m.getOrElse((function(){return e.items})));return new this.constructor(this.id,this.meta,m.none,t,r.force,this.regularHeight,this._cardFactory,this._alertsReader)},e.prototype.findNextAlert=function(){var e=this;return(0,u.pipe)(this.cardIndex,m.chain((function(t){return(0,u.pipe)(g.dn(e.items.values(),t,(0,h.W9)(A.X.canBeFocused(e._alertsReader),A.X.isAlertCard)))})),m.map((function(e){return{alert:e.value.activeAlert,highlightIndex:0}})))},e.prototype.findFirstAlert=function(){return(0,u.pipe)(this.items.filter((0,h.W9)(A.X.canBeFocused(this._alertsReader),W)).getAt(0),m.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(e){return new this.constructor(this.id,C.R.WithAlerts.setMeta(e)(this.meta),this.cardIndex,this.items,r.proceed,m.none,this._cardFactory,this._alertsReader)},e.prototype.changeVisibleItems=function(e){var t=(0,u.pipe)(L.In.getActiveItemWithAlert(this),m.chain((function(t){return(0,u.pipe)(e.get(t.id),m.map((function(e){return e.index})))})));return new this.constructor(this.id,this.meta,t,e,r.proceed,m.none,this._cardFactory,this._alertsReader)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,S.AC)(this.id))+U(L.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&m.getEq(A.X.eq).equals(L.In.getActiveItemWithAlert(this),L.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},Object.defineProperty(e.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.size||m.isNone(this.items.find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),e._ord=A.X.defaultOrd,e.add=function(t,n){return function(o){return function(a){var s=o.map((function(r){var o=n.createAdded(a.id)(e.getCardId(a.meta,r),r);return t(a,r)?o:i.Priority.makeCardInvisible(o,n)})),c=a.items.add(s),d=(0,u.pipe)(L.In.getActiveItemWithAlert(a),m.map((function(e){var t=e.id;return f.MH(c.get(t)).index}))),p=m.getEq(l.eqNumber).equals(d,a.cardIndex)?r.force:r.skip;return new e(a.id,a.meta,d,c,p,a.regularHeight,n,a._alertsReader)}}},e.remove=function(t){return function(n){var i=new Set(t.map((function(e){return e.id}))),o=n.items.map(L.nL.Items.deprecatedMapper((function(e){return i.has(e.activeAlert.id)?n._cardFactory.remove(e,[e.activeAlert],D(n),n.itemsOrd):e}),c.identity,c.identity)),a=(0,u.pipe)(n.cardIndex,m.chain((function(e){return(0,u.pipe)(o.findRightFrom((function(e){return e.scheduledToDispose}),e),m.map((function(e){return e.index})))})),m.isSome)?r.skip:r.force;return new e(n.id,n.meta,n.cardIndex,o,a,m.none,n._cardFactory,n._alertsReader)}},e.update=function(t,n){return function(r){return function(i){return e._updateWithAlerts(t,n)(r.filter((0,h.ff)(n.shouldAnimateAlertApply)))(i)}}},e._updateWithAlerts=function(t,n){return function(o){return function(a){var l=(0,u.pipe)(o,i.filterAlertInLens(a),s.UI((function(t){return[e.getCardId(a.meta,t),t]})),s.u4(a.items,(function(e,r){var o=r[0],s=r[1];return(0,u.pipe)(x.l.update(e,o,(function(e){return a._cardFactory.updateWith(e,s,a.itemsOrd)})),v.fold((function(){var r=a._cardFactory.createAdded(a.id)(o,s);return e.add(t(a,s)?r:i.Priority.makeCardInvisible(r,n))}),c.identity))}))),d=(0,u.pipe)(L.In.getActiveItemWithAlert(a),m.map((function(e){var t=e.id;return f.MH(l.get(t)).index})));return new e(a.id,a.meta,d,l,r.proceed,m.none,a._cardFactory,a._alertsReader)}}},e.isAlertVisible=function(e,t){return!0},e}(),N=function(){function e(e,t,n,r,o,a,s,l){this.id=e,this.meta=t,this.cardIndex=n,this._cardFactory=s,this._alertsReader=l,this.type=L.Nm.lensview,this.kind=L._L.persistent,this.cardsHeight=0,this.isCardsHeightValid=!1,this.itemsOrd=A.X.Bundle.ord,this.withPriorityList=!1,(0,p.kG)((0,u.pipe)(this.cardIndex,f.wo((function(e){return e>-1}))),"card index should be non negative number"),this.items=i.updateVisibleCardsPositions(this._cardFactory,r,n,a,o),this.cardsHeight=i.calculateCardsHeight(this.items),this.isCardsHeightValid=(0,u.pipe)(L.In.getActiveItem(this),f.wo((function(e){return e.positionState.isHeightValid})))&&(0,u.pipe)(this.items.getAt(i.getRegularIndex(this.cardIndex)),f.wo((function(e){return e.positionState.isHeightValid})))}return e.initCardsHash=function(t,n,r,i){(0,p.kG)((0,u.pipe)(r,f.wo((function(e){var t=e.alertIndex;return void 0!==n[t]}))),"Can not find alert for provided alertIndex");var o=e._groupAlertsInBundles(n),a=(0,u.pipe)(r,m.map((function(e){var t=e.alertIndex;return(0,p.kG)(void 0!==n[t],"Can not find alert for provided alertIndex"),n[t]}))),s=m.none,l=_.aW.empty(A.X.getId,e._ord.compare),c=Array.from(o.entries()).reduce((function(e,n){var r=n[0],o=n[1],l=o.map((function(e){e[0];return e[1]})),c=o[0][0];return(0,u.pipe)(a,m.map((function(e){return l.indexOf(e)})),m.filter((function(e){return e>-1})),m.fold((function(){return e.add(i.createRenderedBundle(t)(r,c,l))}),(function(n){var o=i.createFocusedBundle(t)(r,c,l,n);return s=m.some(r),e.add(o)})))}),l);return{cardIndex:(0,u.pipe)(s,m.chain((function(e){return(0,u.pipe)(c.get(e),m.map((function(e){return e.index})))}))),cards:c}},e.create=function(t,n,i,o,a,s){var l=e.initCardsHash(t,i,o,a),c=l.cards;return new e(t,n,l.cardIndex,c,r.skip,m.none,a,s)},e.getCardId=function(e){return e.id},e._groupAlertsInBundles=function(e){var t=this,n=e.map((function(e){return[A.X.Bundle.getAlertOutcomeBundle(e),e]}));return _.vM((function(e){var n=e[0];e[1];return t.getCardId(n)}),n)},e.add=function(t){return function(n){var i=e._groupAlertsInBundles(t),o=Array.from(i.entries()).reduce((function(e,t){var r=t[0],i=t[1],o=i.map((function(e){e[0];return e[1]})),a=i[0][0];return(0,u.pipe)(x.l.update(e,r,(function(e){var t=n._cardFactory.addBundleAlerts(e,o);return A.X.Bundle.isExtendableWithAlerts(t)?t:n._cardFactory.transitionTo(t,{type:"added",clockwise:!0})})),v.fold((function(){return e.add(n._cardFactory.createAddedBundle(n.id)(r,a,o))}),c.identity))}),n.items),a=(0,u.pipe)(L.In.getActiveItemWithAlert(n),m.map((function(e){var t=e.id;return f.MH(o.get(t)).index}))),s=m.getEq(l.eqNumber).equals(a,n.cardIndex)?r.force:r.skip;return new e(n.id,n.meta,a,o,s,n.regularHeight,n._cardFactory,n._alertsReader)}},e.remove=function(t){return function(n){var i=e._groupAlertsInBundles(t),o=Array.from(i.entries()).reduce((function(t,r){var i=r[0],o=r[1];return(0,u.pipe)(x.l.update(t,i,(function(t){var r=n._cardFactory.remove(t,o.map((function(e){e[0];return e[1]})),D(n),e._ord);return(0,u.pipe)(L.In.getActiveItem(n),m.exists((function(e){return e.id===r.id})))?n._cardFactory.selectNextAlert(r,e._ord,(function(e,t){return(0,k.EB)(A.X.Bundle.getAlertOutcomeBundle(t),r.alerts,t)})):r})),v.fold((function(){return t}),c.identity))}),n.items);return new e(n.id,n.meta,n.cardIndex,o,r.force,m.none,n._cardFactory,n._alertsReader)}},e.update=function(t){return function(n){return e._updateWithAlerts(t.filter((0,h.ff)(n._cardFactory.shouldAnimateAlertApply)))(n)}},e._updateWithAlerts=function(t){return function(n){var o=(0,u.pipe)(t,i.filterAlertInLens(n),s.uK(w.bZ.isRegistered)),a=o.left,l=o.right,d=e._groupAlertsInBundles(l),p=Array.from(d.entries()).reduce((function(e,t){var r=t[0],i=t[1],o=i.map((function(e){e[0];return e[1]})),a=i[0][0];return(0,u.pipe)(x.l.update(e,r,c.identity),v.fold((function(){return e.add(n._cardFactory.createAddedBundle(n.id)(r,a,o))}),c.identity))}),e.remove(a)(n).items),f=(0,u.pipe)(L.In.getActiveItemWithAlert(n),m.map((function(e){var t=e.id;return(0,u.pipe)(p.get(t),m.map((function(e){return e.index})),m.getOrElse((function(){return 0})))})));return new e(n.id,n.meta,f,p,r.proceed,m.none,n._cardFactory,n._alertsReader)}},Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,u.pipe)(L.In.getActiveItem(this),m.exists((function(e){return e.scheduledToDispose})))||m.isNone(this.items.find((function(e){return!e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,u.pipe)(i.getRegularCard(this.items,this.cardIndex),m.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),m.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.prototype.getCardId=function(e){return A.X.Bundle.getAlertOutcomeBundle(e).id},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(t){return(0,p.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(t)(this)},e.prototype.select=function(t){var n=this,i=A.X.Bundle.getAlertOutcomeBundle(t.alert),o=x.l.get(this.items,e.getCardId(i),W);(0,p.kG)(m.isSome(o),"Cannot select unknown alert");var a=f.MH(o),s=a.value,l=a.index,c=(0,u.pipe)(D(this),m.map((function(e){return n.items.add(n._cardFactory.unselect(e,m.some(s),n.itemsOrd))})),m.getOrElse((function(){return n.items}))).add(this._cardFactory.select(s,t,D(this),this.itemsOrd,(function(){return(0,k.EB)(i,s.alerts,t.alert)})));return new this.constructor(this.id,this.meta,m.some(l),c,r.force,this.regularHeight,this._cardFactory,this._alertsReader)},e.prototype.unselect=function(){var e=this,t=(0,u.pipe)(D(this),m.map((function(t){return e.items.add(e._cardFactory.unselect(t,m.none,e.itemsOrd))})),m.getOrElse((function(){return e.items})));return new this.constructor(this.id,this.meta,m.none,t,r.force,this.regularHeight,this._cardFactory,this._alertsReader)},e.prototype.findNextAlert=function(){var e=this;return(0,u.pipe)((0,a.gz)(m.option)(D(this),this.cardIndex),m.chain((function(t){var n=t[0],r=t[1];return(0,u.pipe)(e._cardFactory.nextAlert(n),m.alt((function(){return e._cardFactory.prevAlert(n)})),m.alt((function(){return(0,u.pipe)(g.XT(e.items.values(),r+1,(0,h.W9)(A.X.canBeFocused(e._alertsReader),A.X.isAlertCard)),m.alt((function(){return g.XT(e.items.values(),0,(0,h.W9)(A.X.canBeFocused(e._alertsReader),A.X.isAlertCard))})),m.map((function(e){return e.value.alerts[0]})))})))})),f.vx((0,u.pipe)(x.l.find(this.items,(0,h.W9)(A.X.canBeFocused(this._alertsReader),W)),m.map((function(e){return e.value.alerts[0]})))),m.map((function(e){return{alert:e,highlightIndex:0}})))},e.prototype.findFirstAlert=function(){return(0,u.pipe)(this.items.filter((0,h.W9)(A.X.canBeFocused(this._alertsReader),W)).getAt(0),m.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(e){return new this.constructor(this.id,C.R.WithAlerts.setMeta(e)(this.meta),this.cardIndex,this.items,r.proceed,m.none,this._cardFactory,this._alertsReader)},e.prototype.changeVisibleItems=function(e){var t=(0,u.pipe)(L.In.getActiveItemWithAlert(this),m.chain((function(t){return(0,u.pipe)(e.get(t.id),m.map((function(e){return e.index})))})));return new this.constructor(this.id,this.meta,t,e,r.proceed,m.none,this._cardFactory,this._alertsReader)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,S.AC)(this.id))+U(L.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&m.getEq(A.X.eq).equals(L.In.getActiveItemWithAlert(this),L.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},Object.defineProperty(e.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.size||m.isNone(this.items.find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),e._ord=A.X.Bundle.ord,e}(),P=function(){function e(t,n,r,i){this.meta=t,this.items=n,this._cardFactory=r,this._alertsReader=i,this.kind=L._L.active,this.type=L.Nm.advanced,this.id=C.R.SpecialId.Premium,this.cardIndex=m.none,this.cardsHeight=0,this.isCardsHeightValid=!0,this.card=this.cardIndex,this.itemsOrd=e._ord,(0,p.kG)(this.items.size>0,"PremiumLensViewImpl should have at least one card")}return e.create=function(t,n,r,i){return new e(t,_.aW.create(n.map(r.createFromAlert(C.R.SpecialId.Premium)),(function(e){return e.id}),e._ord.compare),r,i)},Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,u.pipe)(this.findNextAlert(),m.isNone)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),e.add=function(t){return function(n){var r=t.map(n._cardFactory.createFromAlert(n.id));return new e(n.meta,n.items.add(r),n._cardFactory,n._alertsReader)}},e.remove=function(t){return function(n){var r=new Set(t.map((function(e){return e.id}))),i=n.items.map((function(t){return r.has(t.activeAlert.id)?n._cardFactory.remove(t,[t.activeAlert],m.none,e._ord):t}));return new e(n.meta,i,n._cardFactory,n._alertsReader)}},e.update=function(t){return function(n){var r=g.uK(t,w.bZ.isRegistered),i=r[0],o=r[1];return(0,u.pipe)(n,e.remove(o),e.add(i))}},e.prototype.getCardId=function(e){return e.id},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(e){throw new Error("It's not possible to animate premium alerts")},e.prototype.select=function(e){return this},e.prototype.unselect=function(){return this},e.prototype.changeVisibleItems=function(t){return new e(this.meta,t,this._cardFactory,this._alertsReader)},e.prototype.findNextAlert=function(){return(0,u.pipe)(this.items.find(A.X.canBeFocused(this._alertsReader)),m.map((function(e){return{alert:e.value.activeAlert,highlightIndex:e.value.activeHighlightIndex}})))},e.prototype.findFirstAlert=function(){return(0,u.pipe)(this.items.filter(A.X.canBeFocused(this._alertsReader)).getAt(0),m.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(t){return new e(C.R.WithAlerts.setMeta(t)(this.meta),this.items,this._cardFactory,this._alertsReader)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,S.AC)(this.id))+U(this.card))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&m.getEq(A.X.eq).equals(this.card,e.card)&&this.meta.equals(e.meta)&&this.items.equals(e.items)},e._ord=A.X.defaultOrd,e}(),F=function(){function e(t,n,r,o,a,s,l){var c=this;this.meta=t,this.cardIndex=n,this._cardFactory=s,this._alertsReader=l,this._updateCardWithLensMeta=function(e){return c._cardFactory.changePlagiarismMetaWithAlerts(e,e.alerts.filter(I.$.isPlagiarism))},this.kind=L._L.persistent,this.type=L.Nm.plagiarism,this.id=C.R.SpecialId.Plagiarism,this.cardsHeight=0,this.isCardsHeightValid=!1,this.itemsOrd=e._ord,this.items=i.updateVisibleCardsPositions(this._cardFactory,r,n,a,o),this.cardsHeight=i.calculateCardsHeight(r),this.isCardsHeightValid=(0,u.pipe)(L.In.getActiveItem(this),f.wo((function(e){return e.positionState.isHeightValid})))&&(0,u.pipe)(this.items.getAt(i.getRegularIndex(this.cardIndex)),f.wo((function(e){return e.positionState.isHeightValid})))}return e.create=function(t,n,i,o,a){(0,p.kG)(t.id===C.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",t.id);var s=_.aW.empty(A.X.getId,e._ord.compare),l=this.groupAlertsByCardId(n),c=(0,u.pipe)(i,m.map((function(e){var t=e.alertIndex;return(0,p.kG)(void 0!==n[t],"Can not find alert for provided alertIndex"),n[t]}))),d=m.none,f=Array.from(l.entries()).reduce((function(e,t){var n=t[0],r=t[1];return(0,u.pipe)(c,m.map((function(e){return r.indexOf(e)})),m.filter((function(e){return e>-1})),m.fold((function(){return e.add(o.createRendered(C.R.SpecialId.Plagiarism)(n,r))}),(function(t){var i=o.createFocused(C.R.SpecialId.Plagiarism)(n,r,t);return d=m.some(n),e.add(i)})))}),s);return new e(t,(0,u.pipe)(d,m.chain((function(e){return(0,u.pipe)(f.get(e),m.map((function(e){return e.index})))}))),f,r.skip,m.none,o,a)},e.groupAlertsByCardId=function(e){return _.vM("cardId",e)},Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,u.pipe)(L.In.getActiveItem(this),m.exists((function(e){return e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,u.pipe)(i.getRegularCard(this.items,this.cardIndex),m.filter((function(e){return e.positionState.isHeightValid})),m.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.add=function(t){return function(n){var i=e.groupAlertsByCardId(t),o=Array.from(i.entries()).reduce((function(e,t){var r=t[0],i=t[1];return(0,u.pipe)(x.l.update(e,r,(function(e){return n._cardFactory.addPlagiarismAlerts(e,i)})),v.fold((function(){return e.add(n._cardFactory.createAdded(C.R.SpecialId.Plagiarism)(r,i))}),c.identity))}),n.items),a=(0,u.pipe)(L.In.getActiveItemWithAlert(n),m.map((function(e){var t=e.id;return f.MH(o.get(t)).index}))),s=m.getEq(l.eqNumber).equals(a,n.cardIndex)?r.force:r.skip;return new e(n.meta,a,o,s,n.regularHeight,n._cardFactory,n._alertsReader)}},e.remove=function(t){return function(n){var i=e.groupAlertsByCardId(t),o=Array.from(i.entries()).reduce((function(t,r){var i=r[0],o=r[1];return(0,u.pipe)(x.l.update(t,i,(function(t){var r=n._updateCardWithLensMeta(n._cardFactory.remove(t,o,D(n),e._ord));return(0,u.pipe)(L.In.getActiveItem(n),m.exists((function(e){return e.id===r.id})))?n._cardFactory.selectNextAlert(r,e._ord):r})),v.fold((function(){return t}),c.identity))}),n.items);return new e(n.meta,n.cardIndex,o,r.force,m.none,n._cardFactory,n._alertsReader)}},e.prototype.getCardId=function(e){return e.cardId},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(t){return(0,p.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(t)(this)},e.update=function(t){return function(n){return e._updateWithAlerts(t.filter((0,h.ff)(n._cardFactory.shouldAnimateAlertApply)))(n)}},e._updateWithAlerts=function(t){return function(n){var i=g.uK(t,w.bZ.isRegistered),o=i[0],a=i[1],s=e.groupAlertsByCardId(o),l=Array.from(s.entries()).reduce((function(e,t){var r=t[0],i=t[1];return(0,u.pipe)(x.l.update(e,r,n._updateCardWithLensMeta),v.fold((function(){return e.add(n._cardFactory.createAdded(C.R.SpecialId.Plagiarism)(r,i))}),c.identity))}),e.remove(a)(n).items),d=(0,u.pipe)(L.In.getActiveItemWithAlert(n),m.map((function(e){var t=e.id;return(0,u.pipe)(l.get(t),m.map((function(e){return e.index})),m.getOrElse((function(){return 0})))})));return new e(n.meta,d,l,r.proceed,m.none,n._cardFactory,n._alertsReader)}},e.prototype.updateMeta=function(t){var n=this.items.map(this._updateCardWithLensMeta);return new e(C.R.WithAlerts.setMeta(t)(this.meta),this.cardIndex,n,r.proceed,m.none,this._cardFactory,this._alertsReader)},e.prototype.select=function(t){var n=this;(0,p.kG)(t.alert.type===I.$.Type.plagiarism,"cannot highlight non-plagiarism alert");var i=x.l.get(this.items,t.alert.cardId,W);(0,p.kG)(m.isSome(i),"Cannot select unknown alert");var o=f.MH(i),a=o.value,s=o.index,l=(0,u.pipe)(D(this),m.map((function(t){return n.items.add(n._cardFactory.unselect(t,m.some(a),e._ord))})),m.getOrElse((function(){return n.items}))).add(this._cardFactory.select(a,t,D(this),e._ord));return new e(this.meta,m.some(s),l,r.force,this.regularHeight,this._cardFactory,this._alertsReader)},e.prototype.unselect=function(){var t=this,n=(0,u.pipe)(D(this),m.map((function(n){return t.items.add(t._cardFactory.unselect(n,m.none,e._ord))})),m.getOrElse((function(){return t.items})));return new e(this.meta,m.none,n,r.force,this.regularHeight,this._cardFactory,this._alertsReader)},e.prototype.changeVisibleItems=function(t){var n=(0,u.pipe)(L.In.getActiveItemWithAlert(this),m.chain((function(e){return(0,u.pipe)(t.get(e.id),m.map((function(e){return e.index})))})));return new e(this.meta,n,t,r.proceed,m.none,this._cardFactory,this._alertsReader)},e.prototype.findNextAlert=function(){var e=this;return(0,p.kG)(m.isSome(L.In.getActiveItemWithAlert(this))===m.isSome(this.cardIndex),"Lens is in wrong state"),(0,u.pipe)((0,a.gz)(m.option)(L.In.getActiveItemWithAlert(this),this.cardIndex),m.chain((function(t){var n=t[0],r=t[1];return(0,u.pipe)(e._cardFactory.nextAlert(n),m.alt((function(){return e._cardFactory.prevAlert(n)})),m.alt((function(){return(0,u.pipe)(g.dn(e.items.values(),r,(0,h.W9)(A.X.canBeFocused(e._alertsReader),A.X.isAlertCard)),m.map((function(e){return e.value.activeAlert})))})))})),f.vx((0,u.pipe)(x.l.find(this.items,(0,h.W9)(A.X.canBeFocused(this._alertsReader),W)),m.map((function(e){return e.value.activeAlert})))),m.map((function(e){return{alert:e,highlightIndex:0}})))},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,S.AC)(this.id))+U(L.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.findFirstAlert=function(){return(0,u.pipe)(this.items.filter((0,h.W9)(A.X.canBeFocused(this._alertsReader),W)).getAt(0),m.map((function(e){return{alert:e.alerts[0],highlightIndex:0}})))},e.prototype.equals=function(e){return this.id===e.id&&m.getEq(A.X.eq).equals(L.In.getActiveItemWithAlert(this),L.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},e._ord=A.X.defaultOrd,e}(),O=function(){function e(e){this.kind=L._L.abstract,this.type=L.Nm.closed,this.id=C.R.SpecialId.Closed,this.meta=C.R.createStaticLens({id:C.R.SpecialId.Closed,title:"Closed"},C.R.Meta.group.empty,e)}return e.create=function(t){return e.value||(e.value=new e(t)),e.value},e.prototype.hashCode=function(){return(0,S.AC)(this.id)},e.prototype.equals=function(e){return this.id===e.id},e}(),B=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.itemsOrd=t._cardsOrd,n.withPriorityList=!0,n}return(0,o.__extends)(t,e),t.create=function(e,n,o,a,s,l){var c=(0,u.pipe)(a,m.map((function(e){var t=e.alertIndex;return o[t]})),m.chain(m.fromNullable),m.map((function(e){return"all"===e.view})),m.getOrElse((function(){return!1}))),d=M.initCardsHash(e,n,o,a,s,t._cardsOrd).hash,p=i.Priority.ensureExpandCardIsPresent(e,d,l,s);return p=i.Priority.syncVisibleCards(p,c,c,s),new t(e,n,(0,u.pipe)(a,m.chain((function(e){var t=e.alertIndex;return x.l.find(p,(0,h.W9)(W,(function(e){return e.activeAlert.id===o[t].id})))})),m.map((function(e){return e.index}))),p,r.skip,m.none,s,l)},Object.defineProperty(t.prototype,"isNonPriorityListOpened",{get:function(){return t.isNonPriorityListOpened(this)},enumerable:!1,configurable:!0}),t.isNonPriorityListOpened=function(e){return(0,u.pipe)(e.items.get(A.X.Priority.expandCardId),m.map((function(e){return"rendered"===e.value.visualState.transition.type})),m.getOrElse((function(){return!1})))},Object.defineProperty(t.prototype,"onlyNonPriorityAlertsLeft",{get:function(){return 0!==this.meta.count&&0===this.meta.priorityCount&&0===this.items.filter((function(e){return!A.X.Priority.isStaticCard(e)&&A.X.isAlertCard(e)&&I.$.isPriority(e.activeAlert)&&!e.scheduledToDispose})).size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusedCardIsNonPriority",{get:function(){return t.focusedCardIsNonPriority(this)},enumerable:!1,configurable:!0}),t.focusedCardIsNonPriority=function(e){return(0,u.pipe)(L.In.getActiveItemWithAlert(e),m.map((function(e){return!I.$.isPriority(e.activeAlert)})),m.getOrElse((function(){return!1})))},t.prototype.toggleNonPriorityList=function(){var e=this.isNonPriorityListOpened,n=i.Priority.syncVisibleCards(this.items,!e,!e&&this.focusedCardIsNonPriority,this._cardFactory);return new t(this.id,this.meta,this.cardIndex,n,r.proceed,this.regularHeight,this._cardFactory,this._alertsReader)},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.isNonPriorityListOpened===t.isNonPriorityListOpened},t.prototype.select=function(n){var o=e.prototype.select.call(this,n),a=this.isNonPriorityListOpened||!I.$.isPriority(n.alert),s=i.Priority.syncVisibleCards(o.items,a,!I.$.isPriority(n.alert),this._cardFactory);return new t(o.id,o.meta,o.cardIndex,s,r.proceed,o.regularHeight,this._cardFactory,this._alertsReader)},t.prototype.onAnimationFinish=function(e){(0,p.kG)(e.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");var n=M._updateWithAlerts(t.isAlertVisible,this._cardFactory)(e)(this),o=i.Priority.syncVisibleCards(n.items,this.isNonPriorityListOpened,this.focusedCardIsNonPriority,this._cardFactory);return new t(n.id,n.meta,n.cardIndex,o,r.proceed,n.regularHeight,this._cardFactory,this._alertsReader)},Object.defineProperty(t.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.filter((0,h.ff)(A.X.Priority.isStaticCard)).size||m.isNone(this.items.filter((0,h.ff)(A.X.Priority.isStaticCard)).find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),t.prototype.findFirstAlert=function(){var e=(0,h.W9)((0,h.ff)(A.X.Priority.isStaticCard),A.X.canBeFocused(this._alertsReader)),t=this.isNonPriorityListOpened?e:(0,h.W9)(e,A.X.isPriority);return(0,u.pipe)(this.items.filter((0,h.W9)(t,W)).getAt(0),m.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},t.prototype.findNextAlert=function(){var e=this,t=this.isNonPriorityListOpened&&this.onlyNonPriorityAlertsLeft?c.constTrue:function(e){return I.$.isPriority(e.activeAlert)},n=(0,h.W9)(A.X.canBeFocused(this._alertsReader),t);return(0,u.pipe)((0,a.gz)(m.option)(L.In.getActiveItemWithAlert(this),this.cardIndex),m.chain((function(t){var r=t[0],i=t[1];return(0,u.pipe)(e._cardFactory.nextAlert(r),m.alt((function(){return e._cardFactory.prevAlert(r)})),m.alt((function(){return(0,u.pipe)(g.XT(e.items.values(),i+1,(0,h.W9)(n,A.X.isAlertCard)),m.alt((function(){return g.XT(e.items.values().filter(n),0,(0,h.W9)(n,A.X.isAlertCard))})),m.map((function(e){return e.value.alerts[0]})))})))})),f.vx((0,u.pipe)(x.l.find(this.items,(0,h.W9)(n,W)),m.map((function(e){return e.value.alerts[0]})))),m.map((function(e){return{alert:e,highlightIndex:0}})))},Object.defineProperty(t.prototype,"activeAlertsCount",{get:function(){return(0,u.pipe)(L.In.getActiveItemWithAlert(this),m.exists((function(e){return w.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleAlertsCount",{get:function(){return(0,u.pipe)(L.In.getActiveItemWithAlert(this),m.exists((function(e){return w.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.isNonPriorityListOpened?this.meta.count:this.meta.priorityCount},enumerable:!1,configurable:!0}),t._cardsOrd=A.X.priorityOrd,t.isAlertVisible=function(e,t){return(0,L.yi)(e)&&("priority"===t.view||e.isNonPriorityListOpened)},t}(M);!function(e){e.skip=function(){return!1},e.force=function(){return!0},e.proceed=function(e){return e.positionState.animationInProgress}}(r||(r={})),function(e){var t;!function(t){t.getAlertHandler=function(t,n){return void 0===n&&(n=c.constTrue),function(r,i){var o=e.applyWithFilter(i,e.applyDiff);return function(e){return(0,u.pipe)(e,o(r,M.add(n,t),M.update(n,t),M.remove))}}}}(t=e.WithSuccess||(e.WithSuccess={})),function(t){t.getAlertsHandler=function(){return function(t,n){return function(r){var i=e.applyWithFilter(n,e.applyDiff);return(0,u.pipe)(r,i(t,N.add,N.update,N.remove))}}}}(e.Bundles||(e.Bundles={})),function(n){function i(t,n){return function(i){var o=e.Priority.ensureExpandCardIsPresent(i.id,i.items,n,t);o=e.Priority.syncVisibleCards(o,B.isNonPriorityListOpened(i),B.focusedCardIsNonPriority(i),t);var a=(0,u.pipe)(L.In.getActiveItemWithAlert(i),m.chain((function(e){return o.find((function(t){return A.X.isAlertCard(t)&&t.activeAlert.id===e.activeAlert.id}))})),m.map((function(e){return e.index})));return new B(i.id,i.meta,a,o,r.proceed,M.regularHeight(i),t,n)}}function o(e,t){return"removed"===e.visualState.transition.type?e:L.nL.Items.deprecatedMapper((function(e){return t.transitionTo(e,{type:"hidden",clockwise:!1})}),c.identity,(function(e){return R.J.transitionTo(e,{type:"hidden",clockwise:!1})}))(e)}n.getAlertHandler=function(e,n){return function(r,o){return(0,c.flow)(t.getAlertHandler(e,B.isAlertVisible)(r,o),i(e,n))}},n.getSyncVisibleCardsHandler=i,n.makeCardInvisible=o,n.ensureExpandCardIsPresent=function(e,t,n,r){if(t.has(A.X.Priority.expandCardId)||0===t.size)return t;var i=f.MH(n.getById(f.MH(t.getAt(0)).activeAlert.id)),o=(0,u.pipe)(i.copy(),(function(e){return e.id="dummy_alert",e._state={type:w.bZ.State.Type.REGISTERED,checkingState:w.bZ.CheckingState.IDLE},e.getHighlightRanges=function(){return[{start:0,end:0,meta:{}}]},e.view=d.wQ.View.all,e})),a=r.createAdded(e)(A.X.Priority.expandCardId,o),s=r.createRendered(e)(A.X.Priority.expandHintCardId,o);return t=(t=t.add(a)).add(s)},n.syncVisibleCards=function(e,t,n,r){var i=0===e.filter((function(e){return!R.J.isBulkAcceptItem(e)&&!A.X.Priority.isStaticCard(e)&&!e.scheduledToDispose&&A.X.isAlertCard(e)&&!I.$.isPriority(e.activeAlert)})).size;return e.map((function(e){return A.X.isAlertCard(e)?A.X.Priority.isStaticCard(e)?i?o(e,r):A.X.Priority.isExpand(e)?t||n?r.transitionTo(e,{type:"rendered",clockwise:!1}):r.transitionTo(e,{type:"added",clockwise:!1}):t||n?r.transitionTo(e,{type:"rendered",clockwise:!1}):o(e,r):t||I.$.isPriority(e.activeAlert)?"hidden"===e.visualState.transition.type?r.transitionTo(e,{type:"rendered",clockwise:!0}):e:o(e,r):R.J.isBulkAcceptItem(e)?o(e,r):e}))}}(e.Priority||(e.Priority={})),function(t){t.getAlertsHandler=function(){return function(t){return e.applyDiff(t,P.add,P.update,P.remove)}}}(e.Premium||(e.Premium={})),function(t){t.getAlertsHandler=function(){return function(t){return e.applyDiff(t,F.add,F.update,F.remove)}}}(e.Plagiarism||(e.Plagiarism={})),e.applyDiff=function(e,t,n,r){return function(i){return(0,u.pipe)(e,y.v.reduce(i,(function(e,t){var n=t.alert;return r([n])(e)}),(function(e,t,r){var i=r.alert;return n([i])(e)}),(function(e,n){var r=n.alert;return t([r])(e)})))}},e.applyWithFilter=function(e,t){return function(n,r,i,o){var a=(0,c.flow)(s.uK(e),(function(e){return(0,c.flow)(o(e.left),i(e.right))}));return t(n,(function(t){return r(t.filter(e))}),a,o)}},e.calculateCardsHeight=function(e){return(0,u.pipe)(e.getAt(e.size-1),m.map((function(e){return e.positionState.absTop+e.positionState.height})),m.getOrElse((function(){return 0})))},e.getRegularIndex=function(e){return(0,u.pipe)(e,m.map((function(e){return 0===e?1:0})),m.getOrElse((function(){return 0})))},e.getRegularCard=function(t,n){return(0,u.pipe)(t.getAt(e.getRegularIndex(n)),m.map((function(e){return(0,p.kG)(e.positionState.watched,"Regular card should be watched"),e})))},e.updateVisibleCardsPositions=function(t,n,r,i,o){var a=e.getRegularIndex(r),s=(0,u.pipe)(r,m.chain((function(e){return(0,u.pipe)(n.getAt(e))}))),l=(0,u.pipe)(i,f.vx((0,u.pipe)(n.find((function(e){return e.positionState.watched&&(0,u.pipe)(s,f.wo((function(t){return t.id!==e.id})))})),m.filter((function(e){return e.value.positionState.isHeightValid&&!e.value.scheduledToDispose})),m.map((function(e){return e.value.positionState.height}))))),c=0,d=(0,u.pipe)(s,f.wo((function(e){return e.positionState.isHeightValid})));return n.map((function(e,n,i){var s=f.r3(i)(r),p=s||i===a,h=e.scheduledToDispose||(s?e.positionState.isHeightValid:m.isSome(l)),g=e.scheduledToDispose?0:s?e.positionState.height:(0,u.pipe)(l,m.getOrElse((function(){return e.positionState.height}))),v={absTop:s||d?c:e.positionState.absTop,height:g,animationInProgress:o(e,i),visible:e.positionState.visible,isHeightValid:h,watched:p};return c+=g,E.Z.eq.equals(e.positionState,v)?e:L.nL.Items.deprecatedMapper((function(e){return t.changePosition(e,v)}),(function(e){return b.Vx(e,{positionState:v})}),(function(e){return R.J.changePosition(e)(v)}))(e)}))},e.filterAlertInLens=function(e){return s.hX((function(t){return w.bZ.isNotRemoved(t)||e.items.has(e.getCardId(t))}))}}(i||(i={}));var D=L.In.getActiveItemOfType(W);function W(e){return e.kind===T.h.alertCard}function U(e){return(0,u.pipe)(e,m.fold((function(){return 2433880}),(function(e){return null==e?9735524:e.hashCode()<<2})))}},26268:(e,t,n)=>{"use strict";n.d(t,{tn:()=>r,$A:()=>i,EQ:()=>o});var r,i,o,a=n(45980),s=n(73805),l=n(65772),c=n(8125),u=n(95574),d=n(22232),p=n(64909),f=n(17753),m=n(10002),h=n(32952),g=n(28043),v=n(66310),y=n(40151),b=n(79462),w=n(78674),C=n(77176),_=n(598),S=n(83401),x=n(99391),I=n(41199),A=n(50634),k=n(38524);!function(e){!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(e.Type||(e.Type={}))}(r||(r={})),function(e){var t=function(){function e(){this.events=new h.xQ,this.focusAlertHighlight=function(){return l.left(new Error("Method not implemented."))},this.highlightAlertHighlight=function(){return l.left(new Error("Method not implemented."))},this.moveCursorToHighlight=c.ZT}return e.prototype.ensureAlertHighlightInViewport=function(){throw new Error("Method not implemented.")},e.prototype.getMarkByAlert=function(e){throw new Error("Method not implemented.")},e.prototype.getAlertByMark=function(e){throw new Error("Method not implemented.")},e}();e.Mock=t,e.getHighlightIndex=function(e,t){return(0,s.pipe)(t,l.mapLeft((function(){return new Error("Mark is collapsed")})),l.chain((function(t){return u.vM((function(){var n=f.bZ.isSuperAlert(e)||f.bZ.isPremium(e)&&e.highlightTexts.length>1?e.getHighlightRanges().findIndex((function(e){return e.start===t.start&&e.end===t.end})):0;return(0,d.kG)(-1!==n,"Could not find higlight index by Range for provided Alert",(function(){return JSON.stringify({alertRanges:e.getHighlightRanges(),targetRange:t})})),n}))})))}}(i||(i={})),function(e){e.getHighlightSubscribtion=function(e,t,n){return e.pipe(g.x(p.getEq(I.$.ord).equals),v.w((function(e){return(0,s.pipe)(e,p.fold(y.c,(function(e){return b.y.create((function(){return n.debug("highlight mark: "+e.id),(0,s.pipe)(t.highlightAlertHighlight(e),l.fold((function(t){return n.error("Cannot highlight mark: "+e.id,t),c.ZT}),(function(t){return function(){n.debug("unhighlight mark: "+e.id),t.dispose()}})))}))})))})))},e.highlightMarkByHighlightedCard=function(t,n,r,i,o){var s=e.getHighlightSubscribtion(t.hovered.pipe(w.b(100),C.U((0,a.flow)(p.chain((function(e){return k.nL.getAlertCardById(e)(n.get())})),p.map((function(e){return e.activeAlert})),p.filter((function(e){return i.isRegistered(e.id)}))))),r,o);return{id:"highlightMarkByHighlightedAlert",when:m.R.isWithAlertsId,what:k.nL.Effect.Applicator.create(s.pipe(_.c(S.F())))}},e.focusMarkByActiveAlert=function(e,t,n,r){var i=e.view(k.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return(0,s.pipe)(k.In.getActiveItemWithAlert(t),p.map((function(e){return{alert:e.activeAlert,source:n,highlightIndex:e.activeHighlightIndex}})))}))).pipe(x.skipBy(p.getEq(A.E.getEq())),C.U(p.filter((function(e){return p.isSome(n.getRegistered(e.alert.id))}))),v.w(p.fold((function(){return r.debug("Nothing to focus"),y.c()}),(function(e){return b.y.create((function(){return r.debug("Focus mark: "+e.alert.id+" | "+e.highlightIndex),e.source===f.l$.sidebar&&t.moveCursorToHighlight(e,"start"),(0,s.pipe)(t.focusAlertHighlight(e),l.fold((function(t){return r.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),c.ZT}),(function(t){return function(){r.debug("Unfocus mark: "+e.alert.id+" | "+e.highlightIndex+"'"),t.dispose()}})))}))}))));return{id:"focusMarkByActiveAlert",when:m.R.isWithAlertsId,what:k.nL.Effect.Applicator.create(i.pipe(_.c(S.F())))}}}(o||(o={}))},65247:(e,t,n)=>{"use strict";n.d(t,{x:()=>u,O:()=>f});var r,i=n(22788),o=n(18208),a=n(68983),s=n(10002),l=n(58199);function c(e){return e+" "+o._6(e,"alert","alerts")}var u,d=function(e,t){return function(n,r,i,o){var a=o?n.count:n.priorityCount;return a>0?c(a):i&u.IsDocumentEmpty?e:t}},p=((r={})[s.R.SpecialId.Correctness]={description:"Improves spelling, grammar, and punctuation.",stateMessage:d("No alerts","Looking good")},r[s.R.SpecialId.Clarity]={description:"Helps make your writing easier to understand.",stateMessage:function(e,t,n){var r=(0,a.W)(i.lt(l.g.ord))(t);if(n&u.IsDocumentEmpty)return"So far so good";if(e.count>0){if(l.g.isMin(t))return c(e.count);if(r(l.g.fromNumber(20)))return"Unclear";if(r(l.g.fromNumber(70)))return"A bit unclear";if(r(l.g.fromNumber(85)))return"Mostly clear";if(r(l.g.fromNumber(95)))return"Clear"}return"Very clear"}},r[s.R.SpecialId.Engagement]={description:"Helps make your writing more interesting and effective.",stateMessage:function(e,t,n){var r=n&u.IsFreeUser,o=l.g.isMin(t),s=(0,a.W)(i.lt(l.g.ord))(t);if(n&u.IsDocumentEmpty||r&&o)return"Nothing yet";if(r||e.count>0){if(o)return c(e.count);if(s(l.g.fromNumber(20)))return"Bland";if(s(l.g.fromNumber(80)))return"A bit bland";if(s(l.g.fromNumber(95)))return"Engaging"}return"Very engaging"}},r[s.R.SpecialId.Delivery]={description:"Helps you make the right impression on your reader.",stateMessage:function(e,t,n){var r=n&u.IsFreeUser,o=l.g.isMin(t),s=(0,a.W)(i.lt(l.g.ord))(t);if(n&u.IsDocumentEmpty||r&&o)return"Nothing yet";if(r||e.count>0){if(o)return c(e.count);if(s(l.g.fromNumber(20)))return"Serious issues";if(s(l.g.fromNumber(40)))return"Very off";if(s(l.g.fromNumber(95)))return"Slightly off"}return"Just right"}},r[s.R.SpecialId.Vox]={description:"Your organizations writing guidelines.",stateMessage:d("Nothing yet","All good")},r[s.R.SpecialId.Plagiarism]={description:"Checks for similarities to published writing.",stateMessage:function(e,t,n){return n&u.IsLensVisited&&!(n&u.IsDocumentEmpty)?n&u.IsLensActive?l.g.isMin(t)?"100% original":t+"% unoriginal":"Recheck":"Not checked yet"}},r[s.R.SpecialId.Premium]={description:"Offers more suggestions on how to improve your writing.",stateMessage:function(e,t,n){return n&u.IsDocumentEmpty?"Advanced checks":e.count+" more "+o._6(e.count,"alert","alerts")}},r);function f(e){return p[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(u||(u={}))},87325:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var r,i=n(45980),o=n(64909),a=n(42726);!function(e){!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){var t=function(){this.downloadStarted=a.hg.create(!1),this.beginDownload=i.constVoid,this.tryToInterrupt=i.constVoid,this.generateReport=function(){throw new Error("Method not implemented.")},this.reportData=a.hg.create(o.none),this.dedHTML="",this.dispose=i.constVoid};e.Mock=t}(e.ViewModel||(e.ViewModel={}))}(r||(r={}));var s,l=n(76974);!function(e){var t;!function(e){!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){var n=function(e,n){void 0===e&&(e={type:t.Type.EMPTY}),void 0===n&&(n=o.some(new r.ViewModel.Mock)),this.statisticsState=e,this.reportViewModel=n,this.state=l.of(this.statisticsState),this.onModalClose=i.constVoid};e.Mock=n}(e.ViewModel||(e.ViewModel={}))}(s||(s={}))},15228:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});var r,i=n(73805),o=n(42726),a=n(84966),s=n(64909),l=n(10002),c=n(38524),u=n(32952),d=n(85985),p=n(77176),f=n(66310),m=n(52479),h=n(93508),g=n(16118),v=n(76974),y=n(50628),b=n(17343),w=n(66265),C=n(2834);!function(){function e(e,t,n,v,y){var b=this;this._state=e,this._documentModel=t,this._trackSuccessStateChanged=n,this.nonPriorityOptions=v,this.mutedAlertsOptions=y,this._getTextAmount=function(e){return 0===e?r.TextAmount.zero:e<=a.hD?r.TextAmount.small:r.TextAmount.large},this._subs=[],this.successState=o.hg.create({type:r.SuccessType.zero}),this.textAmount=o.hg.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new u.xQ,this.applicatorEffects={id:"successViewModel.effects",when:l.R.isWithAlertsId,what:c.nL.Effect.Applicator.create(this.actionEvents.pipe(d.h((function(e){return e.type===r.ActionType.More})),p.U((function(){return function(e){var t=e.patch({currentLens:(0,c.yi)(e.currentLens)?e.currentLens.toggleNonPriorityList():e.currentLens});return(0,i.pipe)(t.currentLens.findFirstAlert(),s.fold((function(){return t}),(function(e){return t.patch({currentLens:t.currentLens.select(e)})})))}}))))},this._currentLens=this._state.view((function(e){return{isSuccess:c.nL.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:c.nL.isLensview(e)&&0!==e.currentLens.activeAlertsCount,isAllAlerts:e.currentLens.id===l.R.SpecialId.AllAlerts}})),this._listenTextSize=function(){return b._currentLens.view((function(e){return e.isSuccess})).pipe(f.w(m.Ft(b._documentModel.documentLength.view("trimmed"))),p.U(b._getTextAmount)).subscribe(m.wW(b.textAmount))},this._lensSwitch=this._currentLens.pipe(h.O(this._currentLens.get()),g.G(),p.U((function(e){var t=e[0],n=e[1];return n.isSuccess?s.fromNullable({prevLensType:t.type,nonPriorityAlertsLeft:n.nonPriorityAlertsLeft,isAllAlerts:n.isAllAlerts}):s.none}))),this._textAmountToSuccessType=function(e){return e===r.TextAmount.zero?{type:r.SuccessType.zero}:e===r.TextAmount.large?{type:r.SuccessType.large}:{type:r.SuccessType.small}},this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,i.pipe)(v,s.map((function(e){return{hasNonPriorityAlerts:b._state.view((function(e){return c.nL.isWithPriorityList(e)&&e.currentLens.onlyNonPriorityAlertsLeft})),reviewNonPriorityAlerts:function(){e.trackNonPriorityToggle(),b.actionEvents.next({type:r.ActionType.More})}}}))),this.mutedAlerts=(0,i.pipe)(y,s.map((function(){return{reviewMutedSuggestions:function(){},mutedSuggestionsCount:b._state.view((function(e){return e.currentLens.meta.mutedCount}))}})))}e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._listenSuccessStateChange=function(){var e=this;return this._lensSwitch.pipe(w.cp((function(t){return e.textAmount.pipe(p.U(e._textAmountToSuccessType),h.O(t.prevLensType===c.Nm.lensview?{type:r.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:e._textAmountToSuccessType(e.textAmount.get())),g.G(),p.U((function(e){var t=e[0],n=e[1];return t.type===r.SuccessType.applied&&n.type!==r.SuccessType.zero?t:n})),f.w((function(t,n){return 0===n?v.of(t):(i=t).type===r.SuccessType.applied||i.type===r.SuccessType.zero?v.of(i):e._documentModel.checkingState.pipe(d.h((function(e){return"checking"!==e})),y.P(),b.h(i));var i})),C.b((function(t){e._trackSuccessStateChanged(t.type===r.SuccessType.applied?"applied":t.type===r.SuccessType.zero?"nothingToCheck":"noIssues")})))}))).subscribe(m.wW(this.successState))}}();!function(e){var t,n;!function(e){e.More="More"}(e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(t=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied"}(n=e.SuccessType||(e.SuccessType={}));var r=function(){function e(){this.textAmount=o.hg.create(t.zero),this.successState=o.hg.create({type:n.zero}),this.mutedSuggestionsCount=o.hg.create(0),this.hasNonPriorityAlerts=o.hg.create(!1)}return e.prototype.reviewMutedSuggestions=function(){throw new Error("Method not implemented.")},e.prototype.reviewNonPriorityAlerts=function(){throw new Error("Method not implemented.")},e.prototype.dispose=function(){throw new Error("Method not implemented.")},e}();e.Mock=r}(r||(r={}))},64437:(e,t,n)=>{"use strict";n.d(t,{g:()=>v,m:()=>y});var r=n(59312),i=n(90351),o=n(22823),a=n(71031),s=n(13097),l={position:"relative",borderRadius:o.u.rem(s.Jr),background:i.Il.CoreNeutral0,boxShadow:"0 "+o.u.rem(.625)+" "+o.u.rem(s.mJ)+" 0 rgba(198, 203, 222, .45)"},c={$nest:{"&:before":{position:"absolute",width:o.u.px(10),height:o.u.px(10),borderRadius:o.u.percent(50),content:"''",transform:"scale(.5)"}}},u={$nest:{"&:before":{backgroundColor:a.kl}}},d={$nest:{"&:before":{backgroundColor:a.AX}}},p={$nest:{"&:before":{backgroundColor:i.Il.CoreRed50}}},f={$nest:{"&:before":{backgroundColor:i.Il.CoreBlue50}}},m={$nest:{"&:before":{backgroundColor:i.Il.CoreGreen50}}},h={$nest:{"&:before":{backgroundColor:i.Il.CorePurple50}}},g={$nest:{"&:before":{backgroundColor:i.Il.CoreNeutral50}}},v={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},y=(0,r.__assign)((0,r.__assign)({},o.u.stylesheet({dot:[c],dotAdvanced:[d],dotCritical:[u],dotCorrectness:[p],dotClarity:[f],dotEngagement:[m],dotDelivery:[h],dotVox:[g]})),{fullCard:o.u.joinClasses([v.fullCardSelector,o.u.style(l)])})},90600:(e,t,n)=>{"use strict";n.d(t,{d:()=>A});var r=n(59312),i=n(27378),o=n(42726),a=n(64909),s=n(19962),l=n(92932),c=n(71517),u=n(73510),d=n(77176),p=n(24209),f=n(18625),m=n(66310),h=n(40151),g=n(16528),v=n(2834),y=n(49708),b=n(93508),w=n(17343),C=n(52479),_=n(76974),S=n(99391),x=n(67434),I=n(57091),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._log=l.C8.Logging.getLogger("CardsListConnectorView",l.zW.LogLevel.DEBUG),t._subs=new u.w.Keeper,t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.isMaster&&this._setMaster()},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:n}),this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",n),this.forceUpdate((function(){t._setMaster(),t._log.trace("view force update complete",n)}))):(this._log.trace("set master view",n),this._setMaster()):(this._log.trace("release master view",n),this._clearSubs())},t.prototype.componentWillUnmount=function(){this._clearSubs()},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.height;return i.createElement(o.F.div,{"data-purpose":"card-list-connector",style:r.pipe(d.U((function(e){return{height:e}}))),className:t},n)},t.prototype._setMaster=function(){this._setSubs()},t.prototype._setSubs=function(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())},t.prototype._clearSubs=function(){this._subs.dispose()},t}(i.Component);!function(e){!function(e){e.create=function(){return o.hg.create({scrollProvider:a.none,scrollConsumer:a.none,viewport:a.none,title:a.none})}}(e.Elements||(e.Elements={})),e.boundedScrollListener=function(e,t){return p.T(f.P((function(){e.paddingTop.set(0)})),t.view("viewport").pipe(m.w(a.fold(h.c,(function(e){return g.YC(e).pipe(d.U((function(t){return(0,r.__assign)((0,r.__assign)({},t),{top:e.offsetTop,height:e.offsetHeight})})))}))),v.b((function(t){return e.viewport.set({top:c.r.FromWindowTop.ISO.wrap(t.top),height:t.height})}))),t.view("scrollProvider").pipe(m.w(a.fold(h.c,(function(t){return y.R(t,"scroll").pipe(d.U((function(){return t.scrollTop})),b.O(t.scrollTop),v.b((function(t){return e.scrollTop.set(t)})),w.h(C.PU))})))),t.view("title").pipe(m.w(a.fold((function(){return _.of(s.UL.empty)}),(function(e){return g.YC(e)}))),d.U((function(e){return e.height})),S.shareReplay({bufferSize:1,refCount:!0}),v.b((function(t){return e.paddingTop.set(t)}))),t.view("scrollConsumer").pipe(m.w(a.fold(h.c,(function(t){return e.scrollOffset.pipe(v.b((function(e){t.scrollTop+=e})))}))))).pipe(w.h(void 0))},e.superScrollListener=function(e,t){var n=t.view("title").pipe(m.w(a.fold((function(){return _.of(s.UL.empty)}),(function(e){return g.YC(e)}))),d.U((function(e){return e.height})),S.shareReplay({bufferSize:1,refCount:!0}));return p.T(f.P((function(){e.paddingTop.set(0)})),t.view("viewport").pipe(m.w(a.fold(h.c,(function(e){return g.YC(e).pipe(d.U((function(t){return(0,r.__assign)((0,r.__assign)({},t),{top:e.offsetTop,height:e.offsetHeight})})))}))),v.b((function(t){return e.viewport.set({top:c.r.FromWindowTop.ISO.wrap(t.top),height:t.height})}))),t.view("scrollProvider").pipe(m.w(a.fold(h.c,(function(t){return y.R(t,"scroll").pipe(d.U((function(){return t.scrollTop})),b.O(t.scrollTop),v.b((function(t){return e.scrollTop.set(t)})),w.h(C.PU))})))),t.view("scrollConsumer").pipe(m.w(a.fold(h.c,(function(t){return e.scrollOffset.pipe(x.R((function(e,t){return e-t}),0),v.b((function(e){t.style.transform="translateY("+e+"px)"})))}))),I.a(n),v.b((function(t){var n=t[0],r=t[1];return e.paddingTop.set(n+r)})))).pipe(w.h(void 0))}}(A||(A={}))},83305:(e,t,n)=>{"use strict";n.d(t,{TG:()=>J});var r,i=n(59312),o=n(27378),a=n(45980),s=n(73805),l=n(42726),c=n(22232),u=n(19962),d=n(83078),p=n(64909),f=n(93583),m=n(22168),h=n(8125),g=n(92932);!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(r||(r={}));var v=function(){function e(){this._steps={},this.cpuAndAnimationOptsExperiment=!1}return e.prototype.isStepEnabled=function(e){return void 0!==this._steps[e]},e.prototype.relaunchAllSteps=function(){g.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")},e.prototype.setState=function(e,t){this.subscribeForStep(e).state.set(t)},e.prototype.subscribeForStep=function(e){var t=l.hg.create(r.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotShown:h.ZT,dotClicked:function(){return t.set(r.Popup)},popupClosed:function(){return t.set(r.Passed)},popupIgnored:function(){return t.set(r.Hidden)},actionTaken:function(){return t.set(r.Passed)}})},e.prototype.getStepCompletionCallback=function(e){throw new Error("Method not implemented.")},e.prototype.changeState=function(e){},e}(),y=n(52479),b=n(77176),w=n(95093),C=n(85985),_=n(598),S=n(41398),x=n(90351),I=n(22823),A=n(71031),k=n(13097),E=x.Il.BackgroundTooltip,T=I.u.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:"0 0 0 "+I.u.rem(1)+" rgba(95, 139, 250, 0)"},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),R={width:I.u.rem(1),height:I.u.rem(1),borderRadius:I.u.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:T+" 2s infinite",$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},L=I.u.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),M={width:I.u.rem(1),height:I.u.rem(1),borderRadius:I.u.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:I.u.rem(1),height:I.u.rem(1),borderRadius:I.u.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:L+" 2s infinite",willChange:"transform"},"&:hover:before":{animation:"none"}}},N={margin:I.u.rem(-1.5)+" 0 0 "+I.u.rem(-1.5),padding:I.u.rem(1),borderRadius:I.u.percent(50),cursor:"pointer",pointerEvents:"all"},P={margin:"0 0 "+I.u.rem(.5),color:x.Il.CoreNeutral0,fontWeight:"bold"},F={color:x.Il.CoreNeutral0,lineHeight:I.u.rem(1.25)},O={display:"flex",padding:I.u.rem(1)+" "+I.u.rem(1.5)+" "+I.u.rem(1.25)+" "+I.u.rem(2),width:I.u.rem(23),borderRadius:I.u.rem(k.fx),background:E,color:x.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},B={marginRight:I.u.rem(2),width:I.u.rem(2),flexShrink:0,alignSelf:"center"},D={stroke:A.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:x.Il.CoreNeutral0,fill:x.Il.CoreNeutral0}}},W={position:"absolute",top:I.u.percent(50),left:I.u.percent(50),zIndex:k.I3},U={position:"relative",zIndex:k.VN},H={zIndex:k.w$},z={position:"absolute",zIndex:k.w$},X=I.u.prefixedStylesheet("onboarding",{pulse:[R],pulseWrapper:[N],header:[P],description:[F],stepWrapper:[O],content:[{display:"inline-block"}],alertIcon:[B],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[D],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[W],containerDiv:[{}],editor:[U],onboardingPopup:[H],notificationContainer:[z],pulseOptimized:[M]}),G=n(39499),V=n(41439),Y=n(38206),q=n(45836),$=function(e){var t=e.alignment,n=e.rect,r=e.onClose,a=e.className,c=e.children,u=e.icon,d=e.pinTargetRect,f=e.hideCloseButton,m=e.onMount;return o.createElement(Y.t.ByRelativeRect,(0,i.__assign)({rect:n,className:X.notificationContainer},Y.t.Alignment.toSelector(t),{pinTargetRect:d,withPin:!0}),o.createElement(l.F.div,(0,i.__assign)({},(0,l.Sh)(X.stepWrapper,a),{mount:m}),(0,s.pipe)(u,p.fold((function(){return o.createElement(V.JO.Grammarly,{className:X.alertIcon})}),(function(e){return o.createElement(e,{className:X.alertIcon})}))),c,!f&&o.createElement(G.zx,{name:"onboard-close",className:X.closeIconWrapper,onClick:function(){return r&&r()}},o.createElement(V.JO.Close,{className:X.closeIcon,width:12}))))},Z=function(e){var t=e.title,n=e.description,r=(0,i.__rest)(e,["title","description"]);return o.createElement($,(0,i.__assign)({},r),o.createElement("span",{className:X.content},t&&o.createElement(q.P1,{className:X.header},t),o.createElement(q.XY,{className:X.description},n)))},j=function(e){var t=e.className,n=e.onClick,r=e.customStyle,a=e.enableOptimizations;return o.createElement(l.F.div,(0,i.__assign)({},(0,l.Sh)(X.pulseWrapper,t),{style:r,onClick:function(){return n&&n()}}),o.createElement("div",{className:a?X.pulseOptimized:X.pulse}))};function J(e){var t=e.stepId,n=e.onboardingViewModel,r=(0,i.__rest)(e,["stepId","onboardingViewModel"]),a=n||o.useContext(J.Context),l=K(t,a),c=o.useContext(m.l.Context).pipe(b.U((function(e){return e.rect})));return(0,s.pipe)(l,p.fold((function(){return o.Children.only(e.children)}),(function(e){return o.createElement(Q,(0,i.__assign)({},r,{onboardingStep:e,enableOptimizations:a.cpuAndAnimationOptsExperiment,viewportRect:c}))})))}var K=function(e,t){return(0,c.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?p.some(t.subscribeForStep(e)):p.none},Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._wrapperElement=l.hg.create(p.none),t._containerElement=l.hg.create(p.none),t._exactTargetRect=l.hg.create(p.none),t._visibilityState=l.hg.create(!t.props.findFirstButton),t._spotStyle=l.hg.create({}),t._onEventActionTaken=function(e,n){return void 0===n&&(n=!0),function(r){var i=e.state.get();if("popup"===i||n&&"dot"===i){var o=r.target;if(u.pK(o))return;var a=n||u.q_(o,X.containerDiv);if(t.props.findFirstButton&&!u.q2(o,"role","button"))return;a&&e.actionTaken()}else"dot"===i&&(r.preventDefault(),r.stopPropagation())}},t}return(0,i.__extends)(t,e),t.prototype.componentWillUnmount=function(){var e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach((function(e){return e.unsubscribe()}))},t.prototype.componentDidMount=function(){var e=this;if(this.props.findFirstButton){var t=this.props.findFirstButton.dotPosition,n=this.props.findFirstButton.buttonOrder;this._subs.push(this.context.pipe(w.T(this.props.onboardingStep.state.pipe(C.h((function(e){return"dot"===e||"popup"===e})))),_.c(y.Dx(n)),S.M(this._wrapperElement,this._containerElement)).subscribe((function(n){var r=n[0],i=n[1],o=n[2];return setTimeout((function(){(0,s.pipe)(i,p.map((function(n){(0,s.pipe)(o,p.map((function(i){var o=i.querySelectorAll('[role="button"]'),s=o.length>0&&(void 0===r?o[o.length-1]:o[r]);if(s){var l=u.UL.fromEl((0,a.unsafeCoerce)(s)),d=u.UL.fromEl(n);switch(e._exactTargetRect.set(p.some(l)),t){case"rightTop":e._spotStyle.set({top:0,left:l.left-d.left+l.width});break;case"center":e._spotStyle.set({top:l.top-d.top+l.height/2,left:l.left-d.left+l.width/2});break;default:(0,c.vE)(t)}e._visibilityState.set(!0)}})))})))}),500)})))}},t.prototype.render=function(){var e=this,t=this.props.onboardingStep;return o.createElement(l.F.div,(0,i.__assign)({key:"onboarding-wrapper"},(0,l.Sh)(X.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:function(t){return e._wrapperElement.set(p.fromNullable(t))}}),o.createElement("div",(0,i.__assign)({key:"container",ref:function(t){return e._containerElement.set(p.fromNullable(t))}},(0,l.Sh)(X.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(t,"onclick"===this.props.eventType),onMouseEnter:function(n){return"onhover"===e.props.eventType&&e._onEventActionTaken(t,!1)(n)}}),this.props.children),l.hg.combine(t.state,this._visibilityState,(function(n,r){if(!r)return null;switch(n){case"dot":var a=e.props.themes&&e.props.themes.spotClassName;return e.props.onboardingStep.dotShown(),o.createElement(j,(0,i.__assign)({customStyle:e._spotStyle,key:"spot",enableOptimizations:e.props.enableOptimizations},(0,l.Sh)(X.onboardingSpot,a),{onClick:function(){return t.dotClicked()}}));case"popup":return o.createElement(Z,{key:"step",title:e.props.title,alignment:e.props.alignment,rect:e._containerElement.view(p.fold((function(){return u.UL.empty}),u.UL.fromEl)),className:e.props.themes&&e.props.themes.notificationClassName,description:e.props.message,icon:p.fromNullable(e.props.icon),onClose:function(){return t.popupClosed()},pinTargetRect:e._exactTargetRect.view(d.Fc)});default:return null}})))},t.contextType=f.u.Context,t.defaultProps={alignment:"left"},t}(o.Component);!function(e){e.Context=o.createContext(null),e.ContextMock=function(t){var n=t.children;return o.createElement(e.Context.Provider,{value:new v,children:n})}}(J||(J={}))},25781:(e,t,n)=>{"use strict";var r,i;n.d(t,{R:()=>r}),function(e){e.ESC_CODE=27}(r||(r={})),function(e){e.isLeftMouseButtom=function(e){return 1===e.which||0===e.button}}(i||(i={}))},51072:(e,t,n)=>{"use strict";n.d(t,{Vi:()=>i});var r=n(95574);function i(e){return e().then(r.MH)}},84347:(e,t,n)=>{"use strict";e.exports=n(87612)},17123:e=>{"use strict";var t={};t.create=function(e,t){var n=document.createElement(e);return n.className=t,n},t.appendTo=function(e,t){return t.appendChild(e),e},t.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}(e,t):void 0===n?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},t.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},t.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},t.queryChildren=function(e,n){return Array.prototype.filter.call(e.childNodes,(function(e){return t.matches(e,n)}))},e.exports=t},97490:e=>{"use strict";var t=function(e){this.element=e,this.events={}};t.prototype.bind=function(e,t,n){void 0===this.events[e]&&(this.events[e]=[]);var r={capture:!1};this.events[e].push(t),this.element.addEventListener(e,t,n?Object.assign({},r,n):r)},t.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter((function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)}),this)},t.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(e){var n=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===n&&(n=new t(e),this.eventElements.push(n)),n},n.prototype.bind=function(e,t,n,r){this.eventElement(e).bind(t,n,r)},n.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=n},48928:e=>{"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},95889:(e,t,n)=>{"use strict";var r=n(17123),i=t.toInt=function(e){return parseInt(e,10)||0};function o(e){return["ps--in-scrolling"].concat(void 0===e?["ps--x","ps--y"]:["ps--"+e])}t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];0===n.indexOf("ps-")&&e.classList.remove(n)}},t.outerWidth=function(e){return i(r.css(e,"width"))+i(r.css(e,"paddingLeft"))+i(r.css(e,"paddingRight"))+i(r.css(e,"borderLeftWidth"))+i(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){for(var n=o(t),r=0;r<n.length;r++)e.classList.add(n[r])},t.stopScrolling=function(e,t){for(var n=o(t),r=0;r<n.length;r++)e.classList.remove(n[r])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},87612:(e,t,n)=>{"use strict";var r=n(81489),i=n(41835),o=n(64114);e.exports={initialize:i,update:o,destroy:r}},48300:e=>{"use strict";e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},81489:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),o=n(6109);e.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),o.remove(e))}},3708:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),o=n(21459);e.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",(function(r){var a=r.pageY-window.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;o(e,"top",e.scrollTop+a*t.containerHeight),i(e),r.stopPropagation()})),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",(function(r){var a=r.pageX-window.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;o(e,"left",e.scrollLeft+a*t.containerWidth),i(e),r.stopPropagation()}))}(e,r.get(e))}},35672:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),o=n(6109),a=n(86057),s=n(21459);function l(e,t){var n=null,o=null;var l=function(i){!function(i){var o=n+i*t.railXRatio,a=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=o<0?0:o>a?a:o;var l=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;s(e,"left",l)}(i.pageX-o),a(e),i.stopPropagation(),i.preventDefault()},c=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarX,"mousedown",(function(a){o=a.pageX,n=r.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",c),a.stopPropagation(),a.preventDefault()}))}function c(e,t){var n=null,o=null;var l=function(i){!function(i){var o=n+i*t.railYRatio,a=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=o<0?0:o>a?a:o;var l=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));s(e,"top",l)}(i.pageY-o),a(e),i.stopPropagation(),i.preventDefault()},c=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",l)};t.event.bind(t.scrollbarY,"mousedown",(function(a){o=a.pageY,n=r.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",l),t.event.once(t.ownerDocument,"mouseup",c),a.stopPropagation(),a.preventDefault()}))}e.exports=function(e){var t=o.get(e);l(e,t),c(e,t)}},94742:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),o=n(6109),a=n(86057),s=n(21459);function l(e,t){var n=!1;t.event.bind(e,"mouseenter",(function(){n=!0})),t.event.bind(e,"mouseleave",(function(){n=!1}));t.event.bind(t.ownerDocument,"keydown",(function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)){var l=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(n||l){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){if("IFRAME"===c.tagName)c=c.contentDocument.activeElement;else for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(r.isEditable(c))return}var u=0,d=0;switch(o.which){case 37:u=o.metaKey?-t.contentWidth:o.altKey?-t.containerWidth:-30;break;case 38:d=o.metaKey?t.contentHeight:o.altKey?t.containerHeight:30;break;case 39:u=o.metaKey?t.contentWidth:o.altKey?t.containerWidth:30;break;case 40:d=o.metaKey?-t.contentHeight:o.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=o.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=o.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=o.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}s(e,"top",e.scrollTop-d),s(e,"left",e.scrollLeft+u),a(e),function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(u,d)&&o.preventDefault()}}}))}e.exports=function(e){l(e,o.get(e))}},83476:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),o=n(21459);function a(e,t){var n=!1;function r(r){var a=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(r),s=a[0],l=a[1];(function(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){var i=window.getComputedStyle(r);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&n>0||r.scrollTop===o&&n<0))return!0;var a=r.scrollLeft-r.clientWidth;if(a>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===a&&t>0))return!0}return!1})(s,l)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(o(e,"top",l?e.scrollTop-l*t.settings.wheelSpeed:e.scrollTop+s*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(o(e,"left",s?e.scrollLeft+s*t.settings.wheelSpeed:e.scrollLeft-l*t.settings.wheelSpeed),n=!0):(o(e,"top",e.scrollTop-l*t.settings.wheelSpeed),o(e,"left",e.scrollLeft+s*t.settings.wheelSpeed)),i(e),(n=n||function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&n<0||o>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(s,l))&&(r.stopPropagation(),r.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",r):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",r)}e.exports=function(e){a(e,r.get(e))}},15335:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){i(e)}))}(e,r.get(e))}},23405:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),o=n(21459);e.exports=function(e){!function(e,t){function n(n){var r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),a=r[0],s=r[1];t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?o(e,"top",s?e.scrollTop-s*t.settings.wheelSpeed:e.scrollTop+a*t.settings.wheelSpeed):t.scrollbarXActive&&!t.scrollbarYActive&&o(e,"left",a?e.scrollLeft+a*t.settings.wheelSpeed:e.scrollLeft-s*t.settings.wheelSpeed):(o(e,"top",e.scrollTop-s*t.settings.wheelSpeed),o(e,"left",e.scrollLeft+a*t.settings.wheelSpeed)),i(e)}void 0!==window.onwheel?t.event.bind(e,"wheel",n,{passive:!0}):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",n,{passive:!0})}(e,r.get(e))}},19539:(e,t,n)=>{"use strict";var r=n(95889),i=n(6109),o=n(86057),a=n(21459);function s(e,t){var n=null,s={top:0,left:0};function l(){n&&(clearInterval(n),n=null),r.stopScrolling(e)}var c=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){var t;e.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?c=!0:(c=!1,l())})),t.event.bind(window,"mouseup",(function(){c&&(c=!1,l())})),t.event.bind(window,"keyup",(function(){c&&(c=!1,l())})),t.event.bind(window,"mousemove",(function(t){if(c){var u={x:t.pageX,y:t.pageY},d={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};u.x<d.left+3?(s.left=-5,r.startScrolling(e,"x")):u.x>d.right-3?(s.left=5,r.startScrolling(e,"x")):s.left=0,u.y<d.top+3?(s.top=d.top+3-u.y<5?-5:-20,r.startScrolling(e,"y")):u.y>d.bottom-3?(s.top=u.y-d.bottom+3<5?5:20,r.startScrolling(e,"y")):s.top=0,0===s.top&&0===s.left?l():n||(n=setInterval((function(){i.get(e)?(a(e,"top",e.scrollTop+s.top),a(e,"left",e.scrollLeft+s.left),o(e)):clearInterval(n)}),50))}}))}e.exports=function(e){s(e,i.get(e))}},76905:(e,t,n)=>{"use strict";var r=n(95889),i=n(6109),o=n(86057),a=n(21459);function s(e,t,n,r){function s(t,n){a(e,"top",e.scrollTop-n),a(e,"left",e.scrollLeft-t),o(e)}var l={},c=0,u={},d=null,p=!1,f=!1;function m(){p=!0}function h(){p=!1}function g(e){return e.targetTouches?e.targetTouches[0]:e}function v(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function y(e){if(v(e)){f=!0;var t=g(e);l.pageX=t.pageX,l.pageY=t.pageY,c=(new Date).getTime(),null!==d&&clearInterval(d),e.stopPropagation()}}function b(n){if(!f&&t.settings.swipePropagation&&y(n),!p&&f&&v(n)){var r=g(n),i={pageX:r.pageX,pageY:r.pageY},o=i.pageX-l.pageX,a=i.pageY-l.pageY;s(o,a),l=i;var d=(new Date).getTime(),m=d-c;m>0&&(u.x=o/m,u.y=a/m,c=d),function(n,r){var i=e.scrollTop,o=e.scrollLeft,a=Math.abs(n),s=Math.abs(r);if(s>a){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(a>s&&(n<0&&o===t.contentWidth-t.containerWidth||n>0&&0===o))return!t.settings.swipePropagation;return!0}(o,a)&&(n.stopPropagation(),n.preventDefault())}}function w(){!p&&f&&(f=!1,t.settings.swipeEasing&&(clearInterval(d),d=setInterval((function(){i.get(e)&&(u.x||u.y)?Math.abs(u.x)<.01&&Math.abs(u.y)<.01?clearInterval(d):(s(30*u.x,30*u.y),u.x*=.8,u.y*=.8):clearInterval(d)}),10)))}n?(t.event.bind(window,"touchstart",m),t.event.bind(window,"touchend",h),t.event.bind(e,"touchstart",y),t.event.bind(e,"touchmove",b),t.event.bind(e,"touchend",w)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",m),t.event.bind(window,"pointerup",h),t.event.bind(e,"pointerdown",y),t.event.bind(e,"pointermove",b),t.event.bind(e,"pointerup",w)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",m),t.event.bind(window,"MSPointerUp",h),t.event.bind(e,"MSPointerDown",y),t.event.bind(e,"MSPointerMove",b),t.event.bind(e,"MSPointerUp",w)))}e.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&s(e,i.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},41835:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),o={"click-rail":n(3708),"drag-scrollbar":n(35672),keyboard:n(94742),wheel:n(83476),passiveWheel:n(23405),touch:n(76905),selection:n(19539)},a=n(15335);e.exports=function(e,t){e.classList.add("ps");var n=r.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+n.settings.theme),n.settings.handlers.forEach((function(t){o[t](e)})),a(e),i(e)}},6109:(e,t,n)=>{"use strict";var r=n(95889),i=n(48300),o=n(17123),a=n(97490),s=n(48928),l={};function c(e,t){var n,s,l=this;for(var c in l.settings=i(),t)l.settings[c]=t[c];function u(){e.classList.add("ps--focus")}function d(){e.classList.remove("ps--focus")}l.containerWidth=null,l.containerHeight=null,l.contentWidth=null,l.contentHeight=null,l.isRtl="rtl"===o.css(e,"direction"),l.isNegativeScroll=(s=e.scrollLeft,e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=s,n),l.negativeScrollAdjustment=l.isNegativeScroll?e.scrollWidth-e.clientWidth:0,l.event=new a,l.ownerDocument=e.ownerDocument||document,l.scrollbarXRail=o.appendTo(o.create("div","ps__scrollbar-x-rail"),e),l.scrollbarX=o.appendTo(o.create("div","ps__scrollbar-x"),l.scrollbarXRail),l.scrollbarX.setAttribute("tabindex",0),l.event.bind(l.scrollbarX,"focus",u),l.event.bind(l.scrollbarX,"blur",d),l.scrollbarXActive=null,l.scrollbarXWidth=null,l.scrollbarXLeft=null,l.scrollbarXBottom=r.toInt(o.css(l.scrollbarXRail,"bottom")),l.isScrollbarXUsingBottom=l.scrollbarXBottom==l.scrollbarXBottom,l.scrollbarXTop=l.isScrollbarXUsingBottom?null:r.toInt(o.css(l.scrollbarXRail,"top")),l.railBorderXWidth=r.toInt(o.css(l.scrollbarXRail,"borderLeftWidth"))+r.toInt(o.css(l.scrollbarXRail,"borderRightWidth")),o.css(l.scrollbarXRail,"display","block"),l.railXMarginWidth=r.toInt(o.css(l.scrollbarXRail,"marginLeft"))+r.toInt(o.css(l.scrollbarXRail,"marginRight")),o.css(l.scrollbarXRail,"display",""),l.railXWidth=null,l.railXRatio=null,l.scrollbarYRail=o.appendTo(o.create("div","ps__scrollbar-y-rail"),e),l.scrollbarY=o.appendTo(o.create("div","ps__scrollbar-y"),l.scrollbarYRail),l.scrollbarY.setAttribute("tabindex",0),l.event.bind(l.scrollbarY,"focus",u),l.event.bind(l.scrollbarY,"blur",d),l.scrollbarYActive=null,l.scrollbarYHeight=null,l.scrollbarYTop=null,l.scrollbarYRight=r.toInt(o.css(l.scrollbarYRail,"right")),l.isScrollbarYUsingRight=l.scrollbarYRight==l.scrollbarYRight,l.scrollbarYLeft=l.isScrollbarYUsingRight?null:r.toInt(o.css(l.scrollbarYRail,"left")),l.scrollbarYOuterWidth=l.isRtl?r.outerWidth(l.scrollbarY):null,l.railBorderYWidth=r.toInt(o.css(l.scrollbarYRail,"borderTopWidth"))+r.toInt(o.css(l.scrollbarYRail,"borderBottomWidth")),o.css(l.scrollbarYRail,"display","block"),l.railYMarginHeight=r.toInt(o.css(l.scrollbarYRail,"marginTop"))+r.toInt(o.css(l.scrollbarYRail,"marginBottom")),o.css(l.scrollbarYRail,"display",""),l.railYHeight=null,l.railYRatio=null}function u(e){return e.getAttribute("data-ps-id")}t.add=function(e,t){var n=s();return function(e,t){e.setAttribute("data-ps-id",t)}(e,n),l[n]=new c(e,t),l[n]},t.remove=function(e){delete l[u(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return l[u(e)]}},86057:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),o=n(6109),a=n(21459);function s(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,n=o.get(e);n.containerWidth=e.clientWidth,n.containerHeight=e.clientHeight,n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||((t=i.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarXRail,e)),e.contains(n.scrollbarYRail)||((t=i.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarYRail,e)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=s(n,r.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=r.toInt((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=s(n,r.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=r.toInt(e.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,r),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,n),n.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,a(e,"left",0)),n.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,a(e,"top",0))}},21459:(e,t,n)=>{"use strict";var r=n(6109),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var o=r.get(e);"top"===t&&n>=o.contentHeight-o.containerHeight&&((n=o.contentHeight-o.containerHeight)-e.scrollTop<=2?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=o.contentWidth-o.containerWidth&&((n=o.contentWidth-o.containerWidth)-e.scrollLeft<=2?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),void 0===o.lastTop&&(o.lastTop=e.scrollTop),void 0===o.lastLeft&&(o.lastLeft=e.scrollLeft),"top"===t&&n<o.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>o.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<o.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>o.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&n!==o.lastTop&&(e.scrollTop=o.lastTop=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&n!==o.lastLeft&&(e.scrollLeft=o.lastLeft=n,e.dispatchEvent(i("ps-scroll-x")))}},64114:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),o=n(6109),a=n(86057),s=n(21459);e.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),a(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},72635:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(96558),o=n(64909);t.getOptionM=function(e){var t=i.getApplicativeComposition(e,o.option),n=e.of(o.none);return r(r({},t),{chain:function(t,r){return e.chain(t,o.fold((function(){return n}),r))},alt:function(t,n){return e.chain(t,o.fold(n,(function(t){return e.of(o.some(t))})))},fold:function(t,n,r){return e.chain(t,o.fold(n,r))},getOrElse:function(t,n){return e.chain(t,o.fold(n,e.of))},fromM:function(t){return e.map(t,o.some)},none:function(){return n}})}},18756:(e,t,n)=>{"use strict";function r(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!r(e)||!e.equals(t))}n.d(t,{AC:()=>a});function o(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return o(t)}return r(e)?e.hashCode():a(String(e))}function a(e){let t=0;if(null==e||0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}class s extends Error{constructor(e){let t="";for(const n of e.slice(0,2)){let e="";e=n instanceof Error?`${n.name}(${n.message})`:""+n,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=s,this.__proto__=s.prototype}errors(){return this.errorsRef.slice()}}Error;class l extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=l,this.__proto__=l.prototype}}Error;class c extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=c,this.__proto__=c.prototype}}class u extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=u,this.__proto__=u.prototype}}class d extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=p,this.__proto__=p.prototype}}function f(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function m(e,t,n){const r=e,i=r.prototype,o="fantasy-land/",a="equals",s=o+a,l="map",c=o+l,u="ap",d=o+u,p=o+"of",m="chain",h=o+m,g="chainRec",v=o+g;i.equals?i[s]=i.equals:n&&(i[s]=f(n.equals)),i.map?i[c]=i.map:t&&(i[c]=f(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=f(t.ap)),r.pure?r[p]=r.pure:t&&(r[p]=t.of),i.chain?i[h]=i.chain:t&&(i[h]=f(t.chain)),r.chainRec?r[v]=r.chainRec:t&&(r[v]=t.chainRec)}class h{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:v(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new l("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?b(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?v(this.value):b(this.value)}toOption(){return this._isRight?S(this.value):x}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?o(this.value)<<2:o(this.value)<<3}static pure(e){return new y(e)}static left(e){return v(e)}static right(e){return b(e)}static map2(e,t,n){return e.isLeft()?e:t.isLeft()?t:b(n(e.value,t.value))}static map3(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:b(r(e.value,t.value,n.value))}static map4(e,t,n,r,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:b(i(e.value,t.value,n.value,r.value))}static map5(e,t,n,r,i,o){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:b(o(e.value,t.value,n.value,r.value,i.value))}static map6(e,t,n,r,i,o,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:o.isLeft()?o:b(a(e.value,t.value,n.value,r.value,i.value,o.value))}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.isRight())return e;const r=e.value;if(r.isRight())return b(r.value);n=r.value}}}class g extends h{constructor(e){super(e,"left")}}function v(e){return new g(e)}class y extends h{constructor(e){super(e,"right")}}function b(e){return new y(e)}const w={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:h.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>h.tailRecM(t,(t=>e(h.left,h.right,t)))};m(h,w,w);class C{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new l("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?x:S(e(this.value))}flatMap(e){return this._isEmpty?x:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?x:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:o(this.value)<<2}static of(e){return null!=e?S(e):x}static some(e){return new C(e,!1)}static none(){return x}static empty(){return x}static pure(e){return S(e)}static map2(e,t,n){return e.nonEmpty()&&t.nonEmpty()?S(n(e.value,t.value)):x}static map3(e,t,n,r){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?S(r(e.value,t.value,n.value)):x}static map4(e,t,n,r,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?S(i(e.value,t.value,n.value,r.value)):x}static map5(e,t,n,r,i,o){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()?S(o(e.value,t.value,n.value,r.value,i.value)):x}static map6(e,t,n,r,i,o,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()&&o.nonEmpty()?S(a(e.value,t.value,n.value,r.value,i.value,o.value)):x}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.nonEmpty())return x;{const t=e.value;if(t.isRight())return S(t.value);n=t.value}}}}class _ extends C{constructor(e){super(e,!1)}}function S(e){return new _(e)}const x=new class extends C{constructor(){super(void 0,!0)}},I={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:C.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>C.tailRecM(t,(t=>e(h.left,h.right,t)))};m(C,I,I);class A{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?R(new l("try.failed()")):E(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:R(new l("Predicate does not hold for "+this.value))}catch(e){return R(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return R(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?A.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:A.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return R(e)}}toOption(){return this._isSuccess?S(this.value):x}toEither(){return this._isSuccess?b(this.value):v(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,o(this.value)}static of(e){try{return E(e())}catch(e){return R(e)}}static pure(e){return A.success(e)}static unit(){return M}static success(e){return E(e)}static failure(e){return R(e)}static raise(e){return R(e)}static map2(e,t,n){if(e.isFailure())return e;if(t.isFailure())return t;try{return E(n(e.value,t.value))}catch(e){return R(e)}}static map3(e,t,n,r){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;try{return E(r(e.value,t.value,n.value))}catch(e){return R(e)}}static map4(e,t,n,r,i){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;try{return E(i(e.value,t.value,n.value,r.value))}catch(e){return R(e)}}static map5(e,t,n,r,i,o){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;try{return E(o(e.value,t.value,n.value,r.value,i.value))}catch(e){return R(e)}}static map6(e,t,n,r,i,o,a){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(o.isFailure())return o;try{return E(a(e.value,t.value,n.value,r.value,i.value,o.value))}catch(e){return R(e)}}static tailRecM(e,t){let n=e;for(;;)try{const e=t(n);if(e.isFailure())return e;const r=e.get();if(r.isRight())return E(r.value);n=r.value}catch(e){return R(e)}}}class k extends A{constructor(e){super(e,"success")}}function E(e){return new k(e)}class T extends A{constructor(e){super(e,"failure")}}function R(e){return new T(e)}const L={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:A.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>A.tailRecM(t,(t=>e(h.left,h.right,t)))};m(A,L,L);const M=E(void 0);class N{static of(e){return new P(e)}static empty(){return O}static collection(...e){return new D(e)}static cancelAll(e){let t=null;for(const n of e)try{n.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new s(t)}}class P extends N{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class F{constructor(){this._funIsDummy=!0}cancel(){}}const O=new F;class B{static of(e){return new W(e)}static empty(){return new U}static alreadyCanceled(){return H}static collection(...e){return new D(e)}}class D extends B{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{N.cancelAll(this._refs)}finally{delete this._refs}}}class W extends P{isCanceled(){return null===this.thunk}}class U extends B{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const H=new class extends F{isCanceled(){return!0}};new class extends F{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class z{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof z){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new z}static of(e){return new z(N.of(e))}}class X{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{N.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||N.empty()}static empty(){return new X}static collection(...e){return new X(e)}}class G{constructor(e){this._underlying=e||O,this._chained=!1}update(e){if(!e)throw new u("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=O,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new u("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,n=!0;for(;t&&n;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,n=!!e}else t._underlying||(t=void 0),n=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof F||t.update(e)}else this.cancel();return this}static empty(){return new G}}class V{toString(){return this.label.toUpperCase()}}const Y=1e3,q=1e6,$=1e3*q,Z=60*$,j=60*Z,J=24*j,K=9007199254740992,Q=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ee(e,t,n){return e>n?K:e<-n?-9007199254740992:e*t}const te=new class extends V{constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return Q(e/1e3)}toMillis(e){return Q(e/(q/1))}toSeconds(e){return Q(e/($/1))}toMinutes(e){return Q(e/(Z/1))}toHours(e){return Q(e/(j/1))}toDays(e){return Q(e/(J/1))}};const ne=new class extends V{constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ee(e,1e3,Q(K/1e3))}toMicros(e){return e}toMillis(e){return Q(e/1e3)}toSeconds(e){return Q(e/($/Y))}toMinutes(e){return Q(e/(Z/Y))}toHours(e){return Q(e/(j/Y))}toDays(e){return Q(e/(J/Y))}};const re=new class extends V{constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ee(e,q/1,Q(K/(q/1)))}toMicros(e){return ee(e,1e3,Q(K/1e3))}toMillis(e){return e}toSeconds(e){return Q(e/1e3)}toMinutes(e){return Q(e/6e4)}toHours(e){return Q(e/(j/q))}toDays(e){return Q(e/(J/q))}};const ie=new class extends V{constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ee(e,$/1,Q(K/($/1)))}toMicros(e){return ee(e,$/Y,Q(K/($/Y)))}toMillis(e){return ee(e,1e3,Q(K/1e3))}toSeconds(e){return e}toMinutes(e){return Q(e/60)}toHours(e){return Q(e/3600)}toDays(e){return Q(e/86400)}};const oe=new class extends V{constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ee(e,Z/1,Q(K/(Z/1)))}toMicros(e){return ee(e,Z/Y,Q(K/(Z/Y)))}toMillis(e){return ee(e,6e4,Q(K/6e4))}toSeconds(e){return ee(e,60,Q(K/60))}toMinutes(e){return e}toHours(e){return Q(e/60)}toDays(e){return Q(e/1440)}};const ae=new class extends V{constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ee(e,j/1,Q(K/(j/1)))}toMicros(e){return ee(e,j/Y,Q(K/(j/Y)))}toMillis(e){return ee(e,j/q,Q(K/(j/q)))}toSeconds(e){return ee(e,3600,Q(K/3600))}toMinutes(e){return ee(e,60,Q(K/60))}toHours(e){return e}toDays(e){return Q(e/24)}};const se=new class extends V{constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ee(e,J/1,Q(K/(J/1)))}toMicros(e){return ee(e,J/Y,Q(K/(J/Y)))}toMillis(e){return ee(e,J/q,Q(K/(J/q)))}toSeconds(e){return ee(e,86400,Q(K/86400))}toMinutes(e){return ee(e,1440,Q(K/1440))}toHours(e){return ee(e,24,Q(K/24))}toDays(e){return e}};class le{constructor(e,t){if(isNaN(e))throw new u("NaN is not supported for a Duration");this.duration=Q(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return te.convert(this.duration,this.unit)}toMicros(){return ne.convert(this.duration,this.unit)}toMillis(){return re.convert(this.duration,this.unit)}toSeconds(){return ie.convert(this.duration,this.unit)}toMinutes(){return oe.convert(this.duration,this.unit)}toHours(){return ae.convert(this.duration,this.unit)}toDays(){return se.convert(this.duration,this.unit)}convertTo(e){return new le(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return le.negInf();case-1/0:return le.inf();default:return new le(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new u("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,n=e;return n.unit.ord<t.unit.ord&&(t=e,n=this),n=n.convertTo(t.unit),new le(t.duration+n.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?le.millis(e):e}static zero(){return new le(0,se)}static inf(){return new le(1/0,se)}static negInf(){return new le(-1/0,se)}static nanos(e){return new le(e,te)}static micros(e){return new le(e,ne)}static millis(e){return new le(e,re)}static seconds(e){return new le(e,ie)}static minutes(e){return new le(e,oe)}static hours(e){return new le(e,ae)}static days(e){return new le(e,se)}}class ce{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const n=this.get,r=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=n,i._previous=r}}static of(e){return new ce(e)}}function ue(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),n=[];for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)return n}}const de=Math.log(2);function pe(e){if(e<0)throw new u("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/de}(e));return 1<<(t>30?30:t&t)}class fe{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const n=this.batchIndex+1&t;return n?(this.batchIndex=n,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,n){const r=(e,i,o)=>i.update(e.scheduleOnce(o,(()=>{n(),r(e,i,t)}))),i=z.empty();return r(this,i,e)}scheduleAtFixedRate(e,t,n){const r=(e,t,i,o)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();n();const a=e.currentTimeMillis()-i,s=Math.max(0,o-a);r(e,t,o,s)}))),i=z.empty();return r(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}fe.global=ce.of((()=>ve));class me{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=pe(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*a(this.type)+this.recommendedBatchSize}static synchronous(){return new me("synchronous")}static alwaysAsync(){return new me("alwaysAsync")}static batched(e){return new me("batched",e)}}me.global=ce.of((()=>me.batched()));class he{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class ge extends fe{constructor(e=!1,t=me.global.get(),n){super(t),n&&(this.reportFailure=n),this._trampoline=new he(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(ye(e,this.reportFailure)):e=>setTimeout(ye(e,this.reportFailure))}executeAsync(e){throw new d("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const n=Math.max(0,le.of(e).toMillis()),r=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),n);return N.of((()=>clearTimeout(r)))}withExecutionModel(e){return new ge(this._useSetImmediate,e)}}const ve=new ge(!0);function ye(e,t){return()=>{try{e()}catch(e){t(e)}}}class be{transform(e,t){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(t(e),this._scheduler)))}attempt(){return this.transform(v,b)}flatMap(e){return this.transformWith(be.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(be.raise,(t=>be.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,be.pure)}recover(e){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const n=this._scheduler;return this.transformWith(Ae(t,(e=>be.raise(e,n)),n),Ae(e,(e=>be.pure(e,n)),n))}toPromise(){return new Promise(((e,t)=>{this.onComplete((n=>n.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>be.delayedTick(e,this._scheduler).flatMap((()=>be.raise(t,this._scheduler)))),(t=>be.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=be.raise(new p(le.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const n=[this,be.delayedTick(e,this._scheduler).flatMap((()=>t()))];return be.firstCompletedOf(n,this._scheduler)}static of(e,t=fe.global.get()){const n=xe.empty(t);return t.executeAsync((()=>n.tryComplete(A.of(e)))),n.future()}static pure(e,t=fe.global.get()){return new we(E(e),t)}static raise(e,t=fe.global.get()){return new we(R(e),t)}static create(e,t=fe.global.get()){const n=xe.empty(t);try{const t=e(n.complete);return n.future(t||void 0)}catch(e){return be.raise(e,t)}}static unit(e=fe.global.get()){const t=e;let n=t._funCache&&t._funCache.futureUnit;return n||(n=new we(E(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=n),n}static delayedTick(e,t=fe.global.get()){return be.create((n=>t.scheduleOnce(e,(()=>n(E(void 0))))),t)}static tailRecM(e,t,n=fe.global.get()){return t(e).flatMap((e=>e.isRight()?be.pure(e.get(),n):be.tailRecM(e.swap().get(),t,n)))}static fromPromise(e,t=fe.global.get()){return e instanceof be?e.withScheduler(t):be.create((t=>{e.then((e=>t(E(e))),(e=>t(R(e))))}),t)}static fromTry(e,t=fe.global.get()){return new we(e,t)}static firstCompletedOf(e,t=fe.global.get()){return function(e,t){return be.create((n=>{try{const r=Ee(e,t);if(0===r.length)return n(R(new u("empty list of futures")));let i=!1;for(let e=0;e<r.length;e++){const o=e;r[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,ke(r,t,o),n(e))}))}return N.of((()=>ke(r,t)))}catch(e){n(R(e))}}),t)}(e,t)}static traverse(e,t=1/0,n=fe.global.get()){return r=>function(e,t,n,r){if(n<=0)throw new u("parallelism <= 0");return be.of((()=>ue(e)),r).flatMap((e=>Te(e,t,n,r,0,[])))}(e,r,t,n)}static sequence(e,t=fe.global.get()){return function(e,t){return be.create((n=>{try{const r=Ee(e,t);if(0===r.length)return n(E([]));const i=N.of((()=>ke(r,t)));let o=!1,a=0,s=[];for(let e=0;e<r.length;e++){const l=e;r[e].onComplete((e=>{a+=1,e.isSuccess()?o||(s[l]=e.get(),o=a===r.length,o&&n(E(s))):o?t.reportFailure(e.failed().get()):(o=!0,i.cancel(),n(e))}))}return i}catch(e){n(R(e))}}),t)}(e,t)}static map2(e,t,n,r=fe.global.get()){return be.sequence([e,t],r).map((e=>n(e[0],e[1])))}static map3(e,t,n,r,i=fe.global.get()){return be.sequence([e,t,n],i).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i,o=fe.global.get()){return be.sequence([e,t,n,r],o).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,o,a=fe.global.get()){return be.sequence([e,t,n,r,i],a).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,o,a,s=fe.global.get()){return be.sequence([e,t,n,r,i,o],s).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}}class we extends be{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return S(this._value)}withScheduler(e){return this._scheduler===e?this:new we(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return Ie(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class Ce{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return x;case"complete":return S(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const n=this.ref;if(this.ref=e,this.id="complete",n)for(let r=0;r<n.length;r++)t.executeBatched((()=>n[r](e)));return!0;case"complete":return!1;case"chained":const r=this.ref.compressedRoot(),i=r.tryComplete(e,t);return this.id="complete",this.ref=i?e:r.value().get(),i}}chainTo(e,t){switch(this.id){case null:const n=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),n&&n.length>0)for(let r=0;r<n.length;r++)e.onComplete(n[r],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const _e={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:be.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>be.tailRecM(t,(t=>e(h.left,h.right,t)))};m(be,_e);class Se extends be{constructor(e,t,n){super(),this._state=e,this._scheduler=n,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Se(this._state,this._cancelable,e)}transformWith(e,t){return Ie(this,e,t,this._scheduler,this._cancelable)}}class xe{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new c("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(E(e))}success(e){return this.complete(E(e))}tryFailure(e){return this.tryComplete(R(e))}failure(e){return this.complete(R(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){switch(this._state.id){case"complete":return new we(this._state.ref,this._scheduler);default:return new Se(this._state,e,this._scheduler)}}withScheduler(e){return this._scheduler===e?this:new xe(this._state,e)}static empty(e=fe.global.get()){return new xe(new Ce,e)}static completed(e,t=fe.global.get()){const n=new Ce;return n.id="complete",n.ref=e,new xe(n,t)}}function Ie(e,t,n,r,i){const o=xe.empty(r),a=new G(i);return e.onComplete((e=>{let i;try{i=e.fold(t,n)}catch(e){i=be.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof G?e.chainTo(a):!e||e instanceof F||a.update(e)}else a.clear();i instanceof Se?i._state.chainTo(o._state,r):i.onComplete(o.tryComplete)})),o.future(a)}function Ae(e,t,n){return r=>{if("function"!=typeof e)return t(r);const i=e(r);return i?"function"==typeof i.then?be.fromPromise(i,n):be.pure(i,n):be.pure(r,n)}}function ke(e,t,n=-1){const r=[];for(let t=0;t<e.length;t++)if(t!==n)try{e[t].cancel()}catch(e){r.push(e)}if(r.length>0)for(const e of r)t.reportFailure(e)}function Ee(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const n=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)break}return n}catch(e){throw ke(n,t),e}}function Te(e,t,n,r,i,o){if(i>=e.length)return be.pure(o,r);let a=[],s=0;try{for(;i<e.length&&s<n;)a.push(t(e[i++])),s+=1;const l=be.sequence(a,r).map((e=>{for(let t=0;t<e.length;t++)o.push(e[t])}));return i>=e.length?l.map((()=>o)):l.flatMap((()=>Te(e,t,n,r,i,o)))}catch(e){return ke(a,r),be.raise(e)}}const Re={next:()=>({done:!0})};function Le(e){if(!e)return Re;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return Re;let n=0;return{next:()=>{const e=t[n++];return{done:n>=t.length,value:e}}}}class Me{get(){return function(e){let t=e,n=null,r=null;for(;;)switch(t._tag){case"now":const e=t,i=Ue(n,r);if(!i)return e.value;n=null,t=i(e.value);break;case"always":case"once":t=new Ne(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":n&&(r||(r=[]),r.push(n));const o=t;n=o.f,t=o.source}}(this)}map(e){return new De(this,(t=>Me.now(e(t))))}flatMap(e){return new De(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Fe(this.get);default:return new Fe((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return Me.always(e)}static pure(e){return Me.now(e)}static now(e){return new Ne(e)}static unit(){return Pe}static always(e){return new Oe(e)}static once(e){return new Fe(e)}static suspend(e){return new Be(e)}static defer(e){return Me.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?Me.now(e.get()):Me.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return Me.of((()=>Le(e))).flatMap((e=>He([],e)))}(e)}static map2(e,t,n){return Me.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return Me.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return Me.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,o){return Me.sequence([e,t,n,r,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,o,a){return Me.sequence([e,t,n,r,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Ne extends Me{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const Pe=new Ne(void 0);class Fe extends Me{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class Oe extends Me{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class Be extends Me{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class De extends Me{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const We={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Me.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Me.tailRecM(t,(t=>e(h.left,h.right,t)))};function Ue(e,t){return e||(t&&t.length>0?t.pop():null)}function He(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?Me.pure(e):He(e,t))))}if(r)return Me.pure(e)}}m(Me,We);class ze{run(e=fe.global.get()){return function(e,t){let n=e,r=null,i=null;const o=t.executionModel.recommendedBatchSize-1;let a=t.batchIndex;for(;;)if(n instanceof A){if(n.isSuccess()){const e=et(r,i);if(!e)return t.batchIndex=a,be.pure(n.get());try{n=e(n.get())}catch(e){n=new Xe(A.failure(e))}}else{const e=n.failed().get(),o=tt(r,i);if(!o)return t.batchIndex=a,be.raise(e);try{n=o(e)}catch(e){n=new Xe(A.failure(e))}}r=null;const e=a+1&o;if(!e)return at(n,t,r,i,!0);a=e}else switch(n._tag){case"pure":n=n.value;break;case"always":n=A.of(n.thunk);break;case"once":n=n.runTry();break;case"flatMap":const e=n;r&&(i||(i=[]),i.push(r)),r=e.g?[e.f,e.g]:e.f,n=e.source;break;case"async":case"memoize":return at(n,t,r,i,!1)}}(this,e)}runOnComplete(e,t=fe.global.get()){return ot(this,t,null,e,null,null,null)||N.empty()}attempt(){return this.transform((e=>h.left(e)),h.right)}asyncBoundary(e){return this.flatMap((t=>ze.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return ze.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>ze.delayedTick(e).flatMap((()=>ze.raise(t)))),(t=>ze.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(S(t)).flatMap((()=>ze.raise(t)))),(t=>e(x).map((()=>t))))}doOnCancel(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler;r.trampoline((()=>{const i=t.connection;i.push(N.of((()=>e.run(r)))),ze.unsafeStart(this,t,st(r,i,n))}))}))}executeForked(e){return ze.fork(this,e)}executeWithModel(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler.withExecutionModel(e),i=new je(r,t.connection,t.options);r.trampoline((()=>ze.unsafeStart(this,i,n)))}))}executeWithOptions(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=new je(r,t.connection,e);r.trampoline((()=>ze.unsafeStart(this,i,n)))}))}flatMap(e){return new qe(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new qe(this,(t=>ze.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new Ve(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new Ze(this,!1):e;default:return new Ze(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new Ve(this.thunk,!0);default:return new Ze(this,!0)}}recover(e){return this.recoverWith((t=>ze.now(e(t))))}recoverWith(e){return this.transformWith(e,ze.now)}timeout(e){const t=ze.raise(new p(le.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const n=[this,ze.delayedTick(e).flatMap((()=>t))];return ze.firstCompletedOf(n)}transform(e,t){return this.transformWith((t=>ze.now(e(t))),(e=>ze.now(t(e))))}transformWith(e,t){return new qe(this,t,e)}static always(e){return new Ye(e)}static async(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=t.connection;r.trampoline((()=>{const t=st(r,i,n);try{const n=e(r,t);i.push(n||N.empty())}catch(e){t(R(e))}}))}))}static asyncUnsafe(e){return new $e(e)}static defer(e){return ze.unit().flatMap((()=>e()))}static deferAction(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler;let i;try{i=e(r)}catch(e){i=ze.raise(e)}r.trampoline((()=>ze.unsafeStart(i,t,n)))}))}static deferFuture(e){return ze.suspend((()=>ze.fromFuture(e())))}static deferFutureAction(e){return ze.deferAction((t=>ze.fromFuture(e(t))))}static delayedTick(e){return ze.asyncUnsafe(((t,n)=>{const r=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{r.pop(),n(A.unit())}));r.push(i)}))}static firstCompletedOf(e){return ut(e,be.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?ze.asyncUnsafe(((t,n)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),n(e)}))})):ze.fromTry(e.value().get())}static fromTry(e){return new Xe(e)}static fork(e,t){return ze.shift(t).flatMap((()=>e))}static map2(e,t,n){return ze.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return ze.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return ze.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,o){return ze.sequence([e,t,n,r,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,o,a){return ze.sequence([e,t,n,r,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new Xe(E(e))}static of(e){return ze.always(e)}static once(e){return new Ve(e,!1)}static parMap2(e,t,n){return ze.gather([e,t]).map((e=>n(e[0],e[1])))}static parMap3(e,t,n,r){return ze.gather([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static parMap4(e,t,n,r,i){return ze.gather([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,n,r,i,o){return ze.gather([e,t,n,r,i]).map((e=>o(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,n,r,i,o,a){return ze.gather([e,t,n,r,i,o]).map((e=>a(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return ze.now(e)}static raise(e){return new Xe(R(e))}static sequence(e){return function(e){return ze.of((()=>Le(e))).flatMap((e=>ct([],e)))}(e)}static gather(e){return ut(e,be.sequence)}static shift(e){return e?Ke(e):Qe}static suspend(e){return ze.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?ze.now(e.get()):ze.tailRecM(e.swap().get(),t)))}catch(e){return ze.raise(e)}}static unit(){return Ge}static unsafeStart(e,t,n){return ot(e,t.scheduler,t,n,null,null,null)}}class Xe extends ze{constructor(e){super(),this.value=e,this._tag="pure"}}const Ge=new Xe(A.unit());class Ve extends ze{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new Ve(this._thunk,!1):this}runTry(){if(this._thunk){const e=A.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class Ye extends ze{constructor(e){super(),this.thunk=e,this._tag="always"}}class qe extends ze{constructor(e,t,n){super(),this.source=e,this.f=t,this.g=n,this._tag="flatMap"}}class $e extends ze{constructor(e){super(),this.register=e,this._tag="async"}}class Ze extends ze{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class je{constructor(e,t=new X,n={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=n,this.connection=t,n.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Je={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:ze.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>ze.tailRecM(t,(t=>e(h.left,h.right,t)))};function Ke(e){return ze.asyncUnsafe(((t,n)=>{(e||t.scheduler).executeAsync((()=>n(A.unit())))}))}m(ze,Je);const Qe=Ke();function et(e,t){let n=void 0;return e?n=e:t&&t.length>0&&(n=t.pop()),n?"function"==typeof n?n:n[0]:null}function tt(e,t){let n=e;do{if(n&&"function"!=typeof n)return n[1];n=t?t.pop():null}while(n);return null}class nt{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,ot(new Xe(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function rt(e,t,n,r,i,o,a){if(!t.shouldCancel()){t.scheduler.batchIndex=a;const s=r||new nt(t,n);s.prepare(i,o),e(t,s.asFunction)}}function it(e,t,n,r,i,o){t.shouldCancel()||t.scheduler.executeAsync((()=>{ot(e,t.scheduler,t,n,r,i,o)}))}function ot(e,t,n,r,i,o,a){let s=e,l=o,c=a;const u=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(s instanceof A){if(s.isSuccess()){const e=et(l,c);if(!e)return t.batchIndex=d,r(s);try{s=e(s.get())}catch(e){s=A.failure(e)}}else{const e=tt(l,c);if(!e)return t.batchIndex=d,r(s);try{s=e(s.failed().get())}catch(e){s=A.failure(e)}}l=null;const e=d+1&u;if(!e){const e=n||new je(t);return it(s instanceof A?new Xe(s):s,e,r,i,l,c),e.connection}d=e}else switch(s._tag){case"pure":s=s.value;break;case"always":s=A.of(s.thunk);break;case"once":s=s.runTry();break;case"flatMap":const e=s;l&&(c||(c=[]),c.push(l)),l=e.g?[e.f,e.g]:e.f,s=e.source;break;case"async":const o=s,a=n||new je(t);return rt(o.register,a,r,i,l,c,d),a.connection;case"memoize":return lt(s,t,n,r,l,c,d)}}function at(e,t,n,r,i){return be.create((o=>{const a=new je(t);return i?it(e,a,o,null,n,r):ot(e,t,a,o,null,n,r),a.connection}))}function st(e,t,n){let r=!1;return i=>{r?i.isFailure()&&e.reportFailure(i.failed().get()):(r=!0,e.trampoline((()=>{t.pop(),n(i)})))}}function lt(e,t,n,r,i,o,a){let s;if(t.batchIndex=a,e.result)s=e.result;else{const n=at(e.source,t,null,null,!1);n.value().isEmpty()?(e.result=n,s=n,n.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(s=n.value().get(),!s.isSuccess()&&e.onlySuccess||(e.result=s))}ot(s instanceof A?new Xe(s):ze.fromFuture(s),t,n,r,null,i,o)}function ct(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?ze.pure(e):ct(e,t))))}if(r)return ze.pure(e)}}function ut(e,t){return ze.asyncUnsafe(((n,r)=>{n.scheduler.trampoline((()=>{let i=!0;try{const o=[],a=ue(e);i=!1;for(let e=0;e<a.length;e++){const t=a[e].run(n.scheduler);o.push(t)}const s=t(o,n.scheduler);n.connection.push(s),s.onComplete(st(n.scheduler,n.connection,r))}catch(e){i?r(R(e)):n.scheduler.reportFailure(e)}}))}))}}}]);