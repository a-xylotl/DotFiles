/*! For license information please see 723.vendors.chunk.js.LICENSE.txt */
(window.webpackChunk=window.webpackChunk||[]).push([[723],{12738:(e,t,n)=>{"use strict";var r;n.d(t,{$:()=>r}),function(e){!function(e){e.echo="echo",e.silent="silent"}(e.Mode||(e.Mode={}))}(r||(r={}))},59443:(e,t,n)=>{"use strict";n.d(t,{Y1:()=>r,uq:()=>c});var r,i,a,o,s,c,l,u,d=n(42654),p=n(22232),f=n(8125),m=n(60705);!function(e){e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return m.SV.create(e.index,e.index+e.length)},e.eq=(0,d.fromEquals)((function(e,t){return e.index===t.index&&e.length===t.length})),e.empty={index:0,length:0}}(r||(r={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(a||(a={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,p.vE)(n)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,p.vE)(n)}}}}(e.Y||(e.Y={}))}(o||(o={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(s||(s={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(c||(c={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,f.CI)(t,e)},function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(l||(l={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(u||(u={}))},93583:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var r,i=n(27378),a=n(73805),o=n(64909),s=n(83078),c=n(52479),l=n(99391),u=n(60430),d=n(2844),p=n(16528),f=n(2834),m=n(9223);!function(e){e.Manager=function(t){var n=t.children,r=t.remSize,a=c.Dx(r).pipe(l.shareReplay({refCount:!0,bufferSize:1}));return u.P.useSingleton("RemSize.Manager"),u.P.useSubscriptionTo(a),i.createElement(e.Context.Provider,{value:a},n)},e.DefaultManager=function(t){var n=t.children;return u.P.useSingleton("RemSize.DefaultManager"),i.createElement(e.Manager,{remSize:e.withRemSizeEffect(e.defaultSizeObserver)},n)},e.defaultSizeObserver=d.aj(p.Lw("(max-width: 1359px)"),p.Lw("(min-width: 1600px)"),(function(e,t){return e?14:t?18:16})),e.withRemSizeEffect=function(t,n){return void 0===n&&(n=e.defaultFontSizeSetter),t.pipe(f.b((function(e){return n(o.some(e))})),m.x(n.bind(null,o.none)),l.shareReplay({refCount:!0,bufferSize:1}))},e.defaultFontSizeSetter=function(t){e.setRootCssVar(document.documentElement,t),e.setRootFontSize(t)},e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=function(e,t){e.style.setProperty("--rem",(0,a.pipe)(t,o.map(String),s.QP))},e.setRootFontSize=function(e){document.documentElement.style.fontSize=(0,a.pipe)(e,o.map((function(e){return e+"px"})),s.QP)}}(r||(r={}))},34095:(e,t,n)=>{"use strict";n.d(t,{Ys:()=>d});var r=n(59312),i=n(27378),a=n(71215),o=n(85746),s=n(90351),c=n(22823),l=n(13097),u=function(){return i.createElement("svg",{className:g.svg2,viewBox:"0 0 12 9",width:"12",height:"9",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1.386 4.115L4.561 7.29l5.81-5.81",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"}))},d=function(e){var t=e.checked,n=e.className,r=e.children,a=e.name;return i.createElement(p,{checked:t,name:a,className:n,checkedComponent:function(e){return i.createElement("div",{key:e?"checkbox1":"checkbox2",className:e?g.rectangleFilledBlue:g.rectangle},e&&i.createElement(u,null))}},r)},p=function(e){var t=e.checked,n=e.checkedComponent,s=e.className,c=e.children,l=e.name;return i.createElement(a.F.label,(0,r.__assign)({},(0,o.Sh)(g.wrapper,s),{onClick:function(e){return e.stopPropagation()}},l?{"data-name":l+"-checkbox"}:{}),i.createElement(a.F.input,{type:"checkbox",checked:t,onChange:function(e){return t.modify((function(e){return!e}))},className:g.inputCheckbox}),t.view(n),i.createElement("div",null,c))},f={display:"flex",marginRight:c.u.rem(.5),paddingTop:c.u.rem(.18),width:c.u.rem(1),height:c.u.rem(1),border:"2px solid "+s.Il.CoreNeutral30,borderRadius:c.u.rem(l.mA),backgroundColor:"transparent",alignItems:"center"},m={paddingTop:c.u.rem(.1),borderColor:s.Il.CoreBlue50,borderRadius:c.u.rem(l.mA),backgroundColor:s.Il.CoreBlue50},h={width:c.u.percent(100),height:c.u.percent(100)},g=c.u.stylesheet({wrapper:[{display:"flex",cursor:"default",alignItems:"center",userSelect:"none"}],rectangle:[f],rectangleFilledBlue:[f,m],inputCheckbox:[{margin:0,"-webkit-appearance":"none",appearance:"none"}],svg:[h],svg2:[{margin:"auto"}]})},9261:(e,t,n)=>{"use strict";n.d(t,{u_:()=>ee,ay:()=>Q,Pj:()=>K});var r,i,a=n(59312),o=n(27378),s=n(45980),c=n(27221),l=n(71215),u=n(85746),d=n(25781),p=n(22232),f=n(90351),m=n(22823),h=n(71031),g=n(13097),v=n(39499),y=n(41439),b=n(53073),w=n(84347),_=n(92932),C=n(16528),S=n(52479),A=n(99391),x=n(42499),I=n(66081),E=n(66310),k=n(77176),T=n(67434),R=n(24209),L=n(49708),P=n(17343),M=n(28043),N=n(93508),F=n(95300),O=n(85985),B=n(2834),D=n(12126),H=n(2844),W=n(76974),U=n(13444),z=n(55935),X=n(55721),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._classes={hidden:"ps-hidden",visible:"ps-hovered",fastTransition:"ps-fast-transition"},t._mount=function(e){t._el=e,t.props.onMount&&e&&t.props.onMount(e)},t._update=function(){requestAnimationFrame((function(){t._el&&w.update(t._el)}))},t}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,i=n.name,a=n.update,o=n.showWhenScrollable,s=n.scrollTo,c=n.className,l=this._el;w.initialize(l,{suppressScrollX:!0,minScrollbarLength:40,handlers:["click-rail","drag-scrollbar","keyboard","passiveWheel","touch"]}),this._update(),(e=this._subs).push.apply(e,r.customize(l,{name:i,showWhenScrollable:o||!1,classes:this._classes})),this._subs.push(C.YC(this._el).pipe(I.e(200)).subscribe(this._update)),a&&this._subs.push(a.subscribe(this._update)),s&&this._subs.push(s.pipe(E.w(S.b2.rafScheduler)).subscribe((function(e){l.scrollTop=e,t._update()}))),c&&this._subs.push(S.Dx(c).pipe(k.U((function(e){return e?e.split(" "):[]})),T.R((function(e,t){var n,r;return e&&(n=l.classList).remove.apply(n,e),t&&(r=l.classList).add.apply(r,t),t}),[])).subscribe())},t.prototype.componentWillUnmount=function(){w.destroy(this._el),this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this.props,t=e.children,n=e.onScroll,r=e.name,i=e.showWhenScrollable;return o.createElement(l.F.div,(0,a.__assign)({},(0,u.Sh)(i&&this._classes.visible),{onScroll:n?function(){return n.next()}:void 0,mount:this._mount,role:"scrollbar-"+r}),t)},t}(o.Component);!function(e){var t=["mousewheel","DOMMouseScroll","wheel","touchmove"];e.customize=function(e,n){var r=n.name,i=n.showWhenScrollable,a=n.classes,o=_.C8.Logging.getLogger("scrollBarY."+r,_.zW.LogLevel.DEBUG),s=e.querySelector(".ps__scrollbar-y"),c=e.querySelector(".ps__scrollbar-y-rail"),l=R.T(L.R(e,"mouseenter",{passive:!0}).pipe(P.h(!0)),L.R(e,"mouseleave",{passive:!0}).pipe(P.h(!1))).pipe(M.x(),N.O(!1)),u=R.T(L.R(c,"mouseenter",{passive:!0}).pipe(P.h(!0)),L.R(c,"mouseleave",{passive:!0}).pipe(P.h(!1))).pipe(M.x(),N.O(!1)),d=R.T(L.R(s,"mousedown",{passive:!0}).pipe(P.h(!0)),L.R(document,"mouseup",{passive:!0}).pipe(P.h(!1))).pipe(N.O(!1)),f=new F.X(!1),m=R.T(L.R(document,"paste",{passive:!0}),L.R(document,"mousedown",{passive:!0}).pipe(O.h((function(e){var t=e.target;return t!==s&&t!==c})),B.b((function(e){return o.trace("force hide event",e)})))).pipe(E.w((function(){return D.D([!0,!1])})),N.O(!1));return[R.T.apply(A,t.map((function(t){return L.R(e,t).pipe(k.U((function(e){return e.preventDefault(),e.stopPropagation(),!0})))}))).subscribe(f),H.aj(l,d,u,m).pipe(O.h((function(){return!i})),E.w((function(e){var t=e[0],n=e[1],r=e[2];return e[3]?W.of("forceHide"):n||r?r&&!n?W.of("show").pipe(U.g(600)):W.of("show"):t?R.T(f.pipe(z.T(1),X.p(100),P.h("show")),f.pipe(P.h("hide"),X.p(100),E.w((function(){return W.of("hide").pipe(U.g(600))})))):W.of("hide").pipe(U.g(600))})),M.x()).subscribe((function(t){switch(x.c.emit(t),o.trace("new scroll action",{action:t}),t){case"show":e.classList.remove(a.hidden,a.fastTransition),e.classList.add(a.visible);break;case"hide":e.classList.remove(a.visible);break;case"forceHide":e.classList.remove(a.visible),e.classList.add(a.fastTransition);break;default:(0,p.vE)(t)}return t}))]}}(r||(r={})),function(e){function t(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.deltaX/6,n=e.deltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.deltaY),[t,n]}e.verticalScrollByWhellEvent=function(e){return L.R(e,"wheel",{passive:!0}).pipe(k.U(t),k.U(b.snd),B.b((function(t){return e.scrollTop-=t})))}}(i||(i={}));var V,q=n(14611),Y=n(18244),$=n(60430),j=n(66265),Z=n(40151),J=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._overlayIndex=t._index++,n._subs=[],n._visibilityState=c.h.create("hidden"),n}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this;this._visibilityState.set(this.props.visible.get()?"visible":"hidden"),this._subs.push(this._visibilityState.pipe(k.U((function(e){return"visible"===e})),M.x()).subscribe((function(n){return t._activeOverlays.modify((function(t){var r=new Set(t);return n?r.add(e._overlayIndex):r.delete(e._overlayIndex),r}))})),this.props.visible.pipe(z.T(1)).subscribe((function(t){var n=e.props.animate?"fadeOut":"hidden";e._visibilityState.set(t?"visible":n)}))),this._subs.push(this._visibilityState.pipe(E.w((function(e){return"visible"===e?L.R(document,"keydown"):Z.c()})),O.h((function(e){return e.keyCode===d.R.ESC_CODE}))).subscribe((function(){e.props.preventClose||e.props.visible.set(!1),e.props.onClose&&e.props.onClose()})))},t.prototype.componentWillUnmount=function(){var e=this;t._activeOverlays.modify((function(t){var n=new Set(t);return n.delete(e._overlayIndex),n})),this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.render=function(){var e=this;return o.createElement(l.F.Fragment,null,this._visibilityState.view((function(t){switch(t){case"visible":case"fadeOut":return o.createElement(l.F.div,(0,a.__assign)({role:"overlay-wrapper"},(0,u.Sh)(e.props.animate?e._getAnimatedTypeClass(t):e._getTypeClass(t),e._getPositionType(e.props.positionType)),{onClick:function(){e.props.preventClose||e.props.visible.set(!1),e.props.onClose&&e.props.onClose()},onTransitionEnd:function(){"fadeOut"===t&&e._visibilityState.set("hidden")}}),o.createElement(l.F.div,(0,a.__assign)({},(0,u.Sh)(e.props.animate&&e._getContentClass(t))),o.createElement("div",{className:ge.scroll,role:"scrollbar-modal"},o.createElement(l.F.div,(0,a.__assign)({},(0,u.Sh)(e._getAlignmentClass(),e._getSmallResolutionClass())),e.props.children))));case"hidden":return null;default:return(0,p.vE)(t)}})))},t.prototype._getSmallResolutionClass=function(){switch(this.props.smallResolution){case"resize":return ge.wrapperResize;case"cut":default:return""}},t.prototype._getAlignmentClass=function(){switch(this.props.alignment){case"top-center":return ge.wrapperTopCenter;case"bottom-right":return ge.wrapperBottomRight;case"none":return"";case"center":default:return ge.wrapperCenter}},t.prototype._getTypeClass=function(e){if("visible"!==e)return ge.wrapperTransparent;switch(this.props.overlayType){case"light":return ge.wrapperLight;case"transparent":return ge.wrapperTransparent;case"dark":default:return ge.wrapperDark}},t.prototype._getPositionType=function(e){switch(e){case"absolute":return ge.wrapperAbsolute;case"fixed":return ge.wrapperFixed;default:return(0,p.vE)(e)}},t.prototype._getAnimatedTypeClass=function(e){var t="visible"===e;switch(this.props.overlayType){case"light":return q.f.rafSequence(t?[ge.wrapperTransparent,ge.wrapperLight]:[ge.wrapperLight,ge.wrapperTransparent],!0);case"transparent":return W.of(ge.wrapperTransparent);case"dark":default:return q.f.rafSequence(t?[ge.wrapperTransparent,ge.wrapperDark]:[ge.wrapperDark,ge.wrapperTransparent],!0)}},t.prototype._getContentClass=function(e){var t=this.props.theme||ge,n=t.contentFaded,r=t.content,i="visible"===e?[n,r]:[r,n];return q.f.rafSequence(i,!0)},t.defaultProps={visible:c.h.create(!0)},t._activeOverlays=c.h.create(new Set),t.activeCount=t._activeOverlays.view((function(e){return e.size})),t._index=0,t}(o.Component),K=function(e){return o.createElement(J,(0,a.__assign)({},e,{visible:c.h.create(!0),preventClose:!0}),e.children)},Q=function(e){return o.createElement(J,(0,a.__assign)({},e,{visible:c.h.create(!0),preventClose:!1}),e.children)};function ee(e){var t=e.children,n=e.className,r=e.close;return o.createElement(l.F.div,(0,a.__assign)({},(0,u.Sh)(ge.modal,n),{onClick:Y.UW(s.constVoid)}),t,r?o.createElement("div",{className:ge.closeIconButtonContainer},o.createElement(v.zx,{name:"modal-close",onClick:r},o.createElement(y.JO.Close,{className:ge.closeIcon,width:13}))):null)}!function(e){e.Header=function(e){var t=e.children,n=e.className;return o.createElement(l.F.header,(0,a.__assign)({},(0,u.Sh)(ge.header,n)),t)},e.Body=function(e){var t=e.children,n=e.className,r=e.wrapperClassName,i=e.name,s=$.P.useElWatcher(),c=s.ref,d=s.onMount;return o.createElement(G,(0,a.__assign)({name:i},(0,u.Sh)(ge.scrollBody,r),{showWhenScrollable:!0,update:c.pipe(j.oA,E.w(C.YC),P.h(S.PU))}),o.createElement(l.F.div,(0,a.__assign)({},(0,u.Sh)(ge.body,n),{mount:d}),t))},e.Footer=function(e){var t=e.children,n=e.className;return o.createElement(l.F.div,(0,a.__assign)({},(0,u.Sh)(ge.footer,n))," ",t," ")}}(ee||(ee={}));var te={top:0,left:0,display:"flex",flexDirection:"column",overflow:"hidden",width:m.u.percent(100),height:m.u.percent(100),transition:"background "+m.u.seconds(.2),pointerEvents:"auto"},ne={position:"fixed",zIndex:g.DY},re={margin:m.u.rem(-.5)+" auto auto"},ie={background:"rgba(255, 255, 255, .7)"},ae={background:"rgba(100, 107, 131, .4)"},oe={position:"absolute",top:m.u.rem(.5),right:m.u.rem(.5)},se={stroke:h.FW},ce={position:"relative",display:"flex",flexDirection:"column",overflow:"hidden",maxHeight:"90vh",borderRadius:m.u.rem(g.Jr),boxShadow:h.Re},le={position:"relative",overflow:"hidden",padding:m.u.rem(2.5)+" "+m.u.rem(2)+" "+m.u.rem(1),borderTopLeftRadius:m.u.rem(g.Jr),borderTopRightRadius:m.u.rem(g.Jr),backgroundColor:f.Il.CoreNeutral1},ue={position:"absolute",top:m.u.px(10),right:"@top"},de={padding:m.u.rem(2),backgroundColor:f.Il.CoreNeutral0},pe={display:"flex",padding:"0 "+m.u.rem(2),height:m.u.rem(4),border:"0 solid transparent",borderWidth:"0 1px",borderBottomRightRadius:m.u.rem(g.Jr),borderBottomLeftRadius:m.u.rem(g.Jr),backgroundColor:f.Il.CoreNeutral1,alignItems:"center",justifyContent:"flex-end",$nest:{"& > *:not(:last-child)":{marginRight:m.u.rem(.5)}}},fe={transitionDuration:m.u.seconds(.2),transitionProperty:"opacity, transform",transformOrigin:"center"},me={position:"relative",display:"flex",padding:m.u.rem(.5)+" 0",width:"100vw",height:"100vh"},he={$nest:(V={},V["@media ("+g.pZ+")"]={margin:m.u.rem(2)+" auto auto"},V)},ge=m.u.prefixedStylesheet("modal",{wrapper:[te],wrapperFixed:[ne],wrapperAbsolute:[{position:"absolute"}],wrapperTopCenter:[re],wrapperBottomRight:[{margin:"auto 0 0 auto"}],wrapperCenter:[{margin:"auto"}],wrapperLight:[te,ie],wrapperDark:[te,ae],wrapperTransparent:[te,{overflow:"hidden",background:"transparent"}],closeIconButtonContainer:[oe],closeIcon:[se],modal:[ce],header:[le],closeBtn:[ue],body:[de],scrollBody:[{position:"relative",flexGrow:1}],footer:[pe],contentBase:[fe],contentFaded:[fe,{opacity:0,transform:"scale(.8)"}],content:[fe,{opacity:1,transform:"none"}],scroll:[me],wrapperResize:[he]})},41552:(e,t,n)=>{"use strict";n.d(t,{dC:()=>r,Iy:()=>i,EQ:()=>h});var r,i,a=n(45980),o=n(27221),s=n(64909),c=n(66310),l=n(18625),u=n(95300),d=n(76974),p=n(2834),f=n(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance",e.MutedAlerts="MutedAlerts"}(r||(r={})),function(e){e.setGoals=function(e){return{type:r.SetGoals,source:e}},e.performance={type:r.Performance},e.mutedAlerts={type:r.MutedAlerts}}(i||(i={}));var m,h=function(){function e(e){this._modalViews=e,this.state=o.h.create(s.none),this._modalFactoryCache=new Map}return e.prototype.show=function(e){var t=this;return this.preload(e).pipe(c.w((function(e){return t.showPreloaded(e)})))},e.prototype.showPreloaded=function(e){var t=this;return l.P((function(){var n=new u.X("opened");return t.state.set(s.some(e({onClose:function(){t.state.set(s.none),n.next("closed"),n.complete()}}))),n}))},e.prototype.preload=function(e){var t=this,n=JSON.stringify(e);if(this._modalFactoryCache.has(n)){var r=this._modalFactoryCache.get(n);return d.of(r)}return l.P((function(){return t._modalViews.load(e)})).pipe(p.b((function(e){t._modalFactoryCache.set(n,e)})))},e.prototype.hideAll=function(){this.state.set(s.none)},e}();!function(e){var t=function(){function e(){this.state=o.h.create(s.none),this.hideAll=a.constVoid}return e.prototype.show=function(e){return f.c()},e.prototype.showPreloaded=function(e){return f.c()},e.prototype.preload=function(e){return f.c()},e}();e.Mock=t}(m||(m={}))},38206:(e,t,n)=>{"use strict";n.d(t,{t:()=>y});var r,i=n(59312),a=n(27378),o=n(45980),s=n(73805),c=n(71215),l=n(85746),u=n(489),d=n(93283),p=n(79932),f=n(19962),m=n(22232),h=n(95574),g=n(64909),v=n(65772);!function(e){var t,n,r;function a(e,n){var r=n.position,a=n.point,o={width:Math.trunc(e.width),height:Math.trunc(e.height)};return f.UL.validate(t.match((function(){return(0,i.__assign)({top:a.y,right:a.x,bottom:a.y+o.height,left:a.x-o.width},o)}),(function(){return(0,i.__assign)({top:a.y-o.height,right:a.x,bottom:a.y,left:a.x-o.width},o)}),(function(){return(0,i.__assign)({top:a.y-o.height,right:a.x+o.width,bottom:a.y,left:a.x},o)}),(function(){return(0,i.__assign)({top:a.y,right:a.x+o.width,bottom:a.y+o.height,left:a.x},o)}))(r))}function o(t){return e.topLeft(f.UL.Point.normalize({x:t.left,y:t.top}))}!function(e){e.topLeft="topLeft",e.topRight="topRight",e.bottomRight="bottomRight",e.bottomLeft="bottomLeft"}(t=e.Position||(e.Position={})),function(e){e.match=function(t,n,r,i){return function(a){switch(a){case e.topRight:return t();case e.bottomRight:return n();case e.bottomLeft:return r();case e.topLeft:return i();default:return(0,m.vE)(a)}}}}(t=e.Position||(e.Position={})),e.topLeft=function(e){return{position:t.topLeft,point:f.UL.Point.normalize(e)}},e.topRight=function(e){return{position:t.topRight,point:f.UL.Point.normalize(e)}},e.bottomRight=function(e){return{position:t.bottomRight,point:f.UL.Point.normalize(e)}},e.bottomLeft=function(e){return{position:t.bottomLeft,point:f.UL.Point.normalize(e)}},e.relativeTo=function(e,t){return{position:e.position,point:f.UL.Point.relativeTo(e.point,t)}},e.empty=e.topLeft(f.UL.Point.empty),e.toRect=a,e.fromRect=o,e.inRect=function(e,t){var n=t.point;return f.UL.hasPoint(e,n)},e.toCss=function(e){var n=e.position,r=e.point;return t.match((function(){return{top:r.y,right:r.x}}),(function(){return{right:r.x,bottom:r.y}}),(function(){return{bottom:r.y,left:r.x}}),(function(){return{top:r.y,left:r.x}}))(n)},function(t){t.create=function(e,t){return(0,m.kG)(e.point.x===t.point.x||e.point.y===t.point.y,"can not form Zone without a common dimension",(function(){return JSON.stringify({a:e,b:t})})),[e,t]},t.bySide=function(n,r){return f.UL.Side.match((function(){return t.create(e.bottomLeft({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.floor(r.right),y:Math.ceil(r.top)}))}),(function(){return t.create(e.topLeft({x:Math.floor(r.right),y:Math.ceil(r.top)}),e.bottomLeft({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topLeft({x:Math.ceil(r.left),y:Math.floor(r.bottom)}),e.topRight({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topRight({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.ceil(r.left),y:Math.floor(r.bottom)}))}))(n)}}(n=e.Zone||(e.Zone={})),function(e){e.byAxis=function(e,t){return d.fromFoldable((0,p.getFirstSemigroup)(),u.array)(f.UL.Axis.toSides(e).map((function(e){return[e,n.bySide(e,t)]})))}}(e.Variants||(e.Variants={})),function(t){function n(e,t){return(0,s.pipe)(f.UL.intersection(e,t),g.map((function(e){var n=e.width/t.width,r=e.height/t.height,i=(Number.isNaN(n)?0:n/2)+(Number.isNaN(r)?0:r/2);return(0,m.kG)(i>=0,"quality can not be negavite: "+i),(0,m.kG)(i<=1,"quality can be higher than 1: "+i),i})))}t.empty={quality:0,point:e.empty},t.qualityOfIntersection=n,t.byViewport=function(e,t){return{quality:(0,s.pipe)(n(e,t),g.getOrElse((function(){return 0})))+(0,s.pipe)(f.UL.scale(2,t),v.chain(f.UL.normalize),g.fromEither,g.chain((function(t){return n(e,t)})),g.getOrElse((function(){return 0}))),point:o(t)}},t.fromZone=function(e,n,r){return(0,s.pipe)(u.array.traverse(v.either)(r,(function(e){return a(n,e)})),v.chain((function(e){var t=e[0],n=e[1];return f.UL.join(t,n)})),v.chain((function(e){return f.xu.placeIntoRect(n,e)})),v.map((function(n){return n.map((function(n){return t.byViewport(e,n)}))})))}}(r=e.Qualified||(e.Qualified={})),function(e){e.build=function(e,t,n){return(0,s.pipe)(n,d.map((function(n){return r.fromZone(e,t,n)})))}}(e.QualifiedVariants||(e.QualifiedVariants={})),function(e){var t;!function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.edges=20]="edges",e[e.any=210]="any"}(t=e.Placement||(e.Placement={})),e.takeBy=function(e,t){return function(n){return(0,s.pipe)(n,d.reduceWithIndex({point:r.empty,side:e},(function(n,r,i){return(0,s.pipe)(i,v.map((function(i){return i.filter((function(r,i){return t.toString().includes(i.toString())&&e===n})).reduce((function(e,t){return t.quality>e.point.quality?{point:t,side:n}:e}),r)})),h.MH)}))).point}},e.preferBy=function(e,t){return function(n){return(0,s.pipe)(n,d.reduceWithIndex({point:r.empty,side:e},(function(n,r,i){return(0,s.pipe)(i,v.map((function(i){return i.reduce((function(r,i,a){return i.quality>r.point.quality||i.quality===r.point.quality&&t.toString().includes(a.toString())&&e===n?{point:i,side:n}:r}),r)})),h.MH)}))).point}},e.preferTopMiddle=e.preferBy("top",t.middle),e.preferTopEdges=e.preferBy("top",t.edges)}(e.Selector||(e.Selector={}))}(r||(r={}));var y,b=n(83078),w=n(8125),_=n(90351),C=n(22823),S=n(22168),A=n(60430),x=n(52479),I=n(77176),E=n(2844),k=n(28043);!function(e){!function(e){e.toSelector=function(e){switch(e){case"top":case"topCenter":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};case"topRight":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.right)};case"topLeft":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.left)};case"bottom":case"bottomCenter":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.middle)};case"bottomRight":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.right)};case"bottomLeft":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.left)};case"left":return{align:"left",selector:r.Selector.preferBy("left",r.Selector.Placement.middle)};case"right":return{align:"right",selector:r.Selector.preferBy("right",r.Selector.Placement.middle)};case"auto":case"center":return{align:f.UL.Axis.vertical,selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};default:return(0,m.vE)(e)}}}(e.Alignment||(e.Alignment={})),e.ByPoint=function(e){var t=e.point,n=e.className,o=(0,i.__rest)(e,["point","className"]);return a.createElement(c.F.div,(0,i.__assign)({role:"positioned-container",style:t.pipe(I.U(b.dH(r.toCss,{})))},(0,l.Sh)(F.wrapper,n,t.pipe(I.U((function(e){return g.isNone(e)?F.hidden:""})))),o))};var t=function(t){var i=A.P.useRectWatcher(),s=i.rect,c=i.onMount,l=x.Dx(t.rect),d=x.Dx(t.pinTargetRect),p=u(t.align),f=n(l,s,p,t.selector||r.Selector.preferTopMiddle,d,"relative"===t.position);return a.createElement(e.ByPoint,{mount:c,className:t.className,point:f.pipe(I.U(g.map((function(e){return e.tangentialPoint}))))},t.withPin&&f.pipe(I.U((0,o.flow)(g.chain((function(e){return e.median})),g.map((function(t){return a.createElement(e.Pin,{point:t,key:"pin"})})),g.toNullable))),t.children)};e.ByAbsoluteRect=function(e){return a.createElement(t,(0,i.__assign)({},e,{position:"absolute"}))},e.ByRelativeRect=function(e){return a.createElement(t,(0,i.__assign)({},e,{position:"relative"}))},e.Pin=function(e){var t=x.Dx(e.point).pipe(I.U((function(e){return e.side})),I.U((function(e){return N[e]}))),n=x.Dx(e.point).pipe(I.U((function(e){return e.point})),I.U((function(e){var t=e.x;return{top:e.y,left:t}})));return a.createElement(c.F.i,(0,i.__assign)({role:"pin",style:n},(0,l.Sh)(t,N.wrapper)))};var n=function(e,t,n,i,o,c){return E.aj(e,a.useContext(S.l.Context).pipe(I.U((function(e){return e.rect}))),t.pipe(k.x(g.getEq(f.xu.eq).equals)),o).pipe(I.U((function(e){var t=e[0],a=e[1],o=e[2],l=e[3];return(0,s.pipe)(o,g.map((function(e){var o=r.QualifiedVariants.build(a,e,n(t)),u=i(o).point,d=(0,s.pipe)(r.toRect(e,u),g.fromEither,g.chain((function(e){return(0,s.pipe)(f.UL.getMedian(t,e),g.map((function(t){return{anchorMedian:t,bodyRect:e}})))})),g.chain((function(e){var t=e.anchorMedian,n=e.bodyRect;if(l){var i=f.UL.stickToSide(f.UL.Side.invert(t.side),l)(n);return u=r.fromRect(i),(0,s.pipe)(f.UL.getMedian(l,i),g.map((function(e){var t=e.side,n=e.point;return{side:t,point:f.UL.Point.relativeTo(n,i)}})))}return(0,s.pipe)(g.some(t),g.map((function(e){var t=e.side,r=e.point;return{side:t,point:f.UL.Point.relativeTo(r,n)}})))})));return{tangentialPoint:r.relativeTo(u,c?t:a),median:d}})))})))},u=function(e){return void 0===e&&(e=f.UL.Axis.both),(0,w.CI)(f.UL.Axis,e)?function(t){return r.Variants.byAxis(e,t)}:function(t){var n;return(n={})[e]=r.Zone.bySide(e,t),n}}}(y||(y={}));var T={position:"absolute",border:C.u.px(7)+" solid "+_.Il.BackgroundTooltip,transform:"translate("+C.u.px(-7)+", "+C.u.px(-7)+")"},R={borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateY("+C.u.px(7)+")"}}},L={borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",$nest:{"& + *":{transform:"translateX("+C.u.px(-7)+")"}}},P={borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateY("+C.u.px(-7)+")"}}},M={borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateX("+C.u.px(7)+")"}}},N=C.u.stylesheet({wrapper:[T],top:[R],right:[L],bottom:[P],left:[M]}),F=C.u.stylesheet({hidden:[{visibility:"hidden",opacity:0}],wrapper:[{position:"absolute",transition:"opacity .2s"}]})},63979:(e,t,n)=>{"use strict";n.d(t,{P:()=>C});var r=n(59312),i=n(27378),a=n(85746),o=n(22232),s=n(19962),c=n(90351),l=n(22823),u=n(71031),d=n(94503),p=n(41439),f=2*Math.PI*32,m=36,h="#f1f2fa",g="#fff",v=function(e,t,n){return e<t?t:e>n?n:e},y=function(e){switch(e){case C.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:h,outline:g};case C.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:h,outline:g};case C.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:h,outline:g};case C.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:h,outline:g};case C.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:h,outline:g};case C.ColorType.logan:return{type:"plain",value:"#a6adc9",background:h,outline:g};case C.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case C.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case C.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case C.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case C.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case C.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case C.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case C.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,o.vE)(e)}},b=function(e){switch(e){case C.FontSize.normal:return 32;case C.FontSize.small:return 24;default:return(0,o.vE)(e)}},w=function(e){switch(e){case C.IconSize.pdf:case C.IconSize.normal:case C.IconSize.outcome:return 5;case C.IconSize.small:return 3;case C.IconSize.extraSmall:return 10;default:return(0,o.vE)(e)}},_=function(e){switch(e){case C.IconSize.pdf:return 110;case C.IconSize.normal:return 52;case C.IconSize.outcome:return 32;case C.IconSize.small:return 24;case C.IconSize.extraSmall:return 16;default:return(0,o.vE)(e)}},C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.render=function(){var e,n,o,c,l,u=this.props,h=u.percentage,g=u.aimValue,C=void 0===g?100:g,S=u.colorType,A=void 0===S?t.ColorType.logan:S,x=u.fontSize,E=void 0===x?t.FontSize.normal:x,k=u.iconSize,T=void 0===k?t.IconSize.normal:k,R=u.description,L=u.theme,P=void 0===L?I:L,M=[i.createElement("circle",{key:"circle",id:"circle",cx:m,cy:m,r:32,fill:"none"})],N=b(E),F=w(T),O=v(h,0,100),B=v(C,O,100),D=O*f/100,H=B*f/100,W=360*F/f,U=O?f-D-2*F:f,z=y(A);if("plain"===z.type)e=z.value,n=e,o=z.outline,c=z.background,l=void 0===z.backgroundOpacity?1:z.backgroundOpacity;else{var X=z.value;this._gradientId=this._gradientId||"pb-gradient-"+t._nextGradientId++,M.push(i.createElement("linearGradient",(0,r.__assign)({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},X.coordinates),i.createElement("stop",{stopColor:X.start,offset:"0%"}),i.createElement("stop",{stopColor:X.end,offset:"100%"}))),e="url(#"+this._gradientId+")",n="#2b2d38",o=z.outline,c=z.background,l=void 0===z.backgroundOpacity?1:z.backgroundOpacity}return i.createElement(d.a.Context.Consumer,null,(function(t){return i.createElement(p.a1,(0,r.__assign)({},(0,a.Sh)(I.iconWrapper,P.radialProgressBar),{width:_(T),viewBox:"0 0 72 72"}),i.createElement("defs",null,M),i.createElement("g",null,i.createElement("use",{className:I.valueCircle,stroke:O>=94&&o?o:c,strokeOpacity:l,strokeWidth:F,strokeDasharray:f,strokeDashoffset:f-H,transform:"rotate(-90 36 36)",strokeLinecap:"round",xlinkHref:"#circle"}),o&&i.createElement("use",{className:I.valueCircle,stroke:o,strokeWidth:F,strokeDasharray:f,strokeDashoffset:U,transform:"rotate("+(-90-W)+" "+"36 "+"36)",strokeLinecap:"round",xlinkHref:"#circle"}),i.createElement("use",{className:I.valueCircle,stroke:e,strokeDasharray:f,strokeDashoffset:f-D,strokeLinecap:"round",transform:"rotate(-90 36 36)",strokeWidth:F,xlinkHref:"#circle"}),i.createElement("text",(0,r.__assign)({className:P.radialProgressText,y:"38",x:"36",fill:n,fontSize:N,fontStyle:"normal",textAnchor:"middle"},s.h5(t.has(d.a.Flag.supportsSVGDominantBaseline))),O),R&&i.createElement("text",{className:P.radialProgressDescription,fill:n,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},R)))}))},t._nextGradientId=0,t}(i.Component);!function(e){!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(e.IconSize||(e.IconSize={}))}(C||(C={}));var S={width:l.u.percent(100),height:l.u.percent(100),fontWeight:"bold",fill:c.Il.CoreNeutral90},A={fontSize:l.u.rem(2),fill:c.Il.CoreNeutral90},x={fontWeight:"normal",fontSize:l.u.px(11),fill:u.UE},I=l.u.stylesheet({radialProgressBar:[S],radialProgressText:[A],radialProgressDescription:[x],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},54071:(e,t,n)=>{"use strict";n.d(t,{$:()=>f});var r,i=n(59312),a=n(27378),o=n(71215),s=n(85746),c=n(22232),l=n(90351),u=n(22823),d=n(71031),p=n(52479);function f(e){var t=e.wrapperClassName,n=e.variation,r=e.isIdle,s=(e.ref,(0,i.__rest)(e,["wrapperClassName","variation","isIdle","ref"]));return a.createElement(o.F.span,{role:"spinner",className:t},p.ab(n,(function(e){return a.createElement(f.Svg,(0,i.__assign)({},s,{type:e,isIdle:r}))})))}!function(e){e.getClassName=function(e){return function(t){switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,c.vE)(t)}}},e.Svg=function(t){var n=t.className,r=t.size,o=void 0===r?64:r,l=t.strokeWidth,u=void 0===l?2:l,d=t.type,p=t.name,f=t.isIdle,m=(0,i.__rest)(t,["className","size","strokeWidth","type","name","isIdle"]),h=a.useRef(null),v=a.useRef(null);return a.useEffect((function(){return(0,c.kG)(null!==h.current,"groupEl should be already created"),v.current=h.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return v.current.cancel()}}),[]),a.useEffect((function(){(0,c.kG)(null!==v.current,"groupAnimation should be already created");var e=v.current;e.play&&(f?e.pause():"running"!==e.playState&&e.play())})),a.createElement("svg",(0,i.__assign)({"data-role":p},(0,s.Sh)(n),{viewBox:"25 25 50 50",width:o,height:o},m),a.createElement("g",{transform:"translate(50 50)"},a.createElement("g",{ref:h},a.createElement("circle",(0,i.__assign)({},(0,s.Sh)(E.path,f&&g,e.getClassName(E)(d)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:u,strokeMiterlimit:"10"})))))}}(f||(f={}));var m=200,h=u.u.keyframes({"0%":{strokeDasharray:"1px, "+u.u.px(m),strokeDashoffset:u.u.px(1)},"50%":{strokeDasharray:"89px, "+u.u.px(m),strokeDashoffset:u.u.px(-35)},"100%":{strokeDasharray:"89px, "+u.u.px(m),strokeDashoffset:u.u.px(-124)}}),g="spinnerIdle",v={animation:h+" 2s ease-in-out infinite",strokeDasharray:"1px, "+u.u.px(m),strokeDashoffset:u.u.px(1),strokeLinecap:"round",$nest:(r={},r["&."+g]={animationIterationCount:0},r)},y={stroke:l.Il.CoreRed50},b={stroke:l.Il.CoreGreen50},w={stroke:l.Il.CoreBlue50},_={stroke:l.Il.CoreNeutral0},C={stroke:d.lh},S={stroke:d.AX},A={stroke:l.Il.CoreYellow60},x={stroke:d.FW},I={stroke:l.Il.CoreCyan50},E=u.u.stylesheet({path:[v],red:[y],green:[b],blue:[w],white:[_],violet:[C],yellow:[S],orange:[A],gray:[x],cyan:[I]})},17674:(e,t,n)=>{"use strict";n.d(t,{X:()=>k});var r=n(59312),i=n(27378),a=n(45980),o=n(19962),s=n(64909),c=n(90351),l=n(22823),u=n(13097),d=n(38206),p=n(73805),f=n(71215),m=n(25781),h=n(83078),g=n(42499),v=n(52479),y=n(49708),b=n(85985),w=n(41398),_=n(24209),C=n(17343),S=n(38194),A=n(598),x=n(50628),I=n(66831),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!o.UL.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return i.createElement(f.F.div,{role:"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=y.R(document,"keydown").pipe(b.h((function(e){return e.keyCode===m.R.ESC_CODE}))),n=y.R(document,"mousedown").pipe(w.M(this.context.state),b.h((function(t){var n=t[0],r=t[1];return(0,p.pipe)(r,s.map((function(e){return e.target})),s.filter((function(){return o.pK(n.target)})),h.wo(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),r=_.T(t,n,y.R(document,"scroll"),g.c.observe.pipe(b.h((function(e){return"show"===e.detail})))).pipe(C.h(v.PU),S.B());this._subs=[this.context.hasContent.pipe(b.h(Boolean),A.c(r.pipe(x.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(b.h(Boolean),A.c(_.T(v.gw(!0,500),r.pipe(C.h(!1))).pipe(x.P())),b.h(Boolean)).subscribe(this.context.show)]},t.contextType=I.G.Context,t}(i.Component),k=function(){return i.createElement(E,null,(0,a.flow)(s.map((function(e){return i.createElement(d.t.ByAbsoluteRect,(0,r.__assign)({rect:o.UL.fromEl(e.target),className:L.container},d.t.Alignment.toSelector(e.alignment),{withPin:!0}),i.createElement("div",{className:L.content},e.content))})),s.toNullable))},T={position:"fixed",zIndex:u.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},R={padding:l.u.rem(.25)+" "+l.u.rem(1),borderRadius:l.u.rem(u.fx),background:c.Il.BackgroundTooltip,color:c.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:l.u.px(.25),fontSize:l.u.rem(.75),lineHeight:l.u.rem(1)},L=l.u.stylesheet({container:[T],content:[R]})},69551:(e,t,n)=>{"use strict";var r;n.d(t,{Q:()=>r}),function(e){e.group=function(e){return Object.values(e.reduce((function(e,t){var n=t.group,r=t.category,i=t.categoryHuman,a=t.cost;return void 0===e[r]&&(e[r]={group:n,category:r,categoryHuman:i,count:0}),e[r].count+=a,e}),{})).sort((function(e,t){return t.count-e.count}))}}(r||(r={}))},27901:(e,t,n)=>{"use strict";n.d(t,{S:()=>Pe});var r,i=n(59312),a=n(53073),o=n(45980),s=n(73805),c=n(27221),l=n(80358),u=n(84966),d=n(67394),p=n(89943),f=n(81670),m=n(8125),h=n(22232),g=n(64909),v=n(65772),y=n(87088),b=n(92932),w=n(76779),_=n(40620),C=n(1701),S=n(92843),A=n(68983),x=n(76220),I=n(38365),E=n(67434),k=n(2834),T=n(77176);!function(e){function t(t){return function(a){return(0,s.pipe)(t,S.v.foldMap(e.group)(r,i,n),(0,A.W)(e.group.concat)(a))}}e.group=I.dM.group,e.eq=I.dM.eq,e.applyDiff=t,e.fromAlerts=function(e){var n=b.C8.Logging.getLogger("DocumentCounters");return e.pipe(E.R((function(e,n){return{alerts:n,counters:t(w.p.Diff.toRegistered(w.p.diff(e.alerts,n)))(e.counters)}}),{alerts:w.p.empty,counters:I.dM.group.empty}),k.b((function(e){var t=e.counters;I.dM.isValid(t)||n.error("Counters can not be below zero",I.dM.show.show(t))})),T.U((function(e){return e.counters})))};var n=function(e){return x.R.toUnmutedOnly(e.counters)},r=(0,o.flow)(n,e.group.inverse),i=function(t,i){return e.group.concat(n(i),r(t))}}(r||(r={}));var R,L=n(26001),P=n(93283),M=n(88903),N=n(64510),F=n(10002),O=n(58199),B=n(85985);!function(e){function t(e){var t=(0,s.pipe)(e,P.filterMap(g.fromNullable),P.filterWithIndex((function(e){return"GeneralScore"!==e})),P.mapWithIndex((function(e,t){return{lensId:(n=e,n===F.R.SpecialId.Plagiarism?v.right(F.R.SpecialId.Plagiarism):F.R.OutcomeId.toOutcomeId(n)),score:O.T.fromNumber(t)};var n})),P.partitionMap((0,L.Yt)(v.either))),n=t.left,r=t.right,i=(0,s.pipe)(r,P.map((function(e){var t=e.lensId,n=e.score;return(0,o.tuple)(t,n)})),(function(e){return new Map(Object.values(e))}));return(0,s.pipe)(M.fromOptions(g.fromPredicate((0,o.not)(P.isEmpty))(n),g.fromPredicate((0,o.not)(N.isEmpty))(i)),g.getOrElse((function(){return M.right(new Map)})))}e.empty=new Map,e.eq=N.getEq(F.R.Id.ord,O.T.ord),e.fromCapi=function(e){return e.pipe(B.h((0,m.Kg)(l.h.is("finish"),l.h.is("async_check_finished"),l.h.is("feedback_ack"))),T.U((function(e){return e.outcomeScores})),B.h(m.$K),T.U(t),k.b(M.mapLeft((function(e){P.isEmpty(e)||b.C8.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),B.h((0,m.Kg)(M.isBoth,M.isRight)),T.U((function(e){return e.right})))}}(R||(R={}));var D,H=n(95053),W=n(52479),U=n(32952),z=n(38194),X=n(77843),G=n(93508),V=n(95093),q=n(598),Y=n(24209),$=n(50628),j=n(17343),Z=n(36919),J=n(41120),K=n(95686),Q=n(90049),ee=n(71102),te=n(25938),ne=n(64450),re=n(37492),ie=n(79961),ae=n(51072),oe=n(489),se=n(80229),ce=n(44827),le=n(79932),ue=n(36991),de=function(){function e(e){this._delta=e,this._cursor={index:0,operationOffset:0}}return e.prototype.next=function(e){(0,h.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return g.none;for(var n=ue.s.operationLength(this._delta.ops[t]),r=e-(n-this._cursor.operationOffset);r>0&&t<this._delta.ops.length-1;)t++,r-=n=ue.s.operationLength(this._delta.ops[t]);return r>0?(this._cursor={index:t+1,operationOffset:0},g.none):(this._cursor={index:t,operationOffset:n+r},g.some(this._delta.ops[t]))},e}();!function(e){var t=g.getMonoid((0,le.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=function(e){return function(n){var r=new de(e);return n.ops.reduce((function(e,n){var i=e[0],a=e[1],o=r.next(a);return ue.s.isInsert(n)?[i.insert(n.insert,g.toUndefined(t.concat(g.chain(ue.s.getAttrs)(o),ue.s.getAttrs(n)))),0]:[i.push(n),ue.s.operationLength(n)]}),[new ne.i,1])[0]}}}(D||(D={}));var pe=n(17753);function fe(e){switch(e._raw.point){case"AllCapsBoldification":return d.JJ.fromAlternativeBoldified;case"Lists":return d.JJ.fromAlternativeListified;default:return d.JJ.fromAlternative}}var me,he=(0,m.HP)(b.C8.Logging.getLogger),ge=(0,o.flow)(ee.map((function(e){var t=e.beingAppliedAlert,n=e.undo,r=e.reversedAlternative;return Q.tryCatch((function(){var e={action:u.PZ.ACCEPTED,commit:function(){return he("AlertManager.ops").debug("_applyTransformJson("+t.toLiteString()+"):commit()")},undo:n,reversedAlternative:t.registerReversedAlternative(r)},i=t.switchToApplied(e),a=pe.xS.create(i.state.from,ce.h.create(t));return[i.id,a]}),v.toError)})),Q.sequenceSeqArray);function ve(e){var t=d.r3.compose(e.alternatives.map(a.map((function(e){return e.alternative}))),e.currentFullText);return(0,s.pipe)(ue.s.nonEmpty(t.composedDelta)?g.some(t):g.none,g.map((function(t){var n=t.composedDelta,r=t.reversedAlternatives;return{changeWithFormatting:(0,s.pipe)(n,D.getEnrichedWithFormattingDelta(e.currentFullText),(function(t){return te.RI.delta(t,e.originalTextLength)})),correctRevAlternatives:(0,s.pipe)(r,f.T.tapFailure((function(e){var t=e.rejected;return b.C8.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",t)})),f.T.foldSuccess(oe.map((function(t){return{reversedAlternative:t.reversedAlternative,alternative:a.fst(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert}}))))}})))}!function(e){var t=(0,o.flow)((function(e,t){return v.tryCatch((function(){return pe.xS.create(e,t)}),v.toError)}),v.map((function(e){return(0,o.tuple)(e[0].id,e)})),K.of);e.prepare=K.chain((0,o.tupled)(t)),e.prepareFromAlert=Q.chain((function(e){return t(e.state.from,ce.h.create(e))}))}(me||(me={}));function ye(e,t){return v.fromPredicate(e,(function(e){var n=new h.ej(t,e.toString());return b.C8.Logging.getLogger("AlertManager.ops").error(t,n),n}))}var be=function(e){return ye(pe.bZ.isNotDisposed,e)};function we(e){return Q.chain(g.fold((0,o.constant)(Q.right(void 0)),e))}var _e,Ce,Se,Ae=function(){function e(e,t,n,r){var a=this;this._positionManager=e,this._getContent=t,this._capiFeedbackClient=n,this._alertsRepo=r,this._log=b.C8.Logging.getLogger("AlertManager.ops"),this._sendUpdate=function(e){return Q.tryCatch((function(){return a.events.next({updated:new Map(e)})}),v.toError)},this._sendSingleUpdate=Q.chain((function(e){return a._sendUpdate([e])})),this._flushChanges=Q.tryCatch((function(){return a.changes.next(te.RI.flush())}),v.toError),this.changes=new U.xQ,this.events=new U.xQ,this.undoApplied=function(e,t){return(0,s.pipe)((function(){return a._positionManager.getTextLength()}),K.chain((function(t){var r={alertsToUpdate:[],reversedDelta:new ne.i,undo:o.constVoid},i=e.filter(pe.bZ.isApplied).reduce((function(e,t){var r=t.state.undoable;return pe.VD.isWithAlternative(r)?(0,s.pipe)(r.reversedAlternative,g.fold((function(){u.wQ.withTransformJson(t._raw)&&a._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),n(e,t)}),(0,o.flow)((function(e){return e()}),v.map((function(e){return e.delta})),v.fold((function(e){a._log.error("Could not retrieve reversed delta",{e:e,alert:t.toLiteString()})}),(function(r){n(e,t),(0,s.pipe)(r,d.r3.fromRawDelta,(function(t){return t.rebase(e.reversedDelta)}),g.fold((function(){e.reversedDelta=e.reversedDelta.compose(r)}),(function(t){var n=t.delta;e.reversedDelta=e.reversedDelta.compose(n)})))}))))):n(e,t),e}),r);return i.alertsToUpdate.length>0?(0,s.pipe)(Q.tryCatch((function(){var e=(0,s.pipe)(i.reversedDelta,D.getEnrichedWithFormattingDelta(a._getContent()));a.changes.next(te.RI.delta(e,t))}),v.toError),Q.apFirst(a._flushChanges),Q.apFirst((0,s.pipe)(i.undo,K.map(v.right))),Q.apSecond((0,s.pipe)(i.alertsToUpdate,Q.sequenceSeqArray,Q.chain(a._sendUpdate)))):Q.right(void 0)})));function n(e,n){e.undo=(0,o.flow)(e.undo,n.state.undoable.undo),e.alertsToUpdate.push(me.prepare((function(){return[ce.h.create(n),ce.h.create(n.changeState(t===pe.bZ.State.Applied.Method.ByCard?pe.bZ.State.init:pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.bulkAcceptUserResponse)))]})))}},this._dismissBatch=function(e,t){return(0,s.pipe)(a._flushChanges,Q.apSecond((0,s.pipe)(e,oe.map((0,o.flow)(K.of,K.map(be("Cannot send feedback for already disposed")),Q.chain((function(e){return(0,s.pipe)(a._applyFeedbackToAlert(e,u.PZ.IGNORE,pe.l$.sidebar,pe.bZ.isSmartPhrases(e)?function(){}:a._commitToCapi(e,{kind:u.PZ.IGNORE,subtype:t})))})),me.prepareFromAlert)),Q.sequenceSeqArray,Q.chain(a._sendUpdate))))},this._applyAlert=function(e){var t=e.alert,n=e.replacementText,r=e.source,i=e.method,o=e.feedbackSubtype;return(0,s.pipe)(t,ye(pe.bZ.isRegistered,"can not apply alert in non registered state"),K.of,Q.apFirst(a._flushChanges),Q.chain((function(e){return a._switchToBeingApplied(e,r,i)})),Q.chain((function(e){var t=e.beingAppliedAlert,r=e.undo;return(0,s.pipe)(t.getReplaceEither.bind(t),Q.swap,Q.mapLeft((function(){return new Error("Cannot apply alert with tJSON")})),Q.map((function(e){a._log.debug("_applyAlert("+t.toLiteString()+", rrange: "+e+")");var i=e.start,s=e.end-e.start,c=(new ne.i).retain(i).delete(n.length).insert(t.replaceText);return{alert:t,undo:r,reverseDelta:c,replacementText:n,removeLen:s,feedbackSubtype:o,pos:i}})))})),Q.chain(a._applyAlertData))},this._applySmartPhrasesAlert=function(e){var t=e.alerts,n=e.feedbackSubtype;return(0,s.pipe)(a._flushChanges,Q.apSecond((0,s.pipe)(t,Q.traverseSeqArray((function(e){return(0,s.pipe)(e.alternative,Q.map((function(t){return(0,o.tuple)(t,fe(e.alert))})))})))),Q.chain((function(e){return Q.tryCatch((function(){return{alternatives:e,alerts:t,originalTextLength:a._positionManager.getTextLength(),currentFullText:a._getContent()}}),v.toError)})),Q.map(ve),we((function(e){return(0,s.pipe)(e.correctRevAlternatives,oe.map((function(e){var t=e.alert,r=e.alternative;return(0,s.pipe)(Q.rightIO((function(){return t})),Q.chainFirst((function(e){return Q.rightIO(a._sendApplySmartPhrasesFeedback(e,r.alternativeIndex,n))})))})),Q.sequenceSeqArray,Q.chain((function(t){return(0,s.pipe)(Q.tryCatch((function(){return a.changes.next(e.changeWithFormatting)}),v.toError),Q.apFirst(a._flushChanges),K.apSecond((0,s.pipe)((0,o.flow)(ee.map((function(e){return Q.tryCatch((function(){var t=ce.h.create(e);e.bumpVersion();var n=pe.xS.create(t,ce.h.create(e));return[e.id,n]}),v.toError)})),Q.sequenceSeqArray)(t),Q.chain(a._sendUpdate))))})))})))},this._applyTransformJson=function(e){var t=e.alerts,n=e.source,r=e.method,c=e.feedbackSubtype;return(0,s.pipe)(a._flushChanges,Q.apSecond((0,s.pipe)(t,Q.traverseSeqArray((function(e){return(0,s.pipe)(e.alternative,Q.map((function(t){return(0,o.tuple)(t,fe(e.alert))})))})))),Q.chain((function(e){return Q.tryCatch((function(){return{alternatives:e,alerts:t,originalTextLength:a._positionManager.getTextLength(),currentFullText:a._getContent()}}),v.toError)})),Q.map(ve),we((function(e){return(0,s.pipe)(e.correctRevAlternatives,oe.map((function(e){var t=e.alert,o=e.alternative,l=e.reversedAlternative;return(0,s.pipe)(a._switchToBeingApplied(t,n,r),Q.chainFirst((function(e){return Q.rightIO(a._sendApplyTransformJsonFeedback(e.beingAppliedAlert,o.alternativeIndex,c))})),Q.map((function(e){return(0,i.__assign)((0,i.__assign)({},e),{reversedAlternative:l})})))})),Q.sequenceSeqArray,Q.chain((function(t){return(0,s.pipe)(Q.tryCatch((function(){return a.changes.next(e.changeWithFormatting)}),v.toError),Q.apFirst(a._flushChanges),K.apSecond((0,s.pipe)(ge(t),Q.chain(a._sendUpdate))))})))})))},this._alertFeedback=function(e,t,n){a._log.debug("_alertFeedback("+e.toLiteString()+", feedbackType: "+t.kind+", source: "+n+")"),pe.bZ.isHidden(e)&&a._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});var r=a._commitToCapi(e,t);return(0,s.pipe)(e,be("Cannot send feedback for already disposed"),K.of,Q.chain((function(e){return t.kind!==u.PZ.LOOKED||e.isRead?u.nw.willRemoveAlert(t.kind)?(0,s.pipe)(a._flushChanges,Q.apSecond(a._applyFeedbackToAlert(e,t.kind,n,r)),me.prepareFromAlert,a._sendSingleUpdate):(0,s.pipe)(r,Q.rightIO):(0,s.pipe)(me.prepare((function(){return[ce.h.create(e),(e.isRead=!0,ce.h.create(e))]})),a._sendSingleUpdate,K.apFirst(r))})))},this._alertBatchFeedback=function(e,t,n){return(0,s.pipe)(e,oe.filterMap((function(e){return e.rawId})),se.fromArray,g.fold((0,o.constant)(o.constVoid),(function(e){return a._sendFeedback({kind:t,alertIds:e,subtype:n})})))},this._notifyAlertUpdated=(0,o.flow)((function(e){return[[e[0].id,e]]}),this._sendUpdate),this._releaseRef=function(e,t){return(0,s.pipe)(Q.tryCatch((function(){a._log.debug("_releaseRef "+e+" on ("+t.toLiteString()+") refs: "+t._refNames,{shouldBeRemoved:pe.bZ.shouldBeRemoved(t)}),pe.bZ.shouldBeRemoved(t)&&a.events.next({removed:new Map([[t.id,ce.h.create(t)]])})}),v.toError))},this._changeMuteState=function(e,t){var n=(0,s.pipe)(e,f.T.fromArray((0,o.flow)(be("Cannot send Mute feedback for already disposed"),v.chain(ye((function(e){return g.isSome(e.muteCategory)||pe.bZ.belongsToAnySpecialCategory(e)}),"Alert is not muting")))));return(0,s.pipe)(n,f.T.foldSuccess(oe.map((function(e){return me.prepare((function(){return[ce.h.create(e),(e.mute=t,ce.h.create(e))]}))}))),Q.sequenceSeqArray,Q.map(se.fromArray),we(a._sendUpdate),Q.map((0,o.constant)(n)))},this._changeGapValue=function(e,t){return(0,s.pipe)(e,ye(pe.bZ.isOneGap,"can not change gap value for a non one gap alert"),K.of,Q.chain((function(e){return me.prepare((function(){return[ce.h.create(e),ce.h.create(e.changeGapValue(t))]}))})),a._sendSingleUpdate)},this._confirmApplied=(0,o.flow)(oe.map((function(e){return me.prepare((function(){return[ce.h.create(e),ce.h.create(e.changeState(pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.bulkAcceptUserResponse)))]}))})),Q.sequenceSeqArray,Q.chain(this._sendUpdate)),this._changeSmartPhrasesFeedback=function(e,t){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot change feedback for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var t=(0,s.pipe)(e.rawId,g.fold((function(){return null}),(function(e){return e})));if(!t)throw new Error("Coudln't retrieve raw ID from SmartPhrases alert (ID: "+e.id+"), cannot change feedback.");return{alert:e,rawId:t}}),v.toError)})),Q.chainFirst((function(e){var n=e.rawId;return Q.tryCatch((function(){t===pe.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE?a._sendFeedback({kind:ie.l.Intent.FeedbackType.INTENT_ACCEPTED,predictionId:n,subtype:u.e3.Sidebar})():t===pe.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE&&a._sendFeedback({kind:ie.l.Intent.FeedbackType.INTENT_IGNORED,predictionId:n,subtype:u.e3.Sidebar})()}),v.toError)})),Q.chain((function(e){var n=e.alert;return Q.tryCatch((function(){var e=[(0,o.tuple)(n.id,pe.xS.create(ce.h.create(n),ce.h.create(n.setFeedback(t))))];return a.events.next({updated:new Map(e)}),n}),v.toError)})))},this._rotateSmartPhrasesReplacements=function(e){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot rotate replacements for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var t=[(0,o.tuple)(e.id,pe.xS.create(ce.h.create(e),ce.h.create(e.rotateReplacements())))];return a.events.next({updated:new Map(t)}),e}),v.toError)})))},this._discardSmartPhrasesReplacement=function(e,t){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot discard replacement for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var n=[(0,o.tuple)(e.id,pe.xS.create(ce.h.create(e),ce.h.create(e.discardReplacement(t))))];return a.events.next({updated:new Map(n)}),e}),v.toError)})))},this._highlightSmartPhrasesLastAppliedReplacement=function(e){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot highlight last applied replacement for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var t=[(0,o.tuple)(e.id,pe.xS.create(ce.h.create(e),ce.h.create(e.highlightLastAppliedReplacement())))];return a.events.next({updated:new Map(t)}),e}),v.toError)})))},this._restoreSmartPhrasesOriginalHighlight=function(e){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot restore original highlight for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var t=[(0,o.tuple)(e.id,pe.xS.create(ce.h.create(e),ce.h.create(e.restoreOriginalHighlight())))];return a.events.next({updated:new Map(t)}),e}),v.toError)})))},this._applyAlertData=function(e){var t=e.pos,n=e.removeLen,r=e.reverseDelta,i=e.undo,o=e.replacementText,c=e.alert,l=e.feedbackSubtype;return(0,s.pipe)(Q.tryCatch((function(){var e=a._positionManager.getTextLength(),s=!1,d={action:u.PZ.ACCEPTED,replacement:o,commit:function(){s||a._log.debug("_applyAlert("+c.toLiteString()+"):commit()")},reversedAlternative:g.none,undo:function(){s=!0,a._log.debug("_applyAlert("+c.toLiteString()+"):undo()");var t=a._positionManager.getTextLength();t!==e&&a._log.error("Text has changed while uncommitted apply is present. Expected: "+e+", actual: "+t);var n=te.RI.delta(r,t);a.changes.next(n),a.changes.next(te.RI.flush()),i()}};return a._sendApplyTextFeedback(c,o,l)(),a.changes.next(te.RI.delta((new ne.i).retain(t).delete(n).insert(o),e)),a.changes.next(te.RI.flush()),e=a._positionManager.getTextLength(),d}),v.toError),Q.chain((function(e){return Q.tryCatch((function(){return c.switchToApplied(e)}),v.toError)})),me.prepareFromAlert,a._sendSingleUpdate)},this._sendApplyFeedback=function(e,t){return e.state.method===pe.bZ.State.Applied.Method.ByCard?a._commitToCapi(e,t):o.constVoid},this._sendApplyTextFeedback=function(e,t,n){return a._sendApplyFeedback(e,{kind:u.PZ.ACCEPTED,replacementText:t,subtype:n})},this._sendApplyTransformJsonFeedback=function(e,t,n){var r={kind:u.PZ.ACCEPTED,alternativeIndex:t,subtype:n},o=pe.bZ.isOneGap(e)?(0,i.__assign)((0,i.__assign)({},r),{gapValue:e.gapValue}):r;return a._sendApplyFeedback(e,o)},this._sendApplySmartPhrasesFeedback=function(e,t,n){var r={kind:u.PZ.ACCEPTED,alternativeIndex:t,subtype:n};return a._commitToCapi(e,r)}}return e.prototype._applyFeedbackToAlert=function(e,t,n,r){var i=this;return Q.tryCatch((function(){i._alertsRepo.removeFromCapiMapping(e);var a=i._createFeedbackUndoable(e,t,r);return e.changeState(pe.bZ.State.Applied.create(a,n,pe.bZ.State.Applied.Method.ByCard,ce.h.create(e)))}),v.toError)},e.prototype._createFeedbackUndoable=function(e,t,n){var r=this;return{action:t,replacement:e.replaceText,commit:n,undo:function(){return r._alertsRepo.addToCapiMapping(e)}}},e.prototype._commitToCapi=function(e,t){var n=this;return(0,s.pipe)(e.rawId,g.fold((0,o.constant)((function(){return n._log.debug("skip feedback for local alert",e)})),(function(e){return n._sendFeedback((0,i.__assign)({id:e},t))})))},e.prototype._sendFeedback=function(e){var t=this;return function(){ae.Vi(t._capiFeedbackClient.sendFeedback(e)).catch((function(e){re.EP.isDroppedError(e)?t._log.debug("Stopped listening for feedback message acknowledge",e):re.YG.isNotConnectedError(e)?t._log.warn("Failed to send alert feedback as CAPI was not connected",e):t._log.error("Failed to send alert feedback",e)}))}},e.prototype._switchToBeingApplied=function(e,t,n){var r=this;return Q.tryCatch((function(){return r._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,n)}),v.toError)},e}(),xe=n(83078);!function(e){e.toString=v.fold((function(e){return"rid:"+e.id}),(function(e){return"aid:"+e.toString()}))}(_e||(_e={})),function(e){e.match=function(e){return function(t){return t instanceof pe.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}}(Ce||(Ce={})),function(e){e.defaultValidator=pe.bZ.isDuplicatedBy}(Se||(Se={}));var Ie,Ee,ke=function(){function e(t,n,r){var i=this;this._positionManager=t,this._alertsRepo=n,this._alertDuplicateValidator=r,this._log=b.C8.Logging.getLogger("AlertManager.pipeline",b.zW.LogLevel.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=function(e){return i._log.trace("process, to process = "+e.length),i._collectChanges(i._processAlertsBatch(e))},this.reset=function(e){return i._cleanupPendingAlerts(e),i._finishAlertsChecking()},this._processAlertsBatch=function(t){var n=i._processBatch(t),r=n.toAdd,a=n.toUpdate,c=n.toAddOrUpdate,u=n.toRemoveUnfiltered,d=n.toChangeUnfiltered,p=n.toDispose,f=n.rangeChanges,m=function(e){return(0,s.pipe)(i._alertsRepo.getByAlertId(e),g.getOrElse((function(){return r.get(e)||a.get(e)||p.get(e)})))};d.forEach((function(t){return(0,s.pipe)(g.fromNullable(c.get(t.id)),g.fold((function(){return(0,s.pipe)(i._alertsRepo.getByRawAlertId(t.id),g.map((function(n){var r=n.copy();r.patchWithRawAlert(e._prepareUpdate(r,t)),a.set(r.id,r),c.set(t.id,r)})),g.getOrElse((function(){return i._log.info("Change from CAPI: Cannot find internal AlertId.")})))}),(function(n){var r=e._prepareUpdate(n,t);a.has(n.id)?n.patchWithRawAlert(r):n.updateAlertWithManagedData(r)})))}));var y=u.reduce((function(e,t){var n=(0,s.pipe)(t,v.fold((function(e){var t=e.id;return(0,s.pipe)(i._alertsRepo.getByRawAlertId(t),g.map((function(e){return pe.bZ.isRegistered(e)?e:void 0})),g.getOrElse((function(){return i._heuristicallyRemovedAlerts.has(t)?void i._heuristicallyRemovedAlerts.delete(t):c.get(t)})))}),m));return void 0===n?(v.isLeft(t)?i._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(t.left)):i._log.error("Cannot find existing alert by id",t.right),e):((0,s.pipe)(i._getMergeTarget(t,c),g.filter(Te((function(e){return e.lensId!==n.lensId?(i._log.warn("Trying to merge alerts from different lenses",{source:n,target:e}),!1):g.isNone(n.rawId)?(i._log.warn("Trying to merge into local alert",{source:n,target:e}),!1):n.references>e.references}))),g.fold((function(){e.set(n.id,{alert:n,reason:(0,s.pipe)(t,v.swap,g.fromEither,g.chain((function(e){return e.hint})),g.chain((function(e){return e===l.A.NotFixed?g.some(pe.bZ.State.Removed.Reason.capiDismiss):g.none})),g.getOrElse((function(){return pe.bZ.State.Removed.Reason.capiDone})))})}),v.fold((function(e){i._log.debug("swap raw alerts with new alert",{source:n.toString(),newTarget:e.toString()}),i._alertsRepo.swapRaw(n,e);var t=xe.MH(n.rawId);(0,h.kG)(void 0===a.get(e.id),"Added alert should not be present in the updated alerts map",(function(){return a.get(e.id).toString()}));var o=n.copy();a.set(o.id,o),c.set(t,o),r.delete(e.id),p.set(e.id,e)}),(function(t){i._log.debug("swap raw alerts with existing alert",{source:n.toString(),existingTarget:t.toString()}),i._alertsRepo.swapRaw(n,t),e.set(t.id,{alert:t,reason:pe.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),b=new Map;return f&&f.forEach((function(e,t){(0,s.pipe)(t,m,g.fromPredicate((function(n){return n?pe.bZ.isInteractable(n)?!a.has(n.id)||(i._log.debug("skip range change on updateHolder alert",n.toLiteString()),!1):(i._log.debug("skip range change on non-interactable alert",n.toLiteString()),!1):(i._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1)})),g.chain((function(n){return(0,s.pipe)(n.onRangeChange(e),g.map((function(e){switch(e.state){case pe.bZ.Transition.State.Pending:return b.set(n.id,[n,e.removedRanges]);case pe.bZ.Transition.State.Dispose:return(0,s.pipe)(n.rawId,g.fold((function(){return i._log.debug("dispose by range change on unknown rid",n.id)}),(function(e){return i._heuristicallyRemovedAlerts.set(e,n)}))),y.set(t,{alert:n,reason:pe.bZ.State.Removed.Reason.textChange});default:return(0,h.vE)(e)}})))})))})),y.forEach((function(e){var t=e.alert;i._log.trace("check cancellations from toRemove: "+t.toLiteString()),(0,s.pipe)(t.rawId,g.fold((function(){r.get(t.id)&&(i._log.debug("cancel add local alert for: "+t.toLiteString()),r.delete(t.id),y.delete(t.id),p.set(t.id,t)),(0,h.kG)(!1===a.has(t.id),"Added local alert should not be present in the updated alerts map",(function(){return a.get(t.id).toString()}))}),(function(e){var n=c.get(e);n&&(c.delete(e),r.delete(n.id)?(i._log.debug("cancel add for: "+n.toLiteString()),i._log.debug("cancel remove for: "+t.toLiteString()),y.delete(t.id),p.set(t.id,t),p.set(n.id,n)):a.delete(n.id)?(i._log.debug("cancel update for: "+n.toLiteString()),n.id!==t.id&&(i._log.debug("marking update to dispose: "+n.toLiteString()),p.set(n.id,n))):i._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",n))}))),i._log.trace("check if local orphan toRemove: "+t.toLiteString()),(0,s.pipe)(i._alertsRepo.getByAlertId(t.id),g.fold((function(){i._log.debug("cancel delete for: "+t.toLiteString()),y.delete(t.id)}),o.constVoid))})),p.size>0&&i._log.debug("_cancelAlerts, to cancel = "+p.size,{alerts:Array.from(p.values()).map((function(e){return e.toLiteString()}))}),p.forEach((function(e){b.delete(e.id)&&i._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){i._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:r,toUpdate:a,toRemove:y,toStartChecking:b}},this._collectChanges=function(e){var t=e.toAdd,n=e.toUpdate,r=e.toRemove,a=e.toStartChecking,o=i._addAlerts(Array.from(t.values()),r),s=o.alertsToAdd,c=o.alertsToUpdate,l=o.alertsToRemove;return n.size>0&&i._updateAlerts(Array.from(n.values()),c),a.size>0&&i._startAlertsChecking(Array.from(a.values()),c,s),l.size>0&&i._removeAlerts(l,c),{added:s,updated:c}},this._validateAlertAdd=function(e){try{var t=!pe.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==u.wQ.Impact.Critical&&e._raw.impact!==u.wQ.Impact.Advanced&&g.isSome(e.rawId)&&i._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),t||(i._log.error("CAPI provides corrupted alert",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,s.pipe)(e.rawId,g.exists((function(e){return g.isSome(i._alertsRepo.getByRawAlertId(e))})))?(i._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===F.R.Type.Plagiarism&&O.T.isMax(e.progress)?(i._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:u.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){i._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){i._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=function(e){var t=e.id;i._recheckedAlerts.delete(t)&&i._log.debug("Stopped watching checking state for alert",t)},this._applyRemoveToAlert=function(e){var t=e.alert,n=e.reason;return i._alertsRepo.removeFromCapiMapping(t),n!==pe.bZ.State.Removed.Reason.textChange&&t.clearCapiId(),t.changeState(pe.bZ.State.Removed.create(n))},this._finishAlertChecking=function(e){(0,h.kG)(i._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),i._log.debug("Stopped watching checking state for alert",e.id);var t=ce.h.create(e);return pe.xS.create(t,ce.h.create(e.changeState(pe.bZ.State.Registered.create(pe.bZ.CheckingState.IDLE))))}}return e._prepareUpdate=function(e,t){var n=(0,i.__assign)((0,i.__assign)({},e.toRawAlert()),{rev:t.rev});return u.wQ.withTransformJson(n)&&(0,s.pipe)(t.transformJson,xe.bw((function(e){return n.transformJson=e}))),(0,s.pipe)(t.extraProperties,xe.bw((function(e){return n.extra_properties=e}))),(0,s.pipe)(t.muted,xe.bw((function(e){return n.muted=e}))),n},e.prototype._processBatch=function(e){var t=this;return e.reduce((function(e,n){return Ce.match({alertAddOrUpdate:function(n){(0,s.pipe)(n.rawId,g.fold((function(){e.toAdd.set(n.id,n)}),(function(r){(0,s.pipe)(t._alertsRepo.getByRawAlertId(r),g.filter((function(e){return e.allowUpdate})),g.map((function(){(0,s.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((function(n){t._log.debug("got overlap in batch on update"),e.toUpdate.delete(n.id),e.toDispose.set(n.id,n)}))),e.toUpdate.set(n.id,n)})),g.getOrElse((function(){(0,s.pipe)(g.fromNullable(e.toAddOrUpdate.get(r)),g.map((function(n){t._log.info("got overlap in batch on add"),e.toAdd.delete(n.id),e.toDispose.set(n.id,n)}))),e.toAdd.set(n.id,n)}))),e.toAddOrUpdate.set(r,n)})))},rangeChange:function(t){(0,h.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:function(t){e.toRemoveUnfiltered.push(t)},alertChange:function(t){e.toChangeUnfiltered.push(t)}})(n),e}),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})},e.prototype._getMergeTarget=function(e,t){var n=this;return(0,s.pipe)(e,v.swap,g.fromEither,g.chain((function(e){return e.mergedIn})),g.chain((function(e){var r=(0,s.pipe)(n._alertsRepo.getByRawAlertId(e),g.map((function(e){return v.right(e)})),g.alt((function(){return(0,s.pipe)(g.fromNullable(t.get(e)),g.map((function(e){return v.left(e)})))})));return g.isNone(r)&&n._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),r})),g.filter(Te((function(e){return!!e.allowUpdate||(n._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)}))))},e.prototype._addAlerts=function(e,t){var n=this;return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((function(e){return e.toLiteString()}))}),(0,s.pipe)(e,oe.filter(this._validateAlertAdd),oe.reduce({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},(function(e,t){n._log.trace("Adding alert: "+t.toLiteString());var r=n._getAlertsWithMatchingRanges(t.getHighlightRanges()[0]),i=n._tryToMatchInvalid(t,r);switch(n._log.trace("Adding alert match result",{inc:t.id,match:i}),i.type){case Ie.Type.Merged:var a=i.result[1];pe.bZ.isNotRegistered(a.alert)?pe.bZ.isRemoved(a.alert)&&n._log.warn("unexpected merge into removed alert",{alert:a,newAlert:t}):n._alertsRepo.addToCapiMapping(a.alert),e.alertsToUpdate.set(a.id,i.result);break;case Ie.Type.Restored:a=i.result[1];(0,h.kG)(!e.alertsToRemove.has(a.id),"can't update alert which we wanted to remove earlier"),n._alertsRepo.addToCapiMapping(a.alert),e.alertsToUpdate.set(a.id,i.result);break;case Ie.Type.Unmatched:var o=i.result,c=r.filter((function(t){return pe.bZ.isDuplicateCandidate(t)&&n._alertDuplicateValidator(o,t)&&!e.alertsToRemove.has(t.id)}));(0,h.kG)(o.allowDuplicates||pe.bZ.isApplicableAlert(o),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type"),c.length>0&&n._log.info("Trying to add a duplicated alert",{newAlert:t.toString(),duplicates:c.map((function(e){return e.toString()}))});var l=o.allowDuplicates?{result:Ee.Add,toRemove:g.none}:n._tryAddAlert(o,c);switch(l.result){case Ee.Add:case Ee.OverwriteExisting:n._log.debug("AllAlerts: Append alert to all alerts",o.toLiteString()),n._alertsRepo.addToCapiMapping(o),(0,h.kG)(!e.alertsToRemove.has(o.id),"can't add alert which we wanted to remove earlier",(function(){return o.toLiteString()})),n._alertsRepo.add(o),e.alertsToAdd.set(o.id,ce.h.create(o)),(0,s.pipe)(l.toRemove,xe.bw((function(t){if(e.alertsToAdd.has(t.id)){n._alertsRepo.removeFromCapiMapping(t);var r=t.changeState(pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.canceled));n._terminateAlertChecking(r),n._alertsRepo.remove(r)}else n._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:pe.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case Ee.Skip:n._log.debug("Skip alert with low priority",o.id);break;default:(0,h.vE)(l.result)}break;default:(0,h.vE)(i)}return e})))},e.prototype._updateAlerts=function(e,t){var n=this;this._log.debug("_updateAlerts, to update = "+e.length,{alerts:e.map((function(e){return e.toLiteString()}))}),(0,s.pipe)(e,oe.reduce(t,(function(e,t){return n._log.trace("Updating alert: "+t.toLiteString()),(0,s.pipe)(n._alertsRepo.getByRawAlertId(xe.MH(t.rawId)),g.fold((function(){return n._log.warn("tried to update unknown alert",t)}),(function(n){var r=t._raw;t.dispose();var i=e.has(n.id)?e.get(n.id)[0]:ce.h.create(n);n.enqueueRawAlertForUpdate(r),e.set(n.id,pe.xS.create(i,ce.h.create(n)))}))),e})))},e.prototype._startAlertsChecking=function(e,t,n){var r=this;this._log.debug("_startAlertsChecking, to update = "+e.length,{alerts:e.map((function(e){var t=e[0],n=e[1];return[t.toLiteString(),n]}))});var i=function(e,t){var n=e.changeState(pe.bZ.State.Registered.create(pe.bZ.CheckingState.CHECKING));return r._recheckedAlerts.add(e.id),ce.h.create(t.size>0?n.enqueueRangesRemove(t):n)};(0,s.pipe)(e,oe.reduce({updatedAlerts:t,addedAlerts:n},(function(e,t){var n=t[0],a=t[1];return(0,s.pipe)(r._alertsRepo.getByAlertId(n.id),g.fold((function(){r._log.warn("tried to start checking unknown alert",{alert:n,ranges:a})}),(function(){if(e.addedAlerts.has(n.id))e.addedAlerts.set(n.id,i(n,a));else{var t=e.updatedAlerts.has(n.id)?e.updatedAlerts.get(n.id)[0]:ce.h.create(n);e.updatedAlerts.set(n.id,pe.xS.create(t,i(n,a)))}}))),e})))},e.prototype._removeAlerts=function(e,t){var n=this;e.forEach((function(e,r){(0,s.pipe)(n._alertsRepo.getByAlertId(r),g.fold((function(){n._log.warn("tried to remove unknown alert",e)}),(function(){var i=t.has(r)?t.get(r)[0]:ce.h.create(e.alert),a=n._applyRemoveToAlert(e);n._terminateAlertChecking(a),t.set(r,pe.xS.create(i,ce.h.create(a)))})))}))},e.prototype._getAlertsWithMatchingRanges=function(e){var t=this;return(0,s.pipe)(this._positionManager.findIntersections(e),oe.filter((0,m.W9)(J.P.is,J.x.isVisible)),oe.filterMap((function(e){return t._alertsRepo.getByAlertId(e.meta.alertId)})),oe.filter((function(e){return!(pe.bZ.isApplied(e)&&e.getAppliedRanges().length>0)})))},e.prototype._tryToMatchInvalid=function(e,t){var n=this;return(0,h.kG)(!e.isValid,"added alert should be invalid"),(0,h.kG)(pe.bZ.isRegistered(e),"added alert should be in registered state",(function(){return e.toString()})),(0,s.pipe)(g.fromNullable(t.find((function(t){return!t.isValid&&t.canBeMergedWith(e)}))),g.fold((function(){return{result:e,type:Ie.Type.Unmatched}}),(function(t){(0,h.kG)((0,s.pipe)(t.rawId,xe.wo((0,o.flow)(n._alertsRepo.getByRawAlertId,g.isNone))),"CAPI mapping should not contain invalid alerts"),n._log.debug("Merging new alert ("+e+") into the existing one aid("+t+")");var r=ce.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&pe.bZ.isCapiDone(t)?{result:pe.xS.create(r,ce.h.create(t.changeState(pe.bZ.State.init))),type:Ie.Type.Restored}:{result:pe.xS.create(r,ce.h.create(t)),type:Ie.Type.Merged}})))},e.prototype._tryAddAlert=function(e,t){return(0,s.pipe)(se.fromArray(t),g.map((function(t){(0,h.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert","got "+t.map((function(e){return e.toString()}))+" with input ("+e.toString()+")");var n=t[0];return n.extraProperties.priority<=e.extraProperties.priority?{result:Ee.OverwriteExisting,toRemove:g.some(n)}:(e.dispose(),{result:Ee.Skip,toRemove:g.none})})),g.getOrElse((function(){return{result:Ee.Add,toRemove:g.none}})))},e.prototype._cleanupPendingAlerts=function(e){var t=this;e.removed.forEach((function(e){t._heuristicallyRemovedAlerts.delete(e)&&t._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.info("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()},e.prototype._finishAlertsChecking=function(){var e=this;return(0,s.pipe)(Array.from(this._recheckedAlerts.values()),oe.filterMap((function(t){var n=e._alertsRepo.getByAlertId(t);g.isNone(n)&&(e._log.error("tried to finish checking on missing alert",t),e._recheckedAlerts.delete(t));var r=(0,s.pipe)(n,g.filter((function(e){return pe.bZ.isRegistered(e)})),g.map((function(t){return(0,o.tuple)(t.id,e._finishAlertChecking(t))})));return g.isNone(r)&&e._log.error("tried to update checking state on non-registered alert",t),r})),(function(e){return{updated:new Map(e)}}))},e}();function Te(e){return v.fold(e,e)}!function(e){!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(e.Type||(e.Type={}))}(Ie||(Ie={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(Ee||(Ee={}));var Re=function(){var e=this;this._log=b.C8.Logging.getLogger("AlertManager.repository",b.zW.LogLevel.DEBUG),this._allAlerts=new Map,this._capiAlertsIdMapping=new Map,this.add=function(t){e._allAlerts.set(t.id,t)},this.remove=function(t){e._log.trace("AllAlerts: Clean alert from all alerts",t.toLiteString()),(0,h.kG)(0===t.references,"can not dispose alert in use",(function(){return t.toString()})),(0,h.kG)(!1===t.isValid,"can not dispose valid alert",(function(){return t.toString()})),(0,h.kG)(e._allAlerts.delete(t.id),"alert should exist in alerts list",(function(){return t.toString()})),t.dispose()},this.addToCapiMapping=function(t){t.isValid||(0,s.pipe)(t.rawId,g.fold((function(){return e._log.debug("skip register of local alert in capi mapping",t)}),(function(n){e._log.trace("register alert in capi mapping",t.toLiteString()),(0,h.kG)(void 0===e._capiAlertsIdMapping.get(n),"unexpected overlap of rawid alert",(function(){return t.toString()})),t.validate(),e._capiAlertsIdMapping.set(n,t.id)})))},this.removeFromCapiMapping=function(t){t.isValid&&((0,s.pipe)(t.rawId,xe.bw((function(n){e._log.trace("clean valid alert capi mapping for: "+t.toLiteString()),(0,h.kG)(e._capiAlertsIdMapping.delete(n),"valid alert should had valid raw id",(function(){return t.toString()}))}))),t.invalidate())},this.getByAlertId=function(t){return g.fromNullable(e._allAlerts.get(t))},this.getByRawAlertId=function(t){return(0,s.pipe)(g.fromNullable(e._capiAlertsIdMapping.get(t)),g.chain(e.getByAlertId))},this.swapRaw=function(t,n){var r=(0,s.pipe)(t.rawId,g.exists((function(t){return e._capiAlertsIdMapping.has(t)}))),i=(0,s.pipe)(t.rawId,g.exists((function(t){return e._capiAlertsIdMapping.has(t)})));(0,h.kG)(r||i,"At least one of the swapped alerts should be registered in the system");var a=t._raw;t.silentPatchWithRawAlert(n._raw),n.silentPatchWithRawAlert(a),r&&e._capiAlertsIdMapping.set(xe.MH(t.rawId),t.id),i&&e._capiAlertsIdMapping.set(xe.MH(n.rawId),n.id)},this.toArray=function(){return Array.from(e._allAlerts.values())},this.toMap=function(){return e._allAlerts},this.toJSON=function(){return{allAlerts:Array.from(e._allAlerts.entries()),idMapping:Array.from(e._capiAlertsIdMapping.entries())}}},Le=n(16185),Pe=function(){function e(e,t,n,i,u,d,h,S){var A=this;void 0===S&&(S=Se.defaultValidator),this._positionManager=e,this._alternativeManager=t,this._getContent=n,this._capiEvents=i,this._capiClient=u,this._documentCounters=d,this._transformRawAlert=h,this._alertDuplicateValidator=S,this._state=c.h.create(C.r.empty),this.state=this._state.view(C.r.toCheckingResult),this.lensesScores=c.h.create(R.empty),this._log=b.C8.Logging.getLogger("AlertManager",b.zW.LogLevel.TRACE),this._subs=[],this._addAlerts=new U.xQ,this._removeAlerts=new U.xQ,this._changeAlerts=new U.xQ,this._flush=new U.xQ,this._alertsPerRevision=0,this._alertsRepo=new Re,this._pipeline=new ke(this._positionManager,this._alertsRepo,this._alertDuplicateValidator),this._invalidateAlerts=function(){A.flushAlerts();var e=p.uK(A._getAllAlertsAsArray(),(function(e){return e.isValid})),t=e[0],n=e[1];A._log.debug("Invalidate alerts...",{valid:t.length,invalid:n.length}),t.forEach((function(e){A._alertsRepo.removeFromCapiMapping(e),e.clearCapiId()})),n.forEach((function(e){return e.clearCapiId()}))},this._removeInvalidAlerts=function(e){A._log.debug("Removing invalid alerts by type '"+e+"'...");var t=A._getTypeFilter(e),n=A._getAllAlertsAsArray().filter((function(e){return!e.isValid&&pe.bZ.isRegistered(e)&&t(e)}));n.forEach((function(e){return A._removeAlertBuffered(v.right(e.id))})),A._log.debug(n.length+" invalid alerts removed"),A.flushAlerts(),A._log.isEnabled(b.zW.LogLevel.TRACE)&&A._log.trace("Removed alerts",n.map((function(e){return e.toString()})))},this._onCapiEvent=function(e){try{switch("alert_received"===e.kind&&A._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void A._log.warn("got alert with empty mapping",{pname:e.alert.pname});A._addAlertBuffered(pe.bZ.create(A._transformRawAlert(e.alert),A._ops,A._positionManager,A._alternativeManager));break;case"alert_removed":A._log.debug("Remove from capi #"+e.alertId+", merged in #"+g.getOrElse((function(){return"None"}))(e.mergedIn)+", hint: "+g.getOrElse((function(){return"None"}))(e.hint)),(0,s.pipe)(A._alertsRepo.getByRawAlertId(e.alertId),g.exists(pe.bZ.isBulkApplied))||A._removeAlertBuffered(v.left({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":A._log.debug("Alert change from capi #"+e.alertId),A._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:g.fromNullable(e.extraProperties),transformJson:g.fromNullable(e.transformJson),muted:g.fromNullable(e.muted)});break;case"finish":A._log.debug("Alerts per revision (#"+e.revision+"): "+A._alertsPerRevision),A._alertsPerRevision=0,"idle"===A._capiClient.checkingState&&A._emitDomainEvent(A._pipeline.reset(e))}}catch(t){A._log.warn("Cannot handle alert event "+e.kind,t)}},this._emitDomainEvent=function(e){(0,s.pipe)(e,A._prepareDiff,_.v.createDiff,f.T.recover((function(e){return A._log.error("conflicts on diff creating",e)})),(function(e){return A._log.debug("_emitDomainEvent",w.p.Diff.show.show(e)),e}),C.r.applyDiff,y.map(f.T.recover((function(e){return A._log.error("conflicts on diff apply",e)}))),(function(e){return A._state.modify(e)}))},this._prepareDiff=function(e){var t=e.added,n=e.updated,r=void 0===n?new Map:n,i=e.removed,c=void 0===i?new Map:i;return r.forEach((function(e,t){(0,s.pipe)(e,a.snd,pe.bZ.fromAlertModel,pe.bZ.shouldBeRemoved)&&(r.delete(t),c.set(t,e[0]))})),c.forEach((0,o.flow)(pe.bZ.fromAlertModel,A._disposeAlert)),{added:t,updated:r,removed:c}},this._disposeAlert=function(e){if(pe.bZ.isApplied(e)&&e.state.undoable.commit(),pe.bZ.isNotRegistered(e))try{A._alertsRepo.remove(e)}catch(t){A._log.error("can not remove alert",t),pe.bZ.isNotDisposed(e)&&e.dispose()}else A._log.error("unexpected remove of registered alert",e.toString())},this._ops=new Ae(this._positionManager,this._getContent,this._capiClient,this._alertsRepo),this.loadScores=function(e){A.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;var x=e.rangeChanged.pipe(T.U((function(e){return e.affected})),B.h((function(e){return e.length>0})),T.U((function(e){return H.vM((function(e){return e.meta.alertId}),e.filter(J.P.is))})),B.h((function(e){return e.size>0})),k.b((function(e){return A._log.debug("Range[s] changed",e)})),z.B()),I=X.F(250).pipe(G.O(0),V.T(this._flush)),E=W.RX(this._log);this._subs.push(E("_alertsInvalidation",this._capiEvents.pipe(B.h(l.h.is("session_started")),k.b(this._invalidateAlerts),q.c(Y.T(this._capiEvents.pipe(B.h(l.h.is("finish")),$.P(),j.h("alert")),this._capiEvents.pipe(B.h(l.h.is("async_check_finished")),$.P(),j.h("plagiarism")))),k.b(this._removeInvalidAlerts))),E("_capiEvents",this._capiEvents.pipe(k.b(this._onCapiEvent))),E("_alertsProccesing",this._addAlerts.pipe(V.T(this._removeAlerts),V.T(this._changeAlerts),V.T(x),Z.f(I),B.h(m.Dw),T.U(this._pipeline.process),k.b(this._emitDomainEvent))),E("_alertsBuffer",x.pipe(V.T(this._capiEvents.pipe(B.h(l.h.is("before_finish","before_async_check_finish","async_check_finished")))),j.h(W.PU),k.b(this._flush))),E("_alertOpsAlertChanges",this._ops.events.pipe(k.b(this._emitDomainEvent))),E("_lensesScoresChanges",R.fromCapi(this._capiEvents).pipe(k.b(W.wW(this.lensesScores)))),E("documentCountersChanges",r.fromAlerts(this._state.view(_.v.iso.wrap)).pipe(k.b(W.wW(this._documentCounters))))),(0,m.iR)("alerts",(function(){return A.toString()})),(0,m.iR)("triggerRemove",(function(e){A._removeAlertBuffered(v.right(e))}))}return e.prototype.flushAlerts=function(){this._flush.next()},e.prototype.loadAlerts=function(e){var t=this,n=new Map;return(0,m.Dw)(e)&&(this._log.debug(e.length+" external alert(s) where loaded"),e.map(Le.I.splitById).map((function(e){var n=e.id,r=e.local;return{id:n,alert:pe.bZ.create((0,s.pipe)(r,u.wQ.matchBy(o.identity,(function(e){return(0,i.__assign)((0,i.__assign)({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,s.pipe)(e.transformJson.alternatives,g.map(d.r3.Group.fromSerialized))}})}),o.identity),t._transformRawAlert),t._ops,t._positionManager,t._alternativeManager)}})).forEach((function(e){var r=e.id,i=e.alert;t._addAlertBuffered(i),r&&n.set(r,i.id)}))),n},e.prototype.toString=function(){return JSON.stringify(this,void 0,2)},e.prototype.toJSON=function(){return{repo:this._alertsRepo}},e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._getTypeFilter=function(e){switch(e){case"alert":return function(e){return!pe.bZ.isPlagiarism(e)};case"plagiarism":return function(e){return pe.bZ.isPlagiarism(e)};default:return(0,h.vE)(e)}},e.prototype._addAlertBuffered=function(e){this._log.trace("_addAlert("+e.toLiteString()+")"),this._addAlerts.next(e)},e.prototype._changeAlertBuffered=function(e){this._log.trace("_changeAlert("+e.id+")"),this._changeAlerts.next(e)},e.prototype._removeAlertBuffered=function(e){this._log.trace("_removeAlert("+_e.toString(e)+")"),this._removeAlerts.next(e)},e.prototype._getAllAlertsAsArray=function(){return this._alertsRepo.toArray().filter(pe.bZ.isNotRemoved)},e}()},53487:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var r,i=n(73805),a=n(64909),o=n(76779),s=n(17753);!function(e){e.create=function(e){var t=function(t){return(0,i.pipe)(e.get(),o.p.get(t),a.map(s.bZ.fromAlertModel))},n=function(e){return(0,i.pipe)(t(e),a.filter(s.bZ.isInteractable))},r=function(e){return(0,i.pipe)(t(e),a.filter(s.bZ.isRegistered))};return{getById:t,getRegistered:r,getInteractable:n,isRegistered:function(e){return(0,i.pipe)(r(e),a.isSome)},isInteractable:function(e){return(0,i.pipe)(n(e),a.isSome)}}}}(r||(r={}))},24273:(e,t,n)=>{"use strict";n.d(t,{J:()=>r,k:()=>y});var r,i=n(489),a=n(65772),o=n(90049),s=n(22902),c=n(71102),l=n(45980),u=n(73805),d=n(84966),p=n(64909),f=n(95574),m=n(81670),h=n(92932),g=n(17753),v=n(10002);!function(e){e.getSubTypeFromLens=function(e){return v.R.isPriority(e)||v.R.isPriorityOutcomeId(e)?d.e3.SidebarPriority:d.e3.Sidebar}}(r||(r={}));var y=function(){function e(e,t){var n=this;this._alertsReader=e,this._ops=t,this._log=h.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=function(e){return(0,u.pipe)(e,n._alertsReader.getById,a.fromOption((function(){return new Error("alert "+e+" not found in the repo")})))},this.undoBulk=(0,l.flow)(c.filterMap((0,l.flow)(this._alertsReader.getById,p.filter(g.bZ.isBulkApplied))),(function(e){return n._ops.undoApplied(e,g.bZ.State.Applied.Method.Bulk)()}),a.getOrElse((function(e){throw n._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,l.flow)(this._findAlert,a.map((function(e){return e.getHighlightRanges()}))),this.hasNewRangesForUpdate=(0,l.flow)(this._findAlert,a.map((function(e){return e.hasNewRangesForUpdate}))),this.applyPendingRangesUpdate=(0,l.flow)(this._findAlert,a.map((function(e){return e.applyPendingRangesUpdate()}))),this.getAppliedRanges=(0,l.flow)(this._alertsReader.getById,a.fromOption((function(){return new Error("alert not found in the repo")})),a.filterOrElse(g.bZ.isApplicableAlert,(function(e){return new Error("alert is not applicable: "+e.alertType)})),a.map((function(e){return e.getAppliedRanges()})))}return e.prototype.apply=function(e,t,n,r){var i=this;return this._log.trace("apply",e),(0,u.pipe)(this._findAlert(e),a.chain(a.fromPredicate(g.bZ.isApplicableAlert,(function(){return new Error("cannot apply not applicable alert")}))),a.chain((function(e){return(0,u.pipe)(f.vM((function(){return e.apply(t,r,n)})),a.mapLeft((function(r){return i._log.error("apply single alert error",{error:r,alert:e.toLiteAlert(),alternativeIndex:t,source:n}),r})))})))},e.prototype.applyBulk=function(e,t){var n=this;this._log.trace("applyBulk",e),this.sendBatchFeedback(e,d.DI.BULK_ACCEPTED,t);var r=(0,u.pipe)(e,m.T.fromArray((function(e){return(0,u.pipe)(n._findAlert(e),a.mapLeft((function(t){return(0,l.tuple)(t,{id:e})})),a.chain(a.fromPredicate(g.bZ.isRegisteredApplicableAlert,(function(e){return(0,l.tuple)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())}))),a.chain(a.fromPredicate((function(e){return d.wQ.withTransformJson(e._raw)}),(function(e){return(0,l.tuple)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())}))),a.mapLeft((function(e){var t=e[0],r=e[1];return n._log.error(t.message,r),t})))})));return(0,u.pipe)(r,m.T.flatMap(i.getMonoid(),(function(e){return(0,u.pipe)(n._ops._applyTransformJson({alerts:e.map((function(e){return{alert:e,alternative:g.bZ.getApplicableAlternative(e,0)}})),source:g.l$.api,method:g.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),o.fold((function(t){return function(){return n._log.error("applyBulk error",t),m.T.of([],e.map((function(e){return e.id})))}}),(function(){return function(){return m.T.of(e.map((function(e){return e.id})))}})))()})))},e.prototype.confirmApplied=function(e){var t=this;return this._log.trace("commitApplied",e),(0,u.pipe)(e,m.T.fromArray((0,l.flow)(this._findAlert,a.map(g.Ev.castApplied))),a.mapLeft((function(e){return new Error("Error on trying to confirm applied alerts: "+e.rejected.join(","))})),a.chain((function(e){return t._ops._confirmApplied(e)()})))},e.prototype.dismissBatch=function(e,t){var n=this;return this._log.trace("dismissBatch",e),(0,u.pipe)(e.map((0,l.flow)(this._findAlert,a.map((function(e){return[e]})))),(0,s.fold)(w),a.chain((function(e){return n._ops._dismissBatch(e,t)()})))},e.prototype.applyFeedback=function(e,t,n){var r=this;return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,u.pipe)(this._findAlert(e),a.chain((function(e){return r._ops._alertFeedback(e,t,n)()})))},e.prototype.sendBatchFeedback=function(e,t,n){var r=this;return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,u.pipe)(e,m.T.fromArray(this._findAlert),m.T.tapFailure((function(e){return r._log.error("Cannot send batch feedback for alerts",e.rejected)})),m.T.foldSuccess((function(e){return a.right(r._ops._alertBatchFeedback(e,t,n)())})))},e.prototype.takeReference=function(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,u.pipe)(this._findAlert(e.id),a.chain((function(e){return e.takeReference(t)})))},e.prototype.changeMuteState=function(e,t){var n=this;return this._log.trace("changeMuteState",e),(0,u.pipe)(e,m.T.fromArray((function(e){return n._findAlert(e.id)})),m.T.flatMap(i.getMonoid(),(function(e){return(0,u.pipe)(n._ops._changeMuteState(e,t)(),a.mapLeft((function(e){return n._log.error("Can not change mute state",e),e})),f.MH)})))},e.prototype.changeGapValue=function(e,t){var n=this;return(0,u.pipe)(this._findAlert(e),a.chain((function(e){return n._ops._changeGapValue(e,t)()})))},e.prototype.changeSmartPhrasesFeedback=function(e,t){var n=this;return(0,u.pipe)(this._findAlert(e),a.chain((function(e){return n._ops._changeSmartPhrasesFeedback(e,t)()})))},e.prototype.rotateSmartPhrasesReplacements=function(e){var t=this;return(0,u.pipe)(this._findAlert(e),a.chain((function(e){return t._ops._rotateSmartPhrasesReplacements(e)()})))},e.prototype.discardSmartPhrasesReplacement=function(e,t){var n=this;return(0,u.pipe)(this._findAlert(e),a.chain((function(e){return n._ops._discardSmartPhrasesReplacement(e,t)()})))},e.prototype.highlightSmartPhrasesLastAppliedReplacement=function(e){var t=this;return(0,u.pipe)(this._findAlert(e),a.chain((function(e){return t._ops._highlightSmartPhrasesLastAppliedReplacement(e)()})))},e.prototype.restoreSmartPhrasesOriginalHighlight=function(e){var t=this;return(0,u.pipe)(this._findAlert(e),a.chain((function(e){return t._ops._restoreSmartPhrasesOriginalHighlight(e)()})))},e}(),b=i.getMonoid(),w=(0,a.getApplyMonoid)(b)},44659:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(12738),i=n(51072),a=n(32952),o=function(){function e(t,n,i,a,o,s,c,l){var u=e.NamedChangesSink.factory(l),d={pm:u(e.Receiver.PM,o),dm:u(e.Receiver.PM,s),capi:u(e.Receiver.CAPI,a),dox:u(e.Receiver.DOX,i),userTextSilent:u(e.Receiver.UserText,e._duplexToSync(t,r.$.Mode.silent)),userTextEcho:u(e.Receiver.UserText,e._duplexToSync(t,r.$.Mode.echo))};e.Producer.create(e.Producer.UserText,{changes:t.changes})(d.dm,d.pm,d.capi,d.dox),e.Producer.create(e.Producer.ALERT_APPLY,c)(d.userTextEcho),e.Producer.create(e.Producer.DOX,i)(d.dm,d.pm,d.userTextSilent,d.capi),n.subscribe((function(e){"before_alert"===e.kind&&t.flushChanges()}))}return e.init=function(t,n,r,i,o,s,c){var l=new a.xQ;return new e(t,n,r,i,o,s,c,l),l},e._duplexToSync=function(e,t){return{pushChanges:function(n){e.pushChanges(n,t)}}},e}();!function(e){!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.changes.subscribe((function(t){n.forEach((function(n){return n.pushChanges(e,t)}))}))}}}(e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(e.Receiver||(e.Receiver={})),function(e){function t(e,t,n){return{pushChanges:function(r,a){try{var o=t.pushChanges(a);"function"==typeof o&&(o=i.Vi(o)),void 0!==o&&o.catch((function(t){return n.next({exception:t,details:{from:r,to:e}})}))}catch(t){n.next({exception:t,details:{from:r,to:e}})}}}}e.factory=function(e){return function(n,r){return t(n,r,e)}},e.create=t}(e.NamedChangesSink||(e.NamedChangesSink={}))}(o||(o={}))},52485:(e,t,n)=>{"use strict";n.d(t,{$:()=>N});var r,i,a=n(73805),o=n(49524),s=n(59312),c=n(65948),l=n(32952),u=n(95300),d=n(24209),p=n(76974),f=n(25656),m=n(18625),h=n(66310),g=n(50628),v=n(77176),y=n(2834),b=n(85985),w=n(95093),_=n(62962),C=n(95343),S=n(13444),A=n(25938),x=n(64450),I=n(83078),E=n(36991),k=n(64909),T=n(22232),R=n(65772),L=n(92932),P=n(12738),M=function(){function e(e){var t=this;this._primarySourceChangeProcessor=e,this._log=L.C8.Logging.getLogger("DuplexImpl",L.zW.LogLevel.DEBUG),this._maybePrimarySourceContent=k.none,this._secondarySourceContent=A.RI.unsafeRes(new x.i),this._syncFlash=new l.xQ,this._syncTimer=i.getImmediateTimer(),this.state=new u.X("idle"),this._changesToSecondarySource=new l.xQ,this._changesToSecondarySourceSync=new l.xQ,this.changesToPrimarySource=new l.xQ,this.changesToSecondarySource=this._changesToSecondarySource.pipe((0,h.w)((function(e){switch(e.kind){case"reset":return t._maybePrimarySourceContent=k.some(e.reset),d.T(t._syncTimer.timer,t._syncFlash).pipe((0,g.P)(),(0,v.U)((function(){var n=t._secondarySourceContent.delta.diff(e.reset.delta);return{fullText:e.reset,change:A.RI.delta(n,t._secondarySourceContent.length)}})));case"change":return t._syncTimer.reset(),p.of({fullText:e.fullText,change:e.change});default:return(0,T.vE)(e)}})),(0,y.b)((function(e){var n=e.fullText;"syncing"===t.state.getValue()&&(t._log.debug("Back to consistent state"),t.state.next("idle")),t._maybePrimarySourceContent=k.none,t._secondarySourceContent=n})),(0,v.U)((function(e){return e.change})),(0,b.h)((function(e){return e.delta.ops.length>0})),(0,w.T)(this._changesToSecondarySourceSync),(0,y.b)((function(){t._log.debug("Emit change to secondary source")})),(0,_.n)(),(0,C.x)())}return Object.defineProperty(e.prototype,"flush",{get:function(){return this._flush(),c.of(void 0)},enumerable:!1,configurable:!0}),e.prototype._flush=function(){this._syncFlash.next(void 0)},e.prototype.getSecondarySourceContents=function(){return this._secondarySourceContent},e.prototype.getPrimarySourceContents=function(){var e=this;return(0,a.pipe)(this._maybePrimarySourceContent,k.getOrElse((function(){return e._secondarySourceContent})))},e.prototype.pushChanges=function(e){switch(e.from){case"primary":return this._pushChangesFromPrimarySource(e.change);case"secondary":return this._pushChangesFromSecondarySource(e.change,e.mode);default:(0,T.vE)(e)}},e.prototype._pushChangesFromPrimarySource=function(e){var t=this;return this._log.debug("Got change from primary source"),(0,a.pipe)(this._primarySourceChangeProcessor(this._secondarySourceContent,this._maybePrimarySourceContent,e),R.map((function(e){"flush"===e.kind?(t._flush(),t._changesToSecondarySourceSync.next(A.RI.flush())):t._changesToSecondarySource.next(e)})))},e.prototype._pushChangesFromSecondarySource=function(e,t){var n=this;switch(this._log.debug("Got change from secondary source",{source:t}),e.kind){case"delta":return k.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=k.some(this._secondarySourceContent)),(0,a.pipe)(this._secondarySourceContent,(function(t){return e.prevLen===t.length?(0,a.pipe)(A.RI.res(t.delta.compose(e.delta)),R.fold((function(){return R.left(new Error("Got non-document delta after apply"))}),(function(t){return R.right([e,t])}))):R.left(new Error("Got delta for wrong text, document length: "+t.length+", got change for "+e.prevLen))}),R.fold((function(e){return n._changesToSecondarySourceSync.next(n._secondarySourceContent),R.left(e)}),(function(e){var r=e[0],i=e[1];return n._secondarySourceContent=i,t===P.$.Mode.echo&&n._changesToSecondarySourceSync.next(r),n.changesToPrimarySource.next(r),R.right(void 0)})));case"reset":return k.isNone(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=k.some(this._secondarySourceContent)),this._secondarySourceContent=e,"echo"===t&&this._changesToSecondarySourceSync.next(e),this.changesToPrimarySource.next(e),R.right(void 0);case"flush":return this.changesToPrimarySource.next(e),R.right(void 0);default:(0,T.vE)(e)}},e}();!function(e){var t;!function(e){e.reset=function(e){return R.right({kind:"reset",reset:e})},e.change=function(e){return R.right((0,s.__assign)({kind:"change"},e))},e.error=function(e){return R.left(new Error(e))}}(t||(t={})),e.deltaChangeProcessor=function(e,n,r){if(A.RI.isFlush(r))return R.right(r);if(0===e.length)return A.RI.isReset(r)?t.change({fullText:r,change:r}):0===r.prevLen?(0,a.pipe)(A.RI.res(r.delta),R.fold((function(){return t.error("Cannot apply non-document delta to an empty text")}),(function(e){return t.change({fullText:e,change:r})}))):t.error("Cannot apply delta to text. Expected change for len 0, but got "+r.prevLen);if(k.isNone(n))return A.RI.isDelta(r)&&e.length!==r.prevLen?t.error("Cannot apply delta for wrong text length, expected "+e.length+", but got "+r.prevLen):(0,a.pipe)(A.RI.res(e.delta.compose(r.delta)),R.fold((function(){return t.error("Cannot apply invalid delta")}),(function(e){return t.change({fullText:e,change:r})})));if(A.RI.isDelta(r)&&I.MH(n).length!==r.prevLen)return t.error("Cannot apply delta for wrong text length");var i=A.RI.isReset(r)?r.delta:I.MH(n).delta.compose(r.delta);return E.s.deltaEq.equals(i,e.delta)?t.change({fullText:e,change:A.RI.delta(new x.i,e.length)}):(0,a.pipe)(A.RI.res(i),R.fold((function(){return t.error("Cannot apply invalid delta")}),t.reset))},e.fullTextProcessor=function(e,n,r){var i=A.RI.unsafeRes((new x.i).insert(r));if(0===e.length)return t.change({fullText:i,change:i});if(k.isNone(n)){var a=e.delta.diff(i.delta);return t.change({fullText:i,change:A.RI.delta(a,e.length+E.s.calcDiffLength(a))})}return E.s.deltaEq.equals(i.delta,e.delta)?t.change({fullText:i,change:A.RI.delta(new x.i,e.length)}):t.reset(i)}}(r||(r={})),function(e){e.getImmediateTimer=function(){return{timer:p.of(void 0),reset:f.Z}},e.getAuditTimer=function(e){var t=k.none;return{timer:m.P((function(){var n=(0,a.pipe)(t,k.fold((function(){return e}),(function(t){var n=Date.now()-t;return n>e?0:n})));return t=(0,a.pipe)(t,I.vx(k.some(Date.now()))),p.of(void 0).pipe((0,S.g)(n),(0,y.b)((function(){t=k.none})))})),reset:function(){return t=k.none}}}}(i||(i={}));var N,F=n(95574),O=n(8125),B=n(44659);!function(e){e.connectAsPrimarySourceToDuplex=function(e){var t=new l.xQ,n=L.C8.Logging.getLogger("DenaliEditorToDuplexConnector",L.zW.LogLevel.DEBUG),i=new M(r.deltaChangeProcessor),s=B.R.NamedChangesSink.factory(t),c=B.R.Producer.create(B.R.Producer.UserText,{changes:i.changesToPrimarySource})(s(B.R.Receiver.DEd,{pushChanges:function(t){e.pushChanges(t,"user")}})),u=B.R.Producer.create(B.R.Producer.DEd,e)(s(B.R.Receiver.UserText,{pushChanges:function(t){var r=i.pushChanges({from:"primary",change:t});(0,a.pipe)(r,F.L9((function(r){return n.error("Cannot pass invalid change from master",r,t),i.pushChanges({from:"primary",change:e.getContents()})})),R.fold((function(e){n.fatal("Cannot reset duplex with full context",e)}),o.y))}}));return{duplex:i,fails:t,dispose:function(){c.unsubscribe(),u.unsubscribe()}}},e.duplexAsUserSource=function(e){return{changes:e.changesToSecondarySource,pushChanges:function(t,n){return e.pushChanges({from:"secondary",change:t,mode:n})},flushChanges:O.ZT,getContents:function(){return e.getSecondarySourceContents()}}},e.connectAsPrimarySourceWithoutDuplex=function(e){return{changes:e.changes,pushChanges:function(t,n){e.pushChanges(t,n===P.$.Mode.echo?"user":"api")},getContents:function(){return e.getContents()},flushChanges:function(){return e.flushChanges()}}}}(N||(N={}))},99516:(e,t,n)=>{"use strict";n.d(t,{n:()=>r,A:()=>i});var r,i,a=n(45980),o=n(25938),s=n(36991),c=n(8125),l=n(97523),u=n(24209),d=n(99391);!function(e){e.noopSync={pushChanges:c.ZT},e.ignoreResult=function(e){return{pushChanges:function(t){e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,a.flow)(e.pushChanges,l.map(c.ZT))}},e.pushDeleteThenInsert=function(e){return{pushChanges:function(t){(o.RI.isDelta(t)?o.RI.fromArrayOfDeltas(s.s.splitToDeleteThenInsert(t.delta).filter(s.s.nonEmpty),t.prevLen):[t]).forEach((function(t){return e.pushChanges(t)}))}}}}(r||(r={})),function(e){e.merge=function(e){return{changes:u.T.apply(d,e.map((function(e){return e.changes})))}}}(i||(i={}))},66654:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r,i,a=n(45980),o=n(73805),s=n(92843),c=n(68983),l=n(64909),u=n(64510),d=n(10002),p=n(76220),f=n(44827);!function(e){e.modelToCounters=function(e){return f.h.isRegistered(e)?e.counters:p.R.empty}}(r||(r={})),function(e){e.monoid=u.getMonoid(d.R.Id.ord,d.R.Meta.group),e.eq=u.getEq(d.R.Id.ord,d.R.Meta.eq),e.isEmpty=u.isEmpty,e.lookup=u.lookup(d.R.Id.ord),e.applyDiff=function(t){return function(r){return function(l){return(0,o.pipe)(r,s.v.foldMap(e.monoid)(i(t),p(t),n(t)),(0,c.W)(e.monoid.concat)(l),u.filter((0,a.not)(d.R.Meta.isEmpty)))}}},e.updatePercentiles=function(e){return function(t){var n=t;return e.forEach((function(e,t){n=(0,o.pipe)(n,u.modifyAt(d.R.Id.ord)(t,d.R.Meta.ratioToPercentile(e)),l.fold((function(){return(0,o.pipe)(n,u.insertAt(d.R.Id.ord)(t,d.R.Meta.fromPercentile(e)))}),a.identity))})),n}};var t=(0,a.flow)(r.modelToCounters,d.R.Meta.fromAlertCounters),n=function(e){return function(n){return f(e)(n,t)}},i=function(e){return function(n){return f(e)(n,(0,a.flow)(t,d.R.Meta.group.inverse))}},p=function(t){return function(r,a){return e.monoid.concat(n(t)(a),i(t)(r))}},f=function(e){return function(t,n){return(0,o.pipe)(e,u.filter((function(e){return e(t.alert)})),u.map((function(){return n(t)})))}}}(i||(i={}))},926:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r,i=n(59312),a=n(27221),o=n(76779),s=n(73343),c=n(93508),l=n(57091),u=n(67434),d=n(52479),p=n(66654);!function(e){e.defaultState={alerts:o.p.empty,lenses:p.w.monoid.empty},e.get=function(r,i,a){return i.pipe(c.O(new Map),l.a(r.pipe(c.O(o.p.empty),u.R((function(e,n){return t(n,a.lensFilters)(e)}),e.defaultState)),n))},e.getMock=function(t,n){var r=a.h.create(e.defaultState);return e.get(t,n,s.t.create(s.t.defaultLensFilters,s.t.defaultTextFilters)).subscribe(d.wW(r)),r};var t=function(e,t){return function(n){var r=o.p.Diff.toRegistered(o.p.diff(n.alerts,e));return{alerts:e,lenses:p.w.applyDiff(t)(r)(n.lenses)}}},n=function(e,t){return(0,i.__assign)((0,i.__assign)({},t),{lenses:p.w.updatePercentiles(e)(t.lenses)})}}(r||(r={}))},38365:(e,t,n)=>{"use strict";n.d(t,{dM:()=>r,j:()=>i});var r,i,a,o,s=n(42654),c=n(76606),l=n(73805),u=n(27221),d=n(89826),p=n(48837),f=n(64909),m=n(83078);!function(e){e.group=p.kT({critical:p.Kh,advanced:p.Kh,free:p.Kh,paid:p.Kh,criticalPriority:p.Kh,advancedPriority:p.Kh,freePriority:p.Kh,paidPriority:p.Kh,unread:p.Kh,muted:p.Kh}),e.eq=s.getStructEq({critical:s.eqNumber,advanced:s.eqNumber,free:s.eqNumber,paid:s.eqNumber,unread:s.eqNumber,criticalPriority:s.eqNumber,advancedPriority:s.eqNumber,freePriority:s.eqNumber,paidPriority:s.eqNumber,muted:s.eqNumber}),e.show=c.aM({critical:c.yt,advanced:c.yt,free:c.yt,paid:c.yt,criticalPriority:c.yt,advancedPriority:c.yt,freePriority:c.yt,paidPriority:c.yt,unread:c.yt,muted:c.yt}),e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(t){return e.eq.equals(t,e.group.empty)}}(r||(r={})),function(e){e.MIN_GOALS=3,e.TOTAL_GOALS=e.MIN_GOALS+2,e.calculateCompleteness=function(t){var n=(0,l.pipe)(t.goals,f.exists((function(e){return e.size>0}))),r=(0,l.pipe)(t.emotions,f.exists((function(e){return e.size>0})));return d.R$.equals(t,d.R$.unset)||(0,l.pipe)(t.domain,m.wo((function(e){return"general"===e})))&&!(f.isSome(t.audience)||f.isSome(t.style)||n||r)?0:Number(n||0)+Number(r||0)+e.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(a||(a={})),function(e){!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(e.CheckingKind||(e.CheckingKind={})),e.Mock={getCheckingForState:function(){return u.h.create({kind:e.CheckingKind.Document,type:"idle"})}}}(o||(o={}))},82578:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r,i,a=n(27221),o=n(89826),s=n(64909),c=n(88111);!function(e){e.unwrap=function(e){return c.Ri.create(s.getOrElse((function(){return e})),s.some)}}(r||(r={})),function(e){e.create=function(e,t,n,i){var c=r.unwrap(t.style),l=r.unwrap(t.audience),u=r.unwrap(t.domain),d=a.h.create(e),p=d.lens("style").lens(c),f=d.lens("domain").lens(u),m={audience:{items:o.R$.audiences,current:d.lens("audience").lens(l),default:s.some(t.audience)},formality:{items:o.R$.formalityLevels,current:p,default:s.some(t.style),shouldDisable:function(e){return f.view((function(t){return!!t&&!o.R$.isStyleValidWithDomain(t,e)}))}},domain:{items:o.R$.domains,current:f,default:s.some(t.domain),shouldDisable:function(e){return p.view((function(t){return n.isFree?"general"!==e:!o.R$.isStyleValidWithDomain(e,t)}))}},intent:{items:o.R$.goals,current:d.lens("goals")},tone:{items:o.R$.tone,current:d.lens("emotions")}};return{localContext:d,blocks:m,showSetGoalsLoader:a.h.create(!n.demoMode&&i)}}}(i||(i={}))},81766:(e,t,n)=>{"use strict";n.d(t,{_F:()=>h});var r=n(45980),i=n(73805),a=n(64909),o=n(45442),s=n(23124),c=n(40644),l=n(38524),u=n(77176),d=n(28043),p=n(2844),f=n(93508),m=n(57091),h=function(e,t,n,r,i,a){return o.Z.composeKnot({content:g(e,t,i,a),root:v(t,n,r)})},g=function(e,t,n,i){var p=t.view(l.nL.Prism.items),f=t.pipe(u.U((function(e){return e.itemsOrd}))),m=t.pipe(u.U((0,r.flow)(l.In.getActiveItem,a.map(c.X.getId)),d.x())),h=t.view("activeAlertsCount").view((function(e){return 0===e}));return o.Z.fromSideEffect((function(t){switch(t.action.action.action.kind){case s.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case s.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}),y(p,f,m,h,n,i))},v=function(e,t,n){return o.Z.fromSideEffect((function(e){t.next(e.element)}),p.aj(n,e.view("cardsHeight")).pipe(u.U((function(e){return{disableUserActions:e[0],height:e[1]}})),f.O({disableUserActions:!1,height:0})))},y=function(e,t,n,r,o,s){return e.pipe(m.a(n,r,t),u.U((function(e){var t=e[0],n=e[1],r=e[2],c=e[3],l=t.getAt(0);return t.filter((function(e){return e.positionState.visible||e.positionState.watched&&function(e,t){return!!(0,i.pipe)(t,a.exists((function(t){return t.id===e.id})))||(0,i.pipe)(t,a.exists((function(e){return e.positionState.isHeightValid})))}(e,l)})).map(o.viewState({activeCard:n,isLastItem:r,ord:c}),s(c))})))}},5304:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r,i=n(59312),a=n(27378),o=n(71215),s=n(85746),c=n(8125),l=n(64909),u=n(51465),d=n(22823),p=n(23124),f=n(95053),m=n(77176);!function(e){var t;function n(e){return u.UI.List.make(f.aW.getFoldableWithIndex(),r(e))}function r(t){return u.UI.Knot.make(e.IdProvider,{cell:u.UI.Knot.make(p.H.Cell,{item:u.UI.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=n,e.cardList=function(t){return u.UI.Knot.make(e.ScrollableBox,{content:n(t)})},e.ScrollableBox=u.UI.Grid.make((function(e){var n=e.notify,r=e.view,u=e.slots;return a.createElement(o.F.div,(0,i.__assign)({},(0,s.Sh)(r("disableUserActions").pipe(m.U((0,c.RN)(g.disableUserActions,void 0))),g.scrollContent),{"data-purpose":"scrollable-box",style:{height:r("height")},mount:function(e){return n({kind:t.onMount,element:l.fromNullable(e)})()}}),u.content)})),e.cell=r,e.CardStyleProvider=u.UI.Grid.make((function(e){var t=e.slots;return a.createElement("div",{className:g.cardWrapper},t.children)})),e.IdProvider=u.UI.Grid.make((function(e){var t=e.slots,n=e.state;return a.createElement(o.F.div,{"data-id":n},t.cell)}))}(r||(r={}));var h={margin:d.u.rem(.5)+" 0",background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:d.u.rem(-.5),width:d.u.rem(.5),height:d.u.percent(100),background:"none",content:"''"}}},g=d.u.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[h]})},60997:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});var r,i=n(51465);!function(e){e.BulkAccept=function(e){return i.UI.Node.make((function(){return null}))}}(r||(r={}))},8824:(e,t,n)=>{"use strict";n.d(t,{p:()=>ml});var r,i,a,o,s,c,l,u,d,p,f,m=n(27378),h=n(71215),g=n(51465),v=n(40644),y=n(45980),b=n(73805),w=n(8125),_=n(92932),C=n(28043),S=n(77176),A=n(59312),x=n(27221),I=n(64909),E=n(73313),k=n(66910),T=n(22823),R=n(13097),L=n(64437),P=T.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),M=T.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),N=T.u.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),F=T.u.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),O=T.u.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),B=T.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),D=T.u.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),H=T.u.keyframes({"0%, 100%":{opacity:0}}),W=T.u.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),U=T.u.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),z=T.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),X=T.u.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),G=T.u.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),V=T.u.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),q={position:"relative",margin:T.u.rem(.5)+" "+T.u.rem(2)+" "+T.u.rem(.5)+" 0",userSelect:"none"},Y={position:"absolute",width:T.u.percent(100),pointerEvents:"none"},$={opacity:0,animation:P+" "+T.u.seconds(R.v4/4/1e3)+" "+"linear "+T.u.seconds(R.v4/1e3)+" forwards"},j={transformOrigin:"top",animation:M+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},Z={transformOrigin:"bottom",animation:N+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},J={transformOrigin:"top",willChange:"contents"},K={animation:F+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},Q={animation:O+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},ee={animation:B+" "+T.u.seconds(R.v4/1e3)+" "+"linear reverse forwards"},te={animation:B+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},ne={animation:D+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},re={animation:D+" "+T.u.seconds(R.v4/1e3)+" "+"linear reverse forwards"},ie={transformOrigin:"top",animation:W+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",willChange:"contents",$nest:(r={},r["& ."+L.g.successWrapperSelector+" > *"]={animation:U+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},r)},ae={position:"absolute",width:T.u.percent(100),transformOrigin:"top",animation:z+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",pointerEvents:"none",$nest:(i={},i["& ."+L.g.fullCardSelector+" > :not(."+L.g.alignButtonHiddenSelector+")"]={animation:X+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},i["& ."+L.g.fullCardSelector+" > ."+L.g.alignButtonHiddenSelector]={animation:H+" "+T.u.seconds(R.v4/1e3)+" "+"linear none"},i["& ."+L.g.fullCardSelector]={transform:"translateY("+T.u.rem(-1)+")"},i)},oe={transformOrigin:"top",animation:G+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",willChange:"contents",$nest:(a={},a["& ."+L.g.fullCardSelector+" > :not(."+L.g.alignButtonHiddenSelector+")"]={animation:V+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},a["& ."+L.g.fullCardSelector+" > ."+L.g.alignButtonHiddenSelector]={animation:H+" "+T.u.seconds(R.v4/1e3)+" "+"linear none"},a)},se=T.u.stylesheet({wrapper:[q],animationWrapper:[{position:"relative"}],shade:[Y],focused2renderedMain:[$],focused2renderedShade:[Y,j],focused2renderedShadeClockwise:[Y,Z],rendered2focusedMainBase:[J],rendered2focusedMain:[J,K],rendered2focusedMainClockwise:[J,Q],addedMain:[ee],rendered2removedShade:[Y,te],openedMain:[ne],closedMain:[re],focused2successMain:[ie],focused2successShade:[ae],success2FocusedMain:[oe]}),ce=new Map([[M,se.focused2renderedShade],[N,se.focused2renderedShadeClockwise],[B,se.rendered2removedShade],[z,se.focused2successShade]]),le=T.u.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),ue=T.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),de=T.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),pe=T.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),fe=T.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),me=T.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),he=T.u.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),ge=T.u.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),ve=T.u.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),ye=T.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),be=T.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),we={opacity:0,animation:le+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},_e={transformOrigin:"top",animation:M+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",$nest:(o={},o["& ."+L.g.bundleInnerContainerSelector]={animation:ue+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",$nest:(s={},s["& ."+L.g.bundleFakeCard1Selector]={animation:de+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},s["& ."+L.g.bundleFakeCard2Selector]={animation:pe+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},s)},o)},Ce={transformOrigin:"top",animation:fe+" "+T.u.seconds(R.v4/1500)+" "+"linear forwards",$nest:(c={},c["& ."+L.g.bundleInnerContainerSelector]={animation:ue+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",$nest:(l={},l["& ."+L.g.bundleFakeCard1Selector]={animation:de+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},l["& ."+L.g.bundleFakeCard2Selector]={animation:pe+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},l)},c)},Se={animation:me+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",$nest:(u={},u["& ."+L.g.bundleInnerContainerSelector]={animation:he+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",$nest:(d={},d["& ."+L.g.bundleFakeCard1Selector]={animation:ge+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},d["& ."+L.g.bundleFakeCard2Selector]={animation:ve+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},d)},u)},Ae={animation:ye+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",$nest:(p={},p["& ."+L.g.bundleInnerContainerSelector]={animation:he+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards",$nest:(f={},f["& ."+L.g.bundleFakeCard1Selector]={animation:ge+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},f["& ."+L.g.bundleFakeCard2Selector]={animation:ve+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},f)},p)},xe={animation:be+" "+T.u.seconds(R.v4/1e3)+" "+"linear forwards"},Ie=T.u.stylesheet({focused2renderedBundleMain:[we],focused2renderedBundleShade:[Y,_e],focused2renderedBundleShadeClockwise:[Y,Ce],rendered2focusedBundleMain:[J,Se],rendered2focusedBundleMainClockwise:[J,Ae],rendered2focusedBundleShade:[Y,xe]}),Ee=new Map([[M,Ie.focused2renderedBundleShade],[fe,Ie.focused2renderedBundleShadeClockwise],[be,Ie.rendered2focusedBundleShade]]);function ke(e){var t=e.from,n=e.transition;if(!e.incomplete)return{};var r=Le("transitionClassMapper");return(0,b.pipe)(t,I.map((function(e){switch(e){case"added":case"rendered":switch(n.type){case"added":return r.error("Impossible transition: "+e+" -> "+n.type),{main:se.addedMain};case"focused":return{main:n.clockwise?se.rendered2focusedMainClockwise:se.rendered2focusedMain};case"removed":return{shade:se.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(n.type){case"rendered":return{main:se.focused2renderedMain,shade:n.clockwise?se.focused2renderedShadeClockwise:se.focused2renderedShade};case"removed":return{main:"",shade:n.clockwise?se.focused2renderedShadeClockwise:se.focused2renderedShade};default:return{}}case"success":switch(n.type){case"removed":return{main:"",shade:n.clockwise?se.focused2renderedShadeClockwise:se.focused2renderedShade};case"focused":return{main:se.success2FocusedMain};default:return{}}case"presuccess":switch(n.type){case"success":return{main:se.focused2successMain,shade:se.focused2successShade};default:return{}}case"removed":switch(n.type){case"added":return r.error("Impossible transition: "+e+" -> "+n.type),{main:se.addedMain};default:return{}}default:return{}}})),I.getOrElse((function(){switch(n.type){case"added":return{main:se.addedMain};case"focused":return{main:se.openedMain};default:return{}}})))}var Te,Re,Le=(0,w.HP)(_.C8.Logging.getLogger),Pe=function(e){var t=e.children;return m.createElement(h.F.div,{role:"animation-wrapper",className:se.animationWrapper},t)},Me=function(e){return v.X.isAlertCard(e)?e.activeAlert.id:e.id},Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._elementState=E.f.emptyWithName("card"),t}return(0,A.__extends)(t,e),t.prototype._stateToElement=function(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;default:return null}},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.card;e.actions.next({type:k.l.Type.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId})},t.prototype.render=function(){var e=this,t=this.props,n=t.actions,r=t.card;if(!r.visualState.incomplete)return m.createElement(Pe,null,m.createElement("div",{key:r.visualState.transition.type},this._stateToElement(r.visualState.transition.type)));var i=v.X.isAlertCard(r)&&v.X.isBundle(r)?function(e){var t=e.from,n=e.transition;return e.incomplete?(0,b.pipe)(t,I.map((function(e){switch(e){case"added":case"rendered":switch(n.type){case"added":return Le("bundleTransitionClassMapper").error("Impossible transition: "+e+" -> "+n.type),{main:se.addedMain};case"focused":return{main:n.clockwise?Ie.rendered2focusedBundleMainClockwise:Ie.rendered2focusedBundleMain,shade:Ie.rendered2focusedBundleShade};case"removed":return{shade:se.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(n.type){case"rendered":return{main:Ie.focused2renderedBundleMain,shade:n.clockwise?Ie.focused2renderedBundleShadeClockwise:Ie.focused2renderedBundleShade};case"removed":return{main:"",shade:n.clockwise?se.focused2renderedShadeClockwise:se.focused2renderedShade};default:return{}}case"success":switch(n.type){case"removed":return{main:"",shade:n.clockwise?se.focused2renderedShadeClockwise:se.focused2renderedShade};case"focused":return{main:se.success2FocusedMain};default:return{}}case"presuccess":switch(n.type){case"success":return{main:se.focused2successMain,shade:se.focused2successShade};default:return{}}case"removed":switch(n.type){case"added":return Le("bundleTransitionClassMapper").error("Impossible transition: "+e+" -> "+n.type),{main:se.addedMain};default:return{}}default:return{}}})),I.getOrElse((function(){switch(n.type){case"added":return{main:se.addedMain};case"focused":return{main:se.openedMain};default:return{}}}))):{}}(r.visualState):ke(r.visualState),a=i.main,o=i.shade,s=x.h.create(void 0===o?I.none:(0,b.pipe)(r.visualState.from,I.map((function(e){return{state:e,className:o}}))));return!a&&I.isNone(s.get())&&requestAnimationFrame((function(){return n.next({type:k.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId})})),m.createElement(E.f.Context.Provider,{value:this._elementState},m.createElement(Pe,null,s.view((0,y.flow)(I.map((function(t){var i=t.state,a=t.className;return m.createElement("div",{className:a,key:"shade"+i+Me(r),onAnimationEnd:function(e){Ee.get(e.animationName)!==a&&ce.get(e.animationName)!==a||(n.next({type:k.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId}),requestAnimationFrame((function(){return s.set(I.none)})))}},e._stateToElement(i))})),I.toUndefined)),m.createElement("div",{className:a,key:"expanded"===r.visualState.transition.type?"focused":r.visualState.transition.type,onAnimationEnd:function(){return n.next({type:k.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId})},onTransitionEnd:function(){"presuccess"===r.visualState.transition.type&&n.next({type:k.l.Type.startTransitionTo,id:r.id,transition:{type:"success",clockwise:r.visualState.transition.clockwise}})}},this._stateToElement(r.visualState.transition.type))))},t}(m.Component),Fe=n(85746),Oe=n(90351),Be=n(71031),De=n(41439),He=n(45836),We=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._createCardToggler=function(e){return function(){return t.props.actions.next({type:k.l.Type.hover,kind:e,id:t.props.cardId})}},t}return(0,A.__extends)(t,e),t.prototype.componentWillUnmount=function(){this._createCardToggler("unhover")()},t.prototype.render=function(){var e=this.props,t=e.getActiveAlert,n=e.cardId,r=e.actions,i=e.children,a=e.counter,o=e.className,s=e.hideActivateButton;return m.createElement(h.F.div,(0,A.__assign)({"data-aid":n,onClick:function(e){var n=t();r.next({type:k.l.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:n},clickPoint:{x:e.clientX,y:e.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,Fe.Sh)(o,Je.wrapper,Je.miniCard)),m.createElement(He.XY,{className:Je.contentWrapper},i),m.createElement("div",{className:Je.iconContainer},a&&m.createElement("div",{className:ze},a),s?null:m.createElement("div",{className:Ge},m.createElement(De.JO.Arrow,{className:Je.activeTopIcon}),m.createElement(De.JO.Arrow,{className:Je.activeBottomIcon}))))},t}(m.Component),Ue="baseMiniCounterContainer",ze=T.u.joinClasses([Ue,T.u.style({position:"absolute",height:T.u.percent(100),top:0,right:0,zIndex:R.VN,margin:"auto 0",background:Oe.Il.CoreNeutral0,opacity:1})]),Xe="baseMiniActivateBtnSelector",Ge=T.u.joinClasses([Xe,T.u.style({position:"absolute",top:0,right:0,height:T.u.percent(100),zIndex:R.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:Oe.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),Ve={position:"relative",display:"flex",overflow:"hidden",borderRadius:T.u.rem(R.fx),background:Oe.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:(Te={"&:hover":{background:Oe.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:T.u.seconds(.2)}},Te["&:hover ."+Xe]={opacity:1},Te["&:hover .baseMiniCounterContainer"]={opacity:0},Te)},qe={overflow:"hidden",margin:"0 "+T.u.rem(3)+" 0 "+T.u.rem(2),color:Be.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:T.u.rem(1.5)},Ye={position:"absolute",top:0,right:T.u.rem(.5),bottom:0,display:"flex"},$e={display:"flex",margin:T.u.rem(.1)+" 0 "+T.u.rem(-1.25),transform:"rotate(180deg)"},je={$nest:{"&:before":{position:"absolute",width:T.u.px(10),height:T.u.px(10),borderRadius:T.u.percent(50),content:"''",transform:"scale(.5)"}}},Ze={$nest:{"&:before":{margin:"auto 0 auto "+T.u.rem(.75)}}},Je=T.u.stylesheet({wrapper:[Ve],contentWrapper:[qe],iconContainer:[Ye],activeTopIcon:[$e],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[je],miniCard:[je,Ze]}),Ke=n(79844),Qe=n(39499),et=n(57091);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(Re||(Re={}));var tt,nt,rt,it=function(e){var t=e.actions,n=e.isLastCard,r=m.useContext(Ke.m.Context).successLens.fixedText.titles,i=x.h.create(Re.stage0),a=function(){return t.next({type:k.l.Type.switchToNext})};return m.createElement(h.F.div,{className:pt.successWrapper},m.createElement(He.P1,{className:pt.successText,onAnimationEnd:function(){i.set(Re.stage1)}},r[(0,w.TN)(r.length)]),m.createElement(h.F.span,null,i.view((function(e){return e>=Re.stage1&&m.createElement("span",{onAnimationEnd:function(){return i.set(Re.stage2)}},m.createElement(De.JO.CheckmarkAnimated,{className:pt.successCheckMark}))}))),m.createElement(h.F.span,{className:pt.successBtnHolder},n.pipe(et.a(i,(function(e,t){return t<Re.stage2?null:e?m.createElement(Qe.zx.Caps,{className:pt.doneBtn,name:"done",key:"done-btn",onClick:a},"Done"):m.createElement(Qe.zx.Caps,{className:pt.successBtn,name:"next",key:"next-card",onClick:a},"Next")})))))},at=T.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),ot={fontWeight:"bold",lineHeight:T.u.rem(2),animation:at+" "+T.u.seconds(.2)+" linear forwards"},st={position:"relative",borderRadius:T.u.rem(R.Jr),background:Oe.Il.CoreNeutral0,boxShadow:"0 "+T.u.rem(.625)+" "+T.u.rem(R.mJ)+" 0 rgba(198, 203, 222, .45)"},ct={display:"flex",padding:T.u.rem(1.5)+" "+T.u.rem(2),alignItems:"center"},lt={marginLeft:T.u.rem(1),minWidth:0,minHeight:0,width:T.u.rem(1.325),height:T.u.rem(1.325),animation:at+" "+T.u.seconds(.2)+" linear forwards"},ut={float:"right",width:T.u.rem(4),textAlign:"center",animation:at+" "+T.u.seconds(.2)+" linear forwards"},dt={backgroundColor:Oe.Il.CoreGreen50,color:Oe.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:Be.mb}}},pt=(0,A.__assign)((0,A.__assign)({},T.u.stylesheet({successText:[ot],successCheckMark:[lt],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[ut],doneBtn:[ut,dt]})),{fullCard:T.u.joinClasses([L.g.fullCardSelector,T.u.style(st)]),successWrapper:T.u.joinClasses([L.g.successWrapperSelector,T.u.style(st,ct)])});!function(e){e.Mini=We,e.Card=Ne,e.Success=it}(tt||(tt={})),function(e){e.Item=function(e){var t=e.className,n=e.children,r=e.onChange,i=e.checked,a=e.tabIndex,o=e.id;return m.createElement(h.F.label,(0,A.__assign)({},(0,Fe.Sh)(wt.radio,t)),i.view((function(e){return m.createElement(m.Fragment,{key:"radio-"+o},m.createElement("input",{onChange:r,tabIndex:a||-1,type:"radio",checked:e,className:wt.radioInputHidden}),m.createElement("span",{className:yt}))})),n)},e.Group=function(t){var n=t.items,r=t.selectedItemIndex,i=t.itemWrapperClassName,a=t.onChange;return m.createElement(h.F.Fragment,null,n.map((function(t,n){return m.createElement(e.Item,{id:n,key:n,onChange:function(){r.set(n),a&&a(n)},checked:r.view((function(e){return n===e})),className:i},t)})))}}(rt||(rt={}));var ft,mt,ht,gt,vt="radioInput",yt=T.u.joinClasses([vt,T.u.style({display:"inline-block",boxSizing:"border-box",minWidth:T.u.rem(1),width:T.u.rem(1),height:T.u.rem(1),border:T.u.rem(.125)+" solid "+Be.FW,borderRadius:T.u.percent(50),backgroundColor:Oe.Il.CoreNeutral0,content:"' '"})]),bt={outline:"none",appearance:"none",$nest:(nt={},nt["&:checked + .radioInput"]={border:T.u.rem(.25)+" solid "+Oe.Il.CoreBlue50},nt)},wt=T.u.stylesheet({radioInputHidden:[bt],radio:[{display:"inline-flex",cursor:"default",alignItems:"center"}]}),_t=n(18244),Ct=function(e){var t=ke(e.visualState).shade;m.useEffect((function(){t||e.onFocus()}),[]);var n=e.theme||{};return m.createElement(h.F.div,{className:n.container},e.header,m.createElement(h.F.div,{className:n.innerContainer},m.createElement(h.F.div,(0,A.__assign)({},(0,Fe.Sh)(Pt.wrapper,n.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),m.createElement(h.F.div,(0,A.__assign)({},(0,Fe.Sh)(Pt.grid,n.content)),m.createElement("div",{className:Pt.mainContent},e.body),m.createElement("div",{className:Pt.footerContent},e.footer),m.createElement("div",{className:Pt.actions},e.subActions,m.createElement("div",{className:Pt.spacerOne}),e.navigation,m.createElement("div",{className:Pt.spacerFloat}),e.mainActions))),e.extra))},St="& > * + *",At=.75,xt={position:"relative"},It={padding:T.u.rem(1)+" "+T.u.rem(.5)+" "+T.u.rem(At)+" "+T.u.rem(1)},Et={padding:"0 "+T.u.rem(.5)+" 0 "+T.u.rem(1),$nest:(ft={},ft[St]={marginTop:T.u.rem(At)},ft)},kt={padding:"0 "+T.u.rem(.5)+" 0 "+T.u.rem(1),$nest:(mt={},mt[St]={marginTop:T.u.rem(At)},mt)},Tt={display:"flex",marginLeft:T.u.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},Rt={width:T.u.rem(1),flexShrink:1},Lt={$nest:(ht={},ht[St]={marginTop:T.u.rem(At)},ht)},Pt=(0,A.__assign)((0,A.__assign)({},T.u.stylesheet({mainContent:[Et],footerContent:[kt],actions:[Tt],spacerOne:[Rt],spacerFloat:[{flex:1}],grid:[Lt]})),{fullCard:T.u.joinClasses([L.g.fullCardSelector,T.u.style(xt)]),wrapper:T.u.joinClasses([L.g.fullCardSelector,T.u.style(xt,It)])}),Mt=n(6322),Nt=n(84966),Ft=n(83078),Ot=n(18208),Bt=n(94503),Dt=n(17753),Ht=n(41199),Wt=n(50536);!function(e){var t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){return!(e===t.Step2||e===t.Step3||e===t.Step5||e===t.Step6||e===t.Step7)}}(gt||(gt={}));var Ut,zt=n(83305);!function(e){e.Regular=function(e){return m.createElement("span",(0,A.__assign)({},(0,Fe.Sh)(Yt.badge,e.className)),e.children)},e.New=function(t){var n=t.className;return m.createElement(e.Regular,{className:n},"New")},e.NewWrapper=function(t){var n=t.children;return m.createElement("div",null,m.createElement(e.New,null),n)},e.Premium=function(t){var n=t.className;return m.createElement(e.Regular,(0,A.__assign)({},(0,Fe.Sh)(Yt.premiumBadge,n)),m.createElement(De.JO.PaidLink,{className:Yt.premiumBadgeIcon,width:12}),"PREMIUM")},e.Business=function(t){var n=t.className;return m.createElement(e.Regular,(0,A.__assign)({},(0,Fe.Sh)(n)),"BUSINESS")}}(Ut||(Ut={}));var Xt={display:"inline-block",padding:T.u.rem(Oe.Zh.BadgeY)+" "+T.u.rem(Oe.Zh.BadgeX),height:T.u.rem(Oe.L3.Badge),borderRadius:T.u.rem(R.mA),background:Oe.Il.CoreGreen10,color:Oe.Il.CoreGreen70,verticalAlign:"middle",textAlign:"center",textTransform:Oe._5.Badge,letterSpacing:Oe.LK.Badge,fontWeight:Oe.U9.Badge,fontSize:T.u.rem(Oe.Bf.Badge),lineHeight:T.u.rem(Oe.L3.Badge)},Gt={marginRight:Oe.Zh.BadgeX,maxWidth:T.u.rem(Oe.L3.Badge),maxHeight:T.u.rem(Oe.L3.Badge),minWidth:T.u.rem(Oe.L3.Badge),minHeight:T.u.rem(Oe.L3.Badge),verticalAlign:"top"},Vt={background:Oe.Il.CoreYellow20,color:Oe.Il.CoreYellow80},qt={fill:Oe.Il.CoreYellow80},Yt=T.u.stylesheet({badge:[Xt],badgeIcon:[Gt],premiumBadge:[Xt,Vt],premiumBadgeIcon:[Gt,qt]}),$t=n(58199),jt=n(52479),Zt=n(99391),Jt=n(76974),Kt=n(2844),Qt=n(93508),en=n(66310);function tn(e){var t=e.value,n=e.initValue,r=void 0===n?$t.g.MIN:n,i=e.wrapperClass,a=e.progressClass,o=e.isLoading,s=void 0===o?Jt.of(!1):o,c=nn(t,r);return m.createElement(h.F.div,(0,A.__assign)({},(0,Fe.Sh)(mn.wrapper,i)),m.createElement(rn,{width:c,progressClass:a,isLoading:s}))}function nn(e,t){void 0===t&&(t=$t.g.MIN);var n=x.h.create(!1);return requestAnimationFrame((function(){return requestAnimationFrame((function(){return n.set(!0)}))})),Kt.aj(jt.Dx(e),n,(function(e,n){return n?e:t}))}function rn(e){var t=e.width,n=e.progressClass,r=e.isLoading,i=t.pipe(S.U((function(e){return e+"%"}))),a=t.pipe(S.U($t.g.prism.reverseGet),S.U((function(e){return e>0?e+.75+"%":0})),Qt.O(0)),o=r.pipe(en.w((function(e){return e?i:"0"}))),s=t.pipe(S.U($t.g.isMin),Zt.shareReplay({bufferSize:1,refCount:!0}));return m.createElement(m.Fragment,null,m.createElement(h.F.div,(0,A.__assign)({},(0,Fe.Sh)(mn.borderContainer,s.pipe(S.U((0,w.RN)(mn.borderContainerZeroWidth,mn.borderContainerWithMinWidth)))),{style:{width:a}})),m.createElement(h.F.div,(0,A.__assign)({},(0,Fe.Sh)(n||mn.defaultProgress,mn.progressBar,s.pipe(S.U((0,w.RN)(mn.progressBarZeroWidth,mn.progressBarWithMinWidth)))),{style:{width:i}})),m.createElement(h.F.div,{className:mn.loading,style:{width:o}}))}var an,on=T.u.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),sn={position:"relative",width:T.u.percent(100),height:T.u.rem(.25),borderRadius:T.u.rem(R.Jr),backgroundColor:Be.xO},cn={position:"relative",top:0,height:T.u.percent(100),borderRadius:T.u.rem(R.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},ln={minWidth:T.u.px(4)},un={position:"absolute",backgroundColor:Oe.Il.CoreNeutral0},dn={minWidth:T.u.px(6)},pn={position:"absolute",minWidth:0,backgroundImage:Be.b6,backgroundSize:"20px 20px",transition:"none",animation:on+" 1s linear infinite"},fn={backgroundImage:Be.Xd},mn=T.u.stylesheet({wrapper:[sn,sn],progressBar:[cn],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[ln],borderContainer:[cn,un],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[dn],loading:[cn,pn],defaultProgress:[fn]}),hn=n(32577),gn=n(16323),vn=n(22232);!function(e){!function(e){e.sparkles="sparkles",e.priority="priority"}(e.Icon||(e.Icon={})),function(e){e[e.lowest=0]="lowest",e[e.low=1]="low",e[e.average=2]="average",e[e.high=3]="high",e[e.highest=4]="highest"}(e.Priority||(e.Priority={})),function(e){e.top="top",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight"}(e.Position||(e.Position={})),function(e){e.standard="standard",e.custom="custom"}(e.ViewType||(e.ViewType={})),e.DefaultTimeout="DefaultTimeout",e.TimeoutDisabled="TimeoutDisabled"}(an||(an={}));var yn,bn,wn={position:"relative",width:T.u.percent(100)},_n={position:"relative",margin:"0 0 "+T.u.rem(.5)},Cn={display:"flex",boxSizing:"border-box",padding:T.u.rem(1)+" "+T.u.rem(2)+" "+T.u.rem(1)+" "+T.u.rem(.75),width:T.u.percent(100),borderRadius:T.u.rem(R.fx),background:Oe.Il.BackgroundNotification,color:Oe.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},Sn={width:T.u.percent(100)},An={display:"inline-block",width:T.u.percent(100)},xn={margin:T.u.rem(-.5)+" "+T.u.rem(.75)+" "+T.u.rem(-.5)+" 0"},In={position:"absolute",top:0,right:0,marginTop:T.u.rem(.5),marginRight:T.u.rem(.4),marginLeft:T.u.rem(.5)},En={stroke:Be.FW},kn={margin:"0 0 "+T.u.rem(.5),color:Oe.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:T.u.rem(Oe.xv.BodySize),lineHeight:T.u.rem(1.25)},Tn={marginTop:T.u.rem(-.1),marginBottom:T.u.rem(-.25),color:Oe.Il.CoreNeutral0,fontSize:T.u.rem(Oe.xv.BodySize),lineHeight:T.u.rem(1.25)},Rn=T.u.prefixedStylesheet("notifications",{wrapper:[wn],notification:[_n],flexibleNotification:[_n,{display:"flex",width:"auto"}],contentWrapper:[Cn],miniContentWrapper:[Cn,{position:"relative",width:"auto"}],fullWidthNotification:[_n,Cn,Sn],content:[An],miniContent:[{flex:1}],alertIcon:[xn],closeIconWrapper:[In],closeIcon:[En],header:[kn],description:[Tn]});!function(e){e.Wrapper=function(t){var r=t.notification,i=t.onClose,a=t.children,o=t.theme,s=void 0===o?{}:o;m.useEffect((function(){return r.actions.next("shown")}),[]);var c={wrapper:s.wrapper||n.wrapper,content:void 0!==s.content?Object.assign({},n.content,s.content):n.content};return m.createElement("div",{className:c.wrapper},m.createElement(e.Base,{metadata:r.metadata,onClose:i,theme:c.content},a))},e.Base=function(n){var r=n.metadata,i=n.onClose,a=n.theme,o=n.children;return m.createElement("div",{className:a.wrapper},t(r,a.icon),m.createElement("div",{className:a.content},o),!function(e){return e.priority===an.Priority.high||e.priority===an.Priority.highest}(r)&&m.createElement(e.CloseButton,{onClick:i,className:a.close}))};var t=function(t,n){switch(t.icon){case an.Icon.sparkles:return m.createElement(De.JO.Sparkles,{className:n});case void 0:case an.Icon.priority:return m.createElement(e.PriorityIcon,{priority:t.priority,className:n});default:return(0,vn.vE)(t.icon)}};e.AdHoc=function(t){var r=t.title,i=t.children,a=t.className,o=t.onClose;return m.createElement("div",(0,A.__assign)({},(0,Fe.Sh)(n.content.wrapper,a)),m.createElement("div",{className:n.content.content},m.createElement(e.TitledContent,{title:r},i)),m.createElement(e.CloseButton,{onClick:o,className:n.content.close}))},e.PriorityIcon=function(e){var t=e.priority,n=e.className;switch(t){case an.Priority.lowest:case an.Priority.low:return m.createElement(De.JO.NotificationInfo,{className:n});case an.Priority.average:return m.createElement(De.JO.NotificationWarning,{className:n});case an.Priority.high:case an.Priority.highest:return m.createElement(De.JO.NotificationError,{className:n});default:return(0,vn.vE)(t)}},e.CloseButton=function(e){var t=e.onClick,n=e.className;return m.createElement(Qe.zx,{name:"closeNotification",className:n,onClick:t},m.createElement(De.JO.Close,{className:Rn.closeIcon,width:12}))},e.TitledContent=function(t){var n=t.title,r=t.children;return r?m.createElement(m.Fragment,null,m.createElement(He.P1,{className:Rn.header},n),m.createElement(e.Content,null,r)):m.createElement(He.P1,{className:Rn.description},n)},e.Content=function(e){var t=e.children;return m.createElement(He.XY,{className:Rn.description},t)};var n={wrapper:Rn.wrapper,content:{wrapper:Rn.fullWidthNotification,icon:Rn.alertIcon,content:Rn.content,close:Rn.closeIconWrapper}}}(yn||(yn={})),function(e){e.Wrapper=function(e){var t=e.notification,n=e.onClose,r=e.children;return m.useEffect((function(){return t.actions.next("shown")}),[]),m.createElement("div",{className:Rn.flexibleNotification},m.createElement(yn.Base,{metadata:t.metadata,onClose:n,theme:{wrapper:Rn.miniContentWrapper,icon:Rn.alertIcon,content:Rn.miniContent,close:Rn.closeIconWrapper}},r))}}(bn||(bn={}));var Ln,Pn=n(63979),Mn=n(54071),Nn=n(60653),Fn=n(66831),On=n(60430),Bn=n(66265),Dn=n(49708),Hn=n(2834),Wn=n(95093),Un=n(17343),zn=n(40151),Xn=n(10002),Gn={$nest:{"&:before":{position:"absolute",width:T.u.px(10),height:T.u.px(10),borderRadius:T.u.percent(50),content:"''",transform:"scale(.5)"}}},Vn={opacity:1,transition:"opacity .3s"},qn={color:Oe.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:Oe.xv.SubheadingLetterSpacing,fontSize:T.u.rem(Oe.xv.SubheadingSize),lineHeight:T.u.rem(Oe.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:T.u.rem(.25)}}},Yn={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:T.u.px(2),left:T.u.rem(-1.1),margin:"auto 0"}}},$n={$nest:{"&:before":{top:0,bottom:0,left:T.u.rem(-1.1),margin:T.u.rem(.25)+" 0 auto 0"}}},jn={margin:"0 "+T.u.rem(.4)+" 0 "+T.u.rem(.2),width:T.u.rem(.85),height:T.u.rem(.85),objectFit:"contain"},Zn={position:"absolute",top:0,bottom:0,left:T.u.rem(-1),margin:"auto",background:Oe.Il.CoreNeutral0,transform:"translateX(-50%)"},Jn={left:T.u.rem(-1),minWidth:T.u.rem(1),minHeight:T.u.rem(1),fill:Oe.Il.CoreYellow50},Kn={minWidth:"initial",minHeight:"initial",padding:T.u.rem(.3)+" "+T.u.rem(.25),cursor:"pointer",borderRadius:T.u.percent(100),marginLeft:T.u.rem(.5),$nest:{"&:hover":{background:Oe.Il.CoreNeutral10}}},Qn={display:"flex",alignItems:"center",padding:"0 "+T.u.rem(.25),borderRadius:T.u.rem(R.fx),cursor:"pointer",background:Oe.Il.CoreYellow20,color:Oe.Il.CoreYellow80,marginLeft:T.u.rem(.5),$nest:{"&:hover":{background:Oe.Il.CoreYellow10}}},er={minWidth:"initial",minHeight:"initial",fill:Oe.Il.CoreYellow80,marginLeft:T.u.rem(.3)},tr={display:"flex",alignItems:"flex-start",top:T.u.rem(.125),minWidth:"initial",minHeight:"initial",background:Oe.Il.CoreNeutral0},nr={color:Oe.Il.CoreNeutral90,textTransform:"none",letterSpacing:Oe.xv.SmallLetterSpacing,fontWeight:Oe.xv.SmallWeight,fontSize:T.u.rem(Oe.xv.SmallSize),lineHeight:T.u.rem(Oe.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},rr={color:Oe.Il.CoreNeutral50,textTransform:"none"},ir={width:T.u.rem(1),height:T.u.rem(1)},ar={display:"inline-flex",padding:"0 "+T.u.rem(.25),borderRadius:T.u.rem(R.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},or={display:"inline-flex",marginLeft:T.u.rem(.1),minWidth:0,minHeight:0},sr=T.u.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[Vn],moreHidden:[Vn,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[qn],lens:[qn,Yn],lensMinimal:[$n],voxLogo:[jn],cardLogo:[Zn],premiumIcon:[Jn],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[Kn],newPremiumLabel:[Qn],newPremiumLabelIcon:[er],takeawayIcon:[tr],minimalTitle:[nr],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[rr],toneLogo:[Zn,ir],fluencyLabel:[qn,ar],fluencyInfo:[or],dot:[Gn],smartPhrasesLabel:[{textTransform:"none"}]});!function(e){e.none="none",e.persistent="persistent",e.new="new"}(Ln||(Ln={}));var cr=function(e){var t=e.className,n=e.vox,r=e.isMinimalCard,i=m.useContext(Ke.m.Context).vox.styleGuide;return m.createElement("div",(0,A.__assign)({},(0,Fe.Sh)(t,sr.voxTitle,r?sr.minimalTitle:void 0)),m.createElement("span",null,n.companyName," ",i))},lr=function(e){var t=e.logoUrl,n=e.className;return m.createElement("img",(0,A.__assign)({src:t},(0,Fe.Sh)(n,sr.voxLogo)))},ur=function(e){var t=e.title,n=e.layoutDensity;return m.createElement(He.XY,{className:(0,b.pipe)(n,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return sr.minimalTitle}),(function(){return sr.toneTitle})))},m.createElement(gn.d,{emojiClassName:sr.toneLogo},t))};function dr(e){return Xn.R.outcomeTypeMatch(e.lensType)({correctness:L.m.dotCorrectness,clarity:L.m.dotClarity,premium:L.m.dotAdvanced,engagement:L.m.dotEngagement,delivery:L.m.dotDelivery,vox:L.m.dotVox})}function pr(e,t,n,r,i){var a=e.extraProperties;return Ht.$.isSmartPhrases(e)?function(e){return{style:dr(e),description:m.createElement(He.x4,{className:sr.smartPhrasesLabel},e.miniCardTitle)}}(e):Ht.$.isDemoPremium(e)?function(e,t){return{style:L.m.dot,description:m.createElement("div",{className:(0,b.pipe)(t,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return sr.minimalTitle}),(function(){})))},m.createElement(De.JO.Paid,(0,A.__assign)({width:14},(0,Fe.Sh)(sr.cardLogo,sr.premiumIcon))),e.lensName)}}(e,n):I.isSome(a.tone)?function(e,t){return{style:dr(e),description:m.createElement(ur,{title:e.title,layoutDensity:t})}}(e,n):t?I.isSome(a.vox)?function(e,t){return{style:L.m.dotVox,description:m.createElement(m.Fragment,null,(0,b.pipe)(e.logoUrl,I.fold((function(){return null}),(function(e){return m.createElement(lr,{logoUrl:e,className:sr.cardLogo})}))),m.createElement(cr,{vox:e,isMinimalCard:t===v.X.RenderOptions.Density.minimal}))}}(a.vox.value,n):Ht.$.isTakeaway(e)?function(e,t,n){return{style:dr(e),description:m.createElement("div",{className:(0,b.pipe)(t,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return sr.minimalTitle}),(function(){})))},Ht.$.isTakeaway(e)&&m.createElement(De.JO.Megaphone,(0,A.__assign)({width:16},(0,Fe.Sh)(sr.cardLogo,sr.takeawayIcon))),t===v.X.RenderOptions.Density.minimal?n:e.lensName)}}(e,n,i):Ht.$.isFree(e)?(0,b.pipe)(n,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return function(e,t){return{style:dr(e),description:t||m.createElement(He.XY,{className:sr.minimalTitle},e.miniCardTitle)}}(e,i)}),(function(){return function(e){return{style:dr(e),description:e.lensName}}(e)}))):function(e,t,n){return{style:dr(e),description:m.createElement("div",(0,A.__assign)({},(0,Fe.Sh)(sr.dualItemLabel,(0,b.pipe)(n,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return sr.minimalTitle}),(function(){}))))),m.createElement("span",{className:sr.dualItemLabel},e.lensName,m.createElement(gr,{highlightStyle:t})))}}(e,r,n):null}var fr,mr=function(e){var t=e.label;return m.createElement("span",{className:sr.fluencyLabel},t,m.createElement(Qe.RZ,{iconWidth:10,buttonClass:sr.fluencyInfo,iconClass:sr.fluencyInfo,title:m.useContext(Ke.m.Context).card.fluency.tooltip}))},hr=function(e){var t=e.style,n=e.description;return m.createElement("span",(0,A.__assign)({},(0,Fe.Sh)(sr.lens,sr.dot,t)),n)},gr=function(e){var t=e.highlightStyle;if(t===Ln.none)return null;var n=m.useContext(Ke.m.Context),r=t===Ln.new?m.createElement("div",{className:sr.newPremiumLabel},n.premiumAlertLabel.new,m.createElement(De.JO.Paid,{className:sr.newPremiumLabelIcon,width:12})):m.createElement(De.JO.Paid,{className:sr.premiumPersistentTooltipIcon,width:10});return m.createElement(Nn.u,{align:"topCenter",title:n.premiumAlertLabel.tooltip.includedWithPaid},r)},vr=function(e){var t=e.style,n=e.description,r=e.extraStyle;return m.createElement("span",(0,A.__assign)({},(0,Fe.Sh)(r,sr.lensMinimal,sr.lens,sr.dot,t)),n)},yr=function(e){return(0,b.pipe)(pr(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.children),I.fromNullable,I.map((function(t){return m.createElement("div",{className:e.className},(0,b.pipe)(e.activeAlert.extraProperties.fluencyMessage,I.fold((function(){return(0,b.pipe)(e.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return m.createElement(vr,(0,A.__assign)({},t))}),(function(){return m.createElement(hr,(0,A.__assign)({},t))})))}),(function(n){return(0,b.pipe)(e.layoutDensity,v.X.RenderOptions.Density.match(m.createElement(m.Fragment,null,m.createElement(hr,(0,A.__assign)({},t)),m.createElement(mr,{label:n})),m.createElement(hr,(0,A.__assign)({},t)),m.createElement(vr,{style:t.style,extraStyle:sr.minimalTitle,description:e.activeAlert.miniCardTitle})))}))))})),I.getOrElse((function(){return m.createElement("div",{"data-purpose":"label-placeholder"})})))},br=["b","i","br","ul","li"];!function(e){e.renderToHtml=function(e,t){var n=t?{allowedTags:br.concat(["a"]),linkRegExp:t}:{allowedTags:br};return _t.yG(e,n)}}(fr||(fr={}));var wr=function(e){var t=e.card,n=t.activeAlert,r=t.id,i=t.visualState,a=e.actions,o=e.mode,s=e.className,c=m.useContext(Ke.m.Context);return m.createElement(Qe.zx.Tertiary,{key:"toggle-more",name:Cr(i,c),title:"mini"===o?Cr(i,c):"",className:s,onClick:_t.hz((function(){var e=v.X.isCardOpen(i);a.next({type:k.l.Type.startTransitionTo,id:r,transition:{type:e?"focused":"expanded",clockwise:!0}}),e||a.next({type:k.l.Type.alertFeedback,alertId:n.id,feedbackType:Nt.PZ.EXPANDED})}))},v.X.isCardOpen(i)?m.createElement(De.JO.Arrow,{key:"more",className:sr.lessIcon}):m.createElement(De.JO.QuestionMark,{key:"expand"}),"default"===o&&Cr(i,c))},_r=function(e){var t=e.visualState,n=e.children,r=e.className;return m.createElement("div",{className:(v.X.isCardOpen(t)?sr.more:sr.moreHidden)+" "+r},n)};function Cr(e,t){var n=t.card;return v.X.isCardOpen(e)?n.less:n.more}var Sr=function(e,t,n,r,i,a){return(0,A.__assign)({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:T.u.rem(2),borderRadius:i,backgroundColor:Oe.Il.CoreNeutral0,boxShadow:r,content:"' '"},a&&"bottom"!==a?{top:n}:{bottom:n})},Ar="0 "+T.u.rem(.25)+" "+T.u.rem(1.625)+" 0 rgba(198, 203, 222, .25)",xr={marginRight:T.u.rem(1),flexShrink:0,maxWidth:T.u.percent(100)},Ir={padding:"0 "+T.u.rem(1)},Er={padding:"0 "+T.u.rem(1.9)+" 0 "+T.u.rem(1)},kr={position:"absolute",top:T.u.rem(.27),right:T.u.rem(.5)},Tr={display:"grid",width:T.u.percent(100),gridGap:T.u.rem(.5),gridTemplateColumns:"fit-content(60%) auto min-content"},Rr={minWidth:T.u.rem(7)},Lr={marginLeft:T.u.rem(.5)},Pr={color:Oe.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:T.u.rem(1.5)},Mr={$nest:{"&:before":Sr(T.u.rem(.5),-10,T.u.rem(-.5),Ar,T.u.rem(R.Jr)),"&:after":Sr(T.u.rem(1),-20,T.u.rem(-1),Ar,T.u.rem(R.Jr))}},Nr={transition:"opacity .2s"},Fr=T.u.prefixedStylesheet("super",{updateAllBtnCommon:[xr],updateAllBtn:[xr,Ir],updateAllBtnLoading:[xr,Er],updateBtnSpinner:[kr],optionsContainer:[Tr],optionLabel:[Rr],optionRadio:[Lr],optionSecondaryAttribute:[Pr],optionExample:[Pr,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic"}],superWrapper:[Mr],loadingWrapper:[Nr],loadingWrapperInvisible:[Nr,{opacity:0,pointerEvents:"none"}]}),Or=n(17629),Br=function(e){var t=e.examples,n=e.layoutDensity;return m.createElement(He.ZT,{nodeType:"table",styleType:He.ZT.Type.Base,className:$r.wrapper},t.map((function(e,t){return m.createElement("tbody",{key:t,className:$r.group},e.map((function(e,t){var r=e.text,i=e.title,a=e.color;return m.createElement("tr",{key:t,className:(0,b.pipe)(n,v.X.RenderOptions.Density.matchL((function(){return $r.item}),(function(){return $r.itemCompact}),(function(){return $r.itemMinimal})))},(0,b.pipe)(i,I.map((function(e){return m.createElement("td",{className:Or.J.colorMatch(a)($r)},function(e){return e.split("/").reduce((function(e,t,n){return 0!==n&&e.push(m.createElement("br",{key:n})),e.push(t),e}),[])}(e))})),I.toNullable),m.createElement("td",(0,A.__assign)({colSpan:I.isNone(i)?2:void 0,className:$r.content},_t.yG(r))))})))})))},Dr={$nest:{"&:not(:last-child):after":{display:"block",height:T.u.rem(1.75),content:"''"}}},Hr={$nest:{"&:not(:last-child)":{borderBottom:T.u.rem(.5)+" solid transparent"}}},Wr={display:"flex",flexDirection:"column",lineHeight:T.u.rem(1.3125)},Ur={padding:0,verticalAlign:"top",lineHeight:T.u.rem(1.25)},zr={paddingRight:T.u.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},Xr={color:Oe.Il.CoreNeutral50,fontStyle:"italic",fontFeatureSettings:R.g_+", "+R.xL},Gr={color:Oe.Il.CoreRed50},Vr={color:Oe.Il.CoreGreen60},qr={color:Oe.Il.CoreNeutral90},Yr={color:Oe.Il.CoreNeutral90},$r=T.u.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[Dr],item:[Hr],itemCompact:[Hr,{display:"flex",flexDirection:"column"}],itemMinimal:[Hr,Wr],baseBlock:[Ur],title:[Ur,zr],content:[Ur,Xr],red:[Ur,zr,Gr],green:[Ur,zr,Vr],yellow:[Ur,zr,qr],fallback:[Ur,zr,Yr]}),jr=n(489),Zr=n(55415),Jr=n(53521),Kr=n(72618);function Qr(e){return e?function(t){return e+"/"+t}:y.identity}var ei,ti=function(e){return m.createElement(He.ZT,(0,A.__assign)({},ri(e),{value:e.value,onChange:e.onChange}))},ni=function(e){return m.createElement(ti,(0,A.__assign)({},e,{nodeType:"input"}))},ri=function(e){return(0,A.__assign)({"data-name":(n=e.name,r=m.useContext(E.f.Context).name,void 0===n?n:"string"==typeof n?Qr(r)(n):n.view(Qr(r))),mount:(t=e.autofocus,t?function(e){return e&&requestAnimationFrame((function(){return e.focus()}))}:void 0),styleType:He.ZT.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress},(0,Fe.Sh)(ai.inputField,e.className));var t,n,r},ii={width:T.u.percent(100),outline:"none",border:"1px solid "+Be.xO,borderRadius:T.u.rem(R.fx),background:Oe.Il.CoreNeutral0,$nest:{"&::placeholder":{color:Be.FW,opacity:1},"&:focus":{borderColor:Oe.Il.CoreBlue50}}},ai=T.u.stylesheet({inputField:[ii],textArea:[{resize:"none"}]}),oi=(0,n(51657).createTypeStyle)(),si=function(e){var t;return{$nest:(t={},t['&[data-indent="'+e+'"]']={marginLeft:T.u.rem(.5*e)},t)}},ci=function(e,t,n,r){var i;return{$nest:(i={},i['&[data-indent="'+t+'"]']={counterIncrement:"card-list"+t,counterReset:r,$nest:{"&:before":{content:"'"+e+"' '\\A\\00a0' counter(card-list"+t+", "+n+") '. '"}}},i)}},li=function(e){return[ci(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),ci(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),ci(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),ci(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),ci(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),ci(e,5,"lower-roman","card-list6 card-list7 card-list8"),ci(e,6,"decimal","card-list7 card-list8"),ci(e,7,"lower-alpha","card-list8"),ci(e,8,"lower-roman","none")]},ui="cards-replacements_labels-",di={list:ui+"list",item:ui+"item",diff:ui+"diff",columnList:ui+"columnList",itemInsert:ui+"itemInsert",deleteAll:ui+"deleteAll",crossed:ui+"crossed",deleteQuote:ui+"deleteQuote",deletePunctuation:ui+"deletePunctuation",deleteDoubleComma:ui+"deleteDoubleComma",deleteApostrophe:ui+"deleteApostrophe",deleteLetter:ui+"deleteLetter",deletePunctuationBeforeLetter:ui+"deletePunctuationBeforeLetter",itemOriginal:ui+"itemOriginal",itemOriginalContent:ui+"itemOriginalContent",removeOrContainer:ui+"removeOrContainer",itemContext:ui+"itemContext",itemContextShifted:ui+"itemContextShifted",or:ui+"or",arrowInsertsList:ui+"arrowInsertsList",cozyArrowInsertsList:ui+"cozyArrowInsertsList",inlineHeader:ui+"inlineHeader",fullSentenceBackground:ui+"fullSentenceBackground",minimalFullSentenceBackground:ui+"minimalFullSentenceBackground",fullSentenceDelete:ui+"fullSentenceDelete",fullSentenceHidden:ui+"fullSentenceHidden",fullSentenceListItem:ui+"fullSentenceListItem",fullSentenceBulletListItem:ui+"fullSentenceBulletListItem",fullSentenceDashedListItem:ui+"fullSentenceDashedListItem",fullSentenceOrderedListItem:ui+"fullSentenceOrderedListItem",fullSentenceOrderedListItemWithFormatting:ui+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:ui+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:ui+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:ui+"fullSentenceInsert",fullSentenceInsertPunctuation:ui+"fullSentenceInsertPunctuation",itemRemove:ui+"itemRemove",oneGapInsert:ui+"oneGapInsert",oneGapInput:ui+"oneGapInput"},pi={position:"relative",overflow:"hidden",margin:"0 "+T.u.rem(.5)+" "+T.u.rem(.5)+" 0",padding:T.u.rem(.25)+" "+T.u.rem(.5),borderRadius:T.u.rem(R.fx),color:Oe.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:T.u.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},fi={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:T.u.rem(.3125),width:"1px",height:"120%",background:Oe.Il.CoreNeutral0,content:"''",opacity:.8}}},mi={position:"relative",marginRight:T.u.rem(.5),whiteSpace:"nowrap"},hi={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:T.u.rem(1)+" 0",padding:T.u.rem(.5),maxHeight:T.u.rem(12),borderRadius:T.u.rem(R.fx),background:Oe.Il.CoreNeutral10,color:Oe.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:R.g_+", "+R.xL},gi={textDecoration:"line-through",position:"relative",marginRight:T.u.rem(.5),maxWidth:"calc(100% - "+T.u.rem(.5)+")",color:Oe.Il.CoreRed40,textDecorationLine:"line-through",overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:T.u.rem(.5),color:Oe.Il.CoreNeutral50,content:"''",verticalAlign:"middle"}}},vi=[si(0),si(1),si(2),si(3),si(4),si(5),si(6),si(7),si(8)],yi={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:R.g_+", "+R.xL},bi={background:Oe.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:Oe.Il.CoreGreen50},"&[data-disabled='true']":{background:Oe.Il.CoreGreen40}}},wi={$nest:{"&:after":{transform:"rotate(-25deg)"}}},_i={paddingRight:T.u.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},Ci={paddingRight:T.u.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},Si={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},Ai={display:"flex",flexBasis:"100%"},xi={margin:"0 "+T.u.rem(.5)+" "+T.u.rem(.5)+" 2px",color:Oe.Il.CoreNeutral60},Ii={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},Ei={marginBottom:T.u.rem(.25),color:Oe.Il.CoreNeutral60,fontWeight:400,fontSize:T.u.rem(.8),lineHeight:T.u.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},ki={color:Oe.Il.CoreRed50,textDecoration:"line-through",fontWeight:600},Ti={background:Oe.Il.CoreRed50,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:Oe.Il.CoreRed40}}},Ri={$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}},Li={$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}},Pi={width:"100%",marginTop:T.u.rem(.5),marginBottom:T.u.rem(.25),$nest:{"&[data-disabled='true']":{background:Oe.Il.CoreNeutral40}}},Mi={marginTop:T.u.rem(.5),lineHeight:"calc("+T.u.rem(2)+" - "+T.u.px(2)+")",padding:"0 "+T.u.rem(.5),border:T.u.important(T.u.px(1)+" solid "+Oe.Il.CoreNeutral50),color:Oe.Il.CoreNeutral90,$nest:{"&:placeholder-shown":{borderColor:T.u.important(Oe.Il.CoreNeutral20)}}},Ni=oi.style(pi,bi),Fi={list:T.u.joinClasses([di.list,T.u.style(yi),oi.style(yi)]),item:T.u.joinClasses([di.item,T.u.style(pi),oi.style(pi)]),itemInsert:T.u.joinClasses([di.itemInsert,T.u.style(pi,bi),Ni]),deleteAll:T.u.joinClasses([di.deleteAll,T.u.style({textDecoration:"line-through"}),oi.style({textDecoration:"line-through"})]),crossed:T.u.joinClasses([di.crossed,T.u.style(fi)]),deleteQuote:T.u.joinClasses([di.deleteQuote,T.u.style(fi,wi),oi.style(fi,wi)]),deletePunctuation:T.u.joinClasses([di.deletePunctuation,T.u.style(fi,_i),oi.style(fi,_i)]),deleteDoubleComma:T.u.joinClasses([di.deleteDoubleComma,T.u.style({textDecoration:"line-through"}),oi.style({textDecoration:"line-through"})]),deleteApostrophe:T.u.joinClasses([di.deleteApostrophe,T.u.style(fi,Ci),oi.style(fi,Ci)]),deleteLetter:T.u.joinClasses([di.deleteLetter,T.u.style(Si),oi.style(Si)]),deletePunctuationBeforeLetter:T.u.joinClasses([di.deletePunctuationBeforeLetter,T.u.style({textDecoration:"line-through"}),oi.style({textDecoration:"line-through"})]),itemOriginal:T.u.joinClasses([di.itemOriginal,T.u.style(gi),oi.style(gi)]),itemOriginalContent:T.u.joinClasses([di.itemOriginalContent,T.u.style({color:Oe.Il.CoreNeutral90}),oi.style({color:Oe.Il.CoreNeutral90})]),removeOrContainer:T.u.joinClasses([di.removeOrContainer,T.u.style(Ai),oi.style(Ai)]),itemContext:T.u.joinClasses([di.itemContext,T.u.style(mi)]),itemContextShifted:T.u.joinClasses([di.itemContextShifted,T.u.style(mi,{marginRight:"2px"}),oi.style(mi,{marginRight:"2px"})]),or:T.u.joinClasses([di.or,T.u.style(xi),oi.style(xi)]),arrowInsertsList:T.u.joinClasses([di.arrowInsertsList,T.u.style(Ii),oi.style(Ii)]),columnList:T.u.joinClasses([di.columnList,T.u.style(Ii,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),oi.style(Ii)]),cozyArrowInsertsList:T.u.joinClasses([di.arrowInsertsList,T.u.style(Ii,{flex:2,flexBasis:"0%"}),oi.style(Ii)]),inlineHeader:T.u.joinClasses([di.inlineHeader,T.u.style(Ei),oi.style(Ei)]),fullSentenceBackground:T.u.joinClasses([di.fullSentenceBackground,T.u.style(hi),oi.style(hi)]),minimalFullSentenceBackground:T.u.joinClasses([di.minimalFullSentenceBackground,T.u.style(hi,{lineHeight:T.u.rem(1.3125)}),oi.style(hi,{lineHeight:T.u.rem(1.3125)})]),fullSentenceDelete:T.u.joinClasses([di.fullSentenceDelete,T.u.style(ki),oi.style(ki)]),fullSentenceHidden:T.u.joinClasses([di.fullSentenceHidden,T.u.style({display:"none"})]),fullSentenceListItem:T.u.joinClasses([di.fullSentenceListItem,T.u.style.apply(T.u,vi),oi.style.apply(oi,vi)]),fullSentenceBulletListItem:T.u.joinClasses([di.fullSentenceBulletListItem,T.u.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),oi.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:T.u.joinClasses([di.fullSentenceDashedListItem,T.u.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),oi.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:T.u.joinClasses([di.fullSentenceOrderedListItem,T.u.style.apply(T.u,(0,A.__spreadArrays)(li(""),vi)),oi.style.apply(oi,(0,A.__spreadArrays)(li(""),vi))]),fullSentenceOrderedListItemWithFormatting:T.u.joinClasses([di.fullSentenceOrderedListItemWithFormatting,T.u.style.apply(T.u,(0,A.__spreadArrays)(li(""),vi)),oi.style.apply(oi,(0,A.__spreadArrays)(li(""),vi))]),fullSentenceBulletListItemWithFormatting:T.u.joinClasses([di.fullSentenceBulletListItemWithFormatting,T.u.style.apply(T.u,(0,A.__spreadArrays)(vi,[Li])),oi.style.apply(oi,(0,A.__spreadArrays)(vi,[Li]))]),fullSentenceDashedListItemWithFormatting:T.u.joinClasses([di.fullSentenceDashedListItemWithFormatting,T.u.style.apply(T.u,(0,A.__spreadArrays)(vi,[Ri])),oi.style.apply(oi,(0,A.__spreadArrays)(vi,[Ri]))]),fullSentenceInsert:T.u.joinClasses([di.fullSentenceInsert]),fullSentenceInsertPunctuation:T.u.joinClasses([di.fullSentenceInsertPunctuation]),diff:T.u.joinClasses([di.diff,T.u.style({fontWeight:"bolder"}),oi.style({fontWeight:"bolder"})]),itemRemove:T.u.joinClasses([di.itemRemove,T.u.style(pi,Ti)]),oneGapInsert:T.u.joinClasses([di.oneGapInsert,T.u.style(pi,bi,Pi),Ni]),oneGapInput:T.u.joinClasses([di.oneGapInput,T.u.style(Mi)])};function Oi(e,t){if(e.length<=4)return null;var n=function(e,t){if(e===t)return;var n=e.length,r=t.length;if(r>n){if(t.substr(0,n)===e)return{from:n,to:n,oldFragment:"",newFragment:t.substr(n)};if(t.substr(r-n)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,r-n)}}if(r<n){if(e.substr(n-r)===t)return{from:0,to:n-r,oldFragment:e.substr(0,n-r),newFragment:""};if(e.substr(0,r)===t)return{from:r,to:n,oldFragment:e.substr(r),newFragment:""}}var i=r<n?r:n,a=function(e,t,n){var r=0;for(;e[r]===t[r]&&r<n;)r+=1;return r}(e,t,i),o=function(e,t,n,r,i){var a=0;for(;e[n-a-1]===t[r-a-1]&&i-a>=0;)a+=1;return a}(e,t,n,r,i);a+o>n&&(o-=a+o-n);a+o>r&&(o-=a+o-r);return{from:a,to:n-o,oldFragment:e.substr(a,n-o-a),newFragment:t.substr(a,r-o-a)}}(e,t);if(void 0===n)return null;var r=n.from,i=n.to,a=n.oldFragment,o=n.newFragment,s=1===o.length&&r>0&&e[r-1]===o,c=1===a.length&&0===o.length&&t[r-1]===a,l=r,u=o;return(s||c)&&(l=r-1),s&&(u=o+o),c&&(u=a),u.length>3?null:[e.substring(0,l),u,e.substring(i)]}T.u.cssRule("."+di.fullSentenceInsert+", ."+di.fullSentenceInsertPunctuation,{color:Oe.Il.CoreGreen60,fontWeight:600}),T.u.cssRule("."+di.fullSentenceDelete+" + ."+di.fullSentenceInsert,{marginLeft:T.u.rem(.25)}),T.u.cssRule("."+di.fullSentenceOrderedListItemWithFormatting+",\n."+di.fullSentenceDashedListItemWithFormatting+",\n."+di.fullSentenceBulletListItemWithFormatting,{color:Oe.Il.CoreGreen60,fontWeight:600}),function(e){e.getClass=function(e,t){return null!==(n=t)&&1===n.length&&/["']/.test(n)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'][.,;]/)}(t)?e.deleteQuote:function(e){var t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'.,;:!?\\\/\-()]+$/)}(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t)?e.deletePunctuationBeforeLetter:e.deleteAll;var n}}(ei||(ei={}));var Bi=function(e){var t=e.transform,n=e.title,r=e.disabled,i=e.boldifier,a=void 0===i?zi:i,o=e.classes,s=void 0===o?Fi:o,c=e.onClick;return m.createElement(Qe.zx,{animationMode:Kr.m.FromClickPoint,name:"apply-insert",onClick:c,title:n,disabled:r,className:s.itemInsert},t.map((function(e,t){return m.createElement(m.Fragment,{key:t},a(e,Fi.diff))})))},Di=function(e){var t=e.transform,n=e.title,r=e.classes,i=void 0===r?Fi:r,a=e.onClick;return m.createElement(Qe.zx,(0,A.__assign)({animationMode:Kr.m.FromClickPoint,name:"apply-remove"},{onClick:a,title:n,className:i.itemRemove}),t.map((function(e,t){return m.createElement(Vi,{key:t,element:e})})))},Hi=function(e){var t=e.transform,n=e.title,r=e.classes,i=void 0===r?Fi:r,a=e.onClick,o=e.children;return m.createElement("div",{className:i.removeOrContainer},t.map((function(e,r){return"text"===e.type?m.createElement("span",{key:r,className:r===t.length-1?i.itemContextShifted:i.itemContext},e.text):m.createElement(Qe.zx,(0,A.__assign)({key:r,animationMode:Kr.m.FromClickPoint,name:"apply-remove-or"},{onClick:a,title:n,className:i.itemRemove}),m.createElement(Vi,{element:e}))})),o)},Wi=function(){return m.createElement("span",{className:Fi.or},m.useContext(Ke.m.Context).card.or)},Ui=function(e){var t=e.transform,n=e.boldifier,r=void 0===n?zi:n;return m.createElement("div",{className:Fi.itemOriginal},m.createElement("span",{className:Fi.itemOriginalContent},t.map((function(e,t){return m.createElement(m.Fragment,{key:t},r(e,Fi.diff))}))))},zi=Zr.ei("text"),Xi=function(e,t){var n=e.text;return"text"===e.type?n:m.createElement("span",{className:t},n)};function Gi(e,t){return function(n){return m.createElement(Ki,{index:t,oldText:e,newText:n.text})}}var Vi=function(e){var t=e.element,n=e.strikeClass;return"delete"===t.type?m.createElement("span",(0,A.__assign)({},(0,Fe.Sh)(ei.getClass(Fi,t.text),n)),t.text):m.createElement(m.Fragment,null,t.text)};var qi,Yi,$i,ji=/^\W/,Zi=(0,y.flow)((0,w.RN)((function(e){switch(e.type){case Jr.GP.Delete:return Fi.fullSentenceDelete;case Jr.GP.Insert:return ji.test(e.text)?Fi.fullSentenceInsertPunctuation:Fi.fullSentenceInsert;case Jr.GP.Text:case Jr.GP.List:return"";default:return(0,vn.vE)(e)}}),(function(e){switch(e.type){case Jr.GP.Delete:return Fi.fullSentenceHidden;case Jr.GP.List:case Jr.GP.Text:case Jr.GP.Insert:return"";default:return(0,vn.vE)(e)}})),(function(e){return function(t){return(0,A.__assign)({children:t.text},(0,Fe.Sh)(e(t)))}}),jr.map),Ji=(0,y.flow)((0,w.RN)((function(e){switch(e.type){case Jr.GP.Delete:return Fi.fullSentenceHidden;case Jr.GP.List:return"bullet"===e.kind?Fi.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?Fi.fullSentenceDashedListItemWithFormatting:Fi.fullSentenceOrderedListItemWithFormatting;case Jr.GP.Insert:case Jr.GP.Text:return"";default:return(0,vn.vE)(e)}}),(function(e){switch(e.type){case Jr.GP.Delete:return Fi.fullSentenceHidden;case Jr.GP.List:return"bullet"===e.kind?Fi.fullSentenceBulletListItem:"dashed"===e.kind?Fi.fullSentenceDashedListItem:Fi.fullSentenceOrderedListItem;case Jr.GP.Insert:case Jr.GP.Text:return"";default:return(0,vn.vE)(e)}})),(function(e){return function(t){return t.type===Jr.GP.List?(0,A.__assign)((0,A.__assign)({},(0,Fe.Sh)(e(t))),{"data-indent":t.indent}):(0,A.__assign)({children:t.text},(0,Fe.Sh)(e(t)))}}),jr.map),Ki=function(e){var t=e.index,n=void 0===t?0:t,r=e.oldText,i=e.newText,a=Oi(r,i);return m.createElement(m.Fragment,null,a?[a[0],m.createElement("span",{key:n,className:Fi.diff},a[1]),a[2]]:i)},Qi=function(e){return m.createElement(He.XY,{className:(0,b.pipe)(e.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return Fi.minimalFullSentenceBackground}),(function(){return Fi.fullSentenceBackground})))},(0,b.pipe)(e.replacements.kind===Jr._k.WithFormatting?Ji(e.showDiff)(e.replacements.labels):Zi(e.showDiff)(e.replacements.labels),(0,jr.mapWithIndex)((function(e,t){return m.createElement("span",(0,A.__assign)({key:e},t))}))))},ea=function(e){var t=m.useContext(Ke.m.Context).card,n=""===e.gapValue;return m.createElement(m.Fragment,null,m.createElement(ni,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:function(t){return e.onChange(t.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:Fi.oneGapInput}),m.createElement(Bi,{title:n?"":t.todoAction(e.replacements.tooltipText),boldifier:Xi,onClick:e.onApply,classes:{itemInsert:Fi.oneGapInsert,inlineHeader:Fi.inlineHeader},disabled:n,transform:ta(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},ta=function(e,t,n){return(0,A.__spreadArrays)(e,[{type:Jr.GP.Insert,text:na(e)+(t||"")+na(n)}],n)},na=function(e){return e.length?" ":""},ra=function(e){var t=e.replacementsLabels,n=e.layoutDensity,r=e.onClick,i=m.useContext(Ke.m.Context).card.todoAction(t.tooltipText);switch(t.type){case Jr.b$.Type.InsertList:return m.createElement(He.Xk,{className:Fi.list},t.labels.map((function(e,t){return m.createElement(Bi,(0,A.__assign)({},{key:t,title:i,onClick:r(t)},{transform:e}))})));case Jr.b$.Type.DeleteList:return m.createElement(He.Xk,{className:Fi.list},t.labels.map((function(e,t){return m.createElement(Di,(0,A.__assign)({},{key:t,title:i,onClick:r(t)},{transform:e}))})));case Jr.b$.Type.Arrow:return function(e,t,n,r){var i=e.labels,a=e.original,o=e.onlyReplacements,s=(1===a.length?[a[0].text,i[0][0].text].map(Gi):[Xi,Xi])[0];return m.createElement(He.Xk,{className:Fi.list},!o&&m.createElement(Ui,{transform:a}),m.createElement("div",{className:n===v.X.RenderOptions.Density.cozy?Fi.cozyArrowInsertsList:i.length>2?Fi.columnList:Fi.arrowInsertsList},i.map((function(e,n){return m.createElement(Bi,(0,A.__assign)({},{key:n,title:t,onClick:r(n)},{transform:e,boldifier:s}))}))))}(t,i,n,r);case Jr.b$.Type.InsertOr:return m.createElement(He.Xk,{className:Fi.list},m.createElement(Bi,(0,A.__assign)({transform:t.labels[0]},{title:i,onClick:r(0)},{boldifier:Xi})),m.createElement(Wi,null),m.createElement(Bi,(0,A.__assign)({transform:t.labels[1]},{title:i,onClick:r(1)},{boldifier:Xi})));case Jr.b$.Type.DeleteOr:return m.createElement(He.Xk,{className:Fi.list},t.labels.map((function(e,n){return m.createElement(Hi,(0,A.__assign)({},{key:n,title:i,onClick:r(n)},{transform:e}),n===t.labels.length-2&&m.createElement(Wi,null))})));case Jr.b$.Type.FullSentence:case Jr.b$.Type.OneGap:return null;default:return(0,vn.vE)(t)}},ia=(0,w.HP)(_.C8.Logging.getLogger);!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=function(t){return(0,b.pipe)(I.fromNullable(t.match(e.actionRegex)),I.chain((function(e){switch(e[1]){case"set-goals":return I.some(k.l.Type.openSetGoals);default:return I.none}})))}}($i||($i={}));var aa=function(e){var t=e.description,n=e.prefix,r=e.actions,i=e.layoutDensity,a=m.useContext(Ke.m.Context),o=m.useContext(Fn.G.Context),s=On.P.useElWatcher(),c=s.ref,l=s.onMount;On.P.useSubscriptionTo(c.pipe(Bn.oA,en.w((function(e){return Array.from(e.getElementsByTagName("a")).reduce((function(e,t){var n=Dn.R(t,"click").pipe(Hn.b((function(e){return e.preventDefault()})));return(0,b.pipe)(I.fromNullable(t.getAttribute("href")),I.chain($i.parse),I.fold((function(){return ia("Description").error("Invalid action",t),e.pipe(Wn.T(n))}),(function(i){return e.pipe(Wn.T(o.getTooltipObservable(t,a.card.actionDescription[i],"auto",I.none),n.pipe(Un.h({type:i}),Hn.b(r))))})))}),zn.E)}))));var u=(0,b.pipe)(i,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return Po.minimalDescription}),(function(){return Po.description})));return void 0!==n?m.createElement(He.XY,{mount:l,className:u},n,m.createElement("span",(0,A.__assign)({},fr.renderToHtml(t,$i.actionRegex)))):m.createElement(He.XY,(0,A.__assign)({mount:l,className:u},fr.renderToHtml(t,$i.actionRegex)))},oa=function(e){var t=e.card,n=e.isChecking;return Dt.bZ.isRated(t.activeAlert)?m.createElement(tn,{value:v.X.isCardPresuccess(t.visualState)?$t.g.MAX:t.meta.percentile,initValue:v.X.isCardPresuccess(t.visualState)?t.meta.percentile:$t.g.MIN,isLoading:n}):null},sa=function(e){var t=e.card,n=nn(v.X.isCardPresuccess(t.visualState)?$t.g.MAX:t.meta.percentile,v.X.isCardPresuccess(t.visualState)?t.meta.percentile:$t.g.MIN);return m.createElement(h.F.Fragment,null,n.pipe(S.U($t.g.prism.reverseGet),S.U((function(e){return m.createElement(Pn.P,{percentage:e,colorType:Pn.P.ColorType.neoBlue,iconSize:Pn.P.IconSize.extraSmall,theme:{radialProgressBar:Po.circleProgress,radialProgressText:Po.circleText}})}))))},ca=function(e){var t=e.card,n=e.feedbackActions;return m.createElement(m.Fragment,null,m.createElement(Qe.zx.Ghost,{name:"takeaway-like",onClick:_t.hz((function(){var e;return n.next({type:k.l.Type.takeawayCorrectlyDetected,alertId:t.activeAlert.id,takeawayText:null!==(e=t.activeAlert.highlightTexts[0])&&void 0!==e?e:""})}))},m.createElement(De.JO.YesCircle,null)," Yes"),m.createElement(Qe.zx.Ghost,{name:"takeaway-dislike",onClick:_t.hz((function(){return n.next({type:k.l.Type.takeawayIncorrectlyDetected,alertId:t.activeAlert.id})}))},m.createElement(De.JO.NoCircle,null)," No"))},la=function(e){var t=e.card,n=e.feedbackActions,r=m.useContext(Ke.m.Context);return m.createElement(m.Fragment,null,m.createElement(Qe.zx.Ghost,{name:"resolve",title:r.resolve,onClick:_t.hz((function(){return n.next({type:k.l.Type.takeawayResolve,alertId:t.activeAlert.id,isLikelyToBeRead:Ht.$.isLikelyToBeReadTakeaway(t.activeAlert)})}))},m.createElement(De.JO.YesCircle,null)),m.createElement(Qe.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:_t.hz((function(){return n.next({type:k.l.Type.takeawayDismiss,alertId:t.activeAlert.id,isLikelyToBeRead:Ht.$.isLikelyToBeReadTakeaway(t.activeAlert)})}))},m.createElement(De.JO.Ignore,null)))},ua=function(e){var t=e.card,n=e.feedbackActions,r=m.useContext(Ke.m.Context);return m.createElement(Qe.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:_t.hz((function(){return n.next({type:k.l.Type.alertIgnore,alertId:t.activeAlert.id,id:t.id,eligibleForDismissSurvey:v.X.isEligibleForDismissSurvey(t)})}))},m.createElement(De.JO.Ignore,null))},da=function(e){var t=e.card,n=e.feedbackActions;return m.createElement(m.Fragment,null,m.createElement(ua,{card:t,feedbackActions:n}),m.createElement(ha,{activeAlert:t.activeAlert,onMute:(0,b.pipe)(t.muteCategory,I.map((function(e){return _t.hz((function(){return n.next({type:k.l.Type.muteAlertCategory,categoryId:e})}))}))),onWrong:_t.hz(_t.hz((function(){return n.next({type:k.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Nt.PZ.WRONG_SUGGESTION})}))),onOffensive:_t.hz(_t.hz((function(){return n.next({type:k.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Nt.PZ.OFFENSIVE_CONTENT})}))),onVisibilityChange:function(e){return n.next({type:k.l.Type.moreActionsButtonToggle,mode:e?"open":"closed"})}}))},pa=function(e){var t=e.onClick,n=m.useContext(Ke.m.Context);return m.createElement(Qe.zx.Flat,{name:"mute",onClick:t},m.createElement(De.JO.Mute,null),n.card.mute)},fa=function(e){var t=e.onClick,n=m.useContext(Ke.m.Context);return m.createElement(Qe.zx.Flat,{name:"incorrect",onClick:t},m.createElement(De.JO.Report,null),n.card.wrong)},ma=function(e){var t=e.activeAlert,n=e.onClick,r=m.useContext(Ke.m.Context);return(0,b.pipe)(t.extraProperties.vox,Ft.dH((function(){return null}),m.createElement(Qe.zx.Flat,{name:"offensive",onClick:n},m.createElement(De.JO.Report,null),r.card.offensive)))},ha=function(e){var t=e.activeAlert,n=e.onMute,r=e.onWrong,i=e.onOffensive,a=e.onVisibilityChange,o=t.getTransform(),s=I.isSome(n);return s||I.isSome(o)?m.createElement(hn.L,{label:m.createElement(Qe.zx.Ghost,{name:"moreActions"},m.createElement(De.T1.MoreVertical,null)),align:"right",theme:{dropdownContainer:Po.dropdownContainer},name:"moreActions",onVisibilityChange:a},(0,b.pipe)(n,I.map((function(e){return m.createElement(pa,{onClick:e})})),Ft.QP),(0,b.pipe)(o,I.map((function(){return m.createElement(m.Fragment,null,s&&m.createElement(hn.L.Delimiter,null),m.createElement(fa,{onClick:r}),m.createElement(ma,{activeAlert:t,onClick:i}))})),Ft.QP)):null},ga=function(e){var t=e.card,n=e.onClick,r=e.mode,i=void 0===r?"default":r,a=m.useContext(Ke.m.Context),o=m.useContext(Bt.a.Context),s=m.useCallback((function(e){o.has(Bt.a.Flag.onlyTrustedEvents)&&!e.isTrusted||n()}),[]),c=t.renderOptions.features.has(v.X.RenderOptions.Features.showAnonymousUserFooters)?{disabled:!0,title:a.card.disabledForAnonymous}:{title:"mini"===i?a.card.addToDict:""};return t.activeAlert.extraProperties.hasAddToDictionary?m.createElement(Qe.zx.Tertiary,(0,A.__assign)({},c,{name:"add-to-dict",onClick:s}),m.createElement(De.JO.Dict,null),a.card.addToDict):null},va=function(e){var t=e.title,n=e.checkingInProgress,r=e.checkingMessage,i=e.applyMessage,a=e.onClick;return m.createElement(Qe.zx.Primary,{key:"update-all",name:"update-all",title:t,className:n.pipe(S.U((0,w.RN)(Fr.updateAllBtnLoading,Fr.updateAllBtn))),disabled:n,children:n.pipe(S.U((0,w.RN)(m.createElement(m.Fragment,{key:"update-all-checking"},Ot.kC(r),m.createElement(Mn.$,{size:18,strokeWidth:2,wrapperClassName:Fr.updateBtnSpinner,variation:"white"})),m.createElement(m.Fragment,{key:"update-all-checked"},Ot.kC(i))))),onClick:_t.hz(a)})},ya=function(e){var t=e.card;return(0,b.pipe)(Ea(t.activeAlert,t.renderOptions.layoutDensity),I.map((function(e){return m.createElement(_r,{key:"card-actions-details",visualState:t.visualState,className:Po.more},e)})),I.toNullable)},ba=function(e){var t=e.card,n=e.actions;return Ia(t.activeAlert,t.renderOptions.layoutDensity)?m.createElement(wr,{key:"card-actions-button",mode:"default",actions:n,card:t}):m.createElement(ga,{key:"card-actions-button",card:t,mode:"default",onClick:_t.hz((function(){return n.next({type:k.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:Nt.PZ.ADD_TO_DICTIONARY})}))})},wa=function(e){return m.createElement(zt.TG,{alignment:"bottom",eventType:"onclick",stepId:gt.StepId.Step4,title:"Accept a correction",message:"Click on a suggestion to apply it to your text.",findFirstButton:{dotPosition:"rightTop"},themes:{containerWrapperClassName:Po.onboardingNotification}},e.children)},_a=function(e){var t=e.onClick,n=e.rl,r=e.layoutDensity;return m.createElement(wa,null,m.createElement(ra,{replacementsLabels:n,onClick:t,layoutDensity:r}))},Ca=function(e){var t=e.text;return m.createElement(He.P1,(0,A.__assign)({className:Po.title},fr.renderToHtml(t)))},Sa=function(e){var t=e.text;return m.createElement(He.P1,(0,A.__assign)({className:Po.titleMinimal},fr.renderToHtml(t)))},Aa=function(e){var t=e.alert;return m.createElement(He.H4,(0,A.__assign)({className:Po.title},fr.renderToHtml(t.title)))},xa=function(e){var t=e.alert,n=e.meta,r=e.options,i=e.children;return m.createElement(yr,{bundle:n.bundleInfo,className:Po.label,activeAlert:t,showCardLabel:r.features.has(v.X.RenderOptions.Features.showLabel),premiumAlertLabelHighlight:r.features.has(v.X.RenderOptions.Features.showNewPremiumCardLabels)?Ln.new:r.features.has(v.X.RenderOptions.Features.showPersistentPremiumCardLabels)?Ln.persistent:Ln.none,layoutDensity:r.layoutDensity},i)};function Ia(e,t){return!e.extraProperties.hasAddToDictionary&&(!Ht.$.isTakeawayWithoutFeedback(e)&&(!(!I.isSome(e.examples)&&!I.isSome(e.details))||!(t!==v.X.RenderOptions.Density.minimal||!I.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation)))}var Ea=function(e,t){if(!Ia(e,t))return Ft.cS();var n=(0,b.pipe)(t,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return Po.minimalDescription}),(function(){return Po.description})));return I.some(m.createElement(m.Fragment,null,(0,b.pipe)(t,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return I.isNone(e.details)?m.createElement(He.XY,(0,A.__assign)({className:n},fr.renderToHtml(e.explanation,$i.actionRegex))):null}),(function(){return null}))),(0,b.pipe)(e.details,I.map((function(e){return m.createElement(He.XY,(0,A.__assign)({className:n},fr.renderToHtml(e)))})),I.toNullable),(0,b.pipe)(e.examples,I.map((function(e){return m.createElement(Br,{layoutDensity:t,examples:e})})),I.toNullable)))},ka=function(e){var t=e.isChecking;return m.createElement(h.F.Fragment,null,t.pipe(S.U((function(e){return m.createElement(Mn.$,{className:e?Po.spinner:Po.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2})}))))},Ta=function(e){var t=m.useState(!0),n=t[0],r=t[1];return n?m.createElement(Ba,{type:e.type,actions:e.actions,onClose:function(){return r(!1)}}):null},Ra=function(e){var t=e.card,n=e.actions;return v.X.isSmartPhrases(t)?m.createElement(Va,{actions:n,card:t}):Ht.$.isDemoPremium(t.activeAlert)?m.createElement(za,{card:t,actions:n}):!Ht.$.isFree(t.activeAlert)&&t.renderOptions.features.has(v.X.RenderOptions.Features.showPremiumTrialFooters)?m.createElement(Wa,{actions:n}):t.renderOptions.features.has(v.X.RenderOptions.Features.showAnonymousUserFooters)?m.createElement(Ha,{actions:n,card:t}):(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.cozy)((function(){return m.createElement(Da,{card:t,actions:n})}),(function(){return(0,b.pipe)(t.activeAlert.extraProperties.fluencyMessage,I.fold((function(){return m.createElement(Da,{card:t,actions:n})}),(function(e){return m.createElement(Ua,{fluencyLabel:e})})))})))};function La(e,t,n){n.next({type:k.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}var Pa,Ma=function(e){var t=e.card,n=e.actions,r=m.useContext(Ke.m.Context).card.matchesNavigation;return m.createElement(h.F.Fragment,null,(0,b.pipe)(t,S.U((function(e){return m.createElement("div",{key:e.activeAlert.id,className:Po.bundleNavWrapper},m.createElement(He.XY,{className:Po.bundleTitle},v.X.bundleTitle(e)),m.createElement("div",{className:Po.bundleNavMatchesRow},m.createElement(Qe.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:Po.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:function(){return La("left",e,n)}},m.createElement(De.JO.Arrow,{className:Po.bundleNavLeftButtonIcon})),m.createElement(He.ck,{className:Po.bundleNavCount},r.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),m.createElement(Qe.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:Po.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:function(){return La("right",e,n)}},m.createElement(De.JO.Arrow,{className:Po.bundleNavRightButtonIcon}))))}))))},Na=function(e){var t=e.card,n=e.actions,r=e.isChecking;return m.createElement(m.Fragment,null,(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return Dt.bZ.isRated(t.activeAlert)?m.createElement(m.Fragment,null,m.createElement(sa,{card:t}),m.createElement(Sa,{text:t.activeAlert.miniCardTitle})):m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions},m.createElement(Sa,{text:t.activeAlert.miniCardTitle}))}),(function(){return m.createElement(m.Fragment,null,m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(Ca,{text:t.activeAlert.title}),m.createElement(oa,{card:t,isChecking:r}))}))),m.createElement(aa,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity}))},Fa=function(e){var t=e.card,n=e.actions,r=m.useContext(Ke.m.Context),i=Ht.$.isTakeawayWithoutFeedback(t.activeAlert)?r.card.takeaway.defaultTitle:t.activeAlert.title,a=(0,b.pipe)(t.activeAlert,I.fromPredicate(Ht.$.isTakeaway),I.chain((function(e){return I.fromNullable(e.highlightTexts[0])}))),o=(0,b.pipe)(t.activeAlert,I.fromPredicate((0,w.W9)(Ht.$.isUnlikelyToBeReadTakeaway,Ht.$.isLikedTakeaway)),I.map((function(){return t.meta.explanation})));return m.createElement(m.Fragment,null,(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions},m.createElement(Sa,{text:v.X.miniTitle(t,r)}))}),(function(){return m.createElement(m.Fragment,null,m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(Ca,{text:i}))}))),(0,b.pipe)(a,I.fold(y.constNull,(function(e){return m.createElement(Oa,{text:e,layoutDensity:t.renderOptions.layoutDensity})}))),(0,b.pipe)(o,I.fold(y.constNull,(function(e){return m.createElement(aa,{description:e,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},Oa=function(e){var t=e.text,n=e.layoutDensity;return m.createElement("div",{className:Po.highlightedTextBox},m.createElement(He.XY,{className:(0,b.pipe)(n,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return Po.minimalHighlightedTextInnerBox}),(function(){return Po.highlightedTextInnerBox})))},t))},Ba=function(e){var t=m.useContext(Ke.m.Context),n=t.card.onboarding[e.type],r=n.title,i=n.content;return m.useLayoutEffect((function(){return function(){return e.actions.next({type:k.l.Type.onboardingClose,value:e.type})}}),[]),m.createElement(yn.AdHoc,{key:"new-notification",title:m.createElement(m.Fragment,null,r,m.createElement(Ut.Regular,{className:Po.newLabel},t.new)),className:Po.newCheckNotification,onClose:e.onClose},i)},Da=function(e){var t=e.actions,n=e.card,r=m.useContext(Ke.m.Context);return On.P.useEffectOnDidMount((function(){n.meta.showMuteQuotedAdvice&&t.next({type:k.l.Type.muteQuotedAdviceShow})})),n.meta.showMuteQuotedAdvice?m.createElement(Pa.Base,{className:uo},m.createElement("span",null,r.card.muteCitedText(m.createElement("a",{"data-name":"open-preferences-link",onClick:function(){return t.next({type:k.l.Type.openPreferences})}},r.documentSettings.editorSettings))),m.createElement(Qe.zx,{name:"dismiss-mute-quoted-advice",onClick:function(){return t.next({type:k.l.Type.dismissMuteQuotedAdvice})}},m.createElement(De.JO.Close,null))):null},Ha=function(e){var t=e.actions,n=e.card,r=m.useContext(Ke.m.Context),i=n.activeAlert.extraProperties.hasAddToDictionary?r.anonymousUserAddToDictionarySignInPrompt:r.anonymousUserGenericSignInPrompt;return m.createElement(Pa.Base,{className:Po.anonymousUserNotice},i((function(){t.next({type:k.l.Type.toSignIn})})))},Wa=function(e){var t=e.actions;return m.createElement(Pa.Small,{className:fo},m.createElement(De.JO.PaidLink,{className:Po.iconWrapper,width:12}),m.useContext(Ke.m.Context).premiumFreeTrial((function(){t.next({type:k.l.Type.premiumTrialFooterCtaClick})})))},Ua=function(e){var t=e.fluencyLabel,n=m.useContext(Ke.m.Context).card.fluency,r=Object.keys(Mt.n5.PrimaryLanguage).filter((function(e){return e!==Mt.n5.PrimaryLanguage.Other})).map((function(e){return e.toLowerCase()})),i=t.toLowerCase(),a=(0,b.pipe)(I.fromNullable(r.find((function(e){return i.includes(e)}))),I.map(Ot.kC),I.getOrElse((function(){return"multilingual"})),n.cardFooter);return m.createElement(He.x4,{className:Po.fluencyNotice},a,m.createElement(Nn.u,{title:n.tooltip},m.createElement(De.JO.Info,{width:10,className:Po.fluencyInfo})))};!function(e){function t(e){return function(t){var n=t.children,r=t.className;return m.createElement(e,(0,A.__assign)({},(0,Fe.Sh)(Po.cardFooter,r)),n)}}e.Small=t(He.x4),e.Base=t(He.XY)}(Pa||(Pa={}));var za=function(e){var t=e.card,n=e.actions;return m.createElement(Pa.Small,{className:t.renderOptions.upgradeDemoPremiumNotice===Wt.YH.yellow?Po.demoPremiumNoteYellow:Po.demoPremiumNoteGray},m.useContext(Ke.m.Context).demoPremiumNote((function(){n.next({type:k.l.Type.toUpgrade})})))},Xa=function(e){var t=e.title,n=e.children;return m.createElement("div",{className:Po.cardWrapper},m.createElement("div",{className:Po.cardWrapperTitle},t),n)},Ga=function(e){var t=e.className,n=e.title,r=e.emoji,i=e.hideBetaBadge,a=m.useContext(Ke.m.Context);return m.createElement("div",(0,A.__assign)({},(0,Fe.Sh)(Po.smartPhrasesTitle,t)),m.createElement("div",null,m.createElement(gn.d,{className:Po.smartPhrasesTitleEmoji},r),n),i?null:m.createElement(Ut.Regular,null,a.beta))},Va=function(e){var t=e.card,n=e.actions,r=m.useContext(Ke.m.Context);return t.activeAlert.usedReplacementsIndexes.length>0?null:m.createElement("div",{className:Po.smartPhrasesFooter},Boolean(t.activeAlert.helpfulFeedback)?r.card.smartPhrases.helpfulFeedbackThankYouNote:r.card.smartPhrases.helpfulFeedbackQuestion,m.createElement("div",{className:Po.smartPhrasesFooterHelpfulFeedback},m.createElement(Qe.zx.Ghost,{name:"smart-phrases-"+t.activeAlert.intent+"-helpful-feedback-yes",title:r.card.smartPhrases.helpfulFeedbackYes,active:t.activeAlert.helpfulFeedback===Dt.Zy.SMART_PHRASES_HELPFUL,disabled:Boolean(t.activeAlert.helpfulFeedback),onClick:_t.hz((function(){return n.next({type:k.l.Type.smartPhrasesFeedback,alertId:t.activeAlert.id,cardId:t.id,feedbackType:Dt.Zy.SMART_PHRASES_HELPFUL})}))},m.createElement(De.JO.VotedYes,null)),m.createElement(Qe.zx.Ghost,{name:"smart-phrases-"+t.activeAlert.intent+"-helpful-feedback-no",title:r.card.smartPhrases.helpfulFeedbackNo,active:t.activeAlert.helpfulFeedback===Dt.Zy.SMART_PHRASES_NOT_HELPFUL,disabled:Boolean(t.activeAlert.helpfulFeedback),onClick:_t.hz((function(){return n.next({type:k.l.Type.smartPhrasesFeedback,alertId:t.activeAlert.id,cardId:t.id,feedbackType:Dt.Zy.SMART_PHRASES_NOT_HELPFUL})}))},m.createElement(De.JO.VotedNo,null))))},qa={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",textDecoration:"none",$nest:{"&:link, &:visited":{color:Oe.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:R.g_+", "+R.xL},"& ul":{margin:T.u.rem(.75)+" 0 0",padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:T.u.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:T.u.rem(.5)}}},Ya={lineHeight:T.u.rem(1.3125)},$a={$nest:{"& i":{color:Oe.Il.CoreNeutral50},"& > * + *":{marginTop:T.u.rem(.75)}}},ja={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:Be.kl}}},Za={marginTop:T.u.important(0),lineHeight:T.u.rem(1.125)},Ja={fontSize:T.u.rem(Oe.xv.SubheadingSize),lineHeight:T.u.rem(Oe.xv.SubheadingLineHeight)},Ka={width:T.u.rem(2),height:T.u.rem(2)},Qa={position:"absolute",top:"calc(50% - "+T.u.rem(1)+")",left:"calc(50% - "+T.u.rem(1)+")",width:T.u.rem(2),height:T.u.rem(2),transition:"opacity .2s"},eo={marginLeft:T.u.rem(.5),backgroundColor:Oe.Il.CoreGreen50,color:Oe.Il.CoreNeutral0,fontWeight:600},to={position:"absolute",marginTop:T.u.rem(-8.5),marginLeft:T.u.rem(-2),$nest:{"&:after":{position:"absolute",bottom:T.u.rem(-.525),left:T.u.rem(.7),borderTop:T.u.rem(.625)+" solid "+Oe.Il.BackgroundNotification,borderRight:T.u.rem(.5)+" solid transparent",borderLeft:T.u.rem(.5)+" solid transparent",content:"' '"}}},no={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},ro={position:"absolute",top:T.u.rem(.75),left:T.u.rem(.4)},io={color:Oe.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:Oe.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:Oe.Il.CoreBlue50},"&:hover":{borderBottom:"1px solid "+Oe.Il.CoreBlue40,color:Oe.Il.CoreBlue40}}}}},ao={display:"flex",borderRadius:R.LB+" "+R.LB+" "+T.u.rem(R.Jr)+" "+T.u.rem(R.Jr),color:Oe.Il.CoreNeutral50,padding:T.u.rem(.5)+" "+T.u.rem(.75)+" "+T.u.rem(.5)+" "+T.u.rem(1),fontSize:T.u.rem(.6875),lineHeight:T.u.rem(1.125)},oo={padding:"0 "+T.u.rem(.6),minWidth:T.u.rem(.625),minHeight:T.u.rem(.625)},so={display:"grid",gridTemplateColumns:"auto min-content min-content",alignItems:"center",columnGap:T.u.rem(.25),borderRadius:R.LB+" "+R.LB+" "+T.u.rem(R.Jr)+" "+T.u.rem(R.Jr),background:Oe.Il.CoreNeutral10,color:Oe.Il.CoreNeutral50,padding:T.u.rem(.5)+" "+T.u.rem(1)+" "+T.u.rem(.5)+" "+T.u.rem(1),fontSize:T.u.rem(.75),lineHeight:T.u.rem(1.125)},co={$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:Oe.Il.CoreNeutral20}}},lo="muteQuotedAdvice",uo=T.u.joinClasses([lo,T.u.style({$nest:{"& a":{borderBottom:"1px solid "+Oe.Il.CoreBlue50,color:Oe.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:Oe.Il.CoreBlue50},"&:hover":{borderBottom:"1px solid "+Oe.Il.CoreBlue40,color:Oe.Il.CoreBlue40}}},"& i:hover":{strokeWidth:T.u.px(2)}}})]),po="premiumFreeTrial",fo=T.u.joinClasses([po,T.u.style({$nest:{"& svg":{fill:Oe.Il.CoreYellow80},"& a":{fontWeight:800,color:Oe.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:Oe.Il.CoreYellow80},"&:hover":{borderBottom:"1px solid "+Oe.Il.CoreYellow60,color:Oe.Il.CoreYellow60}}}}})]),mo={display:"block",padding:T.u.rem(1)+" "+T.u.rem(1)+" "+T.u.rem(1)+" "+T.u.rem(1.5),width:T.u.percent(100),borderRadius:R.LB+" "+R.LB+" "+T.u.rem(R.Jr)+" "+T.u.rem(R.Jr),$nest:(qi={"& a":{cursor:"pointer",transition:"color .2s"}},qi["&.muteQuotedAdvice"]={display:"flex",padding:T.u.rem(1)+" "+T.u.rem(1)+" "+T.u.rem(1)+" "+T.u.rem(2),background:Oe.Il.CoreNeutral10,color:Oe.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},qi["&.premiumFreeTrial"]={padding:T.u.rem(1)+" "+T.u.rem(1)+" "+T.u.rem(1)+" "+T.u.rem(2),position:"relative",background:Oe.Il.CoreYellow20,color:Oe.Il.CoreNeutral90},qi)},ho={position:"absolute",top:T.u.rem(.8),left:T.u.rem(.5),minWidth:T.u.rem(1),minHeight:T.u.rem(1)},go={background:Oe.Il.CoreNeutral1,color:Oe.Il.CoreNeutral50,$nest:{"& a":{borderBottom:"1px solid "+Oe.Il.CoreNeutral50,$nest:{"&:link, &:visited":{color:Oe.Il.CoreNeutral50},"&:hover":{borderBottom:"1px solid "+Oe.Il.CoreNeutral50,color:Oe.Il.CoreNeutral50}}}}},vo={background:Oe.Il.CoreYellow10,color:Oe.Il.CoreYellow60,$nest:{"& a":{borderBottom:"1px solid "+Oe.Il.CoreYellow60,$nest:{"&:link, &:visited":{color:Oe.Il.CoreYellow60},"&:hover":{borderBottom:"1px solid "+Oe.Il.CoreYellow60,color:Oe.Il.CoreYellow60}}}}},yo={fontWeight:"bold",fontSize:T.u.rem(.875),lineHeight:T.u.rem(1.125),flex:2},bo={padding:T.u.rem(.625)+" 0 "+T.u.rem(.1875)+" "+T.u.rem(.5),marginBottom:T.u.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},wo={fontSize:T.u.rem(.75),lineHeight:T.u.rem(1.125),color:Oe.Il.CoreNeutral90},_o={display:"flex",justifyContent:"flex-end",alignItems:"center",height:T.u.rem(1.5),$nest:{"& > * + *":{marginLeft:T.u.rem(.25)},"& > *":{borderRadius:T.u.rem(R.fx)}}},Co={height:T.u.rem(2),minHeight:T.u.rem(2),width:T.u.rem(2),fill:Oe.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:Oe.Il.CoreBlue50},"&[data-disabled='true']":{fill:Oe.Il.CoreNeutral30}}};function So(e,t){return{display:["block","-webkit-box"],maxHeight:T.u.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}var Ao=(0,A.__assign)((0,A.__assign)({},So(1.5,3)),{lineHeight:T.u.rem(1.5)}),xo=(0,A.__assign)((0,A.__assign)({},So(1.3125,3)),{lineHeight:T.u.rem(1.3125)}),Io={margin:T.u.rem(1)+" 0",padding:T.u.rem(.5),borderRadius:T.u.rem(R.fx),background:Oe.Il.CoreNeutral10,color:Oe.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:R.g_+", "+R.xL},Eo={borderRadius:T.u.rem(.75),background:Oe.Il.CoreNeutral20,margin:T.u.rem(-.25)+" "+T.u.rem(-.25),padding:T.u.rem(.25)+" "+T.u.rem(.25),$nest:(Yi={},Yi["& ."+L.g.cozyCardContainerSelector]={margin:0,boxShadow:"none"},Yi["& ."+L.g.fullCardSelector]={padding:T.u.rem(.75)+" "+T.u.rem(.5)+" "+T.u.rem(.5)+" "+T.u.rem(1)},Yi["& [role=dropdown-list]"]={transform:"translateY("+T.u.rem(-.5)+")"},Yi)},ko={paddingTop:T.u.rem(.25),paddingBottom:T.u.rem(.5),paddingLeft:T.u.rem(.5),paddingRight:T.u.rem(.5),fontWeight:"bold",fontSize:T.u.rem(.875),lineHeight:T.u.rem(1.125)},To={marginRight:T.u.rem(.5)},Ro={display:"flex",alignItems:"center",justifyContent:"space-between",background:Oe.Il.CoreNeutral10,borderRadius:R.LB+" "+R.LB+" "+T.u.rem(.5)+" "+T.u.rem(.5),padding:T.u.rem(.6875)+" "+T.u.rem(1)+" "+T.u.rem(.6875)+" "+T.u.rem(1),color:Oe.Il.CoreNeutral50,fontSize:T.u.rem(.6875),lineHeight:T.u.rem(1.125)},Lo={display:"flex",alignItems:"center",$nest:{'& div[role="button"]:first-child':{marginRight:T.u.rem(.125)}}},Po=T.u.stylesheet({description:[qa],minimalDescription:[qa,Ya],highlightedTextBox:[Io],highlightedTextInnerBox:[Ao],minimalHighlightedTextInnerBox:[xo],more:[$a],onboardingNotification:[{display:"block"}],title:[ja],titleMinimal:[ja,Za],label:[Ja],dropdownContainer:[Ka],spinner:[Qa],spinnerInvisible:[Qa,{opacity:0,pointerEvents:"none"}],newLabel:[eo],newCheckNotification:[to],baseNotice:[no],iconWrapper:[ro],anonymousUserNotice:[no,io],fluencyNotice:[no,ao],fluencyInfo:[oo],takeawayFooter:[so],takeawayFooterButtonGhost:[co],cardFooter:[mo],circleProgress:[ho],circleText:[{display:"none"}],demoPremiumNoteGray:[go],demoPremiumNoteYellow:[vo],bundleTitle:[yo],bundleNavWrapper:[bo],bundleNavCount:[wo],bundleNavMatchesRow:[_o],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[Co],bundleNavLeftButtonIcon:[Co,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[Co,{transform:"rotate(270deg)"}],cardWrapper:[Eo],cardWrapperTitle:[ko],smartPhrasesTitle:[{display:"flex",justifyContent:"space-between"}],smartPhrasesTitleEmoji:[To],smartPhrasesFooter:[Ro],smartPhrasesFooterHelpfulFeedback:[Lo]}),Mo=T.u.style({margin:T.u.rem(1)+" 0"}),No=T.u.style({marginLeft:T.u.rem(.5),lineHeight:T.u.rem(1.3125),fontSize:T.u.rem(.875),color:Oe.Il.CoreNeutral90}),Fo=T.u.style({marginTop:"0 !important",$nest:{"&:not(:last-child)":{marginBottom:T.u.rem(1)}}}),Oo=T.u.style({marginTop:"0 !important",marginLeft:T.u.rem(1)}),Bo={color:Oe.Il.CoreRed60,fontSize:T.u.rem(.75),lineHeight:T.u.rem(1.125)},Do=T.u.style(Bo),Ho=T.u.style(Bo,{visibility:"hidden"}),Wo=n(31484),Uo=n(34095),zo=n(55935),Xo=n(32952),Go=n(24209),Vo=n(41398),qo=n(85985),Yo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=m.useContext(Ke.m.Context);return m.createElement(Jo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:(0,y.constant)(m.createElement(Na,{card:t,actions:n,isChecking:r})),cardFooter:function(e){return m.createElement(m.Fragment,null,m.createElement(ya,{card:t}),m.createElement("div",{className:Ss.fullSentenceCardFooterBtns},m.createElement(va,{title:a.card.todoAction(t.activeAlert.todoAction),applyMessage:t.activeAlert.todoAction,checkingMessage:t.activeAlert.todoAction,checkingInProgress:e,onClick:_t.hz((function(){n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:k.l.getCardType(t)})}))})))}})},$o=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform,o=m.useContext(Ke.m.Context),s=x.h.create(!0);return On.P.useSubscriptionTo((0,b.pipe)(s,zo.T(1),Hn.b((function(e){return n.next({type:k.l.Type.fullSentenceHighlightChangesToggle,showChanges:e})})))),m.createElement(Jo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:(0,y.constant)(m.createElement(h.F.Fragment,null,m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),t.renderOptions.layoutDensity===v.X.RenderOptions.Density.minimal&&m.createElement(Ut.Regular,{className:Ss.minimalBetaLabel},o.beta),m.createElement(cs,{isNew:t.renderOptions.isNew,actions:n}),(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return m.createElement(aa,{prefix:m.createElement(Ut.Regular,{className:Ss.betaLabel},o.beta),description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))),m.createElement(Wo.T9,{classes:{rendered:Ss.replacement,removing:Ss.replacementHidden},timeout:250,content:s.pipe(et.a(a,(function(e,n){return(0,b.pipe)(n,I.fold((function(){return _.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:t.id}),null}),(function(n){return m.createElement(Qi,{replacements:n,showDiff:e,layoutDensity:t.renderOptions.layoutDensity})})))})))}),m.createElement(oa,{card:t,isChecking:r}))),cardFooter:function(e){return m.createElement(m.Fragment,null,m.createElement(ya,{card:t}),m.createElement(h.F.div,{className:Ss.fullSentenceCardFooterBtns},m.createElement(va,{title:a.pipe(S.U(I.fold((function(){return""}),(function(e){return o.card.todoAction(e.tooltipText)})))),applyMessage:t.activeAlert.todoAction,checkingMessage:t.activeAlert.todoAction,checkingInProgress:e,onClick:_t.hz((function(){n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:k.l.getCardType(t)})}))}),m.createElement(Uo.Ys,{className:Ss.fullSentenceCardCheckbox,checked:s,name:"set-goals"},o.card.showChangesToggle)))}})},jo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform,o=m.useContext(Ke.m.Context),s=(0,b.pipe)(t.userInput,I.getOrElse((0,y.constant)("")));return m.createElement(Jo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return m.createElement(m.Fragment,{key:"content"},m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(cs,{isNew:t.renderOptions.isNew,actions:n}),m.createElement(h.F.div,{className:e.pipe(S.U((0,w.RN)(Ss.transformContainerInvisible,Ss.transformContainer)))},m.createElement(Wo.T9,{classes:{rendered:Ss.replacement,removing:Ss.replacementHidden},timeout:250,content:a.pipe(S.U(I.fold((function(){return _.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:t.id}),null}),(function(e){return m.createElement(ea,{key:"label",gapValue:s,replacements:e,layoutDensity:t.renderOptions.layoutDensity,onFocus:function(){return n.next({type:k.l.Type.focusUserInput,id:t.id,kind:"focus"})},onChange:function(e){return n.next({type:k.l.Type.changeUserInput,alertId:t.activeAlert.id,cardId:t.id,userInput:e})},onApply:_t.hz((function(){return n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:k.l.getCardType(t)})}))})}))))})),m.createElement(He.Xk,{className:e.pipe(S.U((0,w.RN)(Ss.transformHint,Ss.transformHintInvisible)))},o.card.updatingSuggestion),m.createElement(oa,{card:t,isChecking:r}),(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return m.createElement(aa,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},cardFooter:(0,y.constant)(m.createElement(ya,{card:t}))})},Zo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform,o=m.useContext(Ke.m.Context);return m.createElement(Jo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return m.createElement(m.Fragment,null,m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(h.F.div,{className:e.pipe(S.U((0,w.RN)(Ss.transformContainerInvisible,Ss.transformContainer)))},m.createElement(Wo.T9,{classes:{rendered:Ss.replacement,removing:Ss.replacementHidden},timeout:250,content:a.pipe(S.U(I.fold((function(){return _.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:t.id}),null}),(function(e){return m.createElement(_a,{rl:e,onClick:function(e){return _t.hz((function(){n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:e,cardType:k.l.getCardType(t)})}))},layoutDensity:t.renderOptions.layoutDensity})}))))})),m.createElement(He.Xk,{className:e.pipe(S.U((0,w.RN)(Ss.transformHint,Ss.transformHintInvisible)))},o.card.updatingSuggestion),m.createElement(oa,{card:t,isChecking:r}),(0,b.pipe)(t.renderOptions.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return null}),(function(){return m.createElement(aa,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},cardFooter:(0,y.constant)(m.createElement(ya,{card:t}))})},Jo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.cardBody,o=e.cardFooter,s=e.mainActions,c=e.subActions,l=m.useMemo((function(){var e=x.h.create(!1),t=new Xo.xQ,n=Go.T(t.pipe(Vo.M(r),qo.h((function(e){e[0];return e[1]})),Hn.b((function(){return e.set(!0)}))),r.pipe(zo.T(1),qo.h((function(e){return!e})),Hn.b((function(){return e.set(!1)}))));return{transformHidden:e,onMouseOver:t,transformHiddenObservable:n}}),[]),u=l.transformHidden,d=l.onMouseOver,p=l.transformHiddenObservable;return On.P.useSubscriptionTo(p),m.createElement(Ct,{visualState:t.visualState,onFocus:function(){return n.next({type:k.l.Type.alertCardShow,cardType:k.l.getCardType(t)})},onMouseOver:function(){n.next({type:k.l.Type.hover,kind:"hover",id:t.id}),d.next()},onMouseOut:function(){return n.next({type:k.l.Type.hover,kind:"unhover",id:t.id})},theme:(0,A.__assign)({content:i.pipe(S.U((0,w.RN)(Ss.loadingWrapperInvisible,Ss.loadingWrapper)))},ss(t.renderOptions)),extra:m.createElement(m.Fragment,null,m.createElement(ka,{isChecking:i}),m.createElement(Ra,{card:t,actions:n})),body:a(u),mainActions:s?s():m.createElement(da,{card:t,feedbackActions:n}),footer:o?o(u):void 0,subActions:c?c():m.createElement(ba,{card:t,actions:n})})};function Ko(e,t){return Ht.$.isTakeawayWithoutFeedback(e.activeAlert)?m.createElement(ca,{card:e,feedbackActions:t}):Ht.$.isTakeaway(e.activeAlert)?m.createElement(la,{card:e,feedbackActions:t}):m.createElement(da,{card:e,feedbackActions:t})}function Qo(e,t,n){return Ht.$.isTakeaway(e.activeAlert)?m.createElement(Fa,{card:e,actions:t}):m.createElement(Na,{card:e,actions:t,isChecking:n})}var es,ts,ns,rs=function(e){var t=e.card,n=e.actions,r=e.isChecking;return m.createElement(Ct,{visualState:t.visualState,onFocus:function(){return n.next({type:k.l.Type.alertCardShow,cardType:k.l.getCardType(t)})},theme:ss(t.renderOptions),body:Qo(t,n,r),mainActions:Ko(t,n),footer:m.createElement(ya,{card:t}),subActions:m.createElement(ba,{card:t,actions:n}),extra:m.createElement(Ra,{card:t,actions:n})})},is=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform,o=m.useContext(Ke.m.Context);return m.createElement(Xa,{title:m.createElement(Ga,{title:t.activeAlert.title,emoji:t.activeAlert.emoji})},m.createElement(Jo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return t.activeAlert.hideReplacements?m.createElement("div",{className:Ss.smartPhrasesSuccessLabel},m.createElement(De.JO.VotedYes,{className:Ss.smartPhrasesSuccessLabelIcon}),t.activeAlert.phraseAddedTitle):m.createElement(m.Fragment,null,m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(h.F.div,{className:e.pipe(S.U((0,w.RN)(Ss.transformContainerInvisible,Ss.transformContainer)))},m.createElement(Wo.T9,{classes:{rendered:Ss.replacement,removing:Ss.replacementHidden},timeout:250,content:a.pipe(S.U(I.fold((function(){return null}),(function(e){var r=(0,A.__assign)((0,A.__assign)({},e),{labels:e.labels.filter((function(e,n){return!t.activeAlert.usedReplacementsIndexes.includes(n)})).slice(t.activeAlert.replacementsStartIndex,t.activeAlert.replacementsEndIndex)});return m.createElement(_a,{rl:r,onClick:function(e){return _t.hz((function(){var r=t.activeAlert.originalReplacementsIndexes.get(e+t.activeAlert.replacementsStartIndex)||e;n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:r,cardType:k.l.getCardType(t)}),n.next({type:k.l.Type.smartPhrasesApply,alertId:t.activeAlert.id,cardId:t.id,replacementIndex:e+t.activeAlert.replacementsStartIndex,originalReplacementIndex:r})}))},layoutDensity:t.renderOptions.layoutDensity})}))))})))},mainActions:(0,y.constant)(t.activeAlert.usedReplacementsIndexes.length>0?m.createElement(Qe.zx.Ghost,{name:"smart-phrases-"+t.activeAlert.intent+"-done",onClick:_t.hz((function(){return n.next({type:k.l.Type.smartPhrasesDone,alertId:t.activeAlert.id})}))},o.card.smartPhrases.done):m.createElement(ua,{card:t,feedbackActions:n})),subActions:function(){return t.activeAlert.replacementsLength>5||t.activeAlert.hideReplacements?m.createElement(Qe.zx.Tertiary,{name:"smart-phrases-"+t.activeAlert.intent+"-show-more-ideas",onClick:function(){return n.next({type:k.l.Type.smartPhrasesShowMoreIdeas,cardId:t.id,alertId:t.activeAlert.id})}},m.createElement(De.JO.Reload,null),o.card.smartPhrases.showMoreIdeas):null}}))},as=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=e.transform;return v.X.isSmartPhrases(t)?m.createElement(is,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:a}):v.X.hasTransform(t)?v.X.hasFullSentenceTransform(t)?m.createElement($o,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:a}):v.X.hasOneGapTransform(t)?m.createElement(jo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:a}):m.createElement(Zo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:a}):v.X.isSimple(t)?m.createElement(Yo,{card:t,actions:n,isChecking:r,isCheckingGlobal:i}):m.createElement(rs,{card:t,actions:n,isChecking:r})},os=function(e){return{container:(0,b.pipe)(e,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.cozy)((function(){return Ss.cozyCardContainer}),(function(){return Ss.compactCardContainer})))}},ss=function(e){return(0,A.__assign)((0,A.__assign)({},os(e.layoutDensity)),{wrapper:(0,b.pipe)(e.layoutDensity,v.X.RenderOptions.Density.matchOrDefault(v.X.RenderOptions.Density.minimal)((function(){return Ss.minimalCardWrapper}),(function(){})))})},cs=function(e){return m.createElement(h.F.Fragment,null,e.isNew.pipe(S.U(I.fold(y.constNull,(function(t){return m.createElement(Ta,{type:t,actions:e.actions,key:"new-notification"})}))),Qt.O(null)))},ls=.25,us={opacity:0,pointerEvents:"none"},ds={transition:"opacity "+T.u.seconds(ls)},ps={transition:"opacity "+T.u.seconds(ls),transitionDelay:T.u.seconds(ls)},fs={position:"absolute",top:T.u.rem(2),color:Oe.Il.CoreNeutral40,lineHeight:T.u.rem(2),transition:"opacity "+T.u.seconds(ls),transitionDelay:T.u.seconds(ls)},ms={transition:"opacity "+T.u.seconds(ls)},hs={fontSize:T.u.rem(Oe.xv.BodySize),lineHeight:T.u.rem(2.0625)},gs={marginRight:T.u.rem(.25)},vs={padding:T.u.rem(.75)+" "+T.u.rem(.5)+" "+T.u.rem(.5)+" "+T.u.rem(1)},ys={position:"absolute",top:T.u.rem(.8),right:T.u.rem(1),margin:0},bs={margin:T.u.rem(1)+" 0 "+T.u.rem(1.5),borderRadius:T.u.rem(R.Jr),background:Oe.Il.CoreNeutral0,boxShadow:"0 "+T.u.rem(.625)+" "+T.u.rem(R.mJ)+" 0 rgba(198, 203, 222, .45)"},ws={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:T.u.rem(R.Jr),background:Oe.Il.CoreNeutral0},_s={fontSize:T.u.rem(.75),lineHeight:T.u.rem(1.125),color:Oe.Il.CoreNeutral90,display:"flex",alignItems:"center",marginLeft:T.u.rem(-1.75)},Cs={marginRight:T.u.rem(.5),$nest:{"& circle":{stroke:T.u.important(Oe.Il.CoreGreen50),fill:T.u.important(Oe.Il.CoreGreen50)},"& polyline":{stroke:T.u.important(Oe.Il.CoreNeutral0),fill:T.u.important("none")}}},Ss=(0,A.__assign)((0,A.__assign)({},T.u.stylesheet({invisible:[us],loadingWrapper:[ds],transformContainer:[ps],loadingWrapperInvisible:[ds,us],transformContainerInvisible:[ps,us,{transitionDelay:"initial"}],transformHint:[fs],transformHintInvisible:[fs,us,{transitionDelay:"initial"}],replacement:[ms],replacementHidden:[ms,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[hs],betaLabel:[gs],minimalCardWrapper:[vs],minimalBetaLabel:[ys],compactCardContainer:[ws],smartPhrasesSuccessLabel:[_s],smartPhrasesSuccessLabelIcon:[Cs]})),{cozyCardContainer:T.u.joinClasses([L.g.cozyCardContainerSelector,T.u.style(bs)])}),As=function(e){var t=e.card,n=e.actions,r=m.useContext(Ke.m.Context).card.feedbackForm,i=x.h.create(void 0),a=x.h.create(!1);return(0,b.pipe)(t.visualState.transition,I.fromPredicate((function(e){return"feedback_form"===e.type})),I.fold((function(){return _.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",t),null}),(function(e){var o=e.options;return m.createElement(Ct,{onFocus:function(){return n.next({type:k.l.Type.alertIgnoreFeedbackFormShow,alertId:t.activeAlert.id})},theme:ss(t.renderOptions),visualState:t.visualState,body:m.createElement(m.Fragment,null,m.createElement(xa,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),m.createElement(He.H4,{className:Mo},r.dismissReason),m.createElement(rt.Group,{itemWrapperClassName:Fo,selectedItemIndex:i,items:o.map((function(e){return m.createElement("div",{className:No},e.text)})),onChange:function(){return a.set(!1)}})),mainActions:m.createElement(m.Fragment,null),footer:m.createElement(m.Fragment,null,m.createElement(h.F.div,{"aria-hidden":a,className:a.view((0,w.RN)(Do,Ho))},r.error),m.createElement("div",null,m.createElement(Qe.zx.Primary,{name:"submitCardFeedbackForm",onClick:function(){var e=i.get();return void 0===e?a.set(!0):_t.hz((function(){return n.next({type:k.l.Type.alertIgnoreFormSubmit,alertId:t.activeAlert.id,reason:o[e].key})}))()}},r.submit),m.createElement(Qe.zx.Ghost,{className:Oo,name:"skipCardFeedbackForm",onClick:_t.hz((function(){return n.next({type:k.l.Type.alertIgnoreFormSubmit,alertId:t.activeAlert.id,reason:"skipped"})}))},r.skip))),subActions:m.createElement(m.Fragment,null)})})))},xs=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.action,i=e.hasEmoji;return m.createElement("div",(0,A.__assign)({},(0,Fe.Sh)(n.wrapper,nc.ctaText)),i?m.createElement(gn.d,{emojiClassName:(0,Fe.Sh)(nc.cardLogo,n.logo).className},r):r)},Is=function(e){var t=e.vox,n=e.theme,r=void 0===n?{}:n;return m.createElement(m.Fragment,null,(0,b.pipe)(t.logoUrl,I.map((function(e){return m.createElement(lr,(0,A.__assign)({},(0,Fe.Sh)(nc.cardLogo,r.logo),{logoUrl:e}))})),I.toNullable),m.createElement(cr,(0,A.__assign)({vox:t},(0,Fe.Sh)(nc.cta,r.label),{isMinimalCard:!1})))},Es=function(e){return[Xn.R.outcomeTypeMatch(e.lensType)({correctness:L.m.dotCorrectness,clarity:L.m.dotClarity,premium:L.m.dotAdvanced,engagement:L.m.dotEngagement,delivery:L.m.dotDelivery,vox:L.m.dotVox}),nc.cta]},ks=function(){var e=m.useContext(Ke.m.Context);return m.createElement(Ut.Regular,{className:nc.newLabel},e.new)},Ts=function(e){var t=e.card,n=e.actions,r=e.useBundleContainer,i=void 0!==r&&r,a=e.twoLined,o=void 0!==a&&a,s=m.useContext(Ke.m.Context);return m.useEffect((function(){t.activeAlert.hideReplacements&&n.next({type:k.l.Type.smartPhrasesDone,alertId:t.activeAlert.id})})),m.createElement(tt.Mini,(0,A.__assign)({},(0,Fe.Sh)(o?Ws.wrapper:$s.wrapper,nc.smartPhrasesWrapper,i?$s.bundleContainer:null),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert},hideActivateButton:!0}),m.createElement("div",{className:nc.smartPhrasesContainer},m.createElement(Ga,{className:nc.smartPhrasesTitle,title:t.activeAlert.title,emoji:t.activeAlert.emoji,hideBetaBadge:!0}),m.createElement("div",{className:nc.smartPhrasesIntentDetectedFeedback},m.createElement(Qe.zx.Ghost,{title:s.card.smartPhrases.intentDetectedFeedbackYes,name:"smart-phrases-"+t.activeAlert.intent+"-intent-detected-feedback-yes",active:t.activeAlert.intentDetectedFeedback===Dt.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE,disabled:Boolean(t.activeAlert.intentDetectedFeedback),onClick:function(e){var r,i;n.next({type:k.l.Type.smartPhrasesFeedback,alertId:t.activeAlert.id,cardId:t.id,feedbackType:Dt.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE}),n.next({type:k.l.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:t.activeAlert},clickPoint:{x:null!==(r=null==e?void 0:e.clientX)&&void 0!==r?r:0,y:null!==(i=null==e?void 0:e.clientY)&&void 0!==i?i:0}})}},m.createElement(De.JO.VotedYes,null)),m.createElement(Qe.zx.Ghost,{title:s.card.smartPhrases.intentDetectedFeedbackNo,name:"smart-phrases-"+t.activeAlert.intent+"-intent-detected-feedback-no",active:t.activeAlert.intentDetectedFeedback===Dt.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE,disabled:Boolean(t.activeAlert.intentDetectedFeedback),onClick:_t.hz((function(){n.next({type:k.l.Type.smartPhrasesFeedback,alertId:t.activeAlert.id,cardId:t.id,feedbackType:Dt.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE}),n.next({type:k.l.Type.alertIgnore,alertId:t.activeAlert.id,id:t.id,eligibleForDismissSurvey:v.X.isEligibleForDismissSurvey(t)})}))},m.createElement(De.JO.VotedNo,null)))))};!function(e){e.Bundle=function(e){var t=e.card,n=e.actions;if(v.X.isSmartPhrases(t))return m.createElement(Ts,{card:t,actions:n,useBundleContainer:!0});var r=Es(t.activeAlert)[0];return m.createElement(tt.Mini,(0,A.__assign)({},(0,Fe.Sh)($s.wrapper,$s.bundleContainer,$s.dot,r),{actions:n,cardId:t.id,getActiveAlert:function(){return t.alerts[0]},counter:m.createElement(He.CL,{className:$s.alertsCounter},t.alerts.length)}),m.createElement(h.F.div,{className:$s.miniContainer},m.createElement("div",{className:$s.highlightedText},v.X.bundleTitle(t))))},e.Standard=function(e){var t=e.card,n=e.actions;if(v.X.isSmartPhrases(t))return m.createElement(Ts,{card:t,actions:n});var r=Es(t.activeAlert),i=r[0],a=r[1],o=m.useContext(Ke.m.Context);return m.createElement(tt.Mini,(0,A.__assign)({},(0,Fe.Sh)($s.wrapper,$s.dot,i),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert}}),m.createElement(h.F.div,{className:$s.miniContainer},m.createElement("div",{className:$s.highlightedText},t.activeAlert.highlightTexts[0]),m.createElement("div",{className:$s.middleDot},""),(0,b.pipe)(t.activeAlert.extraProperties.vox,I.map((function(e){return m.createElement(Is,{vox:e,theme:{logo:$s.cardLogo}})})),I.getOrElse((function(){return m.createElement(m.Fragment,null,m.createElement(xs,{hasEmoji:Ht.$.hasTone(t.activeAlert),action:v.X.miniTitle(t,o),theme:{wrapper:a,logo:$s.cardLogo}}),Ht.$.isDemoPremium(t.activeAlert)&&m.createElement(De.JO.Paid,{width:14,className:nc.premiumIcon}),Ht.$.isTakeaway(t.activeAlert)&&m.createElement(De.JO.Megaphone,{width:16,className:Ws.takeawayIconStandard}))}))),(0,b.pipe)(t.renderOptions.isNew,S.U((function(e){return I.isSome(e)?m.createElement(ks,{key:"new-label"}):null})))))},e.TwoLined=function(e){var t=e.card,n=e.actions;if(v.X.isSmartPhrases(t))return m.createElement(Ts,{card:t,actions:n,twoLined:!0});var r=Es(t.activeAlert),i=r[0],a=r[1],o=m.useContext(Ke.m.Context);return m.createElement(tt.Mini,(0,A.__assign)({},(0,Fe.Sh)(Ws.wrapper,Ws.dot,i),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert}}),m.createElement("div",{className:Ws.miniContainer},(0,b.pipe)(t.activeAlert.extraProperties.vox,I.map((function(e){return m.createElement(Is,{vox:e,theme:{logo:Ws.cardLogo,label:Ws.subTitle}})})),I.getOrElse((function(){return m.createElement(m.Fragment,null,m.createElement(xs,{hasEmoji:Ht.$.hasTone(t.activeAlert),action:v.X.miniTitle(t,o),theme:{wrapper:(0,Fe.Sh)(a,Ws.ctaText,Ws.subTitle).className,logo:Ws.cardLogo}}),Ht.$.isDemoPremium(t.activeAlert)&&m.createElement(De.JO.Paid,{width:14,className:Ws.premiumIcon}),Ht.$.isTakeaway(t.activeAlert)&&m.createElement(De.JO.Megaphone,{width:16,className:Ws.takeawayIconMini}))}))),m.createElement("div",{className:Ms},t.activeAlert.highlightTexts[0])))}}(ns||(ns={}));var Rs="0 1px 8px rgba(109, 117, 141, .18)",Ls={$nest:{"&:before":{top:T.u.rem(.85),left:0}}},Ps="miniTwoLinedHighlightedText",Ms=T.u.joinClasses([Ps,T.u.style({overflow:"hidden",marginTop:T.u.rem(-.25),color:Oe.Il.CoreNeutral90,textOverflow:"ellipsis"})]),Ns={height:T.u.rem(3.25),borderRadius:T.u.rem(R.Jr),boxShadow:Rs,$nest:(es={"&:hover":{boxShadow:Rs}},es["&:hover .miniTwoLinedHighlightedText"]={borderColor:"transparent"},es)},Fs={top:T.u.rem(.7)},Os={fontWeight:T.u.important(400),fontSize:T.u.rem(.75)},Bs={position:"absolute",top:T.u.rem(.7),left:T.u.rem(.5),minWidth:"initial",minHeight:"initial",width:T.u.rem(1.25),height:T.u.rem(.85),background:Oe.Il.CoreNeutral0,fill:Oe.Il.CoreYellow50},Ds={position:"absolute",left:T.u.rem(.5),minWidth:"initial",minHeight:"initial",background:Oe.Il.CoreNeutral0},Hs=(0,A.__assign)((0,A.__assign)({},Ds),{top:T.u.rem(.6)}),Ws=T.u.stylesheet({dot:[Ls],wrapper:[Ns],miniContainer:[{flexDirection:"column"}],cardLogo:[Fs],subTitle:[Os],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],premiumIcon:[Bs],takeawayIconMini:[Hs],takeawayIconStandard:[Ds]}),Us={height:T.u.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},zs={$nest:{"&:before":{top:T.u.px(1),bottom:0,left:0}}},Xs={height:T.u.important(T.u.rem(2.5)),borderRadius:T.u.rem(R.Jr)},Gs={color:Oe.Il.CoreNeutral50,display:"flex",width:T.u.rem(2),height:T.u.percent(100),justifyContent:"center",alignItems:"center"},Vs={overflow:"hidden",color:Oe.Il.CoreNeutral90,textOverflow:"ellipsis"},qs={display:"inline-block",padding:"0 "+T.u.rem(.5)},Ys={top:0,bottom:0,left:T.u.rem(.5),margin:"auto"},$s=T.u.stylesheet({wrapper:[Us],dot:[zs],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[Xs],alertsCounter:[Gs],highlightedText:[Vs],middleDot:[qs],cardLogo:[Ys]}),js={color:Oe.Il.CoreNeutral50,fontWeight:300},Zs={position:"absolute",left:T.u.rem(.5),width:T.u.rem(1),height:T.u.rem(1),background:Oe.Il.CoreNeutral0},Js={marginLeft:T.u.rem(.5)},Ks={position:"absolute",top:0,bottom:0,left:T.u.rem(.5),margin:"auto",minWidth:"initial",minHeight:"initial",width:T.u.rem(1),height:T.u.rem(1),background:Oe.Il.CoreNeutral0,fill:Oe.Il.CoreYellow50},Qs={$nest:(ts={},ts["& ."+Je.contentWrapper]={margin:0},ts)},ec={color:Oe.Il.CoreNeutral90,fontSize:T.u.rem(.875),lineHeight:T.u.rem(1.125),paddingLeft:T.u.rem(.75)},tc={display:"flex",alignItems:"center",position:"absolute",right:T.u.rem(.5),$nest:{'& div[role="button"]:first-child':{marginRight:T.u.rem(.125)}}},nc=T.u.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[js],cardLogo:[Zs],newLabel:[Js],premiumIcon:[Ks],smartPhrasesWrapper:[Qs],smartPhrasesContainer:[{display:"flex",alignItems:"center",justifyContent:"space-between"}],smartPhrasesTitle:[ec],smartPhrasesIntentDetectedFeedback:[tc]});function rc(e){var t=e.href,n=e.children,r=e.className;return m.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:r,href:t},n)}var ic,ac={MLA:"https://owl.purdue.edu/owl/research_and_citation/mla_style/mla_formatting_and_style_guide/mla_works_cited_electronic_sources.html",APA:"https://owl.purdue.edu/owl/research_and_citation/apa_style/apa_formatting_and_style_guide/reference_list_electronic_sources.html",Chicago:"https://owl.purdue.edu/owl/research_and_citation/chicago_manual_17th_edition/cmos_formatting_and_style_guide/web_sources.html"},oc={display:"block",color:Oe.Il.CoreNeutral90,fontWeight:"bold"},sc={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},cc={display:"block",color:Oe.Il.CoreBlue50,fontWeight:"normal"},lc={color:Be.VR},uc={color:Be.VR},dc={color:Oe.Il.CoreCyan50,fontWeight:"bold",fontSize:T.u.rem(.9375)},pc={marginTop:T.u.rem(.3),color:Oe.Il.CoreNeutral90},fc={position:"relative",marginLeft:T.u.rem(-.5)},mc={position:"absolute",top:0,left:0,display:"flex",margin:T.u.rem(.5625)+" 0 0 "+T.u.rem(.4375),color:Be.VR,pointerEvents:"none"},hc={display:"block",padding:T.u.rem(1.4375)+" 0 0 "+T.u.rem(.4375),borderRadius:T.u.rem(R.fx),backgroundColor:Be.zh,transitionDuration:T.u.seconds(0),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:Be.jj}}},gc={display:"flex",color:Oe.Il.CoreBlue50,pointerEvents:"all",alignItems:"center"},vc={minWidth:T.u.rem(1),minHeight:T.u.rem(1),stroke:Oe.Il.CoreBlue50},yc={width:T.u.percent(100),pointerEvents:"all"},bc={color:Oe.Il.CoreBlue50,textDecoration:"none"},wc={position:"absolute",right:0,bottom:0,marginLeft:T.u.rem(.5)},_c={$nest:{"& i":{color:Be.UE}}},Cc=T.u.stylesheet({plagiarismTitle:[oc],plagiarismTitleContent:[sc],titleUrl:[sc,cc],titleBy:[lc],plagiarismP2:[uc],percent:[dc],textToCopy:[sc,pc],referenceWrapper:[fc],referenceData:[mc],copyableReference:[hc],citationStyleSelect:[gc],citationStyleIcon:[vc],citationStyleDdlButton:[yc],descriptionLink:[bc],expandBtn:[wc],more:[_c]}),Sc=function(e){return _t.yG(e,{allowedTags:["b","i","br"]})},Ac=function(e){var t=e.card,n=m.useContext(Ke.m.Context);return m.createElement(He.XY,{className:Cc.plagiarismP2},n.plagiarism.percentileDescription(m.createElement("span",{className:Cc.percent},t.meta.percentile,"%")))},xc=function(e){var t=e.title,n=e.url;return m.createElement(He.Xk,{className:Cc.plagiarismTitle},m.createElement("div",(0,A.__assign)({className:Cc.plagiarismTitleContent},Sc(t))),(0,b.pipe)(n,I.map((function(e){return m.createElement(Qe.zx,{name:"url-button",href:e,target:"_blank",rel:"noopener noreferrer",styleType:He.ZT.Type.Base,className:Cc.titleUrl},e)})),I.toNullable))},Ic=function(e){var t=e.title,n=e.authors;return m.createElement(He.Xk,{className:Cc.plagiarismTitle},m.createElement("div",(0,A.__assign)({className:Cc.plagiarismTitleContent},Sc(t))),(0,b.pipe)(n,I.map((function(e){return m.createElement(He.XY,{className:Cc.plagiarismTitleContent},"",m.createElement("span",{className:Cc.titleBy},"by"),"",m.createElement("span",(0,A.__assign)({},Sc(e))))})),I.toNullable))},Ec=function(e){var t=e.alert;return"publication"===t.plagiarismType.source?m.createElement(Ic,{title:t.title,authors:t.plagiarismType.authors}):m.createElement(xc,{title:t.title,url:t.plagiarismType.url})},kc=function(){var e,t=m.useContext(Ke.m.Context);return m.createElement(He.XY,null,t.plagiarism.cardDescription((e=Cc.descriptionLink,function(t){var n=t.type;return m.createElement(rc,{href:ac[n],className:e},n)})))},Tc=function(e){var t=e.card,n=e.dismissActions,r=m.useContext(Ke.m.Context),i=t.alerts.map((function(e){return e.id}));return m.createElement(Qe.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:_t.hz((function(){return n.next({type:k.l.Type.dismissBatch,alerts:i})}))},m.createElement(De.JO.Ignore,null))},Rc=function(e){var t=e.visualState;return m.createElement(_r,{visualState:t,className:Cc.more},m.createElement(kc,null))},Lc=function(e){var t=e.onLeftClick,n=e.onRightClick,r=e.currentMatch,i=e.totalMatch,a=e.replaceOneMatch,o=void 0===a||a,s=e.disableOnEnd,c=void 0===s||s,l=e.style,u=m.useContext(Ke.m.Context).card.matchesNavigation;return 0===i?null:1===i&&o?m.createElement("div",(0,A.__assign)({},(0,Fe.Sh)(Nc.matchesRow,l.matchesRow||!1)),m.createElement(He.ck,(0,A.__assign)({},(0,Fe.Sh)(Nc.matchesCount,l.matchesCount||!1)),u.numberOfMatches(i))):m.createElement("div",(0,A.__assign)({},(0,Fe.Sh)(Nc.matchesRow,l.matchesRow||!1)),m.createElement(Qe.zx.Ghost,{disabled:c&&0===r,name:"left",title:u.prev,onClick:t},m.createElement(De.JO.Arrow,(0,A.__assign)({},(0,Fe.Sh)(Nc.leftButtonIcon,l.leftButtonIcon||!1)))),m.createElement(He.ck,(0,A.__assign)({},(0,Fe.Sh)(Nc.matchesCount,l.matchesCount||!1)),u.currentMatchPosition(r+1,i)),m.createElement(Qe.zx.Ghost,{disabled:c&&r===i-1,name:"right",title:u.next,onClick:n},m.createElement(De.JO.Arrow,(0,A.__assign)({},(0,Fe.Sh)(Nc.rightButtonIcon,l.rightButtonIcon||!1)))))},Pc={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:T.u.rem(.25)}}},Mc={textTransform:"uppercase",letterSpacing:T.u.px(.8),lineHeight:T.u.rem(2)},Nc=T.u.stylesheet({matchesRow:[Pc],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[Mc]}),Fc=function(e){var t=e.card,n=e.actions;return m.createElement(Lc,{onLeftClick:function(){return n.next({type:k.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:"left"})},onRightClick:function(){return n.next({type:k.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:"right"})},currentMatch:t.activeAlertIndex,totalMatch:t.alerts.length,style:{}})},Oc=n(57175),Bc=n(95300),Dc=n(50628),Hc=function(){function e(){}return e.copy=function(e,t){this._clearSelection();var n=this._createHiddenSpan(e);return this.select(n),this._copy(e,t).then((function(){n.parentElement.removeChild(n)})).catch((function(e){throw n.parentElement.removeChild(n),e}))},e.select=function(e){if(window.getSelection&&document.createRange){var t=window.getSelection();(n=document.createRange()).selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else if("createTextRange"in document.body&&"selection"in document){var n;(n=document.body.createTextRange()).moveToElementText(this),n.select()}},e._clearSelection=function(){var e=window.getSelection?window.getSelection():document.selection;"removeAllRanges"in e?e.removeAllRanges():"empty"in e&&e.empty()},e._createHiddenSpan=function(e){var t=document.createElement("span");return t.setAttribute("style",["all: unset","position: fixed","top -999px","left -999px","opacity: 0","background transparent","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),t.textContent=e,document.body.appendChild(t),t},e._copy=function(e,t){return new Promise((function(n,r){try{(t?window.clipboardData.setData("text",e):document.execCommand("copy"))?n():r(new Error("Copy API doesn't work"))}catch(e){r(e)}}))},e.copyApiAvailable=new Bc.X(!0),e}();try{Dn.R(window,"click").pipe(Dc.P()).subscribe((function(){document.queryCommandSupported("copy")||Hc.copyApiAvailable.next(!1)}))}catch(e){Hc.copyApiAvailable.next(!1)}!function(e){e.Context=m.createContext(Oc.S.invariantContent("CopyToClipboard")),e.ContextMock=function(t){var n=t.children;return m.createElement(e.Context.Provider,{value:function(e){return Hc.copy(e,!1)},children:n})}}(ic||(ic={}));var Wc,Uc=function(e){var t=e.textToCopy,n=e.children;return m.createElement(ic.Context.Consumer,null,(function(e){return m.createElement(Qe.zx.Flat,{key:"copy_title",name:"copy_title",title:"Click to copy",className:Cc.copyableReference,onClick:function(){return e(t,"referenceCopied")}},n,m.createElement("div",(0,A.__assign)({className:Cc.textToCopy},(r=t,_t.yG(r,{allowedTags:["b","i","br"]})))));var r}))},zc={mla:"MLA",apa:"APA",chicago:"Chicago"},Xc=Zr.XP(zc),Gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,A.__extends)(t,e),t._renderPublication=function(e){var t=x.h.create("mla");return m.createElement(h.F.div,{key:"publication",className:Cc.referenceWrapper},t.view((function(n){return m.createElement(m.Fragment,null,m.createElement(Uc,{key:"rf1"+n,textToCopy:e.citationStyle[n]}),m.createElement(He.x4,{className:Cc.referenceData},m.createElement(Ke.m.Context.Consumer,null,(function(e){return e.plagiarism.publicationReferenceDescription(m.createElement(hn.L,{vAlign:"top",name:"plagiarism",label:m.createElement(Qe.zx,{name:"citation-style-select",active:!1,className:Cc.citationStyleSelect},zc[n])},Xc.map((function(e){return m.createElement(Qe.zx.Flat,{className:Cc.citationStyleDdlButton,key:e,name:"citation-button-"+e,active:t.view((function(t){return t===e})),onClick:function(){return t.set(e)}},zc[e])}))))}))))})))},t._renderWeb=function(e,t){return m.createElement("div",{key:"web",className:Cc.referenceWrapper},m.createElement(Uc,{textToCopy:e+(0,b.pipe)(t.url,I.fold((function(){return""}),(function(e){return". "+e})))},m.createElement(Ke.m.Context.Consumer,null,(function(e){var t=e.plagiarism;return m.createElement(He.x4,{className:Cc.referenceData},t.webReferenceDescription)}))))},t.prototype.render=function(){var e=this.props.alert;return"publication"===e.plagiarismType.source?t._renderPublication(e.plagiarismType):t._renderWeb(e.title,e.plagiarismType)},t}(m.Component),Vc=function(e){var t=e.card,n=e.actions;return m.createElement(Ct,{visualState:t.visualState,onFocus:function(){return n.next({type:k.l.Type.alertCardShow,cardType:k.l.CardType.defaultCard})},theme:os(t.renderOptions.layoutDensity),body:m.createElement(m.Fragment,null,m.createElement(Ac,{card:t}),m.createElement(Ec,{alert:t.activeAlert}),m.createElement(Gc,{alert:t.activeAlert,feedbackActions:n})),mainActions:m.createElement(Tc,{card:t,dismissActions:n}),footer:m.createElement(Rc,{visualState:t.visualState}),navigation:m.createElement(Fc,{actions:n,card:t}),subActions:m.createElement(wr,{actions:n,card:t,mode:"mini"})})};!function(e){e.Standard=function(e){var t=e.card,n=e.actions,r=t.alerts[0];return m.createElement(tt.Mini,(0,A.__assign)({cardId:t.id,getActiveAlert:function(){return r}},(0,Fe.Sh)(rl.wrapper,rl.dot,rl.dotOutcomesPlagiarism),{actions:n}),m.createElement("div",{className:rl.miniContainer},m.createElement("span",(0,A.__assign)({key:"title"},(0,Fe.Sh)(rl.text,"publication"===r.plagiarismType.source&&rl.fullText)),r.title),"web"===r.plagiarismType.source?(0,b.pipe)(r.plagiarismType.url,I.map(Ot.Wq),I.filter(w.Dw),I.map((function(e){return m.createElement("span",{key:"url",className:rl.domain}," ",e)})),I.toNullable):(0,b.pipe)(r.plagiarismType.authors,I.map((function(e){return m.createElement("span",{key:"publication",className:rl.publication}," ",e)})),I.toNullable)))},e.TwoLined=function(e){var t=e.card,n=e.actions,r=t.alerts[0],i="web"===r.plagiarismType.source?(0,b.pipe)(r.plagiarismType.url,I.map(Ot.Wq),I.filter(w.Dw)):r.plagiarismType.authors;return m.createElement(tt.Mini,(0,A.__assign)({cardId:t.id,getActiveAlert:function(){return r}},(0,Fe.Sh)(Zc.wrapper,rl.dotOutcomesPlagiarism,(0,b.pipe)(i,I.fold((function(){return Zc.dotInTheMiddle}),(function(){return Zc.dot})))),{actions:n}),m.createElement("div",{className:Zc.miniContainer},(0,b.pipe)(i,I.map((function(e){return m.createElement("span",{className:Zc.subTitle},e)})),I.toNullable),m.createElement("span",(0,A.__assign)({key:"title"},(0,Fe.Sh)(Zc.text)),r.title)))}}(Wc||(Wc={}));var qc={overflow:"hidden",color:Oe.Il.CoreNeutral90,textOverflow:"ellipsis"},Yc={height:T.u.rem(3.5)},$c={overflow:"hidden",marginBottom:T.u.rem(-.25),textOverflow:"ellipsis",fontSize:T.u.rem(.75)},jc={$nest:{"&:before":{top:T.u.rem(.85),bottom:0}}},Zc=T.u.stylesheet({text:[qc],wrapper:[Yc],miniContainer:[{display:"flex",flexDirection:"column"}],dotInTheMiddle:[{top:0,bottom:0,left:0}],subTitle:[$c],dot:[jc]}),Jc={overflow:"hidden",color:Oe.Il.CoreNeutral90,textOverflow:"ellipsis"},Kc={maxWidth:T.u.percent(100),flexShrink:0},Qc={height:T.u.rem(3)},el={overflow:"hidden",maxWidth:T.u.percent(100),textOverflow:"ellipsis",flexShrink:0},tl={$nest:{"&:before":{top:T.u.px(1),bottom:0}}},nl={$nest:{"&:before":{backgroundColor:Oe.Il.CoreCyan50}}},rl=T.u.stylesheet({text:[Jc],fullText:[Kc],wrapper:[Qc],miniContainer:[{display:"flex"}],domain:[el],publication:[{overflow:"hidden",textOverflow:"ellipsis"}],dot:[tl],dotOutcomesPlagiarism:[nl]});function il(e,t,n){var r=t.activeAlert,i=t.activeHighlightIndex,a=r.getHighlightRanges(),o=(i+("left"===e?a.length-1:1))%a.length;n.next({type:k.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:o},direction:e})}var al,ol=function(e){var t=e.card,n=e.actions,r=e.selectedLabelIndex,i=e.isChecking,a=m.useContext(Ke.m.Context),o=x.h.create(!1);return On.P.useSubscriptionTo(i.pipe(Hn.b((function(e){return o.set(e)})))),m.createElement(va,{applyMessage:t.activeAlert.todoAction,checkingMessage:a.card.checking,title:a.card.todoAction(t.activeAlert.todoAction),checkingInProgress:o,onClick:function(){n.next({type:k.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:r.get(),cardType:k.l.getCardType(t)})}})},sl=function(e){var t=e.card,n=e.actions;return m.createElement(Lc,{onLeftClick:function(){return il("left",t,n)},onRightClick:function(){return il("right",t,n)},currentMatch:t.activeHighlightIndex,totalMatch:t.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}})},cl=function(e){var t=e.activeAlert,n=e.selectedLabelIndex,r=e.actions,i=m.useContext(Ke.m.Context);return m.createElement("div",{className:Fr.optionsContainer},t.labels.map((function(e,t){return m.createElement(m.Fragment,{key:"option-"+t},m.createElement(rt.Item,{className:Fr.optionLabel,onChange:function(){n.set(t),r.next({type:k.l.Type.alternativeReplacementRadioButtonClick,index:t})},checked:n.view((function(e){return e===t}))},m.createElement(He.XY,{className:Fr.optionRadio},e.label)),m.createElement(He.x4,{className:Fr.optionExample},e.replacementTexts.join("; ")),m.createElement(He.x4,{className:Fr.optionSecondaryAttribute},i.card.matchesNavigation.numberOfMatches(e.matches)))})))},ll=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,a=x.h.create(0);return m.createElement(Ct,{visualState:t.visualState,onFocus:function(){return n.next({type:k.l.Type.alertCardShow,cardType:k.l.getCardType(t)})},theme:(0,A.__assign)({wrapper:Fr.superWrapper,content:i.pipe(S.U((0,w.RN)(Fr.loadingWrapperInvisible,Fr.loadingWrapper)))},os(t.renderOptions.layoutDensity)),extra:m.createElement(ka,{isChecking:i}),body:m.createElement(m.Fragment,null,m.createElement(xa,{alert:t.activeAlert,options:t.renderOptions,meta:t.meta}),m.createElement(Aa,{alert:t.activeAlert}),m.createElement(oa,{card:t,isChecking:r}),m.createElement(aa,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity}),m.createElement(cl,{activeAlert:t.activeAlert,selectedLabelIndex:a,actions:n})),mainActions:m.createElement(da,{card:t,feedbackActions:n}),footer:m.createElement(m.Fragment,null,m.createElement(ya,{card:t}),m.createElement(ol,{selectedLabelIndex:a,card:t,actions:n,isChecking:r})),navigation:m.createElement(sl,{card:t,actions:n}),subActions:m.createElement(wr,{actions:n,card:t,mode:"mini"})})};!function(e){e.Full=function(e){var t=e.card,n=e.actions,r=v.X.useCardStates(t),i=r.isChecking,a=r.isCheckingGlobal,o=r.transform,s=function(e){return m.createElement(as,{card:e,actions:n,isChecking:i,transform:o,isCheckingGlobal:a})};return m.createElement(h.F.Fragment,null,t.pipe(C.x((function(e,t){return e.hashCode()===t.hashCode()})),S.U((0,y.flow)(v.X.match({plagiarism:function(e){return m.createElement(Vc,{card:e,actions:n})},super:function(e){return m.createElement(ll,{card:e,actions:n,isChecking:i,isCheckingGlobal:a})},smartPhrases:s,default:s}),v.X.foldCard))))},e.Mini=function(t){var n=t.card,r=t.actions;return m.createElement(h.F.Fragment,null,n.pipe(S.U((function(t){return v.X.isBundle(t)?m.createElement(e.MiniSingleLined,{card:t,actions:r}):v.X.RenderOptions.Density.matchL((function(){return m.createElement(e.MiniSingleLined,{card:t,actions:r})}),(function(){return m.createElement(e.MiniTwoLined,{card:t,actions:r})}),(function(){return m.createElement(e.MiniTwoLined,{card:t,actions:r})}))(t.renderOptions.layoutDensity)}))))},e.MiniSingleLined=function(e){var t=e.card,n=e.actions;function r(e){return v.X.isBundle(e)?m.createElement(ns.Bundle,{card:e,actions:n}):m.createElement(ns.Standard,{card:e,actions:n})}return(0,b.pipe)(t,v.X.match({plagiarism:function(e){return m.createElement(Wc.Standard,{card:e,actions:n})},smartPhrases:r,super:r,default:r}),v.X.foldCard)},e.MiniTwoLined=function(e){var t=e.card,n=e.actions;function r(e){return m.createElement(ns.TwoLined,{card:e,actions:n})}return(0,b.pipe)(t,v.X.match({plagiarism:function(e){return m.createElement(Wc.TwoLined,{card:e,actions:n})},smartPhrases:r,super:r,default:r}),v.X.foldCard)},e.Success=tt.Success,e.FeedbackForm=function(e){var n=e.cardData,r=e.actions;function i(e){return m.createElement(As,{card:e,actions:r})}return(0,b.pipe)(n,v.X.match({plagiarism:function(e){return t("CardComponent").getLogger("FeedbackForm").error("Tried to draw a feedback form for a plagiarism alert",e),null},smartPhrases:i,default:i,super:i}),v.X.foldCard)};var t=(0,w.HP)(_.C8.Logging.getLogger)}(al||(al={}));var ul,dl,pl,fl=n(70276);!function(e){e.Full=function(e){var n=e.card,a=e.actions,o=v.X.useCardStates(n),s=o.isChecking,c=o.isCheckingGlobal,l=o.transform,u=function(e){return i("CardBundle").error("rendering fallback for card",e),null},d=n.pipe((function(e){return e.lift(new fl.G((function(e){return e.activeAlert.id})))}),en.w((function(e){return e.pipe(C.x((function(e,t){return e.activeAlertIndex===t.activeAlertIndex})),S.U((function(t){return{activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,b.pipe)(e,C.x((function(e,t){return e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId})),Zt.shareReplay({bufferSize:1,refCount:!0}))}})))}))),p=function(e,t){var n=t.alerts.length,r=1===n?Bl.bundleInnerContainer:2===n?Bl.bundleInnerContainer2Cards:Bl.bundleInnerContainerNCards;return m.createElement(h.F.div,{className:r},m.createElement(as,{card:t,actions:a,isChecking:s,transform:e,isCheckingGlobal:c}))};return m.createElement(r,{card:n,actions:a},m.createElement(t,{state:d,stateToClassMapper:function(e,t){return e?e.activeAlertId===t.activeAlertId||e.activeAlertIndex===t.activeAlertIndex?{prev:(0,Wo.EJ)(Bl.inBundleToUpdatedCardOld),next:(0,Wo.EJ)(Bl.inBundleToUpdatedCardNew)}:e.activeAlertIndex<t.activeAlertIndex?{prev:(0,Wo.EJ)(Bl.inBundleToNextCardOld),next:(0,Wo.EJ)(Bl.inBundleToNextCardNew)}:{prev:(0,Wo.EJ)(Bl.inBundleToPrevCardOld),next:(0,Wo.EJ)(Bl.inBundleToPrevCardNew)}:{prev:(0,Wo.EJ)(""),next:(0,Wo.EJ)("")}}},(function(e){return m.createElement(h.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:y.constVoid},(0,b.pipe)(e.state.card,S.U((0,y.flow)(v.X.match({plagiarism:u,super:u,smartPhrases:function(t){return p("prev"===e.type?Jt.of(t.transform):l,t)},default:function(t){return p("prev"===e.type?Jt.of(t.transform):l,t)}}),v.X.foldCard))))})))};var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,A.__extends)(t,e),t}(Wo.l5),n=function(e){var t=e.alertCount;return 1===t?m.createElement(m.Fragment,null):2===t?m.createElement("div",{className:Bl.bundleFakeCard1}):m.createElement(m.Fragment,null,m.createElement("div",{className:Bl.bundleFakeCard1}),m.createElement("div",{className:Bl.bundleFakeCard2}))},r=function(e){var t=e.children,r=e.card,i=e.actions;return m.createElement(h.F.div,{className:Bl.bundleCardWrapper},m.createElement(Ma,{card:r,actions:i}),m.createElement(h.F.div,{className:Bl.cardBundleContainer},t,(0,b.pipe)(function(e){return(0,b.pipe)(e,S.U((function(e){return v.X.isBundle(e)?I.some(e.alerts.length):I.none})))}(r),S.U(I.map((function(e){return m.createElement(n,{key:e,alertCount:e})}))),S.U(I.toNullable))))},i=(0,w.HP)(_.C8.Logging.getLogger)}(pl||(pl={}));var ml,hl=.25,gl="0 1px 8px rgba(109, 117, 141, .18)",vl=T.u.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),yl=T.u.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),bl=T.u.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),wl=T.u.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),_l=T.u.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),Cl={position:"relative",borderRadius:T.u.rem(R.Jr),background:Oe.Il.CoreNeutral0,boxShadow:gl,zIndex:2},Sl={marginTop:T.u.rem(.75)},Al={marginTop:T.u.rem(1.25)},xl={position:"absolute",top:T.u.px(-5),right:T.u.rem(.5),left:T.u.rem(.5),zIndex:-1,display:"block",height:T.u.percent(100),borderRadius:T.u.rem(R.Jr),backgroundColor:Oe.Il.CoreNeutral1,boxShadow:gl,content:"' '"},Il={position:"absolute",top:T.u.px(-10),right:T.u.rem(1),left:T.u.rem(1),zIndex:-2,display:"block",height:T.u.rem(2),borderRadius:T.u.rem(R.Jr),backgroundColor:Oe.Il.CoreNeutral10,boxShadow:gl,content:"' '"},El={borderRadius:T.u.rem(.75),background:Oe.Il.CoreNeutral20,margin:T.u.rem(-.25)+" "+T.u.rem(-.25),padding:T.u.rem(.25)+" "+T.u.rem(.25),$nest:(ul={},ul["& ."+L.g.cozyCardContainerSelector]={margin:0,boxShadow:"none"},ul["& ."+L.g.fullCardSelector]={padding:T.u.rem(.75)+" "+T.u.rem(.5)+" "+T.u.rem(.5)+" "+T.u.rem(1)},ul["& [role=dropdown-list]"]={transform:"translateY("+T.u.rem(-.5)+")"},ul)},kl={position:"absolute",top:T.u.rem(.8),right:T.u.rem(1),margin:0},Tl={borderRadius:T.u.rem(R.Jr),background:Oe.Il.CoreNeutral0,boxShadow:gl},Rl={display:"block",position:"absolute",top:0,$nest:(dl={},dl["& ."+L.g.bundleInnerContainerSelector]={margin:0},dl)},Ll={animation:_l+" "+T.u.seconds(hl)+" ease-out"},Pl={animation:bl+" "+T.u.seconds(hl)+" ease-out"},Ml={animation:yl+" "+T.u.seconds(hl)+" ease-in"},Nl={animation:wl+" "+T.u.seconds(hl)+" ease-in"},Fl={display:"none",animation:vl+" "+T.u.seconds(hl)+" ease-in"},Ol={animation:vl+" "+T.u.seconds(hl)+" ease-in"},Bl=(0,A.__assign)((0,A.__assign)({},T.u.stylesheet({bundleInnerContainer:[Cl],bundleCardWrapper:[El],minimalBetaLabel:[kl],compactCardContainer:[Tl],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[Rl],inBundleToPrevCardOld:[Rl,Ll],inBundleToPrevCardNew:[Pl],inBundleToNextCardOld:[Rl,Ml],inBundleToNextCardNew:[Nl],inBundleToUpdatedCardOld:[Fl],inBundleToUpdatedCardNew:[Ol]})),{bundleInnerContainer:T.u.joinClasses([L.g.bundleInnerContainerSelector,T.u.style(Cl)]),bundleInnerContainer2Cards:T.u.joinClasses([L.g.bundleInnerContainerSelector,T.u.style(Cl,Sl)]),bundleInnerContainerNCards:T.u.joinClasses([L.g.bundleInnerContainerSelector,T.u.style(Cl,Al)]),bundleFakeCard1:T.u.joinClasses([L.g.bundleFakeCard1Selector,T.u.style(xl)]),bundleFakeCard2:T.u.joinClasses([L.g.bundleFakeCard2Selector,T.u.style(Il)])}),Dl=function(e){var t=e.onClick,n=e.collapsed,r=m.useContext(Ke.m.Context).priorityList;return m.createElement(Qe.zx.Tertiary,{name:"card-list-more",className:Ul.toggleNonPriority,title:m.createElement("div",{className:Ul.tooltip},r.toggleButtonTooltip(n)),onClick:t},n?r.expand:r.collapse)},Hl={padding:T.u.rem(.5)+" "+T.u.rem(.25),width:T.u.rem(12.75),whiteSpace:"normal",lineHeight:T.u.rem(1)},Wl={$nest:{"&[data-textpos='everywhere']":{marginTop:T.u.rem(1),padding:"0 "+T.u.rem(2)},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:Oe.Il.CoreNeutral10}}},Ul=T.u.stylesheet({tooltip:[Hl],toggleNonPriority:[Wl]}),zl=function(e){var t=e.actions,n=e.visualState,r="added"===n.transition.type;return m.createElement(m.Fragment,null,"hidden"!==n.transition.type&&m.createElement("div",{className:ql.moreBtnContainer},m.createElement(Dl,{collapsed:r,onClick:function(){return t.next({type:k.l.Type.toggleNonPriorityCards,nextListState:r?"expanded":"collapsed"})}})))},Xl=function(e){var t=e.visualState,n=m.useContext(Ke.m.Context).priorityList;return m.createElement(m.Fragment,null,"rendered"===t.transition.type&&m.createElement("div",{className:ql.hintContainer},m.createElement(He.x4,null,n.hint)))},Gl={display:"flex",height:T.u.rem(3),alignItems:"center",justifyContent:"center"},Vl={padding:T.u.rem(.5),borderRadius:T.u.rem(R.fx),backgroundColor:Oe.Il.CoreNeutral10},ql=T.u.stylesheet({moreBtnContainer:[Gl],hintContainer:[Vl]});!function(e){e.Card=function(e){return g.UI.Node.make((function(t){var n=t.view,r=n("view");return m.createElement(h.F.Fragment,null,r.pipe(C.x((function(e,t){return e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type})),S.U((function(t){return v.X.Priority.isExpand(t)?m.createElement(zl,{actions:e,visualState:t.visualState}):v.X.Priority.isExpandHint(t)?m.createElement(Xl,{visualState:t.visualState}):m.createElement(tt.Card,{miniCard:m.createElement(al.Mini,{card:r,actions:e}),fullCard:v.X.isBundle(t)&&!v.X.isSmartPhrases(t)?m.createElement(pl.Full,{card:r,actions:e}):m.createElement(al.Full,{card:r,actions:e}),successCard:m.createElement(al.Success,{isLastCard:n("isLastCard"),actions:e}),feedbackForm:m.createElement(al.FeedbackForm,{cardData:t,actions:e}),actions:e,card:t})}))))}))}}(ml||(ml={}))},48869:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var r,i=n(51465);!function(e){e.PriorityToggle=function(e){return i.UI.Node.make((function(){return null}))}}(r||(r={}))},23124:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});var r,i=n(59312),a=n(27378),o=n(71215),s=n(85746),c=n(19962),l=n(51465),u=n(22823),d=n(13097),p=n(16782),f=n(41398),m=n(66310),h=n(24209),g=n(49708),v=n(85985),y=n(17343),b=n(76974),w=n(13444),_=n(50628),C=n(40151),S=n(2834),A=n(16528),x=n(28043),I=n(60430),E=n(77176),k=n(93508);!function(e){var t,n;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(n=e.ActionKind||(e.ActionKind={})),e.Cell=l.UI.Grid.make((function(e){var r=e.slots,l=e.state,u=e.notify,d=new p.t,T=l.pipe(f.M(d),m.w((function(e){var t=e[0],n=e[1];return t.position.animationInProgress?h.T(g.R(n,"transitionend").pipe(v.h((function(e){return e.target===n&&"transform"===e.propertyName})),y.h(void 0)),b.of(void 0).pipe(w.g(200))).pipe(_.P()):C.c()})),S.b(u({kind:n.completePositionAnimation}))),R=l.pipe(f.M(d),m.w((function(e){var t=e[0],n=e[1];return t.height.watched?A.YC(n).pipe(v.h((function(e){return t.height.value!==e.height||!t.height.isValid||e.height>0}))):C.c()})),x.x(),S.b((function(e){var t=e.height;return u({kind:n.changePosition,height:t})()})));I.P.useSubscriptionTo(h.T(T,R));var P=l.pipe(E.U((function(e){return e.position.top})),E.U((function(e){return c.ux.translateY(e)})),x.x()),M=l.pipe(E.U((function(e){return e.layer===t.front?1:0})),x.x()),N=l.pipe(E.U((function(e){return e.position})),x.x((function(e,t){return e.top===t.top})),E.U((function(e){return e.animationInProgress?L.animate:void 0})),k.O(void 0));return a.createElement(o.F.div,(0,i.__assign)({},(0,s.Sh)(L.item,N),{style:{transform:P,zIndex:M},mount:function(e){null!==e&&d.next(e)}}),r.item)}))}(r||(r={}));var T={position:"absolute",boxSizing:"border-box",width:u.u.percent(100),contain:"layout"},R={transition:"transform "+u.u.seconds(d.v4/1e3)+" linear"},L=u.u.stylesheet({item:[T],animate:[R]})},71831:(e,t,n)=>{"use strict";n.d(t,{g:()=>l});var r=n(489),i=n(73805),a=n(64909),o=n(45442),s=n(42490),c=n(77176),l=function(e,t){return o.Z.fromSideEffect((function(n){var o=n.kind===s.H.Dialogue.Action.Kind.doneClicked?function(e,t){return{kind:t.kind,unmutedCategories:(0,i.pipe)(e.state.get(),a.map((function(e){var t=e.categories;return Array.from(t.values())})),a.getOrElse((function(){return new Array})),r.filter((function(e){return!e.isMuted})),r.map((function(e){return e.id})))}}(e,n):n;s.H.Dialogue.Action.shouldCloseDialogue(o)&&t.onClose(),e.actionEvents.next(o)}),e.state.pipe(c.U(a.getOrElse((function(){return s.H.Dialogue.State.empty})))))}},17082:(e,t,n)=>{"use strict";n.d(t,{B:()=>$});var r,i,a=n(73805),o=n(51465),s=n(27378),c=n(9261);!function(e){e.close="close"}(r||(r={})),function(e){e.Static=o.UI.Grid.make((function(e){return s.createElement(c.Pj,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:e.notify({kind:r.close})},e.slots.content)}))}(i||(i={}));var l,u=n(42490),d=n(59312),p=n(71215),f=n(85746),m=n(43675),h=n(22232),g=n(90351),v=n(22823),y=n(79844),b=n(39499),w=n(41439),_=n(45836),C=n(60430),S=n(77176),A=o.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return C.P.useEffectOnDidMount(n({kind:u.H.Dialogue.Action.Kind.modalOpened})),s.createElement(c.u_,{className:q.wrapper,close:n({kind:u.H.Dialogue.Action.Kind.closeClicked})},s.createElement(c.u_.Header,{className:q.modalHeader},s.createElement(s.Fragment,null,t.header),s.createElement("div",{className:q.subHeader},t.subheader)),s.createElement(c.u_.Body,{name:"mutedModalBody",className:q.modalBody},s.createElement(s.Fragment,null,t.categories)),s.createElement(c.u_.Footer,{className:q.modalFooter},s.createElement(s.Fragment,null,t.footer)))})),x=o.UI.Node.make((function(e){var t=e.view,n=e.notify,r=e.state,i=s.useContext(y.m.Context).mutedAlerts.dialogue.suggestions;return s.createElement(p.F.div,{className:q.categoryRow},s.createElement(_.XY,{className:q.categoryName},t("description")),s.createElement(_.x4,{className:q.categoryCount},(0,a.pipe)(r,S.U((function(e){return e.isMuted?i(e.alertsCount):""})))),s.createElement(p.F.div,{className:q.categoryState},(0,a.pipe)(r,S.U((function(e){return s.createElement(P,{name:"mutedAlertsOnOff_"+e.id,isOn:!e.isMuted,onClick:n({kind:u.H.Dialogue.Action.Kind.categoryClicked,categoryId:e.id,isMuted:!e.isMuted})})})))))})),I=o.UI.List.make(m.A7(),x),E=o.UI.Node.make((function(e){var t=e.view,n=e.notify;return s.createElement(p.F.Fragment,null,(0,a.pipe)(t("count"),S.U((function(e){return s.createElement(L,{count:e,key:"mutedCountInfo"})}))),s.createElement(b.zx.Primary,{name:"mutedModalDone",onClick:n({kind:u.H.Dialogue.Action.Kind.doneClicked})},"Done"))})),k=o.UI.Node.make((function(){var e=s.useContext(y.m.Context).mutedAlerts.dialogue.header;return s.createElement(_.H1,null,e)})),T=o.UI.Node.make((function(){var e=s.useContext(y.m.Context).mutedAlerts.dialogue.subHeader;return s.createElement(_.XY,null,e)})),R=o.UI.Knot.make(A,{header:k,subheader:T,categories:I,footer:E}),L=function(e){var t=e.count,n=s.useContext(y.m.Context).mutedAlerts.dialogue.footerSuggestions;return 0===t?null:s.createElement("div",{className:q.countInfo},s.createElement(w.JO.GreenOk,{className:q.okIcon,width:16}),s.createElement(_.XY,null,n(t)))},P=function(e){var t=e.isOn,n=e.name,r=e.onClick,i=s.useContext(y.m.Context).mutedAlerts.dialogue;return s.createElement(b.zx.Ghost,(0,d.__assign)({},(0,f.Sh)(q.categoryStateButton,t&&G),{name:n,onClick:r}),t?i.off:i.on)},M=(0,a.pipe)(o.UI.squash(R),o.UI.contramapState((function(e){return{categories:e.categories,footer:e}})),o.UI.mapAction((function(e){switch(e.key){case"categories":return e.action.action;case"footer":case"root":return e.action;default:(0,h.vE)(e)}}))),N={display:"flex",flexDirection:"column",minHeight:v.u.rem(23),maxHeight:v.u.rem(33),width:v.u.rem(36),backgroundColor:g.Il.CoreNeutral0,textAlign:"left"},F={padding:"0 "+v.u.rem(2)+" "+v.u.rem(1)+" "+v.u.rem(2)},O={marginBottom:0,paddingBottom:0,backgroundColor:g.Il.CoreNeutral0,flexShrink:0},B={marginTop:v.u.rem(.5625),paddingBottom:v.u.rem(.6875),borderBottom:"1px solid "+g.Il.CoreNeutral20},D={minHeight:v.u.rem(4)},H={display:"flex",color:g.Il.CoreNeutral90,alignItems:"center",flex:1,justifyContent:"flex-start"},W={marginLeft:v.u.rem(-.5)},U={display:"flex",padding:v.u.rem(.75)+" 0",alignItems:"center",$nest:{"&:not(:first-of-type)":{borderTop:"1px solid "+g.Il.CoreNeutral20}}},z={display:"flex",paddingRight:v.u.rem(.25),width:v.u.rem(12.25),color:g.Il.CoreNeutral90,fontWeight:600,lineHeight:v.u.rem(1.3125),justifyContent:"flex-start"},X={display:"flex",paddingRight:v.u.rem(.25),width:v.u.rem(12.25),color:g.Il.CoreNeutral50,lineHeight:v.u.rem(1.3125),justifyContent:"flex-start"},G="isOn",V={marginTop:v.u.rem(-.25),marginBottom:v.u.rem(-.25),color:g.Il.CoreBlue50,textTransform:"none",letterSpacing:0,fontWeight:600,fontSize:v.u.rem(g.xv.BodySize),$nest:(l={"&[data-textpos=everywhere]":{paddingRight:v.u.rem(.5),paddingLeft:v.u.rem(.5)}},l["&."+G]={color:g.Il.CoreRed50},l)},q=v.u.stylesheet({wrapper:[N],modalBody:[F],modalHeader:[O],subHeader:[B],modalFooter:[D],countInfo:[H],okIcon:[W],categoryRow:[U],categoryName:[z],categoryCount:[X],categoryState:[{display:"flex",justifyContent:"flex-end"}],categoryStateButton:[V]}),Y={kind:u.H.Dialogue.Action.Kind.closeClicked},$=(0,a.pipe)(o.UI.Knot.make(i.Static,{content:M}),o.UI.squash,o.UI.contramapState((function(e){return{content:e}})),o.UI.mapAction((function(e){var t=e.action;return t.kind===r.close?Y:t})))},93162:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r,i=n(27378),a=n(27221),o=n(71215),s=n(90351),c=n(51465),l=n(22823),u=n(13097),d=n(79844),p=n(39499),f=n(32577),m=n(41439),h=n(77176);!function(e){var t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=c.UI.Node.make((function(e){var n=e.state,r=e.notify,s=i.useContext(d.m.Context).priorityLens,c=a.h.create(!1);return i.createElement(o.F.Fragment,null,n.pipe(h.U((function(e){var n=e.allAlertsCount,a=e.priorityAlertsCount,l="priority"===e.selectedLens,u=l?a:n;return i.createElement(f.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:k.dropdownContainer,dropdownList:k.dropdownContent},onVisibilityChange:function(e){return c.set(e)},label:i.createElement(o.F.Fragment,null,c.pipe(h.U((function(e){return i.createElement("div",{className:e?k.labelOpened:k.labelClosed},l?s.prioritySuggestion:s.allSuggestion,u>0&&i.createElement("span",{className:k.alertCount}," "," ",u," "),i.createElement(m.JO.Arrow,{direction:e?m.n4.up:m.n4.down,className:k.labelArrow}))}))))},i.createElement(p.zx.Flat,{name:"priorityAlerts",className:l?k.boldLensButton:k.lensButton,onClick:r(t.switchToPriority)},i.createElement(m.JO.Star,{width:12}),s.prioritySuggestion,l?i.createElement(m.JO.Yes,{className:k.checkMarkIcon}):null),l&&a===n?i.createElement("div",{className:k.disabledLensButton},i.createElement(m.JO.Formatting.BulletList,{width:21}),s.disabledAllSuggestion):i.createElement(p.zx.Flat,{name:"allAlerts",className:l?k.lensButton:k.boldLensButton,onClick:r(t.switchToAll)},i.createElement(m.JO.Formatting.BulletList,{width:21}),s.allSuggestion,l?null:i.createElement(m.JO.Yes,{className:k.checkMarkIcon})),i.createElement("div",{className:k.separator}),i.createElement("div",{className:k.description},i.createElement(m.JO.Info,{className:k.descriptionIcon}),i.createElement("div",null,s.description)))}))))}))}(r||(r={}));var g={display:"flex",width:l.u.rem(16)},v={zIndex:u.FY,marginTop:0,fontSize:l.u.rem(.875),lineHeight:l.u.rem(1.3125)},y={display:"flex",boxSizing:"border-box",padding:l.u.rem(.1875)+" "+l.u.rem(.25)+" "+l.u.rem(.1875)+" "+l.u.rem(.25),height:l.u.rem(1.5),borderRadius:l.u.rem(u.fx),color:s.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:l.u.rem(.025),fontSize:l.u.rem(.625),lineHeight:l.u.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:s.Il.CoreNeutral20}}},b={backgroundColor:s.Il.CoreNeutral10},w={color:s.Il.CoreNeutral50,whiteSpace:"pre"},_={minWidth:l.u.rem(1),minHeight:l.u.rem(1),marginLeft:l.u.rem(.5625)},C={padding:"0 "+l.u.rem(.5),color:s.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},S={display:"flex",padding:"0 "+l.u.rem(.5),height:l.u.rem(2),color:s.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},A={margin:l.u.rem(.5)+" "+l.u.rem(1),width:"calc(100% - "+l.u.rem(2)+")",height:l.u.px(1),backgroundColor:s.Il.CoreNeutral20},x={display:"flex",padding:"0 "+l.u.rem(.5)+" "+l.u.rem(.5)+" "+l.u.rem(.5),fontSize:l.u.rem(.75),lineHeight:l.u.rem(1.125),alignItems:"center"},I={marginBottom:"auto",minHeight:l.u.rem(1.25)},E={color:s.Il.CoreBlue60,cursor:"pointer"},k=l.u.stylesheet({dropdownContainer:[g],dropdownContent:[v],labelClosed:[y],labelOpened:[y,b],alertCount:[w],labelArrow:[_],lensButton:[C],disabledLensButton:[S],boldLensButton:[C,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[A],description:[x],descriptionIcon:[I],descriptionLink:[E]})},51100:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r,i,a=n(27378),o=n(71215),s=n(51465),c=n(9261),l=n(59312),u=n(73805),d=n(27221),p=n(85746),f=n(64909),m=n(94503),h=n(79844),g=n(39499),v=n(34095),y=n(16323),b=n(45836),w=n(90351),_=n(22823),C=n(71031),S=n(13097),A=n(41439),x=function(e){var t=e.upgradeAction,n=e.size,r=e.title,i=e.className,o=r||a.useContext(h.m.Context).goPremium;return a.createElement(g.zx,(0,l.__assign)({name:"upgrade"},(0,p.Sh)(i,"big"===n?D.baseBig:"link"===n?D.link:D.baseSmall),{onClick:t}),"link"===n?a.createElement(A.JO.PaidLink,{width:14,className:D.linkIcon}):a.createElement(A.JO.Paid,{className:"big"===n?D.bigIcon:D.icon}),o)},I={background:w.Il.CoreGreen60,borderRadius:_.u.rem(S.fx),boxShadow:"0 2px 5px "+_.u.color(C.UE).fade(.35).toRGBA().toString(),color:w.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:_.u.rem(S.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:_.u.color(w.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:_.u.color(w.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},E={padding:"0 "+_.u.rem(3)+" 0 "+_.u.rem(2),fontSize:_.u.rem(.8125),lineHeight:_.u.rem(3)},k={padding:"0 "+_.u.rem(2)+" 0 "+_.u.rem(.5),fontSize:_.u.rem(.6875),lineHeight:_.u.rem(2)},T={background:w.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:_.u.color(w.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:_.u.color(w.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},R={padding:"0 "+_.u.rem(3)+" 0 "+_.u.rem(2),fontSize:_.u.rem(.8125),lineHeight:_.u.rem(3)},L={padding:"0 "+_.u.rem(2)+" 0 "+_.u.rem(.5),fontSize:_.u.rem(.6875),lineHeight:_.u.rem(2)},P={fill:w.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:w.Il.CoreNeutral0}}},M={marginRight:_.u.rem(.2)},N={color:w.Il.CoreGreen60,fontSize:_.u.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},F={color:w.Il.CoreGreen60},O={fill:w.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:w.Il.CoreGreen60}}},B={fill:w.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:w.Il.CoreGreen60}}},D=_.u.stylesheet({base:[I],baseBig:[I,E],baseSmall:[I,k],baseUpHookRedesign:[I,T],baseBigUpHookRedesign:[E,T,R],baseSmallUpHookRedesign:[k,T,L],icon:[P],bigIcon:[P,M],link:[N],linkUpHookRedesign:[N,F],linkIconUpHookRedesign:[O],linkIcon:[B]}),H=n(60430),W=n(2834),U=n(45980),z=.8125,X={display:"flex",flexDirection:"column",maxHeight:"90vh",width:_.u.rem(41.5),backgroundColor:w.Il.CoreNeutral0,textAlign:"left"},G={padding:_.u.rem(1.125)+" "+_.u.rem(2)+" "+_.u.rem(1),paddingBottom:_.u.rem(1)},V={paddingBottom:0,backgroundColor:w.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:"calc(100% - "+_.u.rem(4)+")",height:_.u.px(1),background:w.Il.CoreNeutral20,content:"''"}}},q={display:"block",margin:_.u.rem(z)+" 0",color:w.Il.CoreNeutral90,fontWeight:w.xv.SmallLightWeight,lineHeight:_.u.rem(1.5)},Y={minHeight:_.u.rem(4)},$={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:_.u.rem(1.25),borderBottom:"1px solid "+w.Il.CoreNeutral20}}},j="setGoalsToneButton",Z={marginBottom:_.u.rem(-.5),maxWidth:_.u.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:(r={},r["& > ."+j]={margin:"0 0 "+_.u.rem(.5),marginLeft:_.u.important(0),$nest:{"&:not(:last-child)":{marginRight:_.u.rem(.5)}}},r)},J={width:_.u.rem(7),textTransform:"capitalize",lineHeight:_.u.rem(2)},K={marginTop:_.u.rem(z)},Q={margin:"0 0 "+_.u.rem(1.5)+" "+_.u.rem(7)},ee={margin:"0 0 "+_.u.rem(1.5)+" "+_.u.rem(7)},te={display:"flex",width:_.u.percent(100),justifyContent:"space-between"},ne={color:w.Il.CoreNeutral90,fontWeight:300,fontSize:_.u.rem(.8125)},re=_.u.stylesheet({wrapper:[X],modalBody:[G],modalHeader:[V],itemDescription:[q],modalFooter:[Y],row:[$],toneButtons:[Z],rowHeader:[J],extraContent:[K],title:[Q],description:[ee],image:[{position:"absolute"}],footerWrapper:[te],checkboxText:[ne]}),ie=function(e){var t=e.name,n=e.items,r=e.sticky,i=e.theme,o=void 0===i?{}:i,s=e.extraContent,c=e.children;return a.createElement("div",{className:re.row},a.createElement("div",null,a.createElement(b.H3,{className:re.rowHeader},t),s),a.createElement("div",null,a.createElement(g.zx.Group,{sticky:r,className:o.buttonsGroup},n.map((function(e){return a.createElement(g.zx.White,(0,l.__assign)({className:o.button,name:"context-"+t+"-"+e.key},e))}))),a.createElement(b.x4,{className:re.itemDescription},c)))},ae=function(e){var t=e.items,n=e.current,r=e.shouldDisable,i=e.itemTitle,a=void 0===i?U.identity:i;return{sticky:!0,items:t.map((function(e){return{key:e,active:n.view((function(t){return t===e})),onClick:function(){return n.set(e)},disabled:r&&r(e),children:a(e)}}))}},oe=function(e,t){var n=e.items,r=e.current;return{items:n.map((function(e){return{key:e,active:r.view((function(t){return(0,u.pipe)(t,f.exists((function(t){return t.has(e)})))})),onClick:function(){return r.modify((function(t){var n=(0,u.pipe)(t,f.fold((function(){return new Set}),(function(e){return new Set(e)})));return n.has(e)?n.delete(e):n.add(e),f.some(n)}))},children:t(e)}}))}},se=function(e){var t=e.blocks,n=e.features,r=e.showOnLoad,i=e.close,o=e.upgrade,s=e.reset,l=e.showOnLoadChanged,u=a.useContext(m.a.Context);return a.createElement(c.u_,{className:re.wrapper},a.createElement(c.u_.Header,{className:re.modalHeader},a.createElement(le,null)),a.createElement(c.u_.Body,{name:"goalsBody",className:re.modalBody},a.createElement(ce,{features:n,upgradeAction:o,blocks:t})),a.createElement(c.u_.Footer,{className:re.modalFooter},a.createElement(ue,{supportsSetGoalsLoader:!n.demoMode&&u.has(m.a.Flag.supportsSetGoalsLoader),onDone:i,reset:s,showOnLoad:r,showOnLoadChanged:l})))},ce=function(e){var t=e.blocks,n=e.features,r=e.upgradeAction,i=a.useContext(h.m.Context).goals,s=t.audience,c=t.formality,d=t.domain,p=t.tone,m=t.intent;return a.createElement(a.Fragment,null,a.createElement(ie,(0,l.__assign)({name:"audience"},ae(s)),s.current.view((function(e){return e&&i.sections.audience[e]((0,u.pipe)(t.audience.default,f.exists((function(t){return t===e}))))}))),a.createElement(ie,(0,l.__assign)({name:"formality"},ae(c)),c.current.view((function(e){return e?i.sections.formality[e]:""}))),a.createElement(ie,(0,l.__assign)({name:"domain"},ae((0,l.__assign)((0,l.__assign)({},d),{itemTitle:function(e){return"mail"===e?"email":e}})),{extraContent:a.createElement(o.F.div,{className:re.extraContent},n.isFree?a.createElement(x,{size:"link",upgradeAction:r}):null)}),d.current.view((function(e){return n.isFree?i.sections.domain.free:e?i.sections.domain[e]:""}))),a.createElement(ie,(0,l.__assign)({name:"tone",theme:{buttonsGroup:re.toneButtons,button:j}},oe(p,(function(e){return a.createElement(y.d,{key:e},i.sections.tone.options[e])}))),i.sections.tone.experimental),a.createElement(ie,(0,l.__assign)({name:"intent"},oe(m,(function(e){return i.sections.intent.options[e]}))),i.sections.intent.experimental))},le=function(){var e=a.useContext(h.m.Context).goals;return a.createElement(a.Fragment,null,a.createElement(de,null),a.createElement(b.H1,{className:re.title},e.title),a.createElement(b.XY,{className:re.description},e.header))},ue=function(e){var t=e.supportsSetGoalsLoader,n=e.showOnLoad,r=e.showOnLoadChanged,i=e.reset,o=e.onDone,s=a.useContext(h.m.Context).goals,c=d.h.create(n);return H.P.useSubscriptionTo(c.pipe(W.b(r))),a.createElement("div",(0,l.__assign)({},(0,p.Sh)(t&&re.footerWrapper)),t&&a.createElement(v.Ys,{checked:c,name:"set-goals"},a.createElement(b.x4,{className:re.checkboxText},s.footer.showModalOnStart)),a.createElement(g.zx.Group,null,a.createElement(g.zx.Ghost,{name:"reset",onClick:i},s.footer.reset),a.createElement(g.zx.Primary,{name:"closeSetContext",onClick:o},s.footer.done)))},de=function(){return a.createElement("svg",{className:re.image,width:"69",height:"80",viewBox:"0 0 69 80"},a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),a.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),a.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),a.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),a.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),a.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})))},pe=n(50628),fe=n(77176);!function(e){var t;e.Modal=s.UI.Node.make((function(e){var n=e.state,r=e.notify;return H.P.useSubscriptionTo(n.pipe(pe.P(),W.b((function(e){return r({kind:t.open,source:e.source})()})))),a.createElement(o.F.Fragment,null,n.pipe(fe.U((function(e){var n=r({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad});return a.createElement(c.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:n},a.createElement(se,{blocks:e.blocks,features:e.features,close:n,upgrade:r({kind:t.upgrade}),reset:r({kind:t.reset}),showOnLoad:e.showOnLoad,showOnLoadChanged:function(e){return r({kind:t.showOnLoadChanged,value:e})()}}))}))))})),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(i||(i={}))},20403:(e,t,n)=>{"use strict";n.d(t,{q:()=>ee});var r,i=n(27378),a=n(71215),o=n(22232),s=n(51465),c=n(79844),l=n(87325),u=n(39499),d=n(9261),p=function(){return i.createElement("svg",{width:"128",height:"177"},i.createElement("defs",null,i.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),i.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),i.createElement("mask",{id:"b",fill:"#fff"},i.createElement("use",{xlinkHref:"#a"})),i.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),i.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),i.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),i.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),i.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})))},f=n(54071),m=n(45836),h=n(77176),g=n(59312),v=n(85746),y=n(76024);!function(e){function t(e,t){var n=t/60,r=y.nH(e/n);return r.s=r.h>0&&r.m>10?0:Math.floor(r.s),r}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}}(r||(r={}));var b=n(18208),w=n(64909),_=n(90351),C=n(22823),S=n(71031),A=n(13097),x=n(41439),I=n(73805),E=n(27221),k=n(2844),T=n(66310),R=n(93508),L=n(16118),P=n(76974),M=n(13444),N=function(e){var t=e.score,n=e.documentIsEmpty,r=e.sidebarOpen,o=void 0===r?E.h.create(!0):r,s=e.successIcon,c=e.progressIcon,l=e.zeroIcon,u=void 0===l?null:l,d=t.pipe(h.U(w.map((function(e){return e.rank})))),p=k.aj(t,n,(function(e,t){return(0,I.pipe)(e,w.fold((function(){return!1}),(function(e){return 100===e.rank&&!t})))})),f=o.pipe(T.w((function(e){return e?d.pipe(R.O(w.none),L.G(),T.w((function(e){var t=e[0],n=e[1];return(0,I.pipe)(n,w.fold((function(){return P.of(u)}),(function(e){return p.pipe(R.O(!1),L.G(),T.w((function(n){var r=n[0];return n[1]?P.of(s):(0,I.pipe)(t,w.filter((function(){return!r})),w.fold((function(){return P.of(c(e)).pipe(M.g(1),R.O(c(0)))}),(function(){return P.of(c(e))})))})))})))}))):P.of(null)})),R.O(null));return i.createElement(a.F.Fragment,null,f)},F=n(52479);function O(e){var t=e.value,n=e.className,r=e.leftCustomClass,o=e.rightCustomClass,s=E.h.create(!1);requestAnimationFrame((function(){return requestAnimationFrame((function(){return s.set(!0)}))}));var c=k.aj(F.Dx(t),s,(function(e,t){return t?Math.max(5,Math.abs(e-50))+"%":0})),l=function(e,t,n){return F.Dx(e).pipe(h.U((function(e){return e<50?t:n})))};return i.createElement(a.F.div,(0,g.__assign)({},(0,v.Sh)(function(e){return F.Dx(e).pipe(h.U((function(e){return e<50?z.leftSideWrapper:z.rightSideWrapper})))}(t),n)),i.createElement(a.F.div,(0,g.__assign)({},(0,v.Sh)(l(t,z.leftSideProgress,z.rightSideProgress),r&&o&&l(t,r,o)),{style:{width:c}})))}!function(e){e.Label=function(e){var t=e.value,n=e.className,r=i.useContext(c.m.Context).performance,a=t>66?r.aboveAverage:t>50?r.average:r.belowAverage;return i.createElement(m.x4,{className:n},a)}}(O||(O={}));var B,D={position:"relative",zIndex:1,display:"flex",width:C.u.percent(100),height:C.u.rem(.25),borderRadius:C.u.rem(A.fx)},H={height:C.u.percent(100),backgroundColor:S.FW,transition:"width .8s ease-in-out 0s"},W={marginRight:C.u.percent(50),borderTopLeftRadius:C.u.rem(.25),borderBottomLeftRadius:C.u.rem(.25)},U={marginLeft:C.u.percent(50),borderTopRightRadius:C.u.rem(.25),borderBottomRightRadius:C.u.rem(.25)},z=C.u.stylesheet({wrapper:[D],leftSideWrapper:[D,{justifyContent:"flex-end"}],rightSideWrapper:[D,{justifyContent:"flex-start"}],progress:[H],leftSideProgress:[H,W],rightSideProgress:[H,U]}),X=n(63979),G={display:"flex",flexDirection:"column",maxHeight:"90vh",width:C.u.rem(32),height:C.u.rem(41),background:_.Il.CoreNeutral0},V={padding:C.u.rem(2.75)+" "+C.u.rem(1)+" 0 "+C.u.rem(2),minHeight:C.u.rem(5.1),height:C.u.rem(5.1),backgroundColor:_.Il.CoreNeutral0},q={marginRight:C.u.rem(1),paddingBottom:C.u.rem(.3),borderBottom:"1px solid "+S.xO},Y={padding:"0 "+C.u.rem(1)+" "+C.u.rem(1)+" "+C.u.rem(2)},$={padding:"0 "+C.u.rem(1.9),minHeight:C.u.rem(4),height:C.u.rem(4)},j={position:"absolute",top:C.u.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},Z={display:"flex",flexDirection:"column",marginTop:C.u.rem(7.15),marginBottom:C.u.rem(2),paddingRight:C.u.rem(1),alignItems:"center"},J={wordSpacing:C.u.rem(.05),fontSize:C.u.rem(.875),lineHeight:C.u.rem(1.5)},K={padding:C.u.rem(1.3)+" "+C.u.rem(2.6),textAlign:"center"},Q=C.u.prefixedStylesheet("statistics",{wrapper:[G],modalHeader:[V],modalHeaderUnderline:[q],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[Y],modalFooter:[$],loader:[j],zeroStateContainer:[Z],performanceText:[J],zeroStateText:[J,K]});!function(e){e.number="number",e.time="time",e.percentage="percentage"}(B||(B={}));var ee,te=function(e){switch(e){case B.number:case B.percentage:return ke.numberRowData;case B.time:return ke.timeRowData;default:return(0,o.vE)(e)}},ne=function(e){var t=e.type,n=e.value,r=e.info,a=e.children,s=e.dataName;return i.createElement("div",{className:ke.row,"data-name":s},i.createElement("div",{className:te(t)},i.createElement("div",{className:ke.metricTitle},a),i.createElement("div",{className:ke.metric},function(e,t){switch(e){case B.number:return(Math.round(10*t)/10).toLocaleString();case B.time:return y.g2(t);case B.percentage:return Math.round(t)+"%";default:return(0,o.vE)(e)}}(t,n))),r&&i.createElement(u.RZ,{title:r}))},re=function(e){var t=e.state,n=i.useContext(c.m.Context).performance,o=t.stats,s=t.score,l=t.documentIsEmpty;return i.createElement(i.Fragment,null,i.createElement("section",{className:ke.titleSection},i.createElement("div",{className:ke.titleColumns},i.createElement(a.F.div,(0,g.__assign)({},(0,v.Sh)(Q.performanceText,ke.headerDescription)),100===s.rank?n.score100:n.scoreUnder100(s.rank)),i.createElement(N,{score:P.of(w.some(s)),documentIsEmpty:P.of(l),successIcon:i.createElement(x.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:ke.checkmark}),progressIcon:function(e){return i.createElement(X.P,{key:"modal-performance-progress",colorType:X.P.ColorType.royalBlue,fontSize:X.P.FontSize.small,percentage:e,theme:Te})}}))),i.createElement("section",{className:ke.wordCountSection},i.createElement(m.H2,{className:ke.sectionHeaderUnderline},n.wordCount),i.createElement("div",{className:ke.wordCountColumns},i.createElement("div",{className:ke.firstColumn},i.createElement(ne,{type:B.number,value:Math.max(o.chars-1,0)},n.characters),i.createElement(ne,{type:B.number,value:o.words},n.words),i.createElement(ne,{type:B.number,value:o.sentences},b._6(o.sentences,n.sentence,n.sentences))),i.createElement("div",{className:ke.secondColumn},i.createElement(ne,{type:B.time,value:r.calculateReadingTime(o.words)},n.readingTime),i.createElement(ne,{type:B.time,value:r.calculateSpeakingTime(o.words)},n.speakingTime)))),i.createElement("section",{className:ke.readabilitySection},i.createElement("div",{className:ke.sectionHeaderWrapper},i.createElement(m.H2,null,n.readability),i.createElement(m.CL,null,n.sectionTitleDescription)),i.createElement("div",{className:ke.readabilityColumns},i.createElement("div",{className:ke.firstColumn},i.createElement(ne,{type:B.number,value:o.wordLength},n.wordLengthTitle),i.createElement(ne,{type:B.number,value:o.sentenceLength},n.sentenceLengthTitle),i.createElement(ne,{type:B.number,value:o.readabilityScore,info:n.readabilityDescription,dataName:"readability"},n.readabilityScore)),i.createElement("div",{className:ke.secondColumn},i.createElement("div",{className:ke.row},i.createElement(O,{value:o.wordLengthIndex,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),i.createElement(O.Label,{value:o.wordLengthIndex,className:ke.progressLabel})),i.createElement("div",{className:ke.row},i.createElement(O,{value:o.sentenceLengthIndex,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),i.createElement(O.Label,{value:o.sentenceLengthIndex,className:ke.progressLabel})),i.createElement("div",{className:ke.verticalPillar}))),i.createElement(m.CL,{className:ke.readabilityDescr},o.readabilityDescription)),i.createElement("section",null,i.createElement("div",{className:ke.sectionHeaderWrapper},i.createElement(m.H2,null,n.vocabulary),i.createElement(m.CL,null,n.sectionTitleDescription)),i.createElement("div",{className:ke.vocabularyColumns},i.createElement("div",{className:ke.firstColumn},i.createElement(ne,{type:B.percentage,value:o.uniqueWords,info:n.uniqueWords},n.uniqueWordsTitle),i.createElement(ne,{type:B.percentage,value:o.rareWords,info:n.rareWords},n.rareWordsTitle)),i.createElement("div",{className:ke.secondColumn},i.createElement("div",{className:ke.row},i.createElement(O,{value:o.uniqueWords,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),i.createElement(O.Label,{value:o.uniqueWords,className:ke.progressLabel})),i.createElement("div",{className:ke.row},i.createElement(O,{value:o.rareWords,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),i.createElement(O.Label,{value:o.rareWords,className:ke.progressLabel})),i.createElement("div",{className:ke.verticalPillar})))))},ie={marginBottom:C.u.rem(2.4)},ae={display:"flex",marginTop:C.u.rem(.9),marginRight:C.u.rem(1),justifyContent:"space-between"},oe={marginBottom:C.u.rem(1.5)},se={display:"flex",marginTop:C.u.rem(.8)},ce={marginBottom:C.u.rem(2.4)},le={display:"flex",marginTop:C.u.rem(.8)},ue={display:"flex",marginTop:C.u.rem(.8)},de={flexBasis:C.u.percent(50)},pe={position:"relative",paddingLeft:C.u.rem(.5),flexBasis:C.u.percent(50)},fe={display:"flex",height:C.u.rem(2),alignItems:"center"},me={display:"flex",justifyContent:"space-between"},he={width:C.u.rem(10),fontFeatureSettings:A.Q9+", "+A.g_},ge={width:C.u.rem(13)},ve={marginRight:C.u.rem(1),paddingBottom:C.u.rem(.5),borderBottom:"1px solid "+S.xO},ye={width:C.u.percent(80),whiteSpace:"pre-line"},be={display:"inline-block",color:_.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:C.u.rem(.875),lineHeight:C.u.rem(2)},we={display:"inline-block",color:_.Il.CoreNeutral90,fontSize:C.u.rem(.875),lineHeight:C.u.rem(2)},_e={width:C.u.rem(3.2),height:C.u.rem(3.2),fontWeight:"bold"},Ce={width:C.u.rem(6),backgroundColor:S.xO},Se={marginLeft:C.u.rem(1.125)},Ae={backgroundImage:S.BZ},xe={backgroundImage:S.Xd},Ie={display:"block",paddingTop:C.u.rem(.5)},Ee={position:"absolute",top:C.u.rem(.5),left:C.u.rem(3.5),width:C.u.rem(.0625),height:C.u.rem(3),backgroundColor:S.jj},ke=C.u.stylesheet({titleSection:[ie],titleColumns:[ae],wordCountSection:[oe],wordCountColumns:[se],readabilitySection:[ce],readabilityColumns:[le],vocabularyColumns:[ue],firstColumn:[de],secondColumn:[pe],row:[fe],rowData:[me],numberRowData:[me,he],timeRowData:[me,ge],sectionHeaderUnderline:[ve],sectionHeaderWrapper:[ve,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[ye],metric:[be],metricTitle:[we],checkmark:[{alignItems:"center"}],circleProgressBar:[_e],progressBar:[Ce],progressLabel:[Se],leftProgress:[Ae],rightProgress:[xe],readabilityDescr:[Ie],verticalPillar:[Ee]}),Te={radialProgressBar:ke.circleProgressBar};!function(e){var t;e.ModalView=s.UI.Grid.make((function(n){var r=n.slots,a=n.state,o=(0,n.notify)({kind:t.close});return i.createElement(d.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:o},i.createElement(e.ModalContent,{state:a,downloadButton:r.downloadButton,onClose:o}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=function(t){var n=t.state,r=t.downloadButton,a=t.onClose;return i.createElement(d.u_,{className:Q.wrapper},i.createElement(d.u_.Header,{className:Q.modalHeader},i.createElement(e.Header,{state:n})),i.createElement(d.u_.Body,{name:"performanceBody",className:Q.modalBody,wrapperClassName:n.pipe(h.U((function(e){return e.type===l.g.State.Type.EMPTY?Q.modalEmpty:Q.modalReady})))},i.createElement(e.Body,{state:n})),i.createElement(d.u_.Footer,{className:Q.modalFooter},i.createElement(g,{downloadButton:r,onClose:a})))};var n=function(){var e=i.useContext(c.m.Context);return i.createElement("div",{className:Q.zeroStateContainer},i.createElement(p,null),i.createElement("div",{className:Q.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=function(e){var t=e.state,n=i.useContext(c.m.Context);return i.createElement(a.F.Fragment,null,t.pipe(h.U((function(e){return i.createElement(m.H2,{key:"statisticsHeader",className:e.type===l.g.State.Type.READY?Q.modalHeaderUnderline:""},n.performance.title)}))))};var r=function(){return i.createElement(f.$,{size:64,className:Q.loader,variation:"blue"})};e.Body=function(e){var t=e.state;return i.createElement(a.F.Fragment,null,t.pipe(h.U((function(e){switch(e.type){case l.g.State.Type.EMPTY:return null;case l.g.State.Type.LOADING:case l.g.State.Type.ERROR:return i.createElement(r,{key:"statisticsLoading"});case l.g.State.Type.SHORT_CONTENT:return i.createElement(n,{key:"statisticsEmpty"});case l.g.State.Type.READY:return i.createElement(re,{key:"statisticsContent",state:e});default:return(0,o.vE)(e)}}))))};var g=function(e){var t=e.downloadButton,n=e.onClose;return i.createElement(i.Fragment,null,t,i.createElement(u.zx.Primary,{name:"close-stats",onClick:n},"Close"))}}(ee||(ee={}))},52268:(e,t,n)=>{"use strict";n.d(t,{wK:()=>f,JT:()=>m,hM:()=>h});var r=n(73805),i=n(64909),a=n(8125),o=n(22232),s=n(88903),c=n(45442),l=n(15228),u=n(77176);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}function p(e){switch(e){case l.g.SuccessType.applied:case l.g.SuccessType.large:return"growComplete";default:return"growStart"}}function f(e,t,n){return function(){return e.pipe(u.U((function(e){var r=function(e,t,n){var r=t.successLens;switch(e){case l.g.SuccessType.zero:return r.emptyText;case l.g.SuccessType.small:return r.smallText;case l.g.SuccessType.large:return r.largeText;case l.g.SuccessType.applied:return n?r.fixedTextDemoPremiumUpHook:{title:r.fixedText.titles[(0,a.TN)(9)]};default:return(0,o.vE)(e)}}(e,n,t);return{kind:p(e),caption:i.some(d(r))}})))}}function m(e){return function(){return e.pipe(u.U((function(e){return{kind:p(e),caption:i.none}})))}}function h(e){return c.Z.animatingFlow(e,(function(e){return(0,r.pipe)(e,i.fold((function(){return i.some(s.right("fadein"))}),(function(){return i.some(s.both("fadeout","fadein"))})))}))}},56157:(e,t,n)=>{"use strict";n.d(t,{q:()=>T});var r=n(27378),i=n(73805),a=n(71215),o=n(83078),s=n(90351),c=n(51465),l=n(22823),u=n(45836),d=n(77176),p=c.UI.Node.make((function(){return r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),r.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"}))))})),f=c.UI.Node.make((function(){return r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),r.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"}))})),m=c.UI.Node.make((function(e){var t=e.view;return r.createElement("div",{"data-name":"success-lens-text",className:E.newSuccessText},r.createElement(u.H4,{key:"title"},t("title")),r.createElement("div",{className:E.newSuccessDescription},r.createElement(a.F.div,{className:E.newSuccessDescriptionText},(0,i.pipe)(t("firstLine"),d.U(o.QP)))))})),h=c.UI.Union.asOption(m),g=c.UI.Grid.make((function(e){var t=e.slots;return r.createElement(a.F.div,{className:E.newSuccessContainer},t.image,t.caption)})),v=c.UI.Knot.make(g,{image:p,caption:h}),y=c.UI.Knot.make(g,{image:f,caption:h}),b=c.UI.Union.make("kind",{growStart:v,growComplete:y}),w=l.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),_=l.u.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),C={animation:w+" 300ms linear forwards"},S={position:"absolute",top:0,width:l.u.percent(100),animation:_+" 200ms linear forwards"},A={width:l.u.percent(100),marginTop:l.u.rem(.5)},x={marginTop:l.u.rem(.25)},I={fontSize:l.u.rem(s.xv.NewSuccessDescriptionSize),color:s.Il.CoreNeutral50,letterSpacing:s.xv.NewSuccessDescriptionLetterSpacing,lineHeight:l.u.rem(s.xv.NewSuccessDescriptionLineHeight),fontWeight:s.xv.NewSuccessDescriptionWeight},E=l.u.stylesheet({success_fadein:[C],success_fadeout:[S],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[A],newSuccessDescription:[x],newSuccessDescriptionText:[I]}),k=c.UI.Transition.make({fadein:E.success_fadein},{fadeout:E.success_fadeout}),T=c.UI.Animated.make(k,b)},45440:(e,t,n)=>{"use strict";n.d(t,{r:()=>v});var r,i=n(27378),a=n(73805),o=n(64909),s=n(51465),c=n(22823),l=n(79176),u=n(79844),d=n(41439),p=n(45836),f=s.UI.Grid.make((function(e){var t=e.slots;return i.createElement("div",{className:_.grid},i.createElement("div",{className:_.iconWrapper},t.icon),i.createElement("div",{className:_.titleWrapper},t.title),i.createElement("div",{className:_.bottomWrapper},t.bottom))})),m=s.UI.Node.make((function(){var e=i.useContext(u.m.Context).successLens.paidView;return i.createElement(p.H4,null,e.title)})),h=s.UI.Node.make((function(){return i.createElement(d.JO.GreenOk,{width:32})})),g=s.UI.Knot.make(f,{icon:h,title:m,bottom:s.UI.Union.make("kind",(r={},r[l.n.State.hidden]=s.UI.Node.empty,r[l.n.State.expanded]=l.n.TogglableExpandedPanel,r))}),v=(0,a.pipe)(s.UI.squash(g),s.UI.contramapState((function(e){return(0,a.pipe)(e,o.fold((function(){return{bottom:{kind:l.n.State.hidden}}}),(function(e){return{bottom:{kind:l.n.State.expanded,showCloseButton:!1,alertsState:e}}})))}))),y={marginTop:c.u.rem(3.5)},b={marginTop:c.u.rem(1.375)},w={marginTop:c.u.rem(2.675)},_=c.u.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[b],bottomWrapper:[w]})},79126:(e,t,n)=>{"use strict";n.d(t,{Q:()=>d});var r=n(45980),i=n(64909),a=n(22232),o=n(77176),s=n(66265),c=n(93508),l=n(66310),u=n(79176);function d(e){return(0,r.flow)(o.U((function(e){switch(e.key){case u.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(u.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,a.vE)(e.action)}case u.n.State.minimized:switch(e.action.action){case"onClick":return i.some(u.n.State.expanded);default:return(0,a.vE)(e.action.action)}default:return(0,a.vE)(e)}})),s.oA,c.O(u.n.State.minimized),l.w((function(t){return e.pipe(o.U(i.fold((function(){return{kind:u.n.State.hidden}}),(function(e){switch(t){case u.n.State.minimized:return{kind:u.n.State.minimized,alertsCount:e.count};case u.n.State.expanded:return{kind:u.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case u.n.State.hidden:return{kind:u.n.State.hidden};default:return(0,a.vE)(t)}}))))})))}},79176:(e,t,n)=>{"use strict";n.d(t,{n:()=>Re});var r,i,a,o,s,c,l,u,d,p,f=n(51465),m=n(27378),h=n(73805),g=n(71215),v=n(22232),y=n(64909),b=n(79844),w=n(39499),_=n(59312),C=n(85746),S=n(19962),A=n(90351),x=n(22823),I=n(71031),E=n(94503),k=n(41439),T=n(54071),R=n(14611),L=n(52479),P=n(58199),M=n(77176),N=n(57091),F=n(93508);!function(e){function t(e){return 0===e?"":e>=1e3?Math.min(Math.trunc(e/1e3),9)+"k+":String(e)}var n=function(e){var t=e.className,n=e.isChecking,r=e.type,i=e.animateFade,a=void 0===i||i,o=R.f.fadeOutState(n),s=o.state,c=o.complete,l="checking-complete";return m.createElement(g.F.div,(0,_.__assign)({},(0,C.Sh)(se.loader,t),{role:"loader"}),a?s.pipe(M.U((function(e){return"end"===e?m.createElement("div",{key:"checking-complete",className:l}):m.createElement(T.$,{key:"spinner",variation:r,size:"100%",className:"fadeOut"===e?se.fadeOut:void 0,onTransitionEnd:c})}))):n.pipe(M.U((function(e){return e?m.createElement(T.$,{variation:r,size:"100%"}):m.createElement("div",{className:l})}))))},r=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,c=e.suffix,l=void 0===c?"":c,u=m.useContext(E.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,C.Sh)(se.roundCounter,L.ab(s,T.$.getClassName(se)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 32",className:se.circular},m.createElement("g",null,m.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),m.createElement("text",(0,_.__assign)({x:"16",y:"17"},S.h5(u.has(E.a.Flag.supportsSVGDominantBaseline)),{fontSize:a>=100?14:18,"data-name":n},(0,C.Sh)(V,i.counterContent)),t(a),l))))},i=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,c=e.suffix,l=void 0===c?"":c,u=m.useContext(E.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,C.Sh)(se.ovalCounter,L.ab(s,T.$.getClassName(se)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 20",className:se.circular},m.createElement("rect",{width:"32",height:"20",rx:"10"}),m.createElement("text",(0,_.__assign)({x:"16",y:"10.5"},S.h5(u.has(E.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":n},(0,C.Sh)(V,i.counterContent)),t(a),l)))};e.Counter=function(e){var t=e.theme,n=void 0===t?{}:t,a=e.count,o=e.type,s=void 0===o?"white":o,c=a>=100?i:r;return m.createElement(c,{theme:(0,_.__assign)((0,_.__assign)({},n),{counterWrapper:(0,C.Sh)(n.counterWrapper,se.flexCounter).className}),count:a,type:s})},e.OutcomeCounter=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,c=e.suffix,l=e.fontSize,u=void 0===l?12:l,d=m.useContext(E.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,C.Sh)(se.outcomeCounter,L.ab(s,T.$.getClassName(se)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 18",className:se.circular},m.createElement("rect",(0,_.__assign)({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(a,!!c),{height:18,rx:9})),m.createElement("text",(0,_.__assign)({x:"50%",y:"10px"},S.h5(d.has(E.a.Flag.supportsSVGDominantBaseline)),{fontSize:u,"data-name":n},(0,C.Sh)(V,i.counterContent)),t(a),c)))},e.MainMeter=function(e){var t=e.count,i=e.isChecking,a=e.className,o=0===t;return m.createElement("div",(0,_.__assign)({},(0,C.Sh)(se.meter,a)),m.createElement(n,{isChecking:i,type:o?"green":"red"}),0===t?m.createElement(k.JO.Grammarly,null):m.createElement(r,{count:t,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=function(e){var t=e.count,i=e.isChecking;return m.createElement("div",{className:se.lensNavMeter},m.createElement(n,{isChecking:i,type:"red"}),m.createElement(r,{count:t,type:"white",name:"toolbar-mistakes"}))},e.PlagiarismMeter=function(e){var t=e.count,r=e.isChecking,a=e.className;return m.createElement("div",(0,_.__assign)({},(0,C.Sh)(se.plagiarismMeter,a)),m.createElement(n,{isChecking:r,type:"violet",animateFade:!1}),m.createElement(g.F.div,{className:se.wrapper},t.pipe(N.a(r),M.U((function(e){var t=e[0],n=e[1];return 0===t?m.createElement(k.JO.NotificationInfo,{className:se.plagiarismIcon,key:"icon",width:20}):!n&&m.createElement(i,{count:t,type:"violet",key:"value",suffix:m.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")})})),F.O(null))))},e.PlagiarismOutcomesMeter=function(t){var r=t.count,i=t.isChecking,a=t.className;return m.createElement("div",(0,_.__assign)({},(0,C.Sh)(se.plagiarismMeter,a)),m.createElement(n,{isChecking:i,type:"cyan",animateFade:!1}),m.createElement(g.F.div,{className:se.wrapper},r.pipe(N.a(i),M.U((function(t){var n=t[0],r=t[1];return P.g.isMin(n)?m.createElement(k.JO.CheckmarkOutcomes,{className:se.plagiarismOutcomeIcon,key:"icon",width:20}):!r&&m.createElement(e.OutcomeCounter,{count:P.g.prism.reverseGet(n),type:"cyan",key:"value",suffix:m.createElement("tspan",{fontSize:11},"%")})})),F.O(null))))}}(p||(p={}));var O,B=1.25,D={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:x.u.percent(100),height:x.u.percent(100)},H={position:"absolute",width:x.u.percent(150),height:x.u.percent(150),transform:"translate(-17%, -17%)"},W={position:"relative",display:"inline-flex"},U={width:x.u.percent(100),height:x.u.percent(100)},z={minWidth:x.u.rem(2),width:x.u.percent(100),height:x.u.rem(B)},X={maxWidth:x.u.rem(2),height:x.u.rem(B)},G="counterText",V=x.u.joinClasses([G,x.u.style({fontWeight:"bold",textAnchor:"middle",fill:A.Il.CoreNeutral0})]),q={fill:I.zh,$nest:(r={},r["& .counterText"]={fill:I.FW},r)},Y={fill:A.Il.CoreRed50,$nest:(i={},i["& .counterText"]={fill:A.Il.CoreNeutral0},i)},$={fill:A.Il.CoreGreen50,$nest:(a={},a["& .counterText"]={fill:A.Il.CoreNeutral0},a)},j={fill:A.Il.CoreBlue50,$nest:(o={},o["& .counterText"]={fill:A.Il.CoreNeutral0},o)},Z={fill:"transparent",$nest:(s={},s["& .counterText"]={fill:I.FW},s)},J={fill:I.lh,$nest:(c={},c["& .counterText"]={fill:A.Il.CoreNeutral0},c)},K={fill:I.AX,$nest:(l={},l["& .counterText"]={fill:A.Il.CoreNeutral0},l)},Q={fill:A.Il.CoreYellow60,$nest:(u={},u["& .counterText"]={fill:A.Il.CoreNeutral0},u)},ee={fill:A.Il.CoreCyan50,$nest:(d={},d["& .counterText"]={fill:A.Il.CoreNeutral0},d)},te={width:x.u.rem(1.5),height:x.u.rem(1.5)},ne={margin:"0 "+x.u.rem(.25)},re={width:x.u.rem(2),height:x.u.rem(B)},ie={margin:x.u.rem(-1)+" 0"},ae={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:A.Il.CoreCyan50}}},oe={width:x.u.rem(2),height:x.u.rem(1.125),position:"relative"},se=x.u.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[D],loader:[H],wrapper:[W],roundCounter:[W,U],ovalCounter:[W,z],flexCounter:[W,X],gray:[q],red:[Y],green:[$],blue:[j],white:[Z],violet:[J],yellow:[K],orange:[Q],cyan:[ee],meter:[W,te],lensNavMeter:[W,te,ne],plagiarismMeter:[W,re],plagiarismIcon:[ie],plagiarismOutcomeIcon:[ie,ae],outcomeCounter:[W,{position:"absolute",left:0},oe]}),ce=n(45836),le=n(13097),ue={position:"relative",borderRadius:x.u.rem(le.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none"},de={padding:x.u.rem(1)+" "+x.u.rem(2)},pe={display:"flex",boxSizing:"border-box",padding:x.u.rem(1.25)+" "+x.u.rem(.5)+" "+x.u.rem(1.25)+" "+x.u.rem(1.25),height:x.u.rem(3),cursor:"pointer",justifyContent:"flex-start",alignItems:"center",$nest:{"&:before":{position:"absolute",right:x.u.rem(.5),bottom:x.u.rem(-.5),left:x.u.rem(.5),zIndex:-20,display:"block",height:x.u.rem(2),borderRadius:x.u.rem(le.fx),backgroundColor:A.Il.CoreNeutral0,boxShadow:"0 "+x.u.rem(.25)+" "+x.u.rem(1.625)+" 0 rgba(198, 203, 222, .25)",content:"' '"}}},fe={marginLeft:x.u.rem(.8),fontSize:x.u.rem(.85),lineHeight:x.u.rem(1)},me={display:"flex",width:x.u.percent(100),alignItems:"center",justifyContent:"space-between"},he={position:"relative",padding:x.u.rem(1)+" "+x.u.rem(2)+" "+x.u.rem(2),userSelect:"none"},ge={position:"absolute",top:x.u.rem(.2),right:x.u.rem(.3),cursor:"pointer"},ve={paddingRight:x.u.rem(1),textAlign:"left",fontSize:x.u.rem(.75),lineHeight:x.u.rem(1.15)},ye={marginTop:x.u.rem(.6),fontSize:x.u.rem(.875),flexShrink:0},be={display:"flex",marginBottom:x.u.rem(.6),justifyContent:"flex-end",flexShrink:0},we={marginRight:"auto",lineHeight:x.u.rem(1.3125)},_e={marginTop:x.u.rem(.21),minWidth:x.u.rem(1.5),flexShrink:0},Ce={display:"flex",width:x.u.percent(100),justifyContent:"center",alignItems:"center"},Se={display:"flex",width:x.u.percent(100),height:x.u.rem(2),borderRadius:x.u.rem(le.fx),backgroundColor:A.Il.CoreYellow60,color:A.Il.CoreNeutral0,fontWeight:"bold",justifyContent:"center",alignItems:"center",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:A.Il.CoreYellow50}}},Ae={display:"flex",marginTop:x.u.rem(1),justifyContent:"center"},xe={position:"absolute",top:x.u.rem(.7),left:x.u.rem(.22),fill:A.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:A.Il.CoreNeutral90}}},Ie=x.u.stylesheet({wrapper:[ue],maximizedWrapper:[de],minimizedWrapper:[pe],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[fe],minimizedContent:[me],maximizedContainer:[he],maximizedCloseButtonContainer:[ge],maximizedHeader:[ve],alertCategoryContainer:[ye],alertCategory:[be],categoryHumanContainer:[we],alertCounterContainer:[_e],premiumButtonWrapper:[Ce],premiumButton:[Se],premiumButtonContainer:[Ae],icon:[xe]}),Ee=n(64437),ke=function(e){return f.UI.Grid.make((function(t){var n=t.slots;return m.createElement(g.F.div,(0,_.__assign)({},(0,C.Sh)(Ie.wrapper,e,Ee.m.fullCard)),m.createElement(k.JO.PaidLink,{width:14,className:Ie.icon}),n.body)}))},Te=f.UI.Node.make((function(e){var t=e.notify;return m.createElement(g.F.div,{className:Ie.maximizedCloseButtonContainer},m.createElement(ce.zx,{name:"close",onClick:t("onClick")},m.createElement(k.JO.Close,{width:11})))}));!function(e){!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(e.ActionsKind||(e.ActionsKind={}))}(O||(O={}));var Re,Le=f.UI.Node.make((function(e){var t=e.state,n=e.notify,r=m.useContext(b.m.Context);return m.createElement(m.Fragment,null,m.createElement("div",{className:Ie.maximizedHeader},m.createElement(g.F.Fragment,null,t.pipe(M.U((function(e){var t=e.count;return t>0?t>1?m.createElement(m.Fragment,{key:"plural"},r.sidebar.content.premiumIssues.foundTitlePlural.description1,"",t,"",r.sidebar.content.premiumIssues.foundTitlePlural.description2):m.createElement(m.Fragment,{key:"singular"},r.sidebar.content.premiumIssues.foundTitleSingular.description1,"",t,"",r.sidebar.content.premiumIssues.foundTitleSingular.description2):null}))))),m.createElement(g.F.div,{className:Ie.alertCategoryContainer},t.pipe(M.U((function(e){return e.alerts.map((function(e){return m.createElement("div",{key:e.category,className:Ie.alertCategory},m.createElement("div",{className:Ie.categoryHumanContainer},e.categoryHuman),m.createElement("div",{className:Ie.alertCounterContainer},m.createElement(p.Counter,{count:e.count,type:"orange"})))}))})))),m.createElement("div",{className:Ie.premiumButtonContainer},m.createElement("div",{ref:function(e){n({kind:O.ActionsKind.onUpgradeButtonMount,element:y.fromNullable(e)})()},className:Ie.premiumButtonWrapper},m.createElement(w.zx,{name:"upgrade",styleType:ce.ZT.Type.Base,className:Ie.premiumButton,onClick:n({kind:O.ActionsKind.onUpgrade})},r.seeWhatsInPremium))))})),Pe=f.UI.Composite.make(ke(Ie.maximizedWrapper),f.UI.Group.make({closeButton:f.UI.Union.make("kind",{hidden:f.UI.Node.empty,visible:Te}),content:Le})),Me=(0,h.pipe)(f.UI.squash(Pe),f.UI.mapAction((function(e){switch(e.key){case"content":switch(e.action.kind){case O.ActionsKind.onUpgrade:return{kind:"upgrade"};case O.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,v.vE)(e.action)}case"closeButton":switch(e.action.action){case"onClick":return{kind:"collapse"};default:return(0,v.vE)(e.action.action)}default:return(0,v.vE)(e)}})),f.UI.contramapState((function(e){return{closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}}))),Ne=f.UI.Node.make((function(e){var t=e.state,n=m.useContext(b.m.Context);return m.createElement(g.F.div,{className:Ie.minimizedContent},m.createElement("div",{className:Ie.minimizedText},n.premiumSuggestions),t.pipe(M.U((function(e){var t=e.alertsCount;return t>0&&m.createElement(p.OutcomeCounter,{type:"orange",key:"advancedCounter-counter",count:t})}))))})),Fe=f.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return m.createElement("div",{className:Ie.shadowWrapper,onClick:n("onClick")},t.body)})),Oe=f.UI.Knot.make(Fe,{body:f.UI.Composite.make(ke(Ie.minimizedWrapper),Ne)}),Be=(0,h.pipe)(f.UI.squash(Oe),f.UI.contramapState((function(e){return{body:e}})));!function(e){var t,n,r;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(r=e.State||(e.State={})),e.TogglableExpandedPanel=f.UI.Union.make("kind",((t={})[r.hidden]=f.UI.Node.empty,t[r.expanded]=Me,t)),e.ToggablePanel=f.UI.Union.make("kind",((n={})[r.hidden]=f.UI.Node.empty,n[r.minimized]=Be,n[r.expanded]=Me,n))}(Re||(Re={}))},14611:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r,i=n(49708),a=n(77176),o=n(93508),s=n(85985),c=n(17343),l=n(36303),u=n(24209),d=n(99391),p=n(83840),f=n(8473),m=n(15789),h=n(2768),g=n(50628),v=n(79462),y=n(28043),b=n(32952),w=n(66310),_=n(76974);!function(e){var t=function(){function e(){}return Object.defineProperty(e,"observable",{get:function(){return this._obs||(this._obs=i.R(document,"visibilitychange").pipe(a.U((function(){return document.hidden})),o.O(document.hidden),s.h(Boolean),c.h(void 0),l.r(1)))},enumerable:!1,configurable:!0}),e}();function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.T.apply(d,e.map((function(e){return e.pipe(p.i())}))).pipe(f.o((function(e){return e.hasValue})),m.D())}e.Hidden=t,e.mergeUntilAnyCompletes=n,e.createAnimationObservable=function(e,r,i){return n(function(e,t,n){return v.y.create((function(r){var i,a=window.requestAnimationFrame(o);function o(s){i||(i=s);var c=s-i;c<n?(r.next(Math.round(e+c/n*(t-e))),a=window.requestAnimationFrame(o)):(r.next(t),r.complete())}return function(){return window.cancelAnimationFrame(a)}})).pipe(y.x())}(e,r,i).pipe(h.R(t.observable)),t.observable.pipe(c.h(r),g.P()))},e.fadeOutState=function(e){var t=new b.xQ;return{state:e.pipe(w.w((function(e){return e?_.of("inProgress"):u.T(_.of("fadeOut"),t.pipe(c.h("end")))}))),complete:function(){return t.next(!0)}}},e.rafSequence=function(e,t){return void 0===t&&(t=!1),v.y.create((function(n){var r;function i(){n.next(e.shift()),e.length&&(r=requestAnimationFrame(i))}return t?i():r=requestAnimationFrame(i),function(){return cancelAnimationFrame(r)}}))}}(r||(r={}))},42499:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var r,i=n(18625),a=n(49708);!function(e){var t="scrollaction";e.emit=function(e){return window.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=i.P((function(){return a.R(window,t)}))}(r||(r={}))},60430:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var r,i=n(27378),a=n(27221),o=n(22232),s=n(64909),c=n(19962),l=n(16528),u=n(66310),d=n(76974),p=n(93508),f=n(77176);!function(e){e.useSubscriptionTo=function(e){i.useEffect((function(){var t=e.subscribe();return function(){return t.unsubscribe()}}),[e])};var t=new Set;function n(){return i.useMemo((function(){var e=a.h.create(s.none);return{ref:e,onMount:function(t){return e.set(s.fromNullable(t))}}}),[])}e.useSingleton=function(e){i.useEffect((function(){return(0,o.kG)(!t.has(e),"Component "+e+" can be mounted only once!"),t.add(e),function(){t.delete(e)}}),[])},e.useElWatcher=n,e.useRectWatcher=function(){var e=n(),t=e.ref,r=e.onMount;return{rect:t.pipe(u.w(s.fold((function(){return d.of(s.none)}),(function(e){return l.YC(e).pipe(p.O(c.UL.fromEl(e)),f.U(s.some))})))),onMount:r}},e.useEffectOnDidMount=function(e){i.useEffect(e,[])},e.useEffectOnWillUnmount=function(e){i.useEffect((function(){return e}),[])}}(r||(r={}))},95053:(e,t,n)=>{"use strict";n.d(t,{vM:()=>p,aW:()=>r});var r,i=n(489),a=n(45980),o=n(73805),s=n(22232),c=n(83078),l=n(64909),u=n(65772),d=n(89943);function p(e,t){return t.reduce((function(t,n){var r="function"==typeof e?e(n):n[e],i=t.get(r);return i||(i=[],t.set(r,i)),i.push(n),t}),new Map)}!function(e){e.URI="ImmutableSortedMap",e.create=function(t,n,r){var i=Array.isArray(t)?new Map(t.map((function(e){return[n(e),e]}))):t,a=e.orderKeys(i,r);return i.forEach((function(e){return(0,s.kG)(m(e),"init value should implement IEquals",(function(){return JSON.stringify(e)}))})),new f(i,a,r,n)},e.empty=function(e,t){return new f(new Map,[],t,e)},e.diff=function(e,t){var n=e.clear();return e.reduce((function(e,n,r){var i=e.added,a=e.preserved,o=e.removed,s=e.changed,l=i.has(r)?i.remove(r):i;if(t.has(r)){var u=n.equals(c.MH(t.get(r)).value);return{removed:o,added:l,preserved:u?a.add(n):a,changed:u?s:s.add(n)}}return{removed:o.add(n),added:l,preserved:a,changed:s}}),{removed:n,added:t,preserved:n,changed:n})},e.unsafeGet=function(e,t){return c.MH(t.get(e)).value},e.unsafeGetBy=function(e){return function(t){return c.MH(t.get(e)).value}},e.unsafeGetAt=function(e,t){return c.MH(t.getAt(e))},e.unsafeGetAtBy=function(e){return function(t){return c.MH(t.getAt(e))}},e.nonEmpty=function(e){return e.size>0},e.lowerBound=function(e,t){for(var n=-1,r=e.size;n+1!==r;){var i=n+(r-n>>1);t(c.MH(e.getAt(i)))?n=i:r=i}return n+1},e.createKeySorter=function(e,t){return function(n,r){return t(e(n),e(r))}},e.orderKeys=function(t,n){return Array.from(t.keys()).sort(e.createKeySorter((function(e){return t.get(e)}),n))},e.takeByKey=function(e,t,n){var r=(0,o.pipe)(n,i.findIndex((function(t){return t===e}))),a=l.fromNullable(t.get(e));return(0,s.kG)(l.isNone(r)&&l.isNone(a)||l.isSome(r)&&l.isSome(a),"unsynced hash&order"),c.vB((function(e,t){return{index:e,value:t}}))(r,a)},e.getFoldableWithIndex=function(){return{URI:e.URI,_E:void 0,reduce:function(e,t,n){return e.reduce(n,t)},foldMap:function(e){return function(t,n){return t.reduce((function(t,r){return e.concat(t,n(r))}),e.empty)}},reduceRight:function(e,t,n){return e.reduce((function(e,t){return n(t,e)}),t)},reduceWithIndex:function(e,t,n){return e.reduce((function(e,t,r){return n(r,e,t)}),t)},reduceRightWithIndex:function(e,t,n){return e.reduce((function(e,t,r){return n(r,t,e)}),t)},foldMapWithIndex:function(e){return function(t,n){return t.reduce((function(t,r,i){return e.concat(t,n(i,r))}),e.empty)}}}}}(r||(r={}));var f=function(){function e(e,t,n,r){this._hash=e,this._order=t,this._comp=n,this._getKey=r,(0,s.kG)(e.size===t.length,"every hash entry should has order")}return e.prototype.get=function(e){return r.takeByKey(e,this._hash,this._order)},e.prototype.getIndex=function(e){return l.fromPredicate((function(e){return e>-1}))(this._order.indexOf(e))},e.prototype.getAt=function(e){return l.fromNullable(this._hash.get(this._order[e]))},e.prototype.has=function(e){return this._hash.has(e)},e.prototype.find=function(e,t){if(void 0===t&&(t=0),t<0)return l.none;for(var n=t;n<this._order.length;n++){var r=this._order[n],i=this._hash.get(r);if(e(i))return l.some({index:n,value:i})}return l.none},e.prototype.findFrom=function(e,t){return this.find(e,t)},e.prototype.findRight=function(e,t){if(t&&t>=this._order.length)return l.none;for(var n=t||this._order.length-1;n>=0;n--){var r=this._order[n],i=this._hash.get(r);if(e(i))return l.some({index:n,value:i})}return l.none},e.prototype.findRightFrom=function(e,t){return this.findRight(e,t)},e.prototype.map=function(t,n){var i=this;void 0===n&&(n=this._comp);var a=new Map;this._order.forEach((function(e,n){var r=i._hash.get(e),o=t(r,e,n);(0,s.kG)(m(o),"transformed value should implement IEquals",(function(){return JSON.stringify(o)})),a.set(e,o)}));var o=r.orderKeys(a,n);return new e(a,o,n,this._getKey)},e.prototype.mapTo=function(e){var t=this;return this._order.map((function(n,r){return e(t._hash.get(n),n,r)}))},e.prototype.filter=function(t){var n=this,r=new Map,i=this._order.filter((function(e){var i=n._hash.get(e),a=t(i,e);return a&&r.set(e,i),a}));return new e(r,i,this._comp,this._getKey)},e.prototype.reduce=function(e,t){var n=this;return this._order.reduce((function(t,r,i){return e(t,n._hash.get(r),r,i)}),t)},e.prototype.modifyWith=function(t,n){var i=new Map(this._hash),a=this._order.slice(),o=function(e,t){var o=r.takeByKey(t,i,a),c=n(t,e,o);(0,s.kG)(m(c),"modified value should implement IEquals",(function(){return JSON.stringify(c)})),i.set(t,c),l.isNone(o)&&a.push(t)};return t instanceof Array?t.forEach((function(e){var t=e[0],n=e[1];return o(n,t)})):t.forEach(o),a.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,a,this._comp,this._getKey)},e.prototype.patchWith=function(t,n){var i=new Map(this._hash),u=this._order.slice(),d=function(e,t){var d=r.takeByKey(t,i,u),p=n(t,e,d);(0,s.kG)(c.wo(m)(p),"patched value should implement IEquals",(function(){return JSON.stringify(p)})),(0,o.pipe)(p,l.fold((function(){(0,o.pipe)(d,l.fold(a.constVoid,(function(e){var n=e.index;i.delete(t),u.splice(n,1)})))}),(function(e){i.set(t,e),l.isNone(d)&&u.push(t)})))};return t instanceof Array?t.forEach((function(e){var t=e[0],n=e[1];return d(n,t)})):t.forEach(d),u.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,u,this._comp,this._getKey)},e.prototype.add=function(t){var n=this,i=new Map(this._hash),a=this._order.slice();return(Array.isArray(t)?t:[t]).forEach((function(e){var t=n._getKey(e);(0,s.kG)(m(e),"added value should implement IEquals",(function(){return JSON.stringify(e)})),i.set(t,e),-1===a.indexOf(t)&&a.push(t)})),a.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,a,this._comp,this._getKey)},e.prototype.update=function(t,n){var i=this;return(0,o.pipe)(this.get(t),l.fold((function(){return u.left("Provided key "+t+" not found in the map")}),(function(a){var o=a.value,s=new Map(i._hash),c=i._order.slice();return s.set(t,n(o)),c.sort(r.createKeySorter((function(e){return s.get(e)}),i._comp)),u.right(new e(s,c,i._comp,i._getKey))})))},e.prototype.remove=function(t){(0,s.kG)(this.has(t),"can not remove unknown key: "+t);var n=new Map(this._hash);return n.delete(t),new e(n,d.CE(t,this._order),this._comp,this._getKey)},e.prototype.clear=function(){return new e(new Map,[],this._comp,this._getKey)},e.prototype.hashCode=function(){var e=7;return this._hash.forEach((function(t){return e+=t.hashCode()})),e},e.prototype.equals=function(e){return this.hashCode()===e.hashCode()&&this.size===e.size&&this.values().every((function(t,n){return t.equals(c.MH(e.getAt(n)))}))},e.prototype.values=function(){var e=this;return this._order.map((function(t){return e._hash.get(t)}))},e.prototype.keys=function(){return this._order},Object.defineProperty(e.prototype,"size",{get:function(){return this._order.length},enumerable:!1,configurable:!0}),e}();function m(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}},40250:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var r,i=n(73805),a=n(64909);!function(e){e.update=function(e,t,n){return e.update(t,n)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,n){return(0,i.pipe)(e.get(t),a.filter((function(e){return n(e.value)})))},e.find=function(e,t){return e.find(t)}}(r||(r={}))},19787:(e,t,n)=>{"use strict";n.d(t,{m:()=>A});var r,i=n(489),a=n(45980),o=n(73805),s=n(27221),c=n(64909),l=n(22788),u=n(89943),d=n(8125),p=n(83078),f=n(10002),m=n(32952),h=n(52479),g=n(77176),v=n(67434),y=n(28043),b=n(41398),w=n(99391),_=n(41199),C=n(50634),S=n(38524);!function(e){var t=function(){this.alertHovered=new m.xQ,this.alertClicked=new m.xQ,this.highlightedAlert=s.h.create(c.none)};e.Mock=t}(r||(r={}));var A=function(e,t,n,r){var s=this;this._ded=e,this._state=t,this._markAlertMapper=n,this._alertsReader=r,this._focusedCard=this._state.view(S.nL.getActiveCard),this._focusedLens=this._state.view("currentLens"),this._marksToAlertTupleArray=function(e){return(0,o.pipe)(e,c.map((0,a.flow)(i.filterMap((function(e){return s._markAlertMapper.getAlertByMark(e)})),i.sort(l.contramap((function(e){var t=e.alert;return{type:t.lensType,priority:t.lensPriority}}))(f.R.ord)))))},this.alertHovered=h.b2.inRaf(this._ded.hoveredMarks).pipe(g.U(this._marksToAlertTupleArray),g.U(c.map(i.map((function(e){return e.alert})))),v.R((function(e,t){return(0,o.pipe)(t,c.chain((function(t){return(0,o.pipe)(e,c.filter((function(e){return-1!==t.indexOf(e)})),c.fold((function(){return c.fromNullable(t[0])}),c.some))})))}),c.none),g.U(c.filter((function(e){return s._alertsReader.isInteractable(e.id)&&!_.$.isPlagiarism(e)}))),y.x()),this.alertClicked=h.b2.inRaf(this._ded.activeMarks).pipe(g.U(this._marksToAlertTupleArray),b.M(this._focusedCard,this._focusedLens),v.R((function(e,t){var n=t[0],r=t[1],i=t[2],a=function(t){return(0,o.pipe)(e,c.exists((function(e){return e.alert.id===t.alert.id})))},s=function(e){return(0,o.pipe)(r,c.exists((function(t){return t.activeAlert.id===e.alert.id})))},l=function(e){return i.meta.filter(e.alert)};return(0,o.pipe)(n,c.chain((function(e){return(0,o.pipe)(e,u.N6([(0,d.W9)(a,s),s,(0,d.W9)(a,l),l,a]),c.fold((function(){return c.fromNullable(e[0])}),c.some))})))}),p.cS()),y.x(c.getEq(C.E.eq).equals),w.shareReplay({refCount:!0,bufferSize:1}))}},73343:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var r,i=n(59312),a=n(45980),o=n(8125),s=n(17753),c=n(10002),l=(0,o.W9)(s.bZ.isRegistered,(0,a.not)(s.bZ.isMuted)),u=function(e){return function(t){return(0,o.W9)(l,e(t))}};!function(e){var t,n;e.create=function(e,t){var n=u((function(t){return e[t]}));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:function(e,n){return(0,o.W9)(u((function(e){return t[e]}))(e),function(e){return function(t){return e||s.bZ.isPriority(t)}}(n))},alertVisibleInSidebar:n,getLensesFilter:function(t){return e[t]},alertCanBeDisplayed:l,alertIsBulkAcceptable:function(e){return(0,o.W9)(n(e),s.bZ.isBulkAcceptable)}}};var r=function(e){return function(t){return e===t.lensId}},d=function(e){return(0,o.W9)(r(c.R.OutcomeId.fromPriorityOutcomeId(e)),s.bZ.isPriority)};e.defaultLensFilters=((t={})[c.R.SpecialId.Clarity]=r(c.R.SpecialId.Clarity),t[c.R.SpecialId.Correctness]=r(c.R.SpecialId.Correctness),t[c.R.SpecialId.Delivery]=r(c.R.SpecialId.Delivery),t[c.R.SpecialId.Engagement]=r(c.R.SpecialId.Engagement),t[c.R.SpecialId.Vox]=r(c.R.SpecialId.Vox),t[c.R.SpecialId.ClarityPriority]=d(c.R.SpecialId.ClarityPriority),t[c.R.SpecialId.CorrectnessPriority]=d(c.R.SpecialId.CorrectnessPriority),t[c.R.SpecialId.DeliveryPriority]=d(c.R.SpecialId.DeliveryPriority),t[c.R.SpecialId.EngagementPriority]=d(c.R.SpecialId.EngagementPriority),t[c.R.SpecialId.VoxPriority]=d(c.R.SpecialId.VoxPriority),t[c.R.SpecialId.Plagiarism]=r(c.R.SpecialId.Plagiarism),t[c.R.SpecialId.DraftAI]=a.constFalse,t[c.R.SpecialId.Premium]=r(c.R.SpecialId.Premium),t[c.R.SpecialId.AllAlerts]=s.bZ.belongsToAllAlerts,t[c.R.SpecialId.Closed]=a.constFalse,t[c.R.SpecialId.Priority]=s.bZ.belongsToPriorityLens,t[c.R.SpecialId.PredictionTakeaways]=s.bZ.belongsToPredictionTakeaways,t[c.R.SpecialId.PredictionEmogenie]=s.bZ.belongsToPredictionEmogenie,t[c.R.SpecialId.RealTimeProofit]=r(c.R.SpecialId.RealTimeProofit),t),e.defaultTextFilters=(0,i.__assign)((0,i.__assign)({},e.defaultLensFilters),((n={})[c.R.SpecialId.Closed]=s.bZ.isCriticalImpact,n[c.R.SpecialId.Premium]=(0,o.Kg)(e.defaultLensFilters[c.R.SpecialId.Premium],s.bZ.belongsToAllAlerts),n)),e.priorityTextFilters=function(e){var t;return(t={})[c.R.SpecialId.Premium]=(0,o.W9)(e[c.R.SpecialId.Premium],s.bZ.isPriority),t}}(r||(r={}))},95722:(e,t,n)=>{"use strict";n.d(t,{Oe:()=>r,rG:()=>i,Bd:()=>a});var r,i,a,o=n(59312),s=n(42654),c=n(17753);!function(e){e.eq=(0,s.contramap)((function(e){return e.alert}))(c.bZ.ordId),e.isPending=function(e){return null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate)},e.isOneOf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e===t.state.current.visualState}))}},e.notAnyOf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return e!==t.state.current.visualState}))}},e.canBeChanged=function(t){return function(n){return t&&a.applied===n.state.current.visualState?t===a.disposed:c.bZ.State.isBulkApplied(n.alert.state)||e.notAnyOf(a.applied,a.disposed)(n)}},e.isOrWillBe=function(e){return function(t){return null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e}},e.willBe=function(e){return function(t){return null!==t.state.scheduled&&t.state.scheduled.visualState===e}}}(r||(r={})),function(e){e.updateRanges=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),function(e){e.isApplied=function(t){return t===e.applied}}(a||(a={}))},20892:(e,t,n)=>{"use strict";n.d(t,{v:()=>S});var r=n(59312),i=n(489),a=n(45980),o=n(73805),s=n(49524),c=n(25656),l=n(24645),u=n(60705),d=n(65772),p=n(64909),f=n(22232),m=n(83078),h=n(89943),g=n(68983),v=n(8125),y=n(92932),b=n(17753),w=n(41199),_=n(78090),C=n(95722),S=function(){function e(e,t,n,r,i,c,l,u){var f=this;this._alert=e,this._alertsService=t,this._alertRangeService=n,this._changeMarksInDEd=r,this._create=i,this._update=c,this._remove=l,this._onTransitionEnd=u,this._currentState=C.rG.from(C.Bd.initial),this._scheduledState=C.rG.from(C.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=function(e){if(!e.to.updateRanges||!(0,o.pipe)(f._alertRangeService.hasNewRangesForUpdate(f.id),d.fold(a.constFalse,s.y)))return p.none;var t=(0,o.pipe)(f._alertRangeService.applyPendingRangesUpdate(f.id),d.mapLeft((function(e){return A("markAlert").error("cannot apply pending ranges",e)})),p.fromEither,p.chain(s.y),p.filter((function(e){var t=e.addedHighlightedRanges,n=e.removedHighlightedRanges;return t.length>0||n.length>0})));return(0,o.pipe)(t,p.map((function(e){return{commit:function(){return e.removedHighlightedRanges[1]()},ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}})))},this._dispose=function(){f._marksMap.clear(),d.either.map(f._alertRef,(function(e){return e.dispose()}))},this._disposeIfEmpty=function(){0===f._marksMap.size&&f._dispose()},d.either.mapLeft(this._alertRef,(function(e){return A("markAlert").warn("can not take alertRef",e)}))}return Object.defineProperty(e.prototype,"state",{get:function(){return{current:this._currentState,scheduled:this._scheduledState}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alert",{get:function(){return this._alert()},enumerable:!1,configurable:!0}),e.prototype.scheduleApply=function(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,f.kG)(e!==C.Bd.initial,"Cannot schedule change "+this.id+" from "+this._currentState.visualState+" to initial state"),this._currentState.visualState!==C.Bd.initial||e!==C.Bd.disposed&&!C.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=C.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=C.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=C.rG.from(C.Bd.disposed),this._dispose()),this},e.prototype.scheduleUpdate=function(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.updateRanges(this._scheduledState||this._currentState,!0)},e.prototype.scheduleForceUpdate=function(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.forceUpdate(this._scheduledState||this._currentState,!0)},e.prototype.apply=function(){var e=this;if(C.Oe.isPending(this)){this._throwWhenInFinaleState();var t=this._getTransition();(0,o.pipe)(this.change(),p.filter((function(e){return e.rawMark.length>0})),p.map((function(n){e._handleBasicEvent(n.rawMark),n.commit(),e._onTransitionEnd(t,e)})))}},e.prototype.applyWith=function(e){var t=(0,r.__spreadArrays)([this],e);this._handleMultipleHighlights(t,(function(e){return e.change()}))},e.prototype.markByIndex=function(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return p.none}},Object.defineProperty(e.prototype,"mark",{get:function(){return this.markByIndex(0)},enumerable:!1,configurable:!0}),e.prototype._iterateOverMarkAlerts=function(e,t){e.forEach((function(e){var n=e.change,r=e.ma;n.rawMark.forEach((function(e){"create"===e.action?r._setMarkAndCheckFinaleState(e.id,(0,o.pipe)(t.created.get(e.id)||d.left(new Error("Cannot get unknown mark")),p.fromEither)):"remove"===e.action&&r._removeMark(e.id)})),n.commit(),r._disposeIfEmpty()}))},e.prototype._handleMultipleHighlights=function(e,t){var n=e.map((function(e){return[e,t(e)]})).filter((function(e){var t=e[0],n=e[1];return(0,o.pipe)(n,p.filter((function(e){return 0!==e.rawMark.length||(A("markAlert").warn("rawAction must have rawMark array",{rawAction:e.action,state:(0,r.__assign)((0,r.__assign)({},t.toJSON()),{alert:void 0})}),!1)})),p.isSome)})).map((function(e){var t=e[0],n=e[1];return{ma:t,change:m.MH(n)}}));if(0!==n.length){var i=h.VS(n.map((function(e){return e.change.rawMark}))),a=this._changeMarksInDEd(i);this._iterateOverMarkAlerts(n,a)}},Object.defineProperty(e.prototype,"_mark",{get:function(){return this._markbyIndex(0)},enumerable:!1,configurable:!0}),e.prototype._markbyIndex=function(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:p.none},e.prototype._setMarkAndCheckFinaleState=function(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)},e.prototype._setMark=function(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)},e.prototype._removeMark=function(e){this._marksMap.delete(e)},e.prototype.change=function(){var e=this;(0,f.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(function(){return JSON.stringify({currentState:e._currentState,aid:e.id})}));var t=this._commitTransition();return t.from.visualState!==t.to.visualState||t.to.forceUpdate||t.to.updateRanges?p.some(this._getRawActionForApply(t)):p.none},e.prototype._handleBasicEvent=function(e){var t=this,n=this._changeMarksInDEd(e);e.forEach((function(e){if(e.action===l.v.Change.ActionType.remove)t._removeMark(e.id);else{var r=(0,o.pipe)(p.fromNullable(t._marksMap.get(e.id)),p.chain(s.y),p.alt((function(){return(0,o.pipe)((e.action===l.v.Change.ActionType.create?n.created.get(e.id):n.updated.get(e.id))||d.left(new Error("Cannot get unknown mark")),p.fromEither)})));t._setMark(e.id,r)}})),this._disposeIfEmpty()},e.prototype._getTransition=function(){var e=this;return(0,f.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(function(){return JSON.stringify({currentState:e._currentState,aid:e.id})})),{from:this._currentState,to:this._scheduledState}},e.prototype._commitTransition=function(){var e=this._getTransition();return this._currentState=(0,r.__assign)((0,r.__assign)({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e},e.prototype._getRawActionForApply=function(e){var t=this;switch(e.from.visualState){case C.Bd.initial:return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit()}))),{action:"create",commit:c.Z,rawMark:this._getHighlightRanges((function(n){return t._create((function(){return n}),e)(n.meta.id)}))};default:switch(e.to.visualState){case C.Bd.disposed:var n=C.Bd.isApplied(e.from.visualState)||b.bZ.State.isRemoved(this.alert.state)&&w.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(a.constVoid).length>0?this._getAppliedRanges((function(e,t){return{id:t().meta.id,range:t}})):this._getHighlightRanges((function(e){return{id:e.meta.id,range:function(){return e}}}));return{action:"remove",commit:(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit})),p.getOrElse((function(){return a.constVoid}))),rawMark:n.map((function(e){return t._remove(e.range)(e.id)}))};case C.Bd.applied:var i=this._getHighlightRanges((function(e){return t._remove((function(){return e}))(e.meta.id)})),l=(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit})),p.getOrElse((function(){return a.constVoid}))),u=this._getAppliedRanges((function(n,r){return t._create(r,e)(r().meta.id)}));return{action:"replace",commit:l,rawMark:(0,r.__spreadArrays)(i,u)};default:var d=function(){return b.bZ.State.isBulkApplied(t._alert("_getRawActionForApply").state)?t._getAppliedRanges((function(e,t){return t()})):t._getHighlightRanges(s.y)};return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(n){var r=n.commit,i=n.ranges;return t._getReplaceAction(e,d(),i.removed,r)})),p.getOrElse((function(){return{action:"update",commit:c.Z,rawMark:d().map((function(n){return t._update((function(){return n}),e)(n.meta.id)}))}})))}}},e.prototype._getReplaceAction=function(e,t,n,i){var a=this;return{action:"replace",commit:i,rawMark:(0,r.__spreadArrays)(n.map((function(e){return a._remove((function(){return e}))(e.meta.id)})),t.map((function(t){return a._create((function(){return t}),e)(t.meta.id)})))}},e.prototype._getAppliedRanges=function(e){var t=this;return(0,o.pipe)(this._alertRangeService.getAppliedRanges(this.id),d.fold((function(e){return A("markAlert").error("cannot get applied ranges",{error:e.message,alert:w.$.snapshot(t._alert("_getAppliedRanges"))}),[]}),i.mapWithIndex(e)))},e.prototype._getHighlightRanges=function(e){var t=this;return(0,o.pipe)(this._alertRangeService.getHighlightRanges(this.id),d.fold((function(n){return A("markAlert").warn("cannot get highlight ranges via range service",{error:n,alert:t._alert("_getHighlightRanges")}),(0,o.pipe)(t._alert("_getHighlightRanges_Fallback").getHighlightRanges(),i.map(e))}),i.map(e)))},e.prototype._throwWhenNotAllowedState=function(e){var t=this._alert("_throwWhenNotAllowedState");(0,f.kG)(!(!w.$.isDefault(t)&&!w.$.isSuper(t))||(!e||b.bZ.State.isBulkApplied(t.state)||!C.Bd.isApplied(e)),"Applied state isn't allowed for "+this.id)},e.prototype._throwWhenInFinaleState=function(e){(0,f.kG)(e&&C.Oe.isOneOf(C.Bd.applied)(this)?e===C.Bd.disposed||b.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):C.Oe.notAnyOf(C.Bd.disposed)(this),"'"+this._currentState.visualState+"' MarkAlert '"+this.id+"' cannot be changed"+(e?" to '"+e+"' ":""))},e.prototype.toJSON=function(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,o.pipe)(this._mark,p.map((function(e){return e.id})),p.toUndefined),range:(0,o.pipe)(this._mark,p.map((function(e){return e.range})),p.toUndefined)},alert:this._alert("toJSON")}},e.prototype.equals=function(e){return C.Oe.eq.equals(this,e)},e.prototype.hashCode=function(){return(0,_.AC)(this.id)},e}();!function(e){e.compareTo=function(e){var t=(0,g.W)(u.SV.distanceFrom)(e);return function(e,n){return(0,v.qu)(Math.min.apply(Math,e.alert.getHighlightRanges().map(t)),Math.min.apply(Math,n.alert.getHighlightRanges().map(t)))}}}(S||(S={}));var A=(0,v.HP)(y.C8.Logging.getLogger)},42490:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r,i,a,o=n(59312),s=n(73805),c=n(27221),l=n(22232),u=n(64909),d=n(42654),p=n(64510),f=n(489),m=n(76606),h=n(45980),g=n(84966),v=n(80358),y=n(43675),b=n(8125),w=n(65772),_=n(22788),C=n(97523),S=n(92932),A=n(17753),x=n(73510),I=n(52479),E=n(32952),k=n(85985),T=n(77176),R=n(2834),L=n(16118),P=n(40151),M=n(76779);!function(e){e.create=function(e){return{getAlertMuteCategory:function(t){return(0,s.pipe)(e.getById(t),u.chain((function(e){return e.muteCategory})),u.map((function(e){return e.id})))}}},e.getAlerts=function(e,t){var n={byCategory:new Map(t.map((function(e){return[e,[]]}))),all:[]};return(0,s.pipe)(e.get(),M.p.reduce(n,(function(e,n){var r=n.alert;return(0,s.pipe)(r.muteCategory,u.filter((function(e){return t.includes(e.id)})),u.map((function(e){return e.id})),u.alt((function(){return u.fromNullable(t.find(A.bZ.belongsToSpecialCategory(r)))})),u.fold((function(){return e}),(function(t){return e.byCategory.get(t).push(r),e.all.push(r),e})))})))}}(r||(r={})),function(e){var t,n;!function(e){!function(e){e.ord=_.ordString,e.show=m._3,e.create=function(e){return e}}(e.Id||(e.Id={})),e.isSpecial=function(e){return Object.values(g.JW.SpecialCategory).includes(e)},e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=function(e){return p.filter((function(t){return e(t.id)}))},e.filterWithCount=function(e,t){return function(n){var i=Array.from(n.keys()),a=r.getAlerts(t,i).byCategory;return(0,s.pipe)(n,p.filterMap((function(t){return e(t.id)?u.some((0,o.__assign)((0,o.__assign)({},t),{alertsCount:a.get(t.id).filter(A.bZ.isRegistered).length})):u.none})))}}}(n=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){var i;!function(e){var t;!function(e){e.BeforeCategoriesMuted="BeforeCategoriesMuted",e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isMuteEvent=function(e){return e.type===t.BeforeCategoriesMuted},e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(i=e.Events||(e.Events={})),e.create=function(e,a,o,l,d){var p=S.C8.Logging.getLogger("MutedAlertsModel"),m=c.h.create(new Map),b=new E.xQ,_=new x.w.Keeper;return _.push(e.pipe(k.h(v.h.is("session_started")),T.U((function(e){return t=e.userMutedCategories,n=t.map((function(e){return[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]})),new Map(n);var t,n})),R.b(I.wW(m)),R.b((function(){return b.next({type:i.Type.CategoriesChanged})}))).subscribe(),m.pipe(L.G(),T.U((function(e){return function(e,n){return{muted:y.uz(t.Id.ord)(e,n),unmuted:y.uz(t.Id.ord)(n,e)}}(e[0],e[1])})),T.U(function(e){return function(t){var n=t.muted,i=t.unmuted;return{toMute:r.getAlerts(e,n).all.filter((function(e){return e.mute!==A.bZ.MuteStateType.Muted})),toUnmute:r.getAlerts(e,i).all.filter((function(e){return e.mute!==A.bZ.MuteStateType.Unmuted}))}}}(o)),R.b((function(e){var t=e.toMute,n=e.toUnmute;t.length>0&&l.changeMuteState(t,A.bZ.MuteStateType.Muted),n.length>0&&l.changeMuteState(n,A.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:b,mutedCategories:m,muteCategories:function(e,n){(0,s.pipe)(a.sendFeedback({kind:g.Mw.MUTE,userMuteScope:d,userMuteCategories:e}),C.mapLeft((function(e){p.warn("Alerts could not be muted on CAPI",e)})))();var c=r.getAlerts(o,e),l=c.all.filter((function(e){return e.mute!==A.bZ.MuteStateType.Muted}));0===l.length&&p.warn("No alerts were muted on category mute",{categoryIds:e});var h=function(e,n,r){return function(i){var a=new Map(i);return e.forEach((function(e,i){t.isSpecial(i)?a.set(i,{id:i,scope:n,description:t.specialCategoryDescription}):(0,s.pipe)(f.lookup(0,e),u.chain((function(e){return e.muteCategory})),u.fold((function(){return r.error("No alerts to mute",i)}),(function(e){return a.set(i,{id:e.id,description:e.description,scope:n})})))})),a}}(c.byCategory,d,p)(m.get());return n&&b.next({type:i.Type.BeforeCategoriesMuted,muteScope:d,categories:e.map((function(e){return h.get(e)})),affectedAlerts:l}),m.set(h),b.next({type:i.Type.CategoriesChanged}),w.right(void 0)},unmuteCategories:function(e){return(0,s.pipe)(a.sendFeedback({kind:g.Mw.UNMUTE,userMuteScope:d,userMuteCategories:e}),C.mapLeft((function(e){p.warn("Alerts could not be un-muted on CAPI",e)})))(),0===r.getAlerts(o,e).all.filter((function(e){return e.mute!==A.bZ.MuteStateType.Unmuted})).length&&p.warn("No alerts were unmuted on category mute",{categoryIds:e}),m.modify(function(e,t){return function(n){var r=new Map(n);return e.forEach((function(e){n.has(e)?r.delete(e):t.error("Tried to unmute a category which is not muted",e)})),r}}(e,p)),b.next({type:i.Type.CategoriesChanged}),w.right(void 0)},getMutedCategories:function(){return(0,s.pipe)(m.get(),n.filterWithCount((0,h.not)(t.isSpecial),o))},getMutedSpecialCategories:function(){return(0,s.pipe)(m.get(),n.filter(t.isSpecial))},loadCachedMutedCategories:function(e){m.set(e)},dispose:function(){return _.dispose()}}},function(e){e.create=function(){return{events:P.c(),mutedCategories:c.h.create(new Map),getMutedCategories:function(){return new Map},getMutedSpecialCategories:function(){return new Map},muteCategories:function(e,t){return w.right(void 0)},unmuteCategories:function(e){return w.right(void 0)},loadCachedMutedCategories:b.ZT,dispose:b.ZT}}}(e.Mock||(e.Mock={}))}(e.CategoriesModel||(e.CategoriesModel={}))}(i||(i={})),function(e){!function(e){e.eq=d.getStructEq({id:i.Category.Id.ord,description:d.eqString,isMuted:d.eqBoolean,alertsCount:d.eqNumber})}(e.Category||(e.Category={})),function(t){function n(e){return(0,o.__assign)((0,o.__assign)({},e),{isMuted:!0})}function r(e){return(0,s.pipe)(e,p.map(n))}function i(e){return{categories:e,count:Array.from(e.values()).reduce((function(e,t){return t.isMuted?e:e+t.alertsCount}),0)}}!function(e){e.empty={categories:new Map,count:0}}(t.State||(t.State={})),function(e){var t;!function(e){e.categoryClicked="categoryClicked",e.doneClicked="doneClicked",e.closeClicked="closeClicked",e.modalOpened="modalOpened"}(t=e.Kind||(e.Kind={})),e.shouldCloseDialogue=function(e){return e.kind===t.closeClicked||e.kind===t.doneClicked}}(t.Action||(t.Action={})),function(t){t.create=function(t){var n=c.h.create(u.none),a=n.view(u.map(i)),d=new E.xQ,p=d.subscribe(function(t,n){return function(i){switch(i.kind){case e.Dialogue.Action.Kind.categoryClicked:t.modify(u.map((function(e){var t=new Map(e),n=e.get(i.categoryId);return t.set(i.categoryId,(0,o.__assign)((0,o.__assign)({},n),{isMuted:i.isMuted})),t})));break;case e.Dialogue.Action.Kind.doneClicked:n.unmuteCategories(i.unmutedCategories),t.set(u.none);break;case e.Dialogue.Action.Kind.closeClicked:t.set(u.none);break;case e.Dialogue.Action.Kind.modalOpened:t.set(u.some((0,s.pipe)(n.getMutedCategories(),r)));break;default:(0,l.vE)(i)}}}(n,t));return{state:a,actionEvents:d,dispose:function(){return p.unsubscribe()}}}}(t.ViewModel||(t.ViewModel={}))}(e.Dialogue||(e.Dialogue={}))}(a||(a={}))},45429:(e,t,n)=>{"use strict";n.d(t,{DV:()=>J,eZ:()=>K,UC:()=>Q});var r,i,a,o=n(59312),s=n(45980),c=n(73805),l=n(49524),u=n(12447),d=n(59443),p=n(95574),f=n(22232),m=n(83078),h=n(8125),g=n(55415),v=n(64909),y=n(65772),b=n(92932),w=n(17753),_=n(10002),C=n(52479),S=n(66265),A=n(16528),x=n(76974),I=n(77176),E=n(17343),k=n(93508),T=n(28043),R=n(18625),L=n(66310),P=n(40151),M=n(24209),N=n(91224),F=n(38194),O=n(598),B=n(83401),D=n(41398),H=n(55721),W=n(95093),U=n(16118),z=n(85985),X=n(40644),G=n(66910),V=n(91402),q=n(38524),Y=n(71517),$=n(46616),j=n(13338),Z=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,c.pipe)(e.view(q.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,c.pipe)(t.get(n),v.map((function(e){var t=e.value;return 0===(0,j.v_)({cardTop:i.converters.windowToViewport(r),cardHeight:t.positionState.height,viewportHeight:i.viewport.height,padding:{before:0,after:0}})})))})),m.MH)}};!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=function(t,n){return void 0===t&&(t=e.CARD_CONTENT_OFFSET_REM),void 0===n&&(n=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM),function(e,r){return Math.round((e?n:t)*r)}}}(r||(r={})),function(e){e.cardPositionGetter=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return p.vM((function(){return(0,c.pipe)(e.view(q.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,c.pipe)(t.get(n),v.map((function(e){var t=e.value;return(0,c.pipe)(r,v.fold((function(){return(0,s.flow)(Y.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop,i.converters.viewportToWindow)(t.positionState.absTop)}),s.identity))})))})),m.MH)}))}},e.cardPositionInViewportGetter=function(e,t){return function(n,r){var i=new $.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return p.vM((function(){return(0,c.pipe)(e.view(q.nL.getLens).get(),v.chain((function(e){var t=e.items;return(0,c.pipe)(t.get(n),v.chain((function(e){var a,o,l,u=e.value;return(0,c.pipe)(r,v.map(i.converters.windowToViewport),v.alt((function(){return v.some((0,s.flow)(Y.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop)(u.positionState.absTop))})),v.map((a=u,o=function(e,t){return(0,c.pipe)(t.get(e),v.map((function(e){var n=e.index;return{before:(0,c.pipe)(t.getAt(n-1),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0}))),after:(0,c.pipe)(t.getAt(n+1),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0})))}})),v.getOrElse((function(){return{before:0,after:0}})))}(n,t),l=i.viewport,function(e){var t=(0,j.v_)({cardTop:e,cardHeight:a.positionState.height,viewportHeight:l.height,padding:o});return Y.L.FromViewportTop.ISO.modify(Y.L.concatC(-t))(e)})),v.map(i.converters.viewportToWindow))})))})),m.MH)}))}}}(i||(i={})),function(e){var t=function(e,t,n,r){var i=r.viewport.get(),a=r.scrollTop.get(),o=Y.L.converters(a,Y.r.FromWindowTop.ISO.unwrap(i.top),r.paddingTop.get());return p.vM((function(){return(0,c.pipe)(q.nL.getLens(n),v.chain((function(t){return t.items.get(e)})),v.map((function(e){return Y.L.AbsTop.ISO.wrap(e.value.positionState.absTop)})),v.map((function(e){return o.absTopToViewportTop(e)})),v.fold((function(){throw new f.ej("Cannot get offset for unknown card")}),(function(e){var n=o.windowToViewport(t);return Y.L.FromViewportTop.ISO.unwrap(e)-Y.L.FromViewportTop.ISO.unwrap(n)})))}))};e.moveCardToPositionSyncGetter=function(e,n){return function(r){return(0,c.pipe)(t(r.id,r.position,e.get(),n),y.chain((function(e){return n.moveCardsBy(e,"moveCardToPositionAnimated")})))}},e.moveCardToPositionAnimatedGetter=function(e,n){return function(r){return(0,c.pipe)(t(r.id,r.position,e.get(),n),y.fold((function(e){return V._(e)}),(function(e){return n.moveCardsByAnimated(e,"moveCardToPositionAnimated")})))}}}(a||(a={}));var J,K,Q,ee=n(32917);!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(J||(J={})),function(e){e.cardSuggestedPositionGetter=function(e,t){return function(n,r,i,a){var o="cardTop"===a?0:t(r);return(0,c.pipe)(e(n,(0,c.pipe)(i,v.map(Y.r.FromWindowTop.ISO.modify(Y.L.concatC(-o))))),y.map((function(e){return{top:e,contentOffset:o}})))}},e.getSuperScrollMapper=function(t,n,o){var s=a.moveCardToPositionAnimatedGetter(t,n),c=a.moveCardToPositionSyncGetter(t,n),l=r.contentOffsetGetter();return{setCardPosition:function(e,t,n,r){var i={top:r,contentOffset:l(t,o.get())};return(n?s({id:e,position:r}):x.of(c({id:e,position:r})).pipe(I.U(p.MH))).pipe(E.h(i),k.O(i),T.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(i.cardPositionGetter(t,n),(function(e){return l(e,o.get())})),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(i.cardPositionInViewportGetter(t,n),(function(e){return l(e,o.get())})),willFitViewport:Z(t,n)}}}(K||(K={})),function(e){e.getMapper=function(e,t,n){return{moveAlertHighlightInViewport:function(t,n,r){return e.ensureAlertHighlightInViewport(t,Y.r.FromWindowTop.ISO.unwrap(n),r)},getMarkAlertPosition:function(r){return(0,c.pipe)(e.getMarkByAlert(r),v.chain((function(i){return(0,c.pipe)(i.getRect(),y.map(u.n.relativeToViewport),y.map((function(e){return v.some(e.top)})),y.getOrElse((function(){return n.debug("Cached alert is missing, falling back to flush"),function(n){return t.flushChanges(),(0,c.pipe)(e.getMarkByAlert(n),v.chain((function(e){return(0,c.pipe)(v.fromEither((0,c.pipe)(e.getRect(),y.map(u.n.relativeToViewport),y.map((function(e){return e.top})))))})))}(r)})),v.map(Y.r.FromWindowTop.ISO.wrap))})))}}}}(Q||(Q={}));var te,ne;!function(){function e(e,t){this._cardPositions=e,this._markPositions=t,this._log=b.C8.Logging.root.getLogger("AlignmentViewModel")}e.prototype.alignCardToMark=function(e,t,n){var r=this,i=e.id,a=e.renderOptions.features,o=e.activeAlert,s=e.activeHighlightIndex;return R.P((function(){return x.of(r._markPositions.getMarkAlertPosition({alert:o,highlightIndex:s}))})).pipe(L.w(v.fold(P.c,(function(e){return x.of(e)}))),I.U((function(e){return{mark:e,card:p.MH(r._cardPositions.getCardSuggestedPositionInViewport(i,a.has(X.X.RenderOptions.Features.showLabel),v.some(e),"cardContentTop"))}})),L.w((function(e){var c=e.card,l=e.mark;return M.T(r._cardPositions.setCardPosition(i,a.has(X.X.RenderOptions.Features.showLabel),t===J.ANIMATE_ALL,Y.r.FromWindowTop.ISO.modify(Y.L.concatC(-c.contentOffset))(l)),C.Ft(r._markPositions.moveAlertHighlightInViewport({alert:o,highlightIndex:s},Y.r.FromWindowTop.ISO.modify(Y.L.concatC(c.contentOffset))(c.top),t===J.ANIMATE_ALL?d.uq.initial:d.uq.none))(n))})),E.h(C.PU),N.K((function(e){return r._log.error("Cannot align card to mark",e),P.c()})),F.B())},e.prototype.alignMarkToCard=function(e,t,n){var r=this,i=e.id,a=e.renderOptions.features,o=e.activeHighlightIndex,s=e.activeAlert;return R.P((function(){return x.of(r._markPositions.getMarkAlertPosition({alert:s,highlightIndex:o}))})).pipe(S.oA,L.w((function(e){var t=p.MH(r._cardPositions.getCardSuggestedPositionInViewport(i,a.has(X.X.RenderOptions.Features.showLabel),v.none,"cardContentTop"));return r._cardPositions.setCardPosition(i,a.has(X.X.RenderOptions.Features.showLabel),!1,Y.r.FromWindowTop.ISO.modify(Y.L.concatC(-t.contentOffset))(e)).pipe(T.x(),E.h((0,c.pipe)(n,v.filter((function(e){return r._cardPositions.willFitViewport(i,Y.r.FromWindowTop.ISO.modify(Y.L.concatC(-t.contentOffset))(e))})),v.getOrElse((function(){return Y.r.FromWindowTop.ISO.modify(Y.L.concatC(t.contentOffset))(t.top)})))))})),L.w((function(e){return r._markPositions.moveAlertHighlightInViewport({alert:s,highlightIndex:o},e,t===J.ANIMATE_ALL?d.uq.fake:d.uq.none)})),E.h(C.PU),N.K((function(e){return r._log.error("Cannot align mark to card",e),P.c()})),F.B())},e.prototype.alignMarkTo=function(e,t,n,r){var i=this;return R.P((function(){return x.of(i._markPositions.getMarkAlertPosition(t))})).pipe(I.U(v.map((0,s.flow)(Y.r.FromWindowTop.ISO.modify((function(e){return e-Y.r.FromWindowTop.ISO.unwrap(n)})),Y.r.FromWindowTop.ISO.unwrap))),S.oA,L.w((function(e){return i._markPositions.moveAlertHighlightInViewport(t,n,r===J.ANIMATE_ALL?d.uq.initial:d.uq.none).pipe(E.h(e))})),L.w((function(t){var n=p.MH(i._cardPositions.getCardSuggestedPositionInViewport(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),v.none,"cardContentTop"));return i._cardPositions.setCardPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),!1,Y.r.FromWindowTop.ISO.modify(Y.L.concatC(t))(n.top))})),E.h(C.PU),N.K((function(e){return i._log.error("Cannot align mark to suggested position",e),P.c()})),F.B())},e.prototype.alignCardTo=function(e,t,n){var r=this,i=n!==J.NO_ANIMATION;return R.P((function(){return x.of(p.MH(r._cardPositions.getCardSuggestedPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),v.some(t),"cardTop")))})).pipe(L.w((function(t){return r._cardPositions.setCardPosition(e.id,!X.X.isAlertCard(e)||e.renderOptions.features.has(X.X.RenderOptions.Features.showLabel),i,t.top)})),E.h(C.PU),N.K((function(e){return r._log.error("Cannot align card to required top",e),P.c()})),F.B())}}();!function(e){var t=function(){this.alignCardToMark=function(){return P.c()},this.alignMarkToCard=function(){return P.c()},this.alignCardTo=function(){return P.c()},this.alignMarkTo=function(){return P.c()}};e.Mock=t}(te||(te={})),function(e){var t,n;!function(e){var t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=function(e,n,r){return n.top+r>e.bottom?t.below:e.top>n.bottom?t.above:t.intersects}}(t||(t={})),e.createAlignmentOnTypingEffect=function(e,t,n){var r=e.view(q.nL.mapper((function(e){var t=e.currentLens;return(0,c.pipe)(v.some(t),v.filter(j.Bk))}))).pipe(I.U(v.chain(q.In.getActiveItemWithAlert),v.filter(j.S4)),S.cp((function(e){return n.pipe(L.w(C.b2.rafScheduler),L.w((function(){return t.alignCardToMark(e,J.NO_ANIMATION,!1)})))})));return{id:"alignmentOnTyping",when:_.R.isWithAlertsId,what:q.nL.Effect.Applicator.create(r.pipe(O.c(B.F())))}},e.createAlignOnDisjointedAreasEffect=function(e,n,r,i){var a=e.view((0,s.flow)(q.nL.getLens,v.filter((function(e){return v.isNone(q.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0})))),o=a.pipe(I.U(v.isSome),T.x(),L.w(C.Ft(r.changes.pipe(k.O(C.PU),L.w(C.b2.rafScheduler),I.U((function(){return v.some(function(e){var t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}}(r))})),I.U(v.filter((function(e){return e.top-e.bottom!=0})))))),D.M(a.pipe(I.U(v.map((function(e){return e.items})))),m.vB((function(r,a){return(0,c.pipe)(ee.YA(e,i),v.map((function(e){return{top:Y.r.FromWindowTop.ISO.unwrap(e.top),bottom:Y.r.FromWindowTop.ISO.unwrap(e.bottom)}})),v.chain((function(e){return(0,c.pipe)(function(e,n,r){var i=(0,c.pipe)(e.getAt(0),v.map((function(e){return e.positionState.height})),v.getOrElse((function(){return 0}))),a=t.getRelativePosition(n,r,i);switch(a){case t.RelativePosition.above:return(0,c.pipe)(e.getAt(0),v.map((function(e){return{card:e,top:n.top}})));case t.RelativePosition.below:return(0,c.pipe)(e.getAt(0),v.map((function(e){return{card:e,top:n.bottom-e.positionState.height}})));case t.RelativePosition.intersects:return v.none;default:return(0,f.vE)(a)}}(a,r,e),v.map((function(e){var t=e.card,r=e.top;return n.alignCardTo(t,Y.r.FromWindowTop.ISO.wrap(r),J.NO_ANIMATION)})))})),v.getOrElse(P.c))}))),L.w(v.fold(P.c,l.y)));return{id:"alignOnDisjointedAreas",when:_.R.isWithAlertsId,what:q.nL.Effect.Applicator.create(o.pipe(O.c(B.F())))}},e.createAlignOnResizeSideEffect=function(e,t,n,r){void 0===r&&(r=C.b2.rafScheduler);var i=e.view(q.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).view(v.filter((function(e){var t=e.currentLens;return(0,j.Bk)(t)}))).view(v.chain((function(e){var t=e.currentLens,n=e.alertSource;return(0,c.pipe)(q.In.getActiveItemWithAlert(t),v.filter(j.S4),v.map((function(e){return{card:e,source:n,lensId:t.id}})))}))),a=A.Qr.pipe(H.p(100),W.T(n),D.M(i,(function(e,t){return t})),L.w(r),L.w(v.fold(P.c,(function(e){var n=e.card;return t.alignCardToMark(n,J.NO_ANIMATION,!1)}))));return{id:"alignOnResizeSideEffect",when:_.R.isWithAlertsId,what:q.nL.Effect.Applicator.create(a.pipe(O.c(B.F())))}},function(e){e.skip="skip"}(n=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=function(e,t,r,i,a){void 0===i&&(i=function(e,t){return t}),void 0===a&&(a=C.b2.rafScheduler);var u=(0,h.Kg)(G.l.isAlertMinicardButtonClick,G.l.isSwitchToClosestByViewport,G.l.isAlertCardShow,G.l.isCardExpand),d=M.T(e.view(q.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).pipe(k.O(v.none),I.U(v.map((function(e){return e.currentLens.id}))),U.G(),z.h((function(e){var t=e[0],n=e[1];return(0,c.pipe)(m.vB((function(e,t){return e!==t}))(t,n),v.exists(l.y))})),E.h(v.none)),e.view(q.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return v.some({currentLens:t,alertSource:n})}))).pipe(z.h(v.exists((function(e){var t=e.currentLens;return(0,j.Bk)(t)}))),I.U(v.chain((function(e){var t=e.currentLens,n=e.alertSource;return(0,c.pipe)(q.In.getActiveItemWithAlert(t),v.filter(j.S4),v.map((function(e){return{card:e,source:n,lensId:t.id}})))}))))).pipe(T.x((0,s.flow)(m.vB((function(e,t){return e.lensId===t.lensId&&e.card.activeAlert.id===t.card.activeAlert.id&&e.card.visualState.transition.type===t.card.visualState.transition.type&&e.card.activeHighlightIndex===t.card.activeHighlightIndex})),v.exists(l.y)))),p=r.pipe(z.h(u),I.U(v.some),k.O(v.none),U.G(),z.h((0,s.flow)((0,s.tupled)(m.vB((function(e,t){return!G.l.isAlertCardShow(t)||!G.l.isAlertMinicardButtonClick(e)}))),v.getOrElse(s.constFalse))),I.U((function(e){var t=e[1];return(0,c.pipe)(t,v.filter(G.l.isAlertMinicardButtonClick),v.map(g.ei("clickPoint")))})),k.O(v.none)).pipe(L.w((function(e){return d.pipe(z.h(v.exists((function(e){return e.source===w.l$.sidebar}))),I.U((0,s.flow)(v.chain((function(t){return v.some((0,o.__assign)((0,o.__assign)({},t),{clickPoint:e}))})))))}))),f=d.pipe(z.h(v.exists((function(e){return e.source!==w.l$.sidebar}))),I.U((function(e){return(0,c.pipe)(e,v.chain((function(e){return v.some((0,o.__assign)((0,o.__assign)({},e),{clickPoint:v.none}))})))}))),y=M.T(p,f).pipe(k.O(v.none),U.G(),I.U((function(e){var t=e[0],n=e[1];return(0,c.pipe)(n,v.map((function(e){return{card:e.card,source:e.source,animate:(0,c.pipe)(t,m.wo((function(t){return t.lensId===e.lensId}))),clickPoint:(0,c.pipe)(n,v.chain(g.ei("clickPoint")),v.map((0,s.flow)(g.ei("y"),Y.r.FromWindowTop.ISO.wrap)))}})))})),L.w(v.fold(P.c,a)),L.w((function(e){var r=e.card,a=e.source,o=e.animate,s=e.clickPoint;return(0,c.pipe)(i(r,a),(function(e){return e===n.skip?B.C:function(e,n,r,i){if(r===w.l$.text)return t.alignCardToMark(e,n?J.ANIMATE_ALL:J.NO_ANIMATION,!0);if(r===q.h8.forceText)return t.alignCardToMark(e,J.NO_ANIMATION,!1);var a=r===w.l$.sidebar;return t.alignMarkToCard(e,a?n?J.ANIMATE_ALL:J.ANIMATE_MARK:J.NO_ANIMATION,i)}(r,o,e,s)}))})));return{id:"alignmentSideEffect",when:_.R.isWithAlertsId,what:q.nL.Effect.Applicator.create(y.pipe(O.c(B.F())))}}}(ne||(ne={}))},38264:(e,t,n)=>{"use strict";n.d(t,{dv:()=>C,Xx:()=>ee});var r,i=n(59312),a=n(95686),o=n(45980),s=n(73805),c=n(32952),l=n(27221),u=n(84966),d=n(72635);!function(e){var t;e.URI="IOOption",e.ioOption=(0,i.__assign)({URI:e.URI},(0,d.D)(a.io)),t=(0,s.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,n){return function(r){return e.ioOption.fold(r,t,n)}},e.fromM=e.ioOption.fromM}(r||(r={}));var p=n(22232),f=n(83078),m=n(8125),h=n(64909),g=n(65772),v=n(92932),y=n(17753),b=n(24273),w=n(10002),_=n(66910);var C,S=function(){function e(t,n){void 0===n&&(n=new URLSearchParams),this.base=t,this.params=n;var r=e._toString(t,n).length;(0,p.kG)(r<e.MAX_URL_LENGTH,"url exceeded length limit",String(r))}return e.prototype.addParams=function(t){var n,r=Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1];return e.append(n,r),e}),(n=this.params,new URLSearchParams(n.toString())));return new e(this.base,r)},e.prototype.toString=function(){return e._toString(this.base,this.params)},e._toString=function(e,t){var n=t.toString();return e+(n.length?"?"+n:"")},e.MAX_URL_LENGTH=2083,e}(),A=n(73510),x=n(95053),I=n(598),E=n(40151),k=n(76974),T=n(66310),R=n(91402),L=n(77176),P=n(79462),M=n(83401),N=n(77843),F=n(93508),O=n(95093),B=n(85985),D=n(36919),H=n(2834),W=n(24209),U=n(49524),z=n(67434),X=n(38194),G=n(80900),V=n(13444),q=n(40250),Y=n(45429),$=n(41199),j=n(40644),Z=n(50536),J=n(87280),K=n(38524);!function(e){e.changeAlertEffect=function(e,t,n,r,i,a,o){return{id:"changeAlertEffect",when:w.R.isWithAlertsId,what:K.nL.Effect.SwitchAlert.create(t.actionEvents.pipe(T.w((function(t){var c=e.get();if(!K.nL.hasCards(c))return R._(new p.ej("Cannot update state without cards"));switch(t.type){case _.l.Type.alertMinicardButtonClick:return(0,s.pipe)(r.getRegistered(t.alertHighlight.alert.id),h.fold((function(){return o.error("somehow we got click on non registered alert",{alert:$.$.snapshot(t.alertHighlight.alert),alertInRepo:(0,s.pipe)(r.getById(t.alertHighlight.alert.id),h.map($.$.fromModel),h.map($.$.snapshot)),state:K.nL.snapshot(Z.Mq.snapshot)(c)}),E.c()}),(function(){return k.of(t.alertHighlight)})));case _.l.Type.cardMatchesNavigationButtonClick:var l=t.transitionTo;switch(l.kind){case"anotherAlert":return(0,s.pipe)("right"===t.direction?n.nextAlert(l.card):(0,s.pipe)(n.prevAlert(l.card),f.vx(n.anyRegisteredAlert(l.card))),h.fold(E.c,(function(e){return k.of({alert:e,highlightIndex:0})})));case"sameAlert":return(0,s.pipe)(r.getRegistered(l.card.activeAlert.id),h.fold(E.c,(function(){return k.of({alert:l.card.activeAlert,highlightIndex:l.highlightIndex})})));default:return(0,p.vE)(l)}case _.l.Type.switchToClosestByViewport:return function(e,t,n){var r=function(e){return(0,s.pipe)(t,h.map((function(t){return t.alignMarkToCard(e,Y.DV.ANIMATE_ALL,h.none).pipe(I.c(E.c()))})),h.getOrElse((function(){return E.c()})))};return(0,s.pipe)(n((function(t){return(t.lensId===e.id||w.R.isMainLens(e.id))&&!y.bZ.isPremium(t)}),"middleOfTheViewport"),h.fold(E.c,(function(t){return(0,s.pipe)(K.In.getActiveItemWithAlert(e),h.filter((function(e){return e.activeAlert.id===t.alert.id})),h.fold((function(){return k.of(t)}),r))})))}(c.currentLens,i,a);default:return E.c()}})),L.U((function(e){return{alertHighlight:e,alertSource:y.l$.sidebar,options:{order:"lensOrder"}}}))))}},e.createSendActiveAlertFeedbacksEffect=function(e,t,n,r){var i=e.view(K.nL.getActiveAlert).pipe(L.U(h.filter((function(e){return h.isSome(n.getRegistered(e.id))&&!y.bZ.isInPremiumLens(e)}))),T.w(h.fold(E.c,(function(i){return P.y.create((function(){return(0,s.pipe)(t.applyFeedback(i.id,{kind:u.PZ.LOOKED,subtype:b.J.getSubTypeFromLens(e.get().currentLens.id)},y.l$.sidebar),g.fold(r.handler("Failed to send LOOKED feedback").error,o.constVoid)),function(){h.isSome(n.getRegistered(i.id))&&(0,s.pipe)(t.applyFeedback(i.id,{kind:u.PZ.CLOSED,subtype:b.J.getSubTypeFromLens(e.get().currentLens.id)},y.l$.sidebar),g.fold(r.handler("Failed to send CLOSED feedback: ").error,o.constVoid))}}))}))));return{id:"sendActiveAlertFeedbacksEffect",when:o.constTrue,what:K.nL.Effect.Applicator.create(i.pipe(I.c(M.F())))}}}(C||(C={}));var Q,ee=function(){function e(e,t,n,r,a,l,d,C,S,k,T,R){var P=this;this._ops=e,this._navigationEvents=t,this._cardFactory=n,this._alertsService=r,this._markOnboardingAsSeen=a,this._markMuteQuotedAdviceAsDismissed=l,this._sendToUpgradeExperiment=C,this._sendToSignInExperiment=S,this._checksFeedCapabilities=T,this._lensState=R,this._log=v.C8.Logging.getLogger("CardsViewModelImpl",v.zW.LogLevel.DEBUG),this._subs=new A.w.Keeper,this._flushCompleteTransition=new c.xQ,this._flushPositionAnimation=new c.xQ,this.actionEvents=new c.xQ,this.completePositionAnimation=new c.xQ,this.changePosition=new c.xQ,this._transitionBuffer=N.F(100).pipe(F.O(0),O.T(this._flushCompleteTransition)),this._positionAnimationBuffer=N.F(100).pipe(F.O(0),O.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(B.h(_.l.isStartTransitionTo),L.U((function(e){return function(t){var n=t.currentLens,r=P._applyStartVSChange(n.items,[[e.id,e.transition]]);return K.nL.Prism.lensItems.set(r,t)}}))),this._completeTransitionStateChanges=this.actionEvents.pipe(B.h(_.l.isCompleteTransitionTo),D.f(this._transitionBuffer),B.h(m.Dw),L.U((function(e){return function(t){var n=t.currentLens,r=P._applyCompleteVSChange(n.items,e.map((function(e){return[e.id,e.transitionId]})));return P._log.isEnabled(v.zW.LogLevel.TRACE)&&P._log.trace("batch transition complete",{events:e,diff:x.aW.diff(n.items,r)}),K.nL.Prism.lensItems.set(r,t)}}))),this._changePositionEffect=this.changePosition.pipe(L.U((function(e){var t=e.id,n=e.height;return function(e){var r=(0,s.pipe)(q.l.update(e.currentLens.items,t,(function(e){return P._checksFeedCapabilities.changePosition(J.Z.changeHeight(e.positionState,n))(e)})),g.fold((function(){return e.currentLens.items}),o.identity));return K.nL.Prism.lensItems.set(r,e)}}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(D.f(this._positionAnimationBuffer),B.h(m.Dw),L.U((function(e){return function(t){var n=t.currentLens.items,r=e.map((function(e){return[e,!1]})).reduce((function(e,t){var n=t[0],r=t[1];return(0,s.pipe)(q.l.update(e,n,(function(e){return P._checksFeedCapabilities.changePosition(J.Z.changeAnimationInProgress(e.positionState,r))(e)})),g.fold((function(){return e}),o.identity))}),n);return K.nL.Prism.lensItems.set(r,t)}}))),this._switchToNextChanges=this.actionEvents.pipe(B.h((function(e){return e.type===_.l.Type.switchToNext})),L.U((function(){return function(e){return e.patch({currentLens:(0,s.pipe)(e.currentLens.findNextAlert(),h.fold((function(){return(0,s.pipe)(K.nL.getActiveAlert(e),h.fold((function(){throw new p.ej("Can not switch from non-existing card")}),(function(t){return e.currentLens.releaseAlert(t)})))}),(function(t){return e.currentLens.select(t)}))),switchOrder:"lensOrder",alertSource:y.l$.sidebar})}}))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(B.h(_.l.isDismissMuteQuotedAdvice),H.b(this._markMuteQuotedAdviceAsDismissed),L.U((function(){return function(e){var t=q.l.filter(e.currentLens.items,(0,m.W9)(j.X.isAlertCard,(function(e){return $.$.isInQuotes(e.activeAlert)}))).keys().map((function(e){return[e,!1]})).reduce((function(e,t){var n=t[0];return(0,s.pipe)(q.l.update(e,n,P._cardFactory.hideMuteQuotedAdvice),g.fold((function(){return e}),o.identity))}),e.currentLens.items);return K.nL.Prism.lensItems.set(t,e)}}))),this._toggleNonPriorityCards=this.actionEvents.pipe(B.h(_.l.isToggleNonPriorityCards),L.U((function(){return function(e){return e.patch({currentLens:(0,K.yi)(e.currentLens)?e.currentLens.toggleNonPriorityList():e.currentLens})}}))),this._changeUserInput=this.actionEvents.pipe(B.h(_.l.isChangeUserInput),H.b((function(e){var t=e.alertId,n=e.userInput;P._alertsService.changeGapValue(t,n)})),L.U((function(e){var t=e.cardId,n=e.userInput;return function(e){var r=(0,s.pipe)(q.l.update(e.currentLens.items,t,(function(e){return P._cardFactory.updateUserInput(e,n?h.some(n):h.none)})),g.fold((function(){return e.currentLens.items}),o.identity));return K.nL.Prism.lensItems.set(r,e)}}))),this._applyTakeawayFeedback=this.actionEvents.pipe(B.h(_.l.isTakeawayFeedbackAction),L.U((function(e){var t=e.alertId,n=e.type;return function(e){var r=q.l.filter(e.currentLens.items,(0,m.W9)(j.X.isAlertCard,(function(e){return e.activeAlert.id===t}))).keys().map((function(e){return(0,o.tuple)(e,n)})).reduce((function(e,t){var n=t[0],r=t[1];return(0,s.pipe)(q.l.update(e,n,(function(e){return j.X.isAlertCard(e)?P._cardFactory.updateTakeawayFeedback(e,h.some(r===_.l.Type.takeawayCorrectlyDetected?y.TO.correctlyDetected:r===_.l.Type.takeawayIncorrectlyDetected?y.TO.incorrectlyDetected:(0,p.vE)(r))):e})),g.fold((function(){return e}),o.identity))}),e.currentLens.items);return K.nL.Prism.lensItems.set(r,e)}}))),this._smartPhrasesFeedback=this.actionEvents.pipe(B.h(_.l.isSmartPhrasesFeedbackAction),L.U((function(e){var t=e.cardId,n=e.alertId,r=e.feedbackType;return(0,s.pipe)(P._alertsService.changeSmartPhrasesFeedback(n,r),g.map((function(e){return{newAlert:e,cardId:t}})))})),H.b((function(e){return P._sendSmartPhrasesUpdateStateAction(e)})),L.U((function(e){return P._updateSmartPhrasesCard(e)}))),this._smartPhrasesShowMoreIdeas=this.actionEvents.pipe(B.h(_.l.isSmartPhrasesShowMoreIdeasAction),L.U((function(e){var t=e.cardId,n=e.alertId;return(0,s.pipe)(P._alertsService.rotateSmartPhrasesReplacements(n),g.map((function(e){return{newAlert:e,cardId:t}})))})),H.b((function(e){return P._sendSmartPhrasesUpdateStateAction(e)})),L.U((function(e){return P._updateSmartPhrasesCard(e)}))),this._smartPhrasesApply=this.actionEvents.pipe(B.h(_.l.isSmartPhrasesApplyAction),L.U((function(e){var t=e.cardId,n=e.alertId,r=e.replacementIndex;return(0,s.pipe)(P._alertsService.discardSmartPhrasesReplacement(n,r),g.map((function(e){return{newAlert:e,cardId:t}})))})),H.b((function(e){return P._sendSmartPhrasesUpdateStateAction(e)})),H.b((function(e){return P._sendSmartPhrasesHighlightLastAppliedReplacementAction(e)})),L.U((function(e){return P._updateSmartPhrasesCard(e)}))),this._smartPhrasesHighlightLastAppliedReplacement=this.actionEvents.pipe(B.h(_.l.isSmartPhrasesHighlightLastAppliedReplacementAction),L.U((function(e){var t=e.cardId,n=e.alertId;return(0,s.pipe)(P._alertsService.highlightSmartPhrasesLastAppliedReplacement(n),g.map((function(e){return{newAlert:e,cardId:t}})))})),L.U((function(e){return P._updateSmartPhrasesCard(e)}))),this._smartPhrasesRestoreOriginalHighlight=this.actionEvents.pipe(B.h(_.l.isSmartPhrasesRestoreOriginalHighlightAction),L.U((function(e){var t=e.cardId,n=e.alertId;return(0,s.pipe)(P._alertsService.restoreSmartPhrasesOriginalHighlight(n),g.map((function(e){return{newAlert:e,cardId:t}})))})),L.U((function(e){return P._updateSmartPhrasesCard(e)}))),this._sendToUpgrade=(0,s.pipe)(this._sendToUpgradeExperiment,h.map((function(e){return e(P.actionEvents)}))),this._sendToSignIn=(0,s.pipe)(this._sendToSignInExperiment,h.map((function(e){return e(P.actionEvents)}))),this._sendFeedback=(0,o.flow)((function(e,t){return P._alertsService.applyFeedback(e,(0,i.__assign)((0,i.__assign)({},t),{subtype:b.J.getSubTypeFromLens(P._lensState.get().currentLens.id)}),y.l$.sidebar)}),g.fold(this._log.handler("error calling alert service to send a feedback").error,o.constVoid)),this._showIgnoreForm=new c.xQ,this._showIgnoreFormEffect=(0,s.pipe)(this._showIgnoreForm,L.U((function(e){return function(t){return K.nL.Prism.lensItems.set(P._applyStartVSChange(t.currentLens.items,[[e.id,{type:"feedback_form",clockwise:!0,options:e.options}]]),t)}}))),this._handleAlertIgnore=(0,o.flow)(te((function(e){return function(){return P._sendFeedback(e,{kind:u.PZ.IGNORE})}}),(function(e){return function(){return P._showIgnoreForm.next(e)}})),(function(e){return P.actionEvents.pipe(B.h(_.l.isAlertIgnoreAction)).subscribe((function(t){return e(t)()}))})),this.applicatorEffects={id:"cardsViewModel.effects",when:w.R.isWithAlertsId,what:K.nL.Effect.Applicator.create(W.T(this._startTransitionStateChanges,this._completeTransitionStateChanges,this._changePositionEffect,this._transitionEndStateChanges,this._switchToNextChanges,this._dismissMuteQuotedAdvice,this._changeUserInput,this._applyTakeawayFeedback,this._smartPhrasesFeedback,this._smartPhrasesShowMoreIdeas,this._smartPhrasesApply,this._smartPhrasesHighlightLastAppliedReplacement,this._smartPhrasesRestoreOriginalHighlight,this.actionEvents.pipe(B.h(_.l.isNavigation),H.b(this._navigationEvents),I.c(E.c())),(0,s.pipe)(this._sendToUpgrade,h.fold(E.c,U.y)),(0,s.pipe)(this._sendToSignIn,h.fold(E.c,U.y)),this._toggleNonPriorityCards,this._showIgnoreFormEffect))},this.hovered=this.actionEvents.pipe(B.h(_.l.isHoverAction),H.b((function(){return P._ops.flush()})),z.R((function(e,t){return"hover"===t.kind?h.some(t.id):(0,s.pipe)(e,h.filter((function(e){return e!==t.id})))}),h.none),X.B()),this.flushTransitionTo=function(){return P._flushCompleteTransition.next()},this.flushPositionAnimation=function(){return P._flushPositionAnimation.next()},this._subs.push(this._handleAlertFeedbacks(),this._handleTakeawayFeedbacks(),this._handleIngoreFormSubmit(),this._handleAlertIgnore(k),this._applyAlerts(),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleSmartPhrasesDone(),this._handleSmartPhrasesApplyLast()),(0,s.pipe)(d,f.bw((function(e){return P._subs.push(P._handleMuteCategories(e))})))}return e.prototype._applyStartVSChange=function(e,t){var n=this;return t.reduce((function(e,t){var r=t[0],i=t[1];return(0,s.pipe)(q.l.update(e,r,(function(e){return n._checksFeedCapabilities.transitionTo(i)(e)})),g.fold((function(){return e}),o.identity))}),e)},e.prototype._applyCompleteVSChange=function(e,t){var n=this;return t.reduce((function(e,t){var r=t[0],i=t[1];return(0,s.pipe)(e.get(r),h.map((function(e){return e.value})),h.fold((function(){return g.right(e)}),(function(t){return"removed"===t.visualState.transition.type?g.right(e.remove(r)):q.l.update(e,r,(function(e){return e.visualState.transitionId===i?n._checksFeedCapabilities.completeTransition(i)(e):e}))})),g.fold((function(){return e}),o.identity))}),e)},e.prototype._sendSmartPhrasesHighlightLastAppliedReplacementAction=function(e){var t=this;return(0,s.pipe)(e,g.map((function(e){var n=e.newAlert,r=e.cardId;return n&&n.replacementsLength>0?(0,s.pipe)(G.H(100),H.b((function(){return t.actionEvents.next({type:_.l.Type.smartPhrasesHighlightLastAppliedReplacement,alertId:n.id,cardId:r})})),V.g(2e3)).subscribe((function(){return t.actionEvents.next({type:_.l.Type.smartPhrasesRestoreOriginalHighlight,alertId:n.id,cardId:r})})):void 0})))},e.prototype._sendSmartPhrasesUpdateStateAction=function(e){var t=this;return(0,s.pipe)(e,g.map((function(e){var n=e.newAlert;return n?t.actionEvents.next({type:_.l.Type.smartPhrasesUpdateState,alertId:n.id,state:n.getAlertState()}):void 0})))},e.prototype._updateSmartPhrasesCard=function(e){var t=this;return function(n){return(0,s.pipe)(e,g.chainW((function(e){var r=e.newAlert,i=e.cardId;return q.l.update(n.currentLens.items,i,(function(e){return t._cardFactory.updateSmartPhrasesAlert(e,r)}))})),g.fold((function(e){return t._log.error("Error updating SmartPhrases card.",e),K.nL.Prism.lensItems.set(n.currentLens.items,n)}),(function(e){return K.nL.Prism.lensItems.set(e,n)})))}},e.prototype._handleAlertFeedbacks=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isAlertFeedbackAction)).subscribe((function(t){var n=t.alertId,r=t.feedbackType;return e._sendFeedback(n,{kind:r})}))},e.prototype._handleTakeawayFeedbacks=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isTakeawayAction)).subscribe((function(t){switch(t.type){case _.l.Type.takeawayCorrectlyDetected:return e._sendFeedback(t.alertId,{kind:u.PZ.ACCEPTED,replacementText:t.takeawayText});case _.l.Type.takeawayIncorrectlyDetected:return e._sendFeedback(t.alertId,{kind:u.PZ.IGNORE});case _.l.Type.takeawayDismiss:return e._sendFeedback(t.alertId,{kind:u.PZ.IGNORE,pnameQualifier:t.isLikelyToBeRead?u.N_.likelyToBeReadTakeaway:u.N_.unlikelyToBeReadTakeaway});case _.l.Type.takeawayResolve:return e._sendFeedback(t.alertId,{kind:u.PZ.ACKNOWLEDGED,pnameQualifier:t.isLikelyToBeRead?u.N_.likelyToBeReadTakeaway:u.N_.unlikelyToBeReadTakeaway});default:(0,p.vE)(t)}}))},e.prototype._handleSmartPhrasesDone=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isSmartPhrasesDoneAction)).subscribe((function(t){var n=t.alertId;return e._alertsService.dismissBatch([n],b.J.getSubTypeFromLens(e._lensState.get().currentLens.id))}))},e.prototype._handleSmartPhrasesApplyLast=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isSmartPhrasesUpdateStateAction),B.h((function(e){return 0===e.state.replacementsLength}))).subscribe((function(t){var n=t.alertId;return e.actionEvents.next({type:_.l.Type.smartPhrasesDone,alertId:n})}))},e.prototype._handleIngoreFormSubmit=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isAlertIgnoreFeedbackFormSubmit)).subscribe((function(t){var n=t.alertId,r=t.reason;return e._sendFeedback(n,{kind:u.PZ.IGNORE,reason:r})}))},e.prototype._handleMuteCategories=function(e){var t=this;return this.actionEvents.pipe(B.h(_.l.isMuteCategoryAction)).subscribe((function(n){return(0,s.pipe)(e.muteCategories([n.categoryId],!0),g.fold(t._log.handler("error calling categories model to mute category").error,o.constVoid))}))},e.prototype._applyAlerts=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isAlertApplyAction)).subscribe((function(t){return(0,s.pipe)(e._alertsService.apply(t.alertId,t.alternativeIndex,y.l$.sidebar,b.J.getSubTypeFromLens(e._lensState.get().currentLens.id)),g.fold(e._log.handler("error calling alert service to apply an alert").error,o.constVoid))}))},e.prototype._dismissAlertsBatch=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isDismissAlertsBatchAction)).subscribe((function(t){return(0,s.pipe)(e._alertsService.dismissBatch(t.alerts,b.J.getSubTypeFromLens(e._lensState.get().currentLens.id)),g.fold(e._log.handler("error calling alert service to dismiss alerts batch").error,o.constVoid))}))},e.prototype._newFeatureSeen=function(){var e=this;return this.actionEvents.pipe(B.h(_.l.isOnboardingClose)).subscribe((function(t){return(0,s.pipe)(e._markOnboardingAsSeen(t.value))}))},e.prototype.dispose=function(){this._subs.dispose()},e}();!function(e){var t=function(){var e=this;this.animate=l.h.create(!0),this.clockwise=l.h.create(!0),this.toggleAnimations=function(){return e.animate.modify((function(e){return!e}))},this.completePositionAnimation=new c.xQ,this.actionEvents=new c.xQ,this.flushTransitionTo=o.constVoid,this.sideEffect={id:"cardsViewModelMock",when:w.R.isWithAlertsId,what:K.nL.Effect.Applicator.create(E.c())},this.changePosition=new c.xQ,this.dispose=m.ZT};e.Mock=t,function(e){e.sendToUpgrade=function(e,t,n){return function(r){return r.pipe(B.h((function(e){return e.type===_.l.Type.toUpgrade})),L.U((function(){return function(r){return n(),e.actions.openUrl(new S(t.funnel.plans).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenaliPremiumPreviewCard"})),r}})))}},e.sendToSignIn=function(e,t){return function(n){return n.pipe(B.h((function(e){return e.type===_.l.Type.toSignIn})),L.U((function(){return function(n){return e.actions.openUrl(new S(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),n}})))}}}(e.Experiments||(e.Experiments={}))}(Q||(Q={}));var te=function(e,t){return function(n){return function(i){return(0,s.pipe)(i.eligibleForDismissSurvey,a.of,r.chain((function(e){return(0,s.pipe)(n,a.map((function(t){return t?h.none:h.some(e)})))})),r.fold((function(){return e(i.alertId)}),(function(e){return t({id:i.id,options:e})})))}}}},24740:(e,t,n)=>{"use strict";n.d(t,{$:()=>H});var r,i=n(489),a=n(45980),o=n(73805),s=n(36991),c=n(67394),l=n(64909),u=n(65772),d=n(80229),p=n(17753),f=n(22232),m=n(59312),h=n(95574),g=n(53521);function v(e,t){var n=t.text;t.ops.reduce((function(t,n,r){return c.JU.isInsertString(n)?(e.insertString(n.insert,n,r),t):c.JU.isInsertGap(n)?(e.insertGap("",n,r),t):c.JU.isInsert(n)?t:c.JU.isDelete(n)?(e.remove(t.slice(0,n.delete),n,r),t.slice(n.delete)):c.JU.isRetain(n)?(e.retain(t.slice(0,n.retain),n,r),t.slice(n.retain)):(0,f.vE)(n)}),n)}function y(e){return 0===e.replace(/ /g,"").length}function b(e,t){(0,o.pipe)(e,i.last,l.fold((function(){y(t.text)||e.push(t)}),(function(n){n.type===t.type?n.text+=t.text:e.push(t)})))}function w(e){return(0,o.pipe)(h.vM((function(){return(0,o.pipe)(e,d.map((function(t){var n=[];return v({insertString:function(t,n){if(n.type===c.JU.Type.Main)throw new E("Remove transform contains main insert",e)},insertGap:function(){throw new E("Remove transform contains gap insert",e)},retain:function(e,t){t.type!==c.JU.Type.Optional&&b(n,{type:g.GP.Text,text:e})},remove:function(e,t){var r=t.type;b(n,{type:r!==c.JU.Type.Main||y(e)?g.GP.Text:g.GP.Delete,text:e})}},t),n})),i.flatten)})),u.chain((0,a.flow)(u.fromPredicate((function(e){return e.length>0}),(function(){return new E("Remove transform contains no data",e)})),u.map((function(e){return{type:r.Type.Remove,remove:e}})))))}function _(e){return(0,o.pipe)(h.vM((function(){return(0,o.pipe)(e,d.map((function(t){var n=[];return v({insertString:function(t,n){if(n.type===c.JU.Type.Main)throw new E("Multi-remove transform contains main insert",e)},insertGap:function(){throw new E("Multi-remove transform contains gap insert",e)},retain:function(e){b(n,{type:g.GP.Text,text:e})},remove:function(e,t){var r=t.type;b(n,{type:r!==c.JU.Type.Main||y(e)?g.GP.Text:g.GP.Delete,text:e})}},t),n})))})),u.chain((0,a.flow)(u.fromPredicate((function(e){return e.length>=2&&e.every((function(e){return e.length>=2}))}),(function(){return new E("Incomplete multi-remove",e)})),u.map((function(e){return{type:r.Type.RemoveOr,removes:e}})))))}function C(e){return(0,o.pipe)(h.vM((function(){return(0,o.pipe)(e,d.map((function(t){var n=[];return v({insertString:function(e,t){var r=t.type;b(n,{type:r!==c.JU.Type.Optional?g.GP.Insert:g.GP.Text,text:e})},insertGap:function(){throw new E("Insert transform contains gap insert",e)},retain:function(e,t){(t.type!==c.JU.Type.Optional||n.length>0)&&b(n,{type:g.GP.Text,text:e})},remove:function(t,n){if(n.type===c.JU.Type.Main)throw new E("Insert transform contains main delete",e)}},t),n})))})),u.chain((0,a.flow)(d.fromArray,u.fromOption((function(){return new E("Incomplete insert",e)})),u.map((function(e){return{type:r.Type.Insert,inserts:e}})))))}function S(e){var t=e.reduce((function(e,t){var n=t[0],r=t[1],i=n.map((function(e){return e.text})).join("");return e.substitutions.push(i),e.inserts.push(r),i.length>e.longestSubstitution.length&&(e.longestSubstitution=i),e}),{substitutions:[],inserts:[],longestSubstitution:""}),n=t.substitutions,a=t.longestSubstitution,s=t.inserts,c=(0,o.pipe)(n,d.map((function(e){return a.split(e).join("")})));return(0,o.pipe)(i.zipWith(s,c,(function(e,t){return t&&e.push({type:g.GP.Text,text:t}),e})),d.fromArray,u.fromOption((function(){return new Error("Substitution processing error")})),u.map((function(e){return{type:r.Type.Substitution,remove:[{type:g.GP.Delete,text:a}],inserts:e}})))}function A(e){if(!("list"in e))return l.none;switch(e.list){case"bullet":case"dashed":case"ordered":return l.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return l.none}}function x(e){return(0,o.pipe)(e,u.fromPredicate((function(e){return 1===e.length}),(function(){return new E("Expected full-sentence transform to have 1 alternative",e)})),u.map((0,a.flow)(d.head,(function(t){var n={blockStart:0,ops:[],kind:g._k.PlainText};return v({insertString:function(e,t){var r=e.split("\n");if(1===r.length)n.ops.push({type:g.GP.Insert,text:e});else for(var i=(0,o.pipe)(t.attributes,A,l.fold((function(){return a.constVoid}),(function(e){var t=e.kind,r=e.indent;return function(){n.ops.splice(n.blockStart,1,{type:g.GP.List,kind:t,indent:r}),n={kind:g._k.WithFormatting,ops:n.ops,blockStart:n.blockStart}}}))),s=0,c=r.length-1;s<=c;s++){var u=r[s];u&&n.ops.push({type:g.GP.Insert,text:u}),s<c&&(i(),n.blockStart=n.ops.length,n.ops.push({type:g.GP.Insert,text:"\n"}))}},insertGap:function(){throw new E("Full sentence transform contains gap insert",e)},retain:function(e){n.ops.push({type:g.GP.Text,text:e})},remove:function(e){n.ops.push({type:g.GP.Delete,text:e})}},t),n}))),u.chain((0,a.flow)(l.fromPredicate((function(e){return e.ops.length>0})),u.fromOption((function(){return new E("Got empty full sentence transform",e)})),u.map((function(e){var t=e.ops,n=e.kind;return{type:r.Type.FullSentence,ops:t,kind:n}})))))}function I(e){return(0,o.pipe)(h.vM((function(){return(0,f.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,o.pipe)(e,d.head,(function(e){var t=[],n=[],r=!1;return v({insertString:function(e,i){var a=i.type;b(r?n:t,{type:a!==c.JU.Type.Optional?g.GP.Insert:g.GP.Text,text:e})},insertGap:function(){(0,f.kG)(!r,"One gap transform does not contain exactly one gap insert"),r=!0},retain:function(e,i){var a=i.type,o=r?n:t;(a!==c.JU.Type.Optional||o.length>0)&&b(o,{type:g.GP.Text,text:e})},remove:a.constVoid},e),(0,f.kG)(r,"One gap transform does not contain exactly one gap insert"),(0,f.kG)(t.length>0||n.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:n}}))})),u.map((function(e){var t=e.left,n=e.right;return{type:r.Type.OneGap,left:t,right:n}})),u.mapLeft(E.fromError(e)))}!function(e){!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.FullSentence=4]="FullSentence",e[e.OneGap=5]="OneGap"}(e.Type||(e.Type={})),function(e){e.parse=function(t){var n=t[0];if(n.isFullSentence)return e.FullSentence;switch(n.type){case c.r3.Type.Insert:return e.Insert;case c.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case c.r3.Type.Substitution:return n.ops.find(c.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,f.vE)(n.type)}}}(e.Type||(e.Type={})),e.create=function(t){var n=e.Type.parse(t);switch(n){case e.Type.Remove:return w(t);case e.Type.RemoveOr:return _(t);case e.Type.Insert:return C(t);case e.Type.Substitution:return function(e){return(0,o.pipe)(h.vM((function(){return(0,o.pipe)(e,d.map((function(t){var n=[[],[]];return v({insertString:function(e,t){t.type!==c.JU.Type.Optional&&b(n[1],{type:g.GP.Insert,text:"\n"===e?" ":e})},insertGap:function(){throw new E("Substitution transform contains gap insert",e)},remove:function(e){b(n[0],{type:g.GP.Delete,text:e})},retain:function(e,t){if(t.type!==c.JU.Type.Optional||0!==n[0].length){var r={type:g.GP.Text,text:e};n[0].push(r),n[1].push(r)}}},t),(0,f.kG)(n[0].length>0,"Substituted part is empty"),(0,f.kG)(n[1].length>0,"Inserts are empty"),n})))})),u.chain(S),u.mapLeft(E.fromError(e)))}(t);case e.Type.FullSentence:return x(t);case e.Type.OneGap:return I(t);default:return(0,f.vE)(n)}}}(r||(r={}));var E=function(e){function t(t,n){var r=e.call(this,t)||this;return r.alternatives=n,r}return(0,m.__extends)(t,e),t.fromError=function(e){return function(n){var r=new t(n.message,e);return r.stack=n.stack,r}},t.prototype.toString=function(){return"Hydration error: "+this.message+"\n  ops: "+this.alternatives.map((function(e){return e.ops.map(c.JU.anonymize)}))},t}(f.sH),k=n(8125),T=n(92932),R=function(e,t){switch(e.kind){case"replacement":return function(e,t){(0,f.kG)((0,k.Dw)(e),"transforms should have at least one element");var n=e[0];return L(n)>-1?g.nV.create(P(n),e.map(M),t,!0):g.zE.create(e,t)}(e.content.map((function(e){return[{type:g.GP.Insert,text:e}]})),t);case"transform":return function(e,t){(0,f.kG)((0,k.Dw)(e),"transforms should have at least one element");var n=e[0];return L(n)>-1?g.nV.create(P(n),e.map(M),t):function(e){return 2===e.length&&F(e)}(e)?g.fi.create(e[0],e[1],t):F(e)?g.zE.create(e,t):g.n6.create(e,t)}(e.content.map(D),t);default:return(0,f.vE)(e.kind)}};function L(e){return e.findIndex((function(e){return"arrow"===e.type}))}function P(e){return e.slice(0,L(e))}function M(e){return e.slice(L(e)+1)}function N(e){return e.every((function(e){return"delete"!==e.type}))}function F(e){return e.every(N)}function O(e,t){return{re:new RegExp("^("+e+")([\\s\\S]*)$"),createResult:t}}var B=[O("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(function(e){return{type:g.GP.Delete,text:e[2]}})),O("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(function(e){return{type:g.GP.Insert,text:e[2]}})),O("()",(function(e){return{type:g.GP.Arrow}})),O("([^<>]+)",(function(e){return{type:g.GP.Text,text:e[1]}}))];function D(e){function t(e){for(var t=0,n=B;t<n.length;t++){var r=n[t],i=e.match(r.re);if(null!==i)return[r.createResult(i),i[i.length-1]]}}function n(t){var n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>",""].map((function(e){return t.indexOf(e)}));if(n.findIndex((function(e){return 0===e}))>0)throw new Error("Couldn't parse transform: "+e);if(n=n.filter((function(e){return e>0})),(0,k.Dw)(n)){var r=Math.min.apply(Math,n);return[{type:g.GP.Text,text:t.substring(0,r)},t.substring(r)]}return[{type:g.GP.Text,text:t},""]}for(var r=[],i=e,a=!1,o=0,s=void 0;(0,k.Dw)(i);){var c=t(i);void 0===c&&(a=!0);var l=c||n(i),u=l[0],d=l[1];s&&s.type===g.GP.Text&&u.type===g.GP.Text?s.text+=u.text:(s&&s.type===g.GP.Delete&&u.type===g.GP.Insert&&(r.push({type:g.GP.Arrow}),o++),r.push(u)),u.type===g.GP.Arrow&&o++,s=r[r.length-1],i=d}return(a||!(0,k.Dw)(r)||o>1)&&T.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:r.length,arrowCount:o}),r}var H=(0,a.flow)((function(e){return(0,a.flow)((function(t){return W(e,p.eT.isFullSentence(t.cardType))(t.alternatives)}),u.chain(r.create))}),(function(e){return function(t){return(0,o.pipe)(t.content,u.fold((function(e){return u.right(R(e,t.todo))}),(0,a.flow)(e,u.map((function(e){return function(e,t){switch(e.type){case r.Type.Substitution:return g.nV.create(e.remove,e.inserts,t);case r.Type.Insert:return 2===e.inserts.length?g.fi.create(e.inserts[0],e.inserts[1],t):g.zE.create(e.inserts,t);case r.Type.Remove:return g.n6.create([e.remove],t);case r.Type.RemoveOr:return g.fz.create(e.removes,t);case r.Type.FullSentence:return function(e,t){switch(e.kind){case g._k.WithFormatting:return g.i3.createWithFormatting(e.ops,t);case g._k.PlainText:return g.i3.createPlainText(e.ops,t);default:return(0,f.vE)(e)}}(e,t);case r.Type.OneGap:return g.G7.create(e,t);default:return(0,f.vE)(e)}}(e,t.todo)})))))}}));function W(e,t){var n=(0,a.flow)(e,(function(e){return e.delta.reduce((function(e,t){return s.s.isInsertString(t)?e+t.insert:e}),"")}));return(0,a.flow)(function(e,t){return function(n){return(0,o.pipe)(n,i.filterMap((function(n){return(0,o.pipe)(n.type,l.map((function(r){var i=n.ops[0];if(i&&c.JU.isOptionalRetain(i)){var a=c.JU.length(i);return{text:e(a,n.lengthAffected-a),ops:n.ops.slice(1),type:r,isFullSentence:t}}return{text:e(0,n.lengthAffected),ops:n.ops,type:r,isFullSentence:t}})))})),d.fromArray)}}(n,t),u.fromOption((function(){return new Error("Alternative array is empty")})))}},50634:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var r,i=n(42654);!function(e){e.eq=(0,i.getStructEq)({alert:(0,i.contramap)((function(e){return e.id}))(i.eqStrict),highlightIndex:i.eqStrict}),e.getEq=function(){return e.eq}}(r||(r={}))},19284:(e,t,n)=>{"use strict";n.d(t,{Py:()=>D,vM:()=>W,u0:()=>B,Dv:()=>F,VC:()=>O});var r,i,a=n(59312),o=n(22902),s=n(45980),c=n(73805),l=n(27221),u=n(22232),d=n(8125),p=n(83078),f=n(64909),m=n(65772),h=n(92932),g=n(71102),v=n(42654),y=n(41199);!function(e){var t,n,r;e.eq=v.fromEquals((function(t,r){return e.isActive(t)&&e.isActive(r)?g.getEq(n.eq).equals(t.alerts,r.alerts)&&t.count===r.count&&t.appearanceBehavior===r.appearanceBehavior&&t.kind===r.kind&&t.showNewLabel===r.showNewLabel&&t.applied===r.applied:t.kind===r.kind})),function(e){e.deactivated="deactivated",e.minimized="minimized",e.expanded="expanded"}(t=e.Kind||(e.Kind={})),function(e){e.eq=v.fromEquals((function(e,t){return y.$.eq.equals(e.alert,t.alert)}))}(n=e.AlertInBulk||(e.AlertInBulk={})),e.isExpanded=function(e){return e.kind===t.expanded},e.isMinimized=function(e){return e.kind===t.minimized},e.isDeactivated=function(e){return e.kind===t.deactivated},e.isActive=function(t){return(0,s.not)(e.isDeactivated)(t)},e.isVisibleInViewport=function(t){return e.isActive(t)&&t.appearanceBehavior===r.visibleInViewport},e.isInTransition=function(t){return e.isActive(t)&&t.appearanceBehavior===r.inTransition},e.isCollapsedInMiniButton=function(t){return e.isActive(t)&&r.isCollapsedInMiniButton(t.appearanceBehavior)},function(e){e.visibleInViewport="visibleInViewport",e.invisible="invisible",e.firstTimeCollapse="firstTimeCollapse",e.collapseInMiniButton="collapseInMiniButton",e.inTransition="inTransition"}(r=e.AppearanceBehavior||(e.AppearanceBehavior={})),function(e){e.isInvisible=function(t){return[e.invisible,e.inTransition].includes(t)},e.isCollapsedInMiniButton=function(t){return[e.collapseInMiniButton,e.firstTimeCollapse].includes(t)}}(r=e.AppearanceBehavior||(e.AppearanceBehavior={}))}(r||(r={})),function(e){!function(e){e.apply="apply",e.dismiss="dismiss",e.bulkUndo="bulkUndo",e.ignore="ignore",e.highlight="highlight",e.individualUndo="individualUndo",e.showPanel="showPanel",e.confirmed="confirmed",e.confirmedAll="confirmedAll",e.mount="mount"}(e.Kind||(e.Kind={}))}(i||(i={}));var b=n(17753),w=n(10002),_=n(99391),C=n(73510),S=n(52479),A=n(16118),x=n(50628),I=n(77176),E=n(93508),k=n(85985),T=n(66310),R=n(24209),L=n(2834),P=n(41398),M=n(38524),N=n(78792),F=function(e,t,n){return void 0===n&&(n=function(){return f.none}),function(r){if(!e(r))return t(r);var i=r.currentLens;return i.kind===M._L.abstract?f.none:(0,c.pipe)(i.findNextAlert(),f.alt((function(){return n(r)})),f.map(N.l.toLensAlert))}},O=function(e,t,n,r){return void 0===r&&(r=function(){return!0}),function(i){var a=i.currentLens;return a.kind===M._L.abstract?f.none:a.kind===M._L.persistent?(0,c.pipe)(M.nL.getActiveAlertHighlight(i),f.fold((function(){return a.findNextAlert()}),(function(t){return e.findNextAlertInTextByLens(t,a.id,M.nL.nonPriorityAlertsVisible(i))})),f.alt((function(){return r()&&(M.nL.isInGlobalSuccess(i)||w.R.isOutcomeId(i.currentLens.id)&&e.hasZeroFreeAlerts(n))?e.findPremiumAlert():f.none})),f.map(N.l.toLensAlert)):(0,c.pipe)(function(r){return(0,c.pipe)(r.currentLens.findNextAlert(),f.map(N.l.toLensAlert),f.alt((function(){return(0,c.pipe)(M.nL.getActiveAlertHighlight(r),f.fold((function(){return t(b.bZ.isRegisteredApplicableAlert,"cursor")}),(function(t){return e.findNextAlertInText(t,b.bZ.isApplicableAlert)})),f.map((function(e){return{alert:e.alert,highlightIndex:e.highlightIndex,lensId:n.get()}})))})))}(i),f.alt((function(){return(0,c.pipe)(e.findPremiumAlert(),f.map(N.l.toLensAlert))})))}};function B(e,t){return function(n,r){return t.findClosestAlertHighlight(e(r),n)}}var D,H=function(e){return e.pipe(A.G(),x.P((function(e){var t=e[0],n=e[1];return"idle"!==t&&"idle"===n})),I.U((function(){})))},W=function(){function e(e,t){this._subs=new C.w.Keeper,this.firstOpeningOfDocumentWithAlerts=l.h.create(!1);var n=H(e),r=function(e){return(0,c.pipe)(e,k.h((function(e){return M.nL.hasCards(e)&&f.isSome(M.In.getActiveItem(e.currentLens))})),I.U((function(){})))}(t);this._subs.push((0,c.pipe)(t,x.P((function(e){return M.nL.hasCards(e)})),T.w((function(){return(0,c.pipe)(R.T(r,n),I.U(s.constFalse),E.O(!0))})),L.b(S.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}return e.prototype.dispose=function(){this._subs.dispose()},e}();!function(e){var t=function(e){return function(t){if(!M.nL.hasCards(t))return t;switch(e.kind){case M.nL.Effect.FocusBehaviorType.noFocus:return t;case M.nL.Effect.FocusBehaviorType.unFocus:return M.nL.Prism.getLens().set(t.currentLens.unselect(),t);case M.nL.Effect.FocusBehaviorType.focusFirst:return(0,c.pipe)(t.currentLens.findFirstAlert(),f.fold((function(){return t}),(function(e){return M.nL.Prism.getLens().set(t.currentLens.select(e),t)})));case M.nL.Effect.FocusBehaviorType.focusNext:return(0,c.pipe)(t.currentLens.findNextAlert(),f.fold((function(){return t}),(function(e){return M.nL.Prism.getLens().set(t.currentLens.select(e),t)})));case M.nL.Effect.FocusBehaviorType.focusAlert:return M.nL.Prism.getLens().set(t.currentLens.select(e.alertHighlight),t);default:(0,u.vE)(e)}}},n=(0,d.HP)(h.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=function(e,t,r,i,a){var o=H(t),s=t.pipe(E.O("idle"),A.G(),x.P((function(e){return e[0],"idle"===e[1]})),k.h((function(e){return"full"===e[0]})),I.U((function(){}))),l=function(e,t){var n=H(e);return t.bigPaste.pipe(T.w((function(){return n})),I.U((function(){})),_.shareReplay({bufferSize:1,refCount:!0}))}(t,i);return(0,c.pipe)(R.T(o,s,l),P.M(e,a,r),k.h((function(e){e[0];var t=e[1],n=e[2];return e[3]&&!n&&M.nL.hasCards(t)&&f.isNone(M.In.getActiveItem(t.currentLens))})),I.U((function(){return M.nL.Effect.FocusBehavior.focusFirst})),L.b((function(e){return n("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e)})))},e.getSideEffect=function(e){var n=(0,c.pipe)(e,I.U(t));return{id:"autoFocusEffect",when:w.R.isWithAlertsId,what:M.nL.Effect.Applicator.create(n)}},e.whenFirstOpeningDocumentWithAlerts=function(e){return function(){return e.firstOpeningOfDocumentWithAlerts.get()}},e.whenShouldVerifyCurrentLens=function(e){return e.currentLens.shouldVerify&&(0,c.pipe)(M.nL.getActiveAlert(e),f.filter(b.bZ.isInDuplicatedState),f.fold((function(){return n("AutoFocus.stateValidator").debug("Current alert removed, should verify current lens...")}),(function(e){return n("AutoFocus.stateValidator").info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())}))),e.currentLens.shouldVerify},e.whenNoActiveCard=function(e){return e.currentLens.items.size>0&&f.isNone(M.In.getActiveItem(e.currentLens))};var i=function(e){return function(t){return(0,c.pipe)(e,p.bw((function(e){return n("AutoFocus.stateValidator").trace("willShowBulkAccept: ",e.state.get())})),f.map((function(e){return r.isVisibleInViewport(e.state.get())||e.willShowBulkAccept(t)})),p.bw((function(e){return n("AutoFocus.stateValidator").trace("willShowBulkAccept: ",e)})),f.getOrElse(s.constFalse))}};e.behaviorToEffect=function(e){return function(t){return function(r){return(0,c.pipe)(t(r)?e(r):f.none,p.bw((function(e){return n("AutoFocus.stateValidator").debug("'behavior triggered: "+e.kind)})))}}},e.getDefaultBehavior=function(){return(0,c.pipe)([(0,c.pipe)(e.whenShouldVerifyCurrentLens,e.behaviorToEffect((function(){return f.some(M.nL.Effect.FocusBehavior.focusNext)})))],(0,o.fold)((0,o.getFunctionMonoid)(f.getFirstMonoid())()))},e.getFocusFromCacheBehavior=function(t,n,r,a){return(0,c.pipe)([(0,c.pipe)(e.whenShouldVerifyCurrentLens,e.behaviorToEffect((function(){return f.some(M.nL.Effect.FocusBehavior.focusNext)}))),(0,c.pipe)((0,d.W9)((function(){return n.get()}),(0,d.W9)((0,d.W9)((0,d.W9)(e.whenFirstOpeningDocumentWithAlerts(r),(function(){return t})),e.whenNoActiveCard),(0,s.not)(i(a)))),e.behaviorToEffect((function(){return f.some(M.nL.Effect.FocusBehavior.focusFirst)})))],(0,o.fold)((0,o.getFunctionMonoid)(f.getFirstMonoid())()))},e.getFirstApiAlignmentOverride=function(){var e=l.h.create(!0);return function(t,n){var r=n;return e.get()&&n===b.l$.api&&(r=b.l$.text),e.set(!1),r}},e.getStateTransformer=function(e,t,r,i,o,s){return function(l){var d=l.state,p=l.metadata,h=n("AutoFocus.stateTransformer");if(!M.nL.hasCards(d))return h.trace("state has no cards, returning original state"),m.left({state:d,metadata:p});var g=e(d);if(h.trace("effect: ",{state:d,metadata:p,effect:g}),f.isNone(g))return h.trace("no effect selected, returning original state"),m.left({state:d,metadata:p});if(o(g.value),g.value.kind===M.nL.Effect.FocusBehaviorType.unFocus||g.value.kind===M.nL.Effect.FocusBehaviorType.noFocus)return m.left({state:M.nL.Prism.getLens().set(d.currentLens.unselect(),d),metadata:p});var v=i.get()&&"text"!==d.alertSource;return h.trace("shouldAutoFocus",{autoJumpEnabled:i,alertSource:d.alertSource,shouldAutoFocus:v}),(0,c.pipe)(g,f.chain((function(e){switch(e.kind){case M.nL.Effect.FocusBehaviorType.noFocus:case M.nL.Effect.FocusBehaviorType.unFocus:return f.none;case M.nL.Effect.FocusBehaviorType.focusFirst:return(0,c.pipe)(d.currentLens.findFirstAlert(),f.map((function(e){return(0,a.__assign)((0,a.__assign)({},e),{lensId:d.currentLens.id})})));case M.nL.Effect.FocusBehaviorType.focusNext:return t(d);case M.nL.Effect.FocusBehaviorType.focusAlert:return f.some((0,a.__assign)((0,a.__assign)({},e.alertHighlight),{lensId:d.currentLens.id}));default:(0,u.vE)(e)}})),f.map((function(e){return(0,u.kG)(f.isSome(r.getRegistered(e.alert.id)),"lens alert should be in registered state",(function(){return e.alert.toString()})),e})),f.fold((function(){return d.currentLens.kind===M._L.active?m.right(m.right({lensId:s.get(),alertSource:d.alertSource,options:{order:d.switchOrder,toFocus:M.nL.Effect.FocusBehavior.noFocus}})):m.left({state:d,metadata:p})}),(function(e){var t=e.alert,n=e.highlightIndex,r=e.lensId;return d.currentLens.meta.filter(t)?m.left(v?{state:M.nL.Prism.getLens().set(d.currentLens.select({alert:t,highlightIndex:n}),d),metadata:{sourceId:"LSM.updateActiveState"}}:{state:d,metadata:p}):m.right(v?m.left({alertHighlight:{alert:t,highlightIndex:n},alertSource:d.alertSource,options:{lensId:r,order:d.switchOrder,toFocus:M.nL.Effect.FocusBehavior.focusFirst}}):m.right({lensId:r,alertSource:d.alertSource,options:{order:d.switchOrder,toFocus:M.nL.Effect.FocusBehavior.noFocus}}))})))}}}(D||(D={}))},50536:(e,t,n)=>{"use strict";n.d(t,{Nf:()=>r,Ls:()=>x,YH:()=>i,IG:()=>a,EB:()=>k,Mq:()=>o});var r,i,a,o,s=n(59312),c=n(22902),l=n(45980),u=n(73805),d=n(60705),p=n(64909),f=n(22232),m=n(83078),h=n(65772),g=n(89943),v=n(92932),y=n(17753),b=n(10002),w=n(58199),_=n(41199),C=n(40644),S=n(17031),A=n(87280);function x(e,t,n,r,i,o,c){var d=function(e){function t(t,n,r){var i=v.C8.Logging.getLogger("CardFactory");return(0,u.pipe)(n,p.filter((function(e){return!r||(0,u.pipe)(t,p.exists((function(t){return e.id===t.id&&e.rev===t.revision})))})),p.alt((function(){return(0,u.pipe)(t,p.chain((function(t){return(0,u.pipe)(e(t),h.fold((function(e){return i.error("Could not hydrate transform",e,{alertId:t.id}),n}),(function(e){return p.some({id:t.id,rev:t.revision,labels:e})})))})))})))}return function(e){var n=e.activeAlert.type===_.$.Type.super||e.activeAlert.type===_.$.Type.plagiarism||e.activeAlert.type===_.$.Type.premium||y.eT.isSimple(e.activeAlert.extraProperties.cardType)?p.none:t(e.activeAlert.getTransform(),e.cachedTransform,!(e.meta.checking!==C.X.Meta.CheckingState.Idle||e.activeAlertRemoved));return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,n,e.userInput)}}(e),g=v.C8.Logging.getLogger("CardFactory");function b(e,t){var n=new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,t,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput);return"focused"===t.transition.type||"expanded"===t.transition.type?d(n):n}function w(e,t){var n=S.t.to(e.visualState,t);return(0,u.pipe)(b(e,n),(function(n){return t.type===e.visualState.transition.type||"expanded"!==t.type&&"focused"!==t.type?n:W(n,A.Z.invalidateHeight(e.positionState))}))}function x(e,t,n,r){var i=new Set(t.map((function(e){return e.id}))),a=new Set(e.removedAlertsIds),o=(0,u.pipe)(n,p.map((function(t){return r.compare(e,t)>0})),p.getOrElse(l.constTrue));i.has(e.activeAlert.id)&&a.add(e.activeAlert.id);var s=e.alerts.reduce((function(t,n,r){return!i.has(n.id)||C.X.isFocused(e)&&n.id===e.activeAlert.id?{remainingAlerts:t.remainingAlerts.concat([n]),activeAlertIndex:t.activeAlertIndex}:{remainingAlerts:t.remainingAlerts,activeAlertIndex:t.activeAlertIndex+(r<e.activeAlertIndex?-1:0)}}),{remainingAlerts:[],activeAlertIndex:e.activeAlertIndex}),c=s.remainingAlerts,d=s.activeAlertIndex,f=C.X.willBeDisposed(e,i)?new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,i,e.cachedTransform,e.userInput):new C.X(e.id,c,d,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,a,e.cachedTransform,e.userInput);return f.scheduledToDispose?w(f,{type:"removed",clockwise:o}):f}function F(e,t,o,l,d,m,h,g){var v=function(e,t){var n=t[e];return(0,f.kG)(!!n,"Active alert index should point to an alert"),n}(o,t),w=N(v),x=(0,s.__spreadArrays)(t).sort(y.bZ.ord.compare).map((function(e){return _.$.fromModelWithTakeawayFeedback(e,c.getTakeawayFeedback(e.id))})),E=x[0];(0,f.kG)(!!E,"The card must contain at least 1 alert");var k=(0,u.pipe)(i,p.chain((function(e){return e.getAlertMuteCategory(t[0].id)}))),T=new C.X(e,x,I(v.id,x),l,A.Z.empty,S.t.initial({type:"rendered",clockwise:!0}),new C.X.Meta.Impl(d.percentile,d.explanation,d.checking,d.ranges,n.features.has(a.Features.enableMuteQuotedAdvice)&&_.$.isInQuotes(E),d.bundleInfo),m,a.toCardRenderOptions(n,m,r(E),g),k,E.getHighlightRanges()[0].end,E.id,new Set,p.none,w);return(0,u.pipe)(h,p.fold((function(){return T}),(function(e){return b(T,e)})))}function O(e,n,r,i,a){var o=n.alert,s=n.highlightIndex;void 0===a&&(a=function(e){return e}),(0,f.kG)(!e.removedAlertsIds.has(o.id),"Cannot select removed alert");var c=e.alerts.filter((function(t){return!e.removedAlertsIds.has(t.id)})),m=(0,u.pipe)(r,p.map((function(t){return i.compare(e,t)>0})),p.getOrElse(l.constTrue)),h=(0,u.pipe)(r,p.exists((function(t){return t.id===e.id}))),g=h?e.positionState:A.Z.invalidateHeight(e.positionState),v=h&&C.X.isCardOpen(e.visualState)?"expanded":"focused",y=(0,u.pipe)(t.getById(o.id),p.chain(N)),b=I(o.id,c),w=(0,u.pipe)(r,p.fold((function(){return S.t.initial({type:v,clockwise:m})}),(function(t){return S.t.to(e.visualState,{type:v,clockwise:m})})));return d(new C.X(e.id,c,b,s,g,w,a(e.meta,o),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,y))}var B=function(e){return t.isRegistered(e.id)};function D(e){var t=e.alerts;return p.fromNullable(t.slice(e.activeAlertIndex+1).find(B))}function H(e){var t=e.alerts;return p.fromNullable(t.slice(0,e.activeAlertIndex).reverse().find(B))}function W(e,t){return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,t,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}return{shouldAnimateAlertApply:n.shouldAnimateAlertApply,create:F,createFromAlert:function(e){return function(t){return F(t.id,[t],0,0,C.X.Meta.empty(y.bZ.isApplicableAlert(t)?t.explanation:void 0),e,p.none,!1)}},createFocused:function(e){return P(e,(function(t,r,i){return F(t,[r],0,i,M(r,n),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!1)}),(function(t,n,r){return F(t,n,r,0,T(n),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!1)}))},createFocusedBundle:function(e){return function(t,n,r,i){return F(t,r,i,0,k(n,r,r[i]),e,p.some(S.t.initial({type:"focused",clockwise:!0},!0)),!0)}},createRendered:function(e){return P(e,(function(t,r){return F(t,[r],0,0,M(r,n),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!1)}),(function(t,n){return F(t,n,0,0,T(n),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!1)}))},createRenderedBundle:function(e){return function(t,n,r){return F(t,r,0,0,k(n,r,r[0]),e,p.some(S.t.initial({type:"rendered",clockwise:!0},!1)),!0)}},createAdded:function(e){return P(e,(function(t,r){return F(t,[r],0,0,M(r,n),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!1)}),(function(t,n){return F(t,n,0,0,T(n),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!1)}))},createAddedBundle:function(e){return function(t,n,r){return F(t,r,0,0,k(n,r,r[0]),e,p.some(S.t.initial({type:"added",clockwise:!0},!0)),!0)}},select:O,prevAlert:H,nextAlert:D,anyRegisteredAlert:function(e){var n=e.alerts;return(0,u.pipe)(n.filter((function(e){return t.isRegistered(e.id)})),(function(e){return e[e.length-1]}),p.fromNullable)},selectNextAlert:function(e,t,n){return void 0===n&&(n=function(e){return e}),e.activeAlertRemoved&&!e.scheduledToDispose?(0,u.pipe)(D(e),m.vx(H(e)),p.map((function(r){return O(e,{alert:r,highlightIndex:0},p.none,t,n)})),p.getOrElse((function(){return e}))):e},unselect:function(e,t,n){var r=(0,u.pipe)(t,p.map((function(t){return n.compare(e,t)>0})),p.getOrElse(l.constTrue)),i=(0,u.pipe)(t,p.exists((function(t){return t.id===e.id})))?e.positionState:A.Z.invalidateHeight(e.positionState);return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,i,e.scheduledToDispose||o&&!_.$.isPriority(e.activeAlert)&&"hidden"===e.visualState.transition.type?e.visualState:S.t.to(e.visualState,{type:"rendered",clockwise:r}),e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},addBundleAlerts:function(e,t){(0,f.kG)(e.renderOptions.showBundle,"cannot add new alerts to a non-bundled card");var n=e.alerts.concat(t.map((function(e){return _.$.fromModelWithTakeawayFeedback(e,c.getTakeawayFeedback(e.id))}))).sort(_.$.ord.compare);return new C.X(e.id,n,I(e.activeAlert.id,n),e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},addPlagiarismAlerts:function(e,t){var n=e.alerts.concat(t.map(_.$.fromModel)).sort(_.$.ord.compare).filter((function(t){var n=_.$.isPlagiarism(t);return n||g.error("Encountered non-plagiarism alert in plagiarism card",{alert:t,cardId:e.id}),n}));return L(new C.X(e.id,n,I(e.activeAlert.id,n),e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput),n)},remove:x,changePlagiarismMetaWithAlerts:L,updateWith:function(e,t,r){(0,f.kG)(void 0!==e.alerts.find((function(e){return e.id===t.id})),"can not receive updates for unknown alert",(function(){return t.toString()}));var i=function(e,t){var r;r=y.bZ.getCheckingState(t)===y.bZ.CheckingState.CHECKING?"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type?C.X.Meta.CheckingState.Checking:C.X.Meta.CheckingState.Full:C.X.Meta.CheckingState.Idle;var i=R(t,r,n);return new C.X(e.id,e.alerts.map((function(e){return e.id===t.id?_.$.fromModelWithTakeawayFeedback(t,c.getTakeawayFeedback(e.id)):e})),e.activeAlertIndex,E(e,i),e.positionState,e.visualState,i,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}(e,t);switch(t.state.type){case y.bZ.State.Type.REGISTERED:var a="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?d(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?w(a,{type:"focused",clockwise:i.visualState.transition.clockwise}):a;case y.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((function(e){return y.bZ.isCapiDone(e)&&e.allowUpdate&&y.bZ.isRated(i.activeAlert)}))?x(i,[t],p.none,r):w(i,{type:"presuccess",clockwise:i.visualState.transition.clockwise});case y.bZ.State.Type.APPLIED:case y.bZ.State.Type.BEING_APPLIED:return x(i,[t],p.none,r);default:return(0,f.vE)(t.state)}},changePosition:W,transitionTo:w,completeTransition:function(e,t){return b(e,S.t.complete(e.visualState,t))},hideMuteQuotedAdvice:function(e){return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new C.X.Meta.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1,e.meta.bundleInfo),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},updateUserInput:function(e,t){return new C.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,t)},updateTakeawayFeedback:function(e,t){return new C.X(e.id,e.alerts.map((function(n,r){return r===e.activeAlertIndex?_.$.updateTakeawayFeedback(n,t):n})),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},updateSmartPhrasesAlert:function(e,t){return new C.X(e.id,e.alerts.map((function(n,r){return r===e.activeAlertIndex&&_.$.isSmartPhrases(n)?_.$.updateSmartPhrasesAlert(n,t):n})),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}}}function I(e,t){var n=t.findIndex((function(t){return t.id===e}));return(0,f.kG)(-1!==n,"Alert must exist"),n}function E(e,t){if((0,f.kG)(t.ranges.length>0,"Incorrect card meta: rangeIds empty. Card ID "+e.id+", activeAlert: "+e.activeAlert.toString()),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;var n=e.meta.ranges[e.activeHighlightIndex];return(0,f.kG)(void 0!==n,"AHI not found in rangeIds"),(0,u.pipe)(p.some(t.ranges.findIndex((function(e){return e.meta.id===n.meta.id}))),p.filter((function(e){return-1!==e})),p.alt((function(){return g.OI(t.ranges,n,d.SV.ordEnd)})),p.getOrElse((function(){return t.ranges.length-1})))}function k(e,t,n){var r=t.map((function(e){return e.getHighlightRanges()[0]}));return new C.X.Meta.Impl(w.g.fromRatio(n.progress),n.explanation,C.X.Meta.CheckingState.Idle,r,!1,p.some(e))}function T(e){var t=e.map((function(e){return e.getHighlightRanges()[0]})),n=(0,u.pipe)(e.map((function(e){return w.T.groupSum.concat(w.T.MAX,w.T.groupSum.inverse(e.progress))})),(0,c.fold)(w.T.groupSum),w.g.fromRatio);return new C.X.Meta.Impl(n,"",C.X.Meta.CheckingState.Idle,t,!1,p.none)}function R(e,t,n){var r=n.features.has(a.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new C.X.Meta.Impl(w.g.fromRatio(e.progress),e.explanation,t,e.getHighlightRanges(),r,p.none)}function L(e,t){var n=T(t);return new C.X(e.id,e.alerts,e.activeAlertIndex,E(e,n),e.positionState,e.visualState,n,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}function P(e,t,n){switch(e){case b.R.SpecialId.Plagiarism:return n;case b.R.SpecialId.AllAlerts:case b.R.SpecialId.Correctness:case b.R.SpecialId.Clarity:case b.R.SpecialId.Engagement:case b.R.SpecialId.Delivery:case b.R.SpecialId.CorrectnessPriority:case b.R.SpecialId.ClarityPriority:case b.R.SpecialId.EngagementPriority:case b.R.SpecialId.DeliveryPriority:case b.R.SpecialId.Priority:case b.R.SpecialId.PredictionTakeaways:case b.R.SpecialId.PredictionEmogenie:case b.R.SpecialId.Vox:case b.R.SpecialId.VoxPriority:case b.R.SpecialId.RealTimeProofit:return t;default:return(0,f.vE)(e)}}function M(e,t){return R(e,y.bZ.getCheckingState(e)===y.bZ.CheckingState.IDLE?C.X.Meta.CheckingState.Idle:C.X.Meta.CheckingState.Full,t)}function N(e){return y.bZ.isOneGap(e)&&""!==e.gapValue?p.some(e.gapValue):p.none}!function(e){e.mock={getTakeawayFeedback:function(){return p.none}}}(r||(r={})),function(e){e.yellow="yellow",e.gray="gray"}(i||(i={})),function(e){var t;e.toCardRenderOptions=function(e,n,r,i){var a=new Set;return(b.R.isMainLens(n)||e.features.has(t.showCardLabelInOutcomes)&&n!==b.R.SpecialId.Plagiarism)&&a.add(C.X.RenderOptions.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&a.add(C.X.RenderOptions.Features.enableMuteQuotedAdvice),e.features.has(t.showBulkAcceptIcon)&&a.add(C.X.RenderOptions.Features.showBulkAcceptIcon),e.features.has(t.showAnonymousUserFooters)&&a.add(C.X.RenderOptions.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&a.add(C.X.RenderOptions.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&a.add(C.X.RenderOptions.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&a.add(C.X.RenderOptions.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&a.add(C.X.RenderOptions.Features.showPersistentPremiumCardLabels),{features:a,layoutDensity:e.cardLayoutDensityMode,isNew:r,upgradeDemoPremiumNotice:e.upgradeDemoPremiumNotice,showBundle:i}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showBulkAcceptIcon="showBulkAcceptIcon",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels"}(t=e.Features||(e.Features={})),e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:C.X.RenderOptions.Density.cozy,shouldAnimateAlertApply:y.bZ.isAccepted,upgradeDemoPremiumNotice:i.yellow}}(a||(a={})),function(e){e.snapshot=function(e){return{cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,u.pipe)(e.alerts.map((function(e){return e.id}))),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex}}}(o||(o={}))},10584:(e,t,n)=>{"use strict";n.d(t,{R7:()=>d});var r=n(64909),i=n(10002),a=n(66910),o=n(52479),s=n(77176),c=n(38524),l=n(13338),u={cardsBeyondViewport:5,cardsAroundActive:100},d=function(e,t,n,d,p,f){void 0===p&&(p=u),void 0===f&&(f=o.b2.rafScheduler);var m=function(e){return!e.positionState.visible&&e.visualState.incomplete?(d.next({type:a.l.Type.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),n.completeTransition(e.visualState.transitionId)(e)):e},h=e.pipe(s.U(c.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return r.some({currentLens:t,alertSource:n})})))),g=(0,l.nM)(h,t.viewport,t.scrollTop,t.paddingTop,f).pipe(s.U((function(e){return{viewport:e.viewport,scrollTop:e.scrollTop,paddingTop:e.paddingTop,completeTransition:m}})),s.U((0,l.GC)({cardsBeyondViewport:p.cardsBeyondViewport,cardsAroundActive:p.cardsAroundActive,changePosition:n})));return{id:"manageCardsVisibility",when:i.R.isWithAlertsId,what:c.nL.Effect.Applicator.create(g)}}},32917:(e,t,n)=>{"use strict";n.d(t,{i$:()=>f,YA:()=>m});var r=n(45980),i=n(73805),a=n(64909),o=n(52479),s=n(55935),c=n(93508),l=n(99391),u=n(38524),d=n(71517),p=n(46616),f=function(e){return o.Hl(e.scrollTop.pipe(s.T(1)),100,!0).pipe(c.O(!1),l.shareReplay({bufferSize:1,refCount:!0}))},m=function(e,t){var n=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(u.nL.getLens).get(),a.chain((function(e){var t=e.items,o=e.cardsHeight;return(0,i.pipe)(t.getAt(0),a.map((function(e){var t=(0,r.flow)(d.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop);return{top:t,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(o))(t)}})))})))}},41394:(e,t,n)=>{"use strict";n.d(t,{o:()=>v});var r=n(73805),i=n(27221),a=n(65772),o=n(8125),s=n(92932),c=n(32952),l=n(79462),u=n(14611),d=n(16118),p=n(77176),f=n(93508),m=n(2834),h=n(76974),g=n(71517),v=function(e){var t=this;this._validateOffset=e,this._log=s.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.h.create(0),this.paddingTop=i.h.create(0),this.viewport=i.h.create({top:g.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new c.xQ,this.moveCardsBy=function(e,n){return t._log.debug("Cards list moved by "+e+", from: "+n),t.scrollOffset.next(e),a.right(void 0)},this.moveCardsByAnimated=function(e,n){return t._log.debug("Cards list moved by "+e+", from: "+n),l.y.create((function(n){return(0,r.pipe)(t._validateOffset(e,t),a.fold((function(e){return n.thrownError(e),o.ZT}),(function(){var r=2*t.viewport.get().height,i=Math.abs(e)>r?(e>0?1:-1)*r:e,a=e-i,o=u.f.createAnimationObservable(0,i,200).pipe(d.G(),p.U((function(e){var t=e[0];return e[1]-t})),f.O(a),m.b((function(e){return t.scrollOffset.next(e)}))).subscribe({error:function(e){return n.error(e)},complete:function(){return n.complete()}});return function(){return o.unsubscribe()}})))}))}};!function(){function e(){this.scrollOffset=h.of(42)}e.prototype.getContentOffset=function(e){throw new Error("Method not implemented.")},e.prototype.moveCardsBy=function(e,t){throw new Error("Method not implemented.")},e.prototype.moveCardsByAnimated=function(e,t){throw new Error("Method not implemented.")}}()},71517:(e,t,n)=>{"use strict";n.d(t,{r:()=>r,L:()=>i});var r,i,a=n(42654),o=n(19542),s=n(64681);!function(e){!function(e){e.ISO=(0,s.k4)()}(e.FromWindowTop||(e.FromWindowTop={}))}(r||(r={})),function(e){!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(a.eqNumber).equals}(e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(e.CardTop||(e.CardTop={})),e.concatC=function(e){return function(t){return e+t}};var t=function(e){return new o.aD(e)};e.converters=function(n,r,i){var a=t(e.concatC(i)).get,o=t(e.concatC(-n)).get;return{windowToViewport:t(e.concatC(-r)).get,viewportToWindow:t(e.concatC(r)).get,cardTopToViewport:o,viewportToCardTop:t(e.concatC(n)).get,absTopToViewportTop:function(e){return o(a(e))},absTopToCardTop:a}}}(i||(i={}))},46616:(e,t,n)=>{"use strict";n.d(t,{Db:()=>i});var r,i,a,o=n(42654),s=n(71517);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(r||(r={})),function(e){var t=function(e,t,n){this.scrollTop=e,this.viewport=t,this.converters=s.L.converters(e,s.r.FromWindowTop.ISO.unwrap(t.top),n)};e.Impl=t}(i||(i={})),function(e){var t=(0,o.getStructEq)({top:o.eqNumber,height:o.eqNumber});e.eqDimensionsTuple=(0,o.getTupleEq)(t,t)}(a||(a={}))},13338:(e,t,n)=>{"use strict";n.d(t,{S4:()=>w,Bk:()=>_,v_:()=>S,Sd:()=>A,nM:()=>E,GC:()=>k});var r=n(45980),i=n(73805),a=n(83078),o=n(64909),s=n(42654),c=n(89943),l=n(95053),u=n(77176),d=n(28043),p=n(66310),f=n(52479),m=n(2844),h=n(85985),g=n(87280),v=n(17031),y=n(38524),b=n(71517),w=function(e){return-1!==["focused","expanded"].indexOf(e.visualState.transition.type)&&!e.scheduledToDispose},_=function(e){return e.isCardsHeightValid&&(0,i.pipe)(y.In.getActiveItem(e),a.wo((function(e){return!e.scheduledToDispose})))},C=function(e){return e.isCardsHeightValid&&(0,i.pipe)(y.In.getActiveItem(e),a.wo((function(e){return!e.scheduledToDispose})))};function S(e){var t=e.cardTop,n=e.cardHeight,r=e.viewportHeight,i=e.padding,a=b.L.FromViewportTop.ISO.unwrap(t),o=a+n;return n>r?a:a<0?n+i.before<r?a-i.before:a:o>r?n+i.after<r?o-r+i.after:o-r:a<i.before?n+i.after+i.before<r?a-i.before:n+i.after<r?a-i.after:i.before:r-o<i.after&&n+i.after<r?i.after-(r-o):0}var A=function(e){return e.pipe(u.U(o.filter((function(e){var t=e.currentLens;return C(t)}))))},x=o.getEq(s.getStructEq({id:s.fromEquals(s.strictEqual),positionState:s.getStructEq({height:s.fromEquals(s.strictEqual),absTop:s.fromEquals(s.strictEqual)}),visualState:v.t.eq})),I=o.getEq(s.fromEquals((function(e,t){return x.equals(y.In.getActiveItem(e),y.In.getActiveItem(t))&&e.items.size===t.items.size&&c.Hx(e.items.keys(),t.items.keys(),(function(e,t){return e===t}))}))),E=function(e,t,n,r,a){return e.pipe(u.U(o.map((function(e){return e.currentLens.id}))),d.x(s.eqStrict.equals),u.U(o.isSome),p.w(f.Ft(m.aj(t,n,r,A(e).pipe(u.U(o.map((function(e){return e.currentLens}))),d.x(I.equals),p.w(a))))),h.h((function(e){e[0],e[1],e[2];var t=e[3];return(0,i.pipe)(t,o.exists(C))})),u.U((function(e){return{viewport:e[0],scrollTop:e[1],paddingTop:e[2]}})))},k=function(e){var t=e.cardsBeyondViewport,n=e.cardsAroundActive,s=e.changePosition;return function(e){var c=e.viewport,u=e.scrollTop,d=e.paddingTop,p=e.completeTransition;return function(e){var f=e.currentLens,m=function(e,t,n,r){return e.size<2||Math.floor(t.height/Math.min(a.MH(e.getAt(0)).positionState.height,a.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:{from:Math.max(0,l.aW.lowerBound(e,(function(e){return e.positionState.absTop+e.positionState.height<n}))-r),to:Math.min(e.size,l.aW.lowerBound(e,(function(e){return e.positionState.absTop<n+t.height}))+r)}}(f.items,c,u-d,t),h=!1,v=f.items.map((function(e,t,a){var c,l,u=(0,r.flow)((c=s,l=e.positionState.watched||function(e){return m.from<=e&&m.to>e||(0,i.pipe)(f.cardIndex,o.exists((function(t){return e>=t-n&&e<=t+n})))}(a),function(e){return e.positionState.visible!==l?c.changePosition(g.Z.changeVisible(e.positionState,l))(e):e}),function(e){return function(t){return!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(g.Z.changeAnimationInProgress(t.positionState,!1))(t):t}}(s),p)(e);return u!==e?(h=!0,u):e}));return h?y.nL.Prism.lensItems.set(v,e):e}}}},62712:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});var r,i=n(71102),a=n(73805),o=n(42654),s=n(22232),c=n(64909),l=n(78090),u=n(89881),d=n(87280),p=n(17031);!function(e){e.id="BulkAcceptItemId";var t=i.getEq(o.fromEquals((function(e,t){return e.alert.id===t.alert.id})));e.eqByAlerts=o.fromEquals((function(e,n){return e.alerts.length===n.alerts.length&&t.equals(e.alerts,n.alerts)})),e.eq=o.fromEquals((function(t,n){return e.eqByAlerts.equals(t,n)&&d.Z.eq.equals(t.positionState,n.positionState)&&p.t.eq.equals(t.visualState,n.visualState)&&t.visibilityState===n.visibilityState})),e.isBulkAcceptItem=function(e){return e.kind===u.h.bulkAccept},e.updateAlerts=function(e,t){return new f(t,e.visibilityState,e.positionState,e.visualState,e.showNewLabel)},e.changePosition=function(e){return function(t){return new f(e.alerts,e.visibilityState,t,e.visualState,e.showNewLabel)}},e.completeTransition=function(e,t){return new f(e.alerts,e.visibilityState,e.positionState,p.t.complete(e.visualState,t),e.showNewLabel)},e.transitionTo=function(e,t){return new f(e.alerts,e.visibilityState,e.positionState,p.t.to(e.visualState,t),e.showNewLabel)},e.select=function(e,t){(0,s.kG)("dismissed"!==e.visibilityState,"Cannot select dismissed Bulk Accept Item");var n=(0,a.pipe)(t,c.exists((function(t){return t.id===e.id})))?e.positionState:d.Z.invalidateHeight(e.positionState),r={type:"focused",clockwise:!0},i=(0,a.pipe)(t,c.fold((function(){return p.t.initial(r)}),(function(){return p.t.to(e.visualState,r)})));return new f(e.alerts,e.visibilityState,n,i,e.showNewLabel)},e.unselect=function(e,t){var n=(0,a.pipe)(t,c.exists((function(t){return t.id===e.id})))?e.positionState:d.Z.invalidateHeight(e.positionState),r="hidden"===e.visualState.transition.type?e.visualState:p.t.to(e.visualState,{type:"rendered",clockwise:!0});return new f(e.alerts,e.visibilityState,n,r,e.showNewLabel)}}(r||(r={}));var f=function(){function e(e,t,n,i,a){this.alerts=e,this.visibilityState=t,this.positionState=n,this.visualState=i,this.showNewLabel=a,this.kind=u.h.bulkAccept,this.id=r.id}return e.prototype.equals=function(e){return r.eq.equals(this,e)},e.prototype.hashCode=function(){return(0,l.AC)(this.alerts.map((function(e){return e.alert.id})).join())},e}()},78792:(e,t,n)=>{"use strict";n.d(t,{l:()=>L});var r=n(59312),i=n(95686),a=n(45980),o=n(73805),s=n(65772),c=n(64909),l=n(22232),u=n(92932),d=n(10002),p=n(32952),f=n(77176),m=n(76974),h=n(95300),g=n(24209),v=n(99391),y=n(66310),b=n(52479),w=n(69935),_=n(91224),C=n(41398),S=n(2834),A=n(28043),x=n(598),I=n(83401),E=n(41199),k=n(40644),T=n(38524),R=n(20490),L=function(){function e(e,t,n,l,x,I){var k=this;this._state=e,this._stateProvider=t,this._alertsReader=n,this._alertsService=l,this._stateSideEffects=x,this._stateTransformer=I,this.focusLens=function(e,t,n){void 0===n&&(n={toFocus:T.Zz.defaultOptions.focusBehavior}),k._log.debug("focusLens "+e),k._switchLensActions.next({lensId:e,alertSource:t,options:n})},this.focusAlert=function(e,t,n){k._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:n}})},this._log=u.C8.Logging.getLogger("FocusedLensManagerImpl"),this._switchLensActions=new p.xQ,this._switchAlertActions=new p.xQ,this._addMetadata=function(e){return function(t){return t.pipe(f.U((function(t){return{source:t,metadata:e}})))}},this._focusLensEffect=function(e){var t=e.lensId,n=e.alertSource,r=e.options,i=r.toFocus,a=void 0===i?T.Zz.defaultOptions.focusBehavior:i,s=r.order;if(k._log.debug("_focusLensEffect ",{alertSource:n,lensId:t}),d.R.isClosedId(t))return(0,o.pipe)(m.of(T.nL.Effect.Applicator.Source.override((0,R.T)())),k._addMetadata({sourceId:"LSM.focusLensEffect"}));if(d.R.isDraftAIId(t))return(0,o.pipe)(m.of(T.nL.Effect.Applicator.Source.override((0,R.zc)())),k._addMetadata({sourceId:"LSM.focusLensEffect"}));var c=k._state.get(),l=c.patch({switchOrder:s||c.switchOrder,alertSource:n});return(0,o.pipe)(k._stateProvider.getLensEventsByLensId(l,t,{focusBehavior:a}),k._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=function(e){var t=e.alertHighlight,n=e.alertSource,r=e.options;k._log.isEnabled(u.zW.LogLevel.TRACE)&&k._log.trace("focusAlert("+t.alert+")");var i=k._state.get(),a=i.patch({switchOrder:r.order||i.switchOrder,alertSource:n});return(0,o.pipe)(k._stateProvider.getLensEventsByAlert(a,function(e,t,n){if(e===d.R.SpecialId.Priority||e===d.R.SpecialId.PredictionTakeaways||e===d.R.SpecialId.PredictionEmogenie||e===d.R.SpecialId.RealTimeProofit)return e;if(void 0!==n)return n;if(e===d.R.SpecialId.Closed||e===d.R.SpecialId.AllAlerts)return d.R.SpecialId.AllAlerts;return t}(i.currentLens.id,t.alert.lensId,r.lensId),t),k._addMetadata({sourceId:"LSM.focusAlertEffect"}))};var L=this._state.get(),P=new h.X(L);this._effects=g.T.apply(v,(0,r.__spreadArrays)(this._stateSideEffects.map((function(e){var t=e.when,n=e.what,r=e.id;return k._state.view("currentLens","id").view(t).pipe(y.w(b.Ft((0,o.pipe)(k._effectToApplicator(n),k._addMetadata({sourceId:r})))))})),[g.T(this._switchAlertActions.pipe(f.U(this._focusAlertEffect)),this._switchLensActions.pipe(f.U(this._focusLensEffect))).pipe(w.B())])),this._subs=[this._effects.pipe(_.K((function(e,t){return k._log.error("Got error from effects: ",e),t})),C.M(P,(function(e,t){var n=e.source,r=e.metadata;return{state:n(t),metadata:r}})),_.K((function(e,t){return k._log.error("Got error while applying new state: ",e),t})),f.U(this._stateTransformer),_.K((function(e,t){return k._log.error("Got error while transforming state: ",e),t}))).subscribe((function(e){return(0,o.pipe)(e,s.fold((function(e){var t=e.state,n=e.metadata;k._log.isEnabled(u.zW.LogLevel.TRACE)&&k._log.trace("lens state from: "+n.sourceId,t),(0,o.pipe)(k._checkState(t),s.fold((function(e){return k._log.error("incorrect state transition detected",{error:e,state:t})}),(function(){return P.next(t)})))}),s.fold((function(e){return k._switchAlertActions.next(e)}),(function(e){return k._switchLensActions.next(e)}))))})),(0,o.pipe)(P,f.U(T.nL.getActiveAlert),S.b((function(e){return k._log.trace("active alert: ",e)})),A.x(c.getEq(E.$.eq).equals),y.w(b.aI((function(e){return(0,o.pipe)(k._alertsService.takeReference(e,"activeCard"),s.mapLeft((function(e){return k._log.error("can not take alertRef",e)})),s.fold(i.of(a.constVoid),(function(e){return e.dispose})))})))).subscribe(),(0,o.pipe)(P,f.U(b.wW(this._state))).subscribe()],T.nL.hasCards(L)&&(0,o.pipe)(T.nL.getActiveAlertHighlight(L),c.filter((function(e){return k._alertsReader.isRegistered(e.alert.id)})),c.fold((function(){return k._switchLensActions.next({lensId:L.currentLens.id,alertSource:L.alertSource,options:{order:L.switchOrder,toFocus:T.nL.Effect.FocusBehavior.noFocus}})}),(function(e){return k._switchAlertActions.next({alertHighlight:e,alertSource:L.alertSource,options:{lensId:L.currentLens.id,order:L.switchOrder}})})))}return e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._effectToApplicator=function(e){var t=this;switch(e.type){case T.nL.Effect.Type.Applicator:return e.source;case T.nL.Effect.Type.SwitchLens:return e.source.pipe(S.b((function(e){return t._switchLensActions.next(e)})),x.c(I.F()));case T.nL.Effect.Type.SwitchAlert:return e.source.pipe(S.b((function(e){return t._switchAlertActions.next(e)})),x.c(I.F()));default:return(0,l.vE)(e)}},e.prototype._checkState=function(e){try{if(T.nL.hasCards(e)){var t=e.currentLens.items.filter(k.X.isFocused);(0,l.kG)(t.size<=1,"cannot have more than one focused card",(function(){return JSON.stringify(t)}))}}catch(e){return s.left(e)}return s.right(void 0)},e.toLensAlert=function(e){var t=e.alert;return{alert:t,highlightIndex:e.highlightIndex,lensId:t.lensId}},e}()},20490:(e,t,n)=>{"use strict";n.d(t,{T:()=>k,zc:()=>T,oq:()=>R});var r=n(59312),i=n(45980),a=n(73805),o=n(22232),s=n(92843),c=n(64909),l=n(8125),u=n(83078),d=n(92932),p=n(41120),f=n(17753),m=n(10002),h=n(76779),g=n(66654),v=n(76974),y=n(85985),b=n(28043),w=n(77176),_=n(24209),C=n(16118),S=n(66310),A=n(93508),x=n(41199),I=n(38524),E=n(31346),k=function(){return I.nL.create({alertSource:f.l$.api,switchOrder:"lensOrder",currentLens:E.BI.create(i.constFalse)})},T=function(){return I.nL.create({alertSource:f.l$.api,switchOrder:"lensOrder",currentLens:E.qN.create()})},R=function(){function e(e,t,n,o,s,c,l,u){var p=this;this._checkingState=e,this._alertsReader=t,this._lenses=n,this._positionManager=o,this._lensPreviewVM=s,this._lensViewFactory=c,this._alertsHandlerFactory=l,this._alertsFilterService=u,this._transformAlertsDiffToApplicator=function(e){return function(t){return function(n){return I.nL.hasCards(n)?n.patch({currentLens:e(t,(0,i.not)(f.bZ.isMuted))(n.currentLens)}):n}}},this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._lensAlerts=function(e){var t=p._alertsFilterService.alertVisibleInSidebar(e.id);return(0,a.pipe)(p._checkingState.get(),h.p.reduce([],(function(e,n){var i=n.alert;return t(i)?(0,r.__spreadArrays)(e,[i]):e})),(function(e){return e.sort(f.bZ.ord.compare)}))}}return e._mapByActiveLensId=function(e,t,n,r){if(m.R.isOutcomeId(e))return r();switch(e){case m.R.SpecialId.Plagiarism:return t();case m.R.SpecialId.Premium:return n();case m.R.SpecialId.AllAlerts:case m.R.SpecialId.Priority:case m.R.SpecialId.PredictionTakeaways:case m.R.SpecialId.PredictionEmogenie:case m.R.SpecialId.RealTimeProofit:return r();default:return(0,o.vE)(e)}},e._conditionedApplicator=function(e,t){return function(n){return function(r){return e(r,n)?t(n)(r):r}}},e._filterALEvents=function(e){return function(t){return v.of((0,a.pipe)(t,h.p.Diff.filter((function(t){return e(t.alert)})))).pipe(y.h((0,i.not)(s.v.isEmpty)))}},e.prototype.emptyState=function(e){return void 0===e&&(e=m.R.SpecialId.AllAlerts),I.nL.create({currentLens:this._createLens(e,this._lensPreviewVM.getLens(e).get(),[],c.none),alertSource:f.l$.api,switchOrder:"lensOrder"})},e.prototype.getLensEventsByLensId=function(e,t,n){var r=this;void 0===n&&(n={});var i=this._getActiveLensMeta(t),o=this._lensAlerts(i),s=this._createState(e,c.none,i,t,o),l=n.focusBehavior?this._getAlertToFocus(n.focusBehavior,s):c.none;e.currentLens.id===t&&I.nL.hasCards(e)&&e.currentLens.activeAlertsCount!==o.length&&this._log.warn("Lens contains inconsistent number of alerts",i.id);var u=I.nL.hasCards(s)?(0,a.pipe)(l,c.fold((function(){return s}),(function(n){return r._createState(e,c.some(n),i,t,o)}))):s;return this._generateEventsFromState(u,this._alertsHandlerFactory(t))},e.prototype.getLensEventsByAlert=function(e,t,n){(0,o.kG)(c.isSome(this._alertsReader.getById(n.alert.id)),"Can't focus non existing alert",n.alert.id);var r=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(n.alert)&&I.nL.hasCards(e)?I.nL.Prism.getLens().set(e.currentLens.select(n),e):this._createState(e,c.some(n),r,t,this._lensAlerts(r));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))},e.prototype.findClosestAlertHighlight=function(e,t){var n=this;return(0,a.pipe)(this._positionManager.findClosestToPosition(e,(function(e){return p.P.is(e)&&p.x.isVisible(e)&&!p.x.isApplied(e)&&(0,a.pipe)(n._alertsReader.getRegistered(e.meta.alertId),c.exists((function(r){return n._alertsFilterService.alertCanBeDisplayed(r)&&t(r)&&r.getHighlightRanges().some((function(t){return t.meta.id===e.meta.id}))})))})),c.chain((function(e){return(0,a.pipe)(n._alertsReader.getRegistered(e.meta.alertId),c.map((function(t){var r={alert:x.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((function(t){return t.meta.id===e.meta.id}))};return r.highlightIndex<0&&(n._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:r.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(n._positionManager.findRanges((function(e){return p.P.is(e)&&e.meta.alertId===t.id}))),hasPendingRanges:t.hasNewRangesForUpdate}),r.highlightIndex=0),r})))})))},e.prototype.findNextAlertInText=function(e,t){var n=e.alert,r=e.highlightIndex,i=n.getHighlightRanges();return(0,o.kG)(r<i.length,"AHI is out of highlightRanges length","hr length: "+i.length+", ahi: "+r),this.findClosestAlertHighlight(i[r].end,t)},e.prototype.findNextAlertInTextByLens=function(e,t,n){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,n))},e.prototype.findPremiumAlert=function(){return this._lensPreviewVM.getLens(m.R.SpecialId.Premium).get().count>0?(0,a.pipe)(this._checkingState.get(),h.p.find((0,i.flow)(f.bZ.fromAlertModel,(0,l.W9)(f.bZ.isRegistered,f.bZ.isPremium))),c.map((function(e){return{alert:x.$.fromModel(e.alert),highlightIndex:0}}))):c.none},e.prototype.hasZeroFreeAlerts=function(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount},e.prototype._getMetaChangesObservable=function(t){return I.nL.isPersistent(t)?this._lensPreviewVM.getLens(t.currentLens.id).view(e._updateMetaSource(t.currentLens.id)):I.nL.isLensview(t)?this._lenses.pipe(b.x(g.w.eq.equals),w.U((0,i.flow)(g.w.lookup(t.currentLens.id),c.map(e._updateMetaSource(t.currentLens.id)),c.getOrElse((function(){return I.nL.Effect.Applicator.Source.identity}))))):I.nL.Effect.Applicator.Source.empty},e.prototype._generateEventsFromState=function(t,n){var r=this;return _.T(this._checkingState.pipe(C.G(),w.U((function(e){var t=e[0],n=e[1];return h.p.diff(t,n)})),S.w(e._filterALEvents(t.currentLens.meta.filter)),w.U(e._conditionedApplicator((function(e,t){var n=(0,a.pipe)(t,h.p.Diff.filter((0,i.not)((function(t){return I.nL.fitsAlert(e)(t.alert)}))));return s.v.isEmpty(n)||r._log.info("tried to send event with alerts that do not fit current lens, skipping",{diff:h.p.Diff.show.show(n)}),s.v.isEmpty(n)}),this._transformAlertsDiffToApplicator(n)))),this._getMetaChangesObservable(t)).pipe(A.O(I.nL.Effect.Applicator.Source.override(t)))},e.prototype._getActiveLensMeta=function(t){var n=this,r=e._mapByActiveLensId(t,(function(){return n._lensPreviewVM.getLens(m.R.SpecialId.Plagiarism).get()}),(function(){return n._lensPreviewVM.getLens(m.R.SpecialId.Premium).get()}),(function(){return n._lensPreviewVM.getLens(t).get()}));return(0,o.kG)(void 0!==r,"unknown lensId:"+t),r},e.prototype._createState=function(e,t,n,r,i){var s=this,l=e.alertSource,d=e.switchOrder;(0,o.kG)(u.wo((function(e){var t=e.alert;return c.isSome(s._alertsReader.getInteractable(t.id))}))(t),"we can create state only with alert in registered state",(function(){return(0,a.pipe)(t,c.fold((function(){return"null"}),(function(e){return e.toString()})))}));var p=this._createLens(r,n,i,t);return I.nL.create({currentLens:p,alertSource:l,switchOrder:d})},e.prototype._createLens=function(e,t,n,r){var i=(0,a.pipe)(r,c.map((function(e){var t=e.alert,r=e.highlightIndex;return{alertIndex:n.findIndex((0,I.Tl)(t)),highlightIndex:r}})));return this._lensViewFactory.create(e,t,n,i)},e.prototype._getAlertToFocus=function(e,t){switch(e.kind){case I.nL.Effect.FocusBehaviorType.noFocus:case I.nL.Effect.FocusBehaviorType.unFocus:return c.none;case I.nL.Effect.FocusBehaviorType.focusFirst:return I.nL.hasCards(t)?t.currentLens.findFirstAlert():c.none;case I.nL.Effect.FocusBehaviorType.focusNext:return I.nL.hasCards(t)?t.currentLens.findNextAlert():c.none;case I.nL.Effect.FocusBehaviorType.focusAlert:return c.some(e.alertHighlight);default:(0,o.vE)(e)}},e._updateMetaSource=function(e){return function(t){return function(n){return e===n.currentLens.id?I.nL.Prism.getLens().set(n.currentLens.updateMeta(t),n):n}}},e}()},55969:(e,t,n)=>{"use strict";n.d(t,{is:()=>o,kn:()=>s,ad:()=>c,gi:()=>l});var r=n(22232),i=n(10002),a=n(31346),o=function(e,t){return function(n){if(i.R.isOutcomeId(n))return a.vj.WithSuccess.getAlertHandler(e,t);switch(n){case i.R.SpecialId.Plagiarism:return a.vj.Plagiarism.getAlertsHandler();case i.R.SpecialId.Premium:return a.vj.Premium.getAlertsHandler();case i.R.SpecialId.AllAlerts:case i.R.SpecialId.Priority:case i.R.SpecialId.PredictionTakeaways:case i.R.SpecialId.PredictionEmogenie:case i.R.SpecialId.RealTimeProofit:return a.vj.WithSuccess.getAlertHandler(e,t);default:return(0,r.vE)(n)}}},s=function(e,t){return function(n){return e(n)?a.vj.Bundles.getAlertsHandler():t(n)}},c=(function(){function e(e,t,n,r,i){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n,this._inner=r,this._capabilities=i}e.prototype.create=function(e,t,n,r){return i.R.isOutcomeId(e)||i.R.isAllAlerts(e)?a.rN.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._alertsReader,this._capabilities):this._inner.create(e,t,n,r)}}(),function(){function e(e,t,n,r,i,a){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n,this._lensPredicate=r,this._inner=i,this._capabilities=a}return e.prototype.create=function(e,t,n,r){return this._lensPredicate(t)?a.d8.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._alertsReader,this._capabilities):this._inner.create(e,t,n,r)},e}()),l=function(){function e(e,t,n,r){this._alertsReader=e,this._cardFactory=t,this._alertsFilterService=n,this._capabilities=r}return e.prototype.create=function(e,t,n,o){var s=this,c=function(){return a.Z$.create(e,t,n.filter(s._alertsFilterService.alertVisibleInSidebar(e)),o,s._cardFactory,s._alertsReader,s._capabilities)};if(i.R.isOutcomeId(e))return c();switch(e){case i.R.SpecialId.Plagiarism:return a.Y6.create(t,n,o,this._cardFactory,this._alertsReader,this._capabilities);case i.R.SpecialId.Premium:return a.Ti.create(t,n,this._cardFactory,this._alertsReader);case i.R.SpecialId.AllAlerts:case i.R.SpecialId.Priority:case i.R.SpecialId.PredictionTakeaways:case i.R.SpecialId.PredictionEmogenie:case i.R.SpecialId.RealTimeProofit:return c();default:return(0,r.vE)(e)}},e}()},31346:(e,t,n)=>{"use strict";n.d(t,{Z$:()=>R,d8:()=>L,Ti:()=>P,Y6:()=>M,BI:()=>N,qN:()=>r,rN:()=>O,vj:()=>F});var r,i=n(59312),a=n(26001),o=n(489),s=n(42654),c=n(45980),l=n(73805),u=n(84966),d=n(22232),p=n(83078),f=n(64909),m=n(8125),h=n(89943),g=n(65772),v=n(92843),y=n(17753),b=n(10002),w=n(95053),_=n(78090),C=n(40250),S=n(41199),A=n(40644),x=n(50536),I=n(87280),E=n(89881),k=n(62712),T=n(38524),R=function(){function e(t,n,r,i,a,o,s,c,u,f){this.id=t,this.meta=n,this.cardIndex=r,this.items=i,this.animation=a,this.isCardsHeightValid=o,this.cardsHeight=s,this._cardFactory=c,this._alertsReader=u,this._capabilities=f,this._remove=e.remove,this.type=T.Nm.lensview,this.kind=T._L.persistent,this.withPriorityList=!1,this.itemsOrd=e._ord,(0,d.kG)((0,l.pipe)(this.cardIndex,p.wo((function(e){return e>-1}))),"card index should be non negative number")}return e.initCardsHash=function(e,t,n,r,i,a){var o=this;(0,d.kG)((0,l.pipe)(r,p.wo((function(e){var t=e.alertIndex;return void 0!==n[t]}))),"Can not find alert for provided alertIndex");var s=w.aW.create(n.map((function(n,a){return(0,l.pipe)(r,f.exists((function(e){var t=e.alertIndex;return a===t})))?i.createFocused(e)(o.getCardId(t,n),n,(0,l.pipe)(r,f.fold((function(){return 0}),(function(e){return e.highlightIndex})))):i.createRendered(e)(o.getCardId(t,n),n)})),A.X.getId,a.compare);return{cardIndex:(0,l.pipe)(r,f.chain((function(e){var t=e.alertIndex;return s.find((function(e){return e.activeAlert.id===n[t].id}))})),f.map((function(e){return e.index}))),hash:s}},e.create=function(t,n,r,i,a,o,s){var c=e.initCardsHash(t,n,r,i,a,e._ord),l=c.hash;return new e(t,n,c.cardIndex,l,T.wj.skip,!1,0,a,o,s)},e.getCardId=function(e,t){return e.id+"_"+t.id},Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.exists((function(e){return y.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,l.pipe)(T.In.getActiveItem(this),f.exists((function(e){return e.scheduledToDispose})))||f.isNone(this.items.find((function(e){return!e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,l.pipe)(F.getRegularCard(this.items,this.cardIndex),f.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),f.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.prototype.getCardId=function(t){return e.getCardId(this.meta,t)},e.prototype.releaseAlert=function(e){return this._remove([e])(this)},e.prototype.onAnimationFinish=function(t){return(0,d.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(e.isAlertVisible,this._capabilities)(t)(this)},e.prototype.select=function(e){var t=this,n=B(this),r=C.l.find(this.items,(0,m.W9)(D,(function(t){return t.activeAlert.id===e.alert.id})));(0,d.kG)(f.isSome(r),"Can not find card for provided alert. Unknown card or it is already disposed.",(function(){return e.alert.toString()}));var i=p.MH(r),a=i.value,o=i.index,s=(0,l.pipe)(n,f.map((function(e){return t.items.add((0,l.pipe)(e,t._capabilities.unselect({nextCard:f.some(a),ord:t.itemsOrd})))})),f.getOrElse((function(){return t.items}))).add((0,l.pipe)(a,this._capabilities.select({alertHighlight:e,previousCard:n,ord:this.itemsOrd,meta:f.none})));return new this.constructor(this.id,this.meta,f.some(o),s,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.unselect=function(){var e=this,t=(0,l.pipe)(B(this),f.map((function(t){return e.items.add(e._cardFactory.unselect(t,f.none,e.itemsOrd))})),f.getOrElse((function(){return e.items})));return new this.constructor(this.id,this.meta,f.none,t,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.findNextAlert=function(){var e=this;return(0,l.pipe)(this.cardIndex,f.chain((function(t){return(0,l.pipe)(h.dn(e.items.values(),t,(0,m.W9)(A.X.canBeFocused(e._alertsReader),A.X.isAlertCard)))})),f.map((function(e){return{alert:e.value.activeAlert,highlightIndex:0}})))},e.prototype.findFirstAlert=function(){return(0,l.pipe)(this.items.filter((0,m.W9)(A.X.canBeFocused(this._alertsReader),D)).getAt(0),f.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(e){return new this.constructor(this.id,b.R.WithAlerts.setMeta(e)(this.meta),this.cardIndex,this.items,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeCardsHeight=function(e,t){return new this.constructor(this.id,this.meta,this.cardIndex,this.items,T.wj.proceed,t,e,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeVisibleItems=function(e){var t=(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.chain((function(t){return(0,l.pipe)(e.get(t.id),f.map((function(e){return e.index})))})));return new this.constructor(this.id,this.meta,t,e,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,_.AC)(this.id))+H(T.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&f.getEq(A.X.eq).equals(T.In.getActiveItemWithAlert(this),T.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},Object.defineProperty(e.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.size||f.isNone(this.items.find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),e._ord=A.X.defaultOrd,e.add=function(t,n,r){return function(i){return function(a){var o=i.map((function(i){var o=n.createAdded(a.id)(e.getCardId(a.meta,i),i);return t(a,i)?o:F.Priority.makeCardInvisible(o,r)})),c=a.items.add(o),u=(0,l.pipe)(T.In.getActiveItemWithAlert(a),f.map((function(e){var t=e.id;return p.MH(c.get(t)).index}))),d=f.getEq(s.eqNumber).equals(u,a.cardIndex)?T.wj.force:T.wj.skip;return new e(a.id,a.meta,u,c,d,a.isCardsHeightValid,a.cardsHeight,n,a._alertsReader,a._capabilities)}}},e.remove=function(t){return function(n){var r=new Set(t.map((function(e){return e.id}))),i=n.items.map((function(e){return A.X.isAlertCard(e)&&r.has(e.activeAlert.id)?n._cardFactory.remove(e,[e.activeAlert],B(n),n.itemsOrd):e})),a=(0,l.pipe)(n.cardIndex,f.chain((function(e){return(0,l.pipe)(i.findRightFrom((function(e){return e.scheduledToDispose}),e),f.map((function(e){return e.index})))})),f.isSome)?T.wj.skip:T.wj.force;return new e(n.id,n.meta,n.cardIndex,i,a,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.update=function(t,n,r){return function(i){return function(a){return e._updateWithAlerts(t,r)(i.filter((0,m.ff)(n.shouldAnimateAlertApply)))(a)}}},e._updateWithAlerts=function(t,n){return function(r){return function(i){var a=(0,l.pipe)(r,F.filterAlertInLens(i),o.map((function(t){return[e.getCardId(i.meta,t),t]})),o.reduce(i.items,(function(e,r){var a=r[0],o=r[1];return(0,l.pipe)(C.l.update(e,a,(function(e){return i._cardFactory.updateWith(e,o,i.itemsOrd)})),g.fold((function(){var r=i._cardFactory.createAdded(i.id)(a,o);return e.add(t(i,o)?r:F.Priority.makeCardInvisible(r,n))}),c.identity))}))),s=(0,l.pipe)(T.In.getActiveItemWithAlert(i),f.map((function(e){var t=e.id;return p.MH(a.get(t)).index})));return new e(i.id,i.meta,s,a,T.wj.proceed,i.isCardsHeightValid,i.cardsHeight,i._cardFactory,i._alertsReader,i._capabilities)}}},e.isAlertVisible=function(e,t){return!0},e}(),L=function(){function e(e,t,n,r,i,a,o,s,c,u){this.id=e,this.meta=t,this.cardIndex=n,this.items=r,this.animation=i,this.isCardsHeightValid=a,this.cardsHeight=o,this._cardFactory=s,this._alertsReader=c,this._capabilities=u,this.type=T.Nm.lensview,this.kind=T._L.persistent,this.itemsOrd=A.X.Bundle.ord,this.withPriorityList=!1,(0,d.kG)((0,l.pipe)(this.cardIndex,p.wo((function(e){return e>-1}))),"card index should be non negative number")}return e.initCardsHash=function(t,n,r,i){(0,d.kG)((0,l.pipe)(r,p.wo((function(e){var t=e.alertIndex;return void 0!==n[t]}))),"Can not find alert for provided alertIndex");var a=e._groupAlertsInBundles(n),o=(0,l.pipe)(r,f.map((function(e){var t=e.alertIndex;return(0,d.kG)(void 0!==n[t],"Can not find alert for provided alertIndex"),n[t]}))),s=f.none,c=w.aW.empty(A.X.getId,e._ord.compare),u=Array.from(a.entries()).reduce((function(e,n){var r=n[0],a=n[1],c=a.map((function(e){e[0];return e[1]})),u=a[0][0];return(0,l.pipe)(o,f.map((function(e){return c.indexOf(e)})),f.filter((function(e){return e>-1})),f.fold((function(){return e.add(i.createRenderedBundle(t)(r,u,c))}),(function(n){var a=i.createFocusedBundle(t)(r,u,c,n);return s=f.some(r),e.add(a)})))}),c);return{cardIndex:(0,l.pipe)(s,f.chain((function(e){return(0,l.pipe)(u.get(e),f.map((function(e){return e.index})))}))),cards:u}},e.create=function(t,n,r,i,a,o,s){var c=e.initCardsHash(t,r,i,a),l=c.cards;return new e(t,n,c.cardIndex,l,T.wj.skip,!1,0,a,o,s)},e.getCardId=function(e){return e.id},e._groupAlertsInBundles=function(e){var t=this,n=e.map((function(e){return[A.X.Bundle.getAlertOutcomeBundle(e),e]}));return w.vM((function(e){var n=e[0];e[1];return t.getCardId(n)}),n)},e.add=function(t){return function(n){var r=e._groupAlertsInBundles(t),i=Array.from(r.entries()).reduce((function(e,t){var r=t[0],i=t[1],a=i.map((function(e){e[0];return e[1]})),o=i[0][0];return(0,l.pipe)(C.l.update(e,r,(function(e){var t=n._cardFactory.addBundleAlerts(e,a);return A.X.Bundle.isExtendableWithAlerts(t)?t:n._cardFactory.transitionTo(t,{type:"added",clockwise:!0})})),g.fold((function(){return e.add(n._cardFactory.createAddedBundle(n.id)(r,o,a))}),c.identity))}),n.items),a=(0,l.pipe)(T.In.getActiveItemWithAlert(n),f.map((function(e){var t=e.id;return p.MH(i.get(t)).index}))),o=f.getEq(s.eqNumber).equals(a,n.cardIndex)?T.wj.force:T.wj.skip;return new e(n.id,n.meta,a,i,o,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.remove=function(t){return function(n){var r=e._groupAlertsInBundles(t),i=Array.from(r.entries()).reduce((function(t,r){var i=r[0],a=r[1];return(0,l.pipe)(C.l.update(t,i,(function(t){var r=n._cardFactory.remove(t,a.map((function(e){e[0];return e[1]})),B(n),e._ord);return(0,l.pipe)(T.In.getActiveItem(n),f.exists((function(e){return e.id===r.id})))?n._cardFactory.selectNextAlert(r,e._ord,(function(e,t){return(0,x.EB)(A.X.Bundle.getAlertOutcomeBundle(t),r.alerts,t)})):r})),g.fold((function(){return t}),c.identity))}),n.items);return new e(n.id,n.meta,n.cardIndex,i,T.wj.force,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.update=function(t){return function(n){return e._updateWithAlerts(t.filter((0,m.ff)(n._cardFactory.shouldAnimateAlertApply)))(n)}},e._updateWithAlerts=function(t){return function(n){var r=(0,l.pipe)(t,F.filterAlertInLens(n),o.partition(y.bZ.isRegistered)),i=r.left,a=r.right,s=e._groupAlertsInBundles(a),u=Array.from(s.entries()).reduce((function(e,t){var r=t[0],i=t[1],a=i.map((function(e){e[0];return e[1]})),o=i[0][0];return(0,l.pipe)(C.l.update(e,r,c.identity),g.fold((function(){return e.add(n._cardFactory.createAddedBundle(n.id)(r,o,a))}),c.identity))}),e.remove(i)(n).items),d=(0,l.pipe)(T.In.getActiveItemWithAlert(n),f.map((function(e){var t=e.id;return(0,l.pipe)(u.get(t),f.map((function(e){return e.index})),f.getOrElse((function(){return 0})))})));return new e(n.id,n.meta,d,u,T.wj.proceed,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,l.pipe)(T.In.getActiveItem(this),f.exists((function(e){return e.scheduledToDispose})))||f.isNone(this.items.find((function(e){return!e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,l.pipe)(F.getRegularCard(this.items,this.cardIndex),f.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),f.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.prototype.getCardId=function(e){return A.X.Bundle.getAlertOutcomeBundle(e).id},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(t){return(0,d.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(t)(this)},e.prototype.select=function(t){var n=this,r=A.X.Bundle.getAlertOutcomeBundle(t.alert),i=C.l.get(this.items,e.getCardId(r),D);(0,d.kG)(f.isSome(i),"Cannot select unknown alert");var a=p.MH(i),o=a.value,s=a.index,c=(0,l.pipe)(B(this),f.map((function(e){return n.items.add((0,l.pipe)(e,n._capabilities.unselect({nextCard:f.some(o),ord:n.itemsOrd})))})),f.getOrElse((function(){return n.items}))).add((0,l.pipe)(o,this._capabilities.select({alertHighlight:t,previousCard:B(this),ord:this.itemsOrd,meta:f.some((0,x.EB)(r,o.alerts,t.alert))})));return new this.constructor(this.id,this.meta,f.some(s),c,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.unselect=function(){var e=this,t=(0,l.pipe)(B(this),f.map((function(t){return e.items.add((0,l.pipe)(t,e._capabilities.unselect({nextCard:f.none,ord:e.itemsOrd})))})),f.getOrElse((function(){return e.items})));return new this.constructor(this.id,this.meta,f.none,t,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.findNextAlert=function(){var e=this;return(0,l.pipe)((0,a.gz)(f.option)(B(this),this.cardIndex),f.chain((function(t){var n=t[0],r=t[1];return(0,l.pipe)(e._cardFactory.nextAlert(n),f.alt((function(){return e._cardFactory.prevAlert(n)})),f.alt((function(){return(0,l.pipe)(h.XT(e.items.values(),r+1,(0,m.W9)(A.X.canBeFocused(e._alertsReader),A.X.isAlertCard)),f.alt((function(){return h.XT(e.items.values(),0,(0,m.W9)(A.X.canBeFocused(e._alertsReader),A.X.isAlertCard))})),f.map((function(e){return e.value.alerts[0]})))})))})),p.vx((0,l.pipe)(C.l.find(this.items,(0,m.W9)(A.X.canBeFocused(this._alertsReader),D)),f.map((function(e){return e.value.alerts[0]})))),f.map((function(e){return{alert:e,highlightIndex:0}})))},e.prototype.findFirstAlert=function(){return(0,l.pipe)(this.items.filter((0,m.W9)(A.X.canBeFocused(this._alertsReader),D)).getAt(0),f.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(e){return new this.constructor(this.id,b.R.WithAlerts.setMeta(e)(this.meta),this.cardIndex,this.items,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeCardsHeight=function(e,t){return new this.constructor(this.id,this.meta,this.cardIndex,this.items,T.wj.proceed,t,e,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeVisibleItems=function(e){var t=(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.chain((function(t){return(0,l.pipe)(e.get(t.id),f.map((function(e){return e.index})))})));return new this.constructor(this.id,this.meta,t,e,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,_.AC)(this.id))+H(T.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&f.getEq(A.X.eq).equals(T.In.getActiveItemWithAlert(this),T.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},Object.defineProperty(e.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.size||f.isNone(this.items.find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),e._ord=A.X.Bundle.ord,e}(),P=function(){function e(t,n,r,i,a,o,s){this.meta=t,this.items=n,this.animation=r,this.isCardsHeightValid=i,this.cardsHeight=a,this._cardFactory=o,this._alertsReader=s,this.kind=T._L.active,this.type=T.Nm.advanced,this.id=b.R.SpecialId.Premium,this.cardIndex=f.none,this.card=this.cardIndex,this.itemsOrd=e._ord,(0,d.kG)(this.items.size>0,"PremiumLensViewImpl should have at least one card")}return e.create=function(t,n,r,i){return new e(t,w.aW.create(n.map(r.createFromAlert(b.R.SpecialId.Premium)),(function(e){return e.id}),e._ord.compare),T.wj.skip,!1,0,r,i)},Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,l.pipe)(this.findNextAlert(),f.isNone)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),e.add=function(t){return function(n){var r=t.map(n._cardFactory.createFromAlert(n.id));return new e(n.meta,n.items.add(r),T.wj.proceed,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader)}},e.remove=function(t){return function(n){var r=new Set(t.map((function(e){return e.id}))),i=n.items.map((function(t){return r.has(t.activeAlert.id)?n._cardFactory.remove(t,[t.activeAlert],f.none,e._ord):t}));return new e(n.meta,i,n.animation,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader)}},e.update=function(t){return function(n){var r=h.uK(t,y.bZ.isRegistered),i=r[0],a=r[1];return(0,l.pipe)(n,e.remove(a),e.add(i))}},e.prototype.getCardId=function(e){return e.id},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(e){throw new Error("It's not possible to animate premium alerts")},e.prototype.select=function(e){return this},e.prototype.unselect=function(){return this},e.prototype.changeCardsHeight=function(t,n){return new e(this.meta,this.items,this.animation,n,t,this._cardFactory,this._alertsReader)},e.prototype.changeVisibleItems=function(t){return new e(this.meta,t,this.animation,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader)},e.prototype.findNextAlert=function(){return(0,l.pipe)(this.items.find(A.X.canBeFocused(this._alertsReader)),f.map((function(e){return{alert:e.value.activeAlert,highlightIndex:e.value.activeHighlightIndex}})))},e.prototype.findFirstAlert=function(){return(0,l.pipe)(this.items.filter(A.X.canBeFocused(this._alertsReader)).getAt(0),f.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},e.prototype.updateMeta=function(t){return new e(b.R.WithAlerts.setMeta(t)(this.meta),this.items,this.animation,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader)},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,_.AC)(this.id))+H(this.card))+this.meta.count},e.prototype.equals=function(e){return this.id===e.id&&f.getEq(A.X.eq).equals(this.card,e.card)&&this.meta.equals(e.meta)&&this.items.equals(e.items)},e._ord=A.X.defaultOrd,e}(),M=function(){function e(t,n,r,i,a,o,s,c,l){var u=this;this.meta=t,this.cardIndex=n,this.items=r,this.animation=i,this.isCardsHeightValid=a,this.cardsHeight=o,this._cardFactory=s,this._alertsReader=c,this._capabilities=l,this._updateCardWithLensMeta=function(e){return u._cardFactory.changePlagiarismMetaWithAlerts(e,e.alerts.filter(S.$.isPlagiarism))},this.kind=T._L.persistent,this.type=T.Nm.plagiarism,this.id=b.R.SpecialId.Plagiarism,this.itemsOrd=e._ord}return e.create=function(t,n,r,i,a,o){(0,d.kG)(t.id===b.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",t.id);var s=w.aW.empty(A.X.getId,e._ord.compare),c=this.groupAlertsByCardId(n),u=(0,l.pipe)(r,f.map((function(e){var t=e.alertIndex;return(0,d.kG)(void 0!==n[t],"Can not find alert for provided alertIndex"),n[t]}))),p=f.none,m=Array.from(c.entries()).reduce((function(e,t){var n=t[0],r=t[1];return(0,l.pipe)(u,f.map((function(e){return r.indexOf(e)})),f.filter((function(e){return e>-1})),f.fold((function(){return e.add(i.createRendered(b.R.SpecialId.Plagiarism)(n,r))}),(function(t){var a=i.createFocused(b.R.SpecialId.Plagiarism)(n,r,t);return p=f.some(n),e.add(a)})))}),s);return new e(t,(0,l.pipe)(p,f.chain((function(e){return(0,l.pipe)(m.get(e),f.map((function(e){return e.index})))}))),m,T.wj.skip,!1,0,i,a,o)},e.groupAlertsByCardId=function(e){return w.vM("cardId",e)},Object.defineProperty(e.prototype,"shouldVerify",{get:function(){return(0,l.pipe)(T.In.getActiveItem(this),f.exists((function(e){return e.scheduledToDispose})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeAlertsCount",{get:function(){return this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleAlertsCount",{get:function(){return this.activeAlertsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"regularHeight",{get:function(){return(0,l.pipe)(F.getRegularCard(this.items,this.cardIndex),f.filter((function(e){return e.positionState.isHeightValid})),f.map((function(e){return e.positionState.height})))},enumerable:!1,configurable:!0}),e.add=function(t){return function(n){var r=e.groupAlertsByCardId(t),i=Array.from(r.entries()).reduce((function(e,t){var r=t[0],i=t[1];return(0,l.pipe)(C.l.update(e,r,(function(e){return n._cardFactory.addPlagiarismAlerts(e,i)})),g.fold((function(){return e.add(n._cardFactory.createAdded(b.R.SpecialId.Plagiarism)(r,i))}),c.identity))}),n.items),a=(0,l.pipe)(T.In.getActiveItemWithAlert(n),f.map((function(e){var t=e.id;return p.MH(i.get(t)).index}))),o=f.getEq(s.eqNumber).equals(a,n.cardIndex)?T.wj.force:T.wj.skip;return new e(n.meta,a,i,o,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.remove=function(t){return function(n){var r=e.groupAlertsByCardId(t),i=Array.from(r.entries()).reduce((function(t,r){var i=r[0],a=r[1];return(0,l.pipe)(C.l.update(t,i,(function(t){var r=n._updateCardWithLensMeta(n._cardFactory.remove(t,a,B(n),e._ord));return(0,l.pipe)(T.In.getActiveItem(n),f.exists((function(e){return e.id===r.id})))?n._cardFactory.selectNextAlert(r,e._ord):r})),g.fold((function(){return t}),c.identity))}),n.items);return new e(n.meta,n.cardIndex,i,T.wj.force,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.prototype.getCardId=function(e){return e.cardId},e.prototype.releaseAlert=function(t){return e.remove([t])(this)},e.prototype.onAnimationFinish=function(t){return(0,d.kG)(t.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state"),e._updateWithAlerts(t)(this)},e.update=function(t){return function(n){return e._updateWithAlerts(t.filter((0,m.ff)(n._cardFactory.shouldAnimateAlertApply)))(n)}},e._updateWithAlerts=function(t){return function(n){var r=h.uK(t,y.bZ.isRegistered),i=r[0],a=r[1],o=e.groupAlertsByCardId(i),s=Array.from(o.entries()).reduce((function(e,t){var r=t[0],i=t[1];return(0,l.pipe)(C.l.update(e,r,n._updateCardWithLensMeta),g.fold((function(){return e.add(n._cardFactory.createAdded(b.R.SpecialId.Plagiarism)(r,i))}),c.identity))}),e.remove(a)(n).items),u=(0,l.pipe)(T.In.getActiveItemWithAlert(n),f.map((function(e){var t=e.id;return(0,l.pipe)(s.get(t),f.map((function(e){return e.index})),f.getOrElse((function(){return 0})))})));return new e(n.meta,u,s,T.wj.proceed,n.isCardsHeightValid,n.cardsHeight,n._cardFactory,n._alertsReader,n._capabilities)}},e.prototype.updateMeta=function(t){var n=this.items.map(this._updateCardWithLensMeta);return new e(b.R.WithAlerts.setMeta(t)(this.meta),this.cardIndex,n,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.select=function(t){var n=this;(0,d.kG)(t.alert.type===S.$.Type.plagiarism,"cannot highlight non-plagiarism alert");var r=C.l.get(this.items,t.alert.cardId,D);(0,d.kG)(f.isSome(r),"Cannot select unknown alert");var i=p.MH(r),a=i.value,o=i.index,s=(0,l.pipe)(B(this),f.map((function(t){return n.items.add((0,l.pipe)(t,n._capabilities.unselect({nextCard:f.some(a),ord:e._ord})))})),f.getOrElse((function(){return n.items}))).add((0,l.pipe)(a,this._capabilities.select({previousCard:B(this),alertHighlight:t,ord:e._ord,meta:f.none})));return new e(this.meta,f.some(o),s,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.unselect=function(){var t=this,n=(0,l.pipe)(B(this),f.map((function(n){return t.items.add((0,l.pipe)(n,t._capabilities.unselect({nextCard:f.none,ord:e._ord})))})),f.getOrElse((function(){return t.items})));return new e(this.meta,f.none,n,T.wj.force,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeCardsHeight=function(t,n){return new e(this.meta,this.cardIndex,this.items,T.wj.proceed,n,t,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.changeVisibleItems=function(t){var n=(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.chain((function(e){return(0,l.pipe)(t.get(e.id),f.map((function(e){return e.index})))})));return new e(this.meta,n,t,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},e.prototype.findNextAlert=function(){var e=this;return(0,d.kG)(f.isSome(T.In.getActiveItemWithAlert(this))===f.isSome(this.cardIndex),"Lens is in wrong state"),(0,l.pipe)((0,a.gz)(f.option)(T.In.getActiveItemWithAlert(this),this.cardIndex),f.chain((function(t){var n=t[0],r=t[1];return(0,l.pipe)(e._cardFactory.nextAlert(n),f.alt((function(){return e._cardFactory.prevAlert(n)})),f.alt((function(){return(0,l.pipe)(h.dn(e.items.values(),r,(0,m.W9)(A.X.canBeFocused(e._alertsReader),A.X.isAlertCard)),f.map((function(e){return e.value.activeAlert})))})))})),p.vx((0,l.pipe)(C.l.find(this.items,(0,m.W9)(A.X.canBeFocused(this._alertsReader),D)),f.map((function(e){return e.value.activeAlert})))),f.map((function(e){return{alert:e,highlightIndex:0}})))},e.prototype.hashCode=function(){var e=7;return 31*(e=31*(e=31*e+(0,_.AC)(this.id))+H(T.In.getActiveItemWithAlert(this)))+this.meta.count},e.prototype.findFirstAlert=function(){return(0,l.pipe)(this.items.filter((0,m.W9)(A.X.canBeFocused(this._alertsReader),D)).getAt(0),f.map((function(e){return{alert:e.alerts[0],highlightIndex:0}})))},e.prototype.equals=function(e){return this.id===e.id&&f.getEq(A.X.eq).equals(T.In.getActiveItemWithAlert(this),T.In.getActiveItemWithAlert(e))&&this.meta.equals(e.meta)&&this.items.equals(e.items)},e._ord=A.X.defaultOrd,e}(),N=function(){function e(e){this.kind=T._L.abstract,this.type=T.Nm.closed,this.id=b.R.SpecialId.Closed,this.meta=b.R.createStaticLens({id:b.R.SpecialId.Closed,title:"Closed"},b.R.Meta.group.empty,e)}return e.create=function(t){return e.value||(e.value=new e(t)),e.value},e.prototype.hashCode=function(){return(0,_.AC)(this.id)},e.prototype.equals=function(e){return this.id===e.id},e}();!function(e){e.create=function(){return{id:b.R.SpecialId.DraftAI,type:T.Nm.draftAI,kind:T._L.abstract,meta:b.R.createStaticLens({id:b.R.SpecialId.DraftAI,title:"Draft AI"},b.R.Meta.group.empty,c.constFalse),hashCode:function(){return(0,_.AC)(this.id)},equals:function(e){return this.id===e.id}}}}(r||(r={}));var F,O=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.itemsOrd=t._cardsOrd,n.withPriorityList=!0,n}return(0,i.__extends)(t,e),t.create=function(e,n,r,i,a,o,s){var c=(0,l.pipe)(i,f.map((function(e){var t=e.alertIndex;return r[t]})),f.chain(f.fromNullable),f.map((function(e){return"all"===e.view})),f.getOrElse((function(){return!1}))),u=R.initCardsHash(e,n,r,i,a,t._cardsOrd).hash,d=F.Priority.ensureExpandCardIsPresent(e,u,o,a);return d=F.Priority.syncVisibleCards(d,c,c,a,s),new t(e,n,(0,l.pipe)(i,f.chain((function(e){var t=e.alertIndex;return C.l.find(d,(0,m.W9)(D,(function(e){return e.activeAlert.id===r[t].id})))})),f.map((function(e){return e.index}))),d,T.wj.skip,!1,0,a,o,s)},Object.defineProperty(t.prototype,"isNonPriorityListOpened",{get:function(){return t.isNonPriorityListOpened(this)},enumerable:!1,configurable:!0}),t.isNonPriorityListOpened=function(e){return(0,l.pipe)(e.items.get(A.X.Priority.expandCardId),f.map((function(e){return"rendered"===e.value.visualState.transition.type})),f.getOrElse((function(){return!1})))},Object.defineProperty(t.prototype,"onlyNonPriorityAlertsLeft",{get:function(){return 0!==this.meta.count&&0===this.meta.priorityCount&&0===this.items.filter((function(e){return!A.X.Priority.isStaticCard(e)&&A.X.isAlertCard(e)&&S.$.isPriority(e.activeAlert)&&!e.scheduledToDispose})).size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusedCardIsNonPriority",{get:function(){return t.focusedCardIsNonPriority(this)},enumerable:!1,configurable:!0}),t.focusedCardIsNonPriority=function(e){return(0,l.pipe)(T.In.getActiveItemWithAlert(e),f.map((function(e){return!S.$.isPriority(e.activeAlert)})),f.getOrElse((function(){return!1})))},t.prototype.toggleNonPriorityList=function(){var e=this.isNonPriorityListOpened,n=F.Priority.syncVisibleCards(this.items,!e,!e&&this.focusedCardIsNonPriority,this._cardFactory,this._capabilities);return new t(this.id,this.meta,this.cardIndex,n,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.isNonPriorityListOpened===t.isNonPriorityListOpened},t.prototype.select=function(n){var r=e.prototype.select.call(this,n),i=this.isNonPriorityListOpened||!S.$.isPriority(n.alert),a=F.Priority.syncVisibleCards(r.items,i,!S.$.isPriority(n.alert),this._cardFactory,this._capabilities);return new t(r.id,r.meta,r.cardIndex,a,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},t.prototype.onAnimationFinish=function(e){(0,d.kG)(e.every(this._cardFactory.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");var n=R._updateWithAlerts(t.isAlertVisible,this._capabilities)(e)(this),r=F.Priority.syncVisibleCards(n.items,this.isNonPriorityListOpened,this.focusedCardIsNonPriority,this._cardFactory,this._capabilities);return new t(n.id,n.meta,n.cardIndex,r,T.wj.proceed,this.isCardsHeightValid,this.cardsHeight,this._cardFactory,this._alertsReader,this._capabilities)},Object.defineProperty(t.prototype,"isInSuccess",{get:function(){return 0===this.meta.count&&(0===this.items.filter((0,m.ff)(A.X.Priority.isStaticCard)).size||f.isNone(this.items.filter((0,m.ff)(A.X.Priority.isStaticCard)).find((function(e){return!e.scheduledToDispose}))))},enumerable:!1,configurable:!0}),t.prototype.findFirstAlert=function(){var e=(0,m.W9)((0,m.ff)(A.X.Priority.isStaticCard),A.X.canBeFocused(this._alertsReader)),t=this.isNonPriorityListOpened?e:(0,m.W9)(e,A.X.isPriority);return(0,l.pipe)(this.items.filter((0,m.W9)(t,D)).getAt(0),f.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},t.prototype.findNextAlert=function(){var e=this,t=this.isNonPriorityListOpened&&this.onlyNonPriorityAlertsLeft?c.constTrue:function(e){return S.$.isPriority(e.activeAlert)},n=(0,m.W9)(A.X.canBeFocused(this._alertsReader),t);return(0,l.pipe)((0,a.gz)(f.option)(T.In.getActiveItemWithAlert(this),this.cardIndex),f.chain((function(t){var r=t[0],i=t[1];return(0,l.pipe)(e._cardFactory.nextAlert(r),f.alt((function(){return e._cardFactory.prevAlert(r)})),f.alt((function(){return(0,l.pipe)(h.XT(e.items.values(),i+1,(0,m.W9)(n,A.X.isAlertCard)),f.alt((function(){return h.XT(e.items.values().filter(n),0,(0,m.W9)(n,A.X.isAlertCard))})),f.map((function(e){return e.value.alerts[0]})))})))})),p.vx((0,l.pipe)(C.l.find(this.items,(0,m.W9)(n,D)),f.map((function(e){return e.value.alerts[0]})))),f.map((function(e){return{alert:e,highlightIndex:0}})))},Object.defineProperty(t.prototype,"activeAlertsCount",{get:function(){return(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.exists((function(e){return y.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.meta.count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleAlertsCount",{get:function(){return(0,l.pipe)(T.In.getActiveItemWithAlert(this),f.exists((function(e){return y.bZ.isCapiDone(e.activeAlert)})))&&1===this.items.size?0:this.isNonPriorityListOpened?this.meta.count:this.meta.priorityCount},enumerable:!1,configurable:!0}),t._cardsOrd=A.X.priorityOrd,t.isAlertVisible=function(e,t){return(0,T.yi)(e)&&("priority"===t.view||e.isNonPriorityListOpened)},t}(R);!function(e){var t;!function(t){t.getAlertHandler=function(t,n,r){return void 0===r&&(r=c.constTrue),function(i,a){var o=e.applyWithFilter(a,e.applyDiff);return function(e){return(0,l.pipe)(e,o(i,R.add(r,t,n),R.update(r,t,n),R.remove))}}}}(t=e.WithSuccess||(e.WithSuccess={})),function(t){t.getAlertsHandler=function(){return function(t,n){return function(r){var i=e.applyWithFilter(n,e.applyDiff);return(0,l.pipe)(r,i(t,L.add,L.update,L.remove))}}}}(e.Bundles||(e.Bundles={})),function(n){function r(t,n,r){return function(i){var a=e.Priority.ensureExpandCardIsPresent(i.id,i.items,n,t);a=e.Priority.syncVisibleCards(a,O.isNonPriorityListOpened(i),O.focusedCardIsNonPriority(i),t,r);var o=(0,l.pipe)(T.In.getActiveItemWithAlert(i),f.chain((function(e){return a.find((function(t){return A.X.isAlertCard(t)&&t.activeAlert.id===e.activeAlert.id}))})),f.map((function(e){return e.index})));return new O(i.id,i.meta,o,a,T.wj.proceed,i.isCardsHeightValid,i.cardsHeight,t,n,r)}}function i(e,t){return"removed"===e.visualState.transition.type?e:t.transitionTo({type:"hidden",clockwise:!1})(e)}n.getAlertHandler=function(e,n,i){return function(a,o){return(0,c.flow)(t.getAlertHandler(e,i,O.isAlertVisible)(a,o),r(e,n,i))}},n.getSyncVisibleCardsHandler=r,n.makeCardInvisible=i,n.ensureExpandCardIsPresent=function(e,t,n,r){if(t.has(A.X.Priority.expandCardId)||0===t.size)return t;var i=p.MH(n.getById(p.MH(t.getAt(0)).activeAlert.id)),a=(0,l.pipe)(i.copy(),(function(e){return e.id="dummy_alert",e._state={type:y.bZ.State.Type.REGISTERED,checkingState:y.bZ.CheckingState.IDLE},e._deregisterRanges(),e._deregisterAllAlternatives(),e.getHighlightRanges=function(){return[{start:0,end:0,meta:{}}]},e.view=u.wQ.View.all,e})),o=r.createAdded(e)(A.X.Priority.expandCardId,a),s=r.createRendered(e)(A.X.Priority.expandHintCardId,a);return t=(t=t.add(o)).add(s)},n.syncVisibleCards=function(e,t,n,r,a){var o=0===e.filter((function(e){return!k.J.isBulkAcceptItem(e)&&!A.X.Priority.isStaticCard(e)&&!e.scheduledToDispose&&A.X.isAlertCard(e)&&!S.$.isPriority(e.activeAlert)})).size;return e.map((function(e){return A.X.isAlertCard(e)?A.X.Priority.isStaticCard(e)?o?i(e,a):A.X.Priority.isExpand(e)?t||n?r.transitionTo(e,{type:"rendered",clockwise:!1}):r.transitionTo(e,{type:"added",clockwise:!1}):t||n?r.transitionTo(e,{type:"rendered",clockwise:!1}):i(e,a):t||S.$.isPriority(e.activeAlert)?"hidden"===e.visualState.transition.type?r.transitionTo(e,{type:"rendered",clockwise:!0}):e:i(e,a):k.J.isBulkAcceptItem(e)?k.J.transitionTo(e,{type:"rendered",clockwise:!0}):e}))}}(e.Priority||(e.Priority={})),function(t){t.getAlertsHandler=function(){return function(t){return e.applyDiff(t,P.add,P.update,P.remove)}}}(e.Premium||(e.Premium={})),function(t){t.getAlertsHandler=function(){return function(t){return e.applyDiff(t,M.add,M.update,M.remove)}}}(e.Plagiarism||(e.Plagiarism={})),e.applyDiff=function(e,t,n,r){return function(i){return(0,l.pipe)(e,v.v.reduce(i,(function(e,t){var n=t.alert;return r([n])(e)}),(function(e,t,r){var i=r.alert;return n([i])(e)}),(function(e,n){var r=n.alert;return t([r])(e)})))}},e.applyWithFilter=function(e,t){return function(n,r,i,a){var s=(0,c.flow)(o.partition(e),(function(e){return(0,c.flow)(a(e.left),i(e.right))}));return t(n,(function(t){return r(t.filter(e))}),s,a)}},e.calculateCardsHeight=function(e){return(0,l.pipe)(e.getAt(e.size-1),f.map((function(e){return e.positionState.absTop+e.positionState.height})),f.getOrElse((function(){return 0})))},e.getRegularIndex=function(e){return(0,l.pipe)(e,f.map((function(e){return 0===e?1:0})),f.getOrElse((function(){return 0})))};e.getRegularCard=function(t,n){return(0,l.pipe)(t.getAt(e.getRegularIndex(n)),f.map((function(e){return(0,d.kG)(e.positionState.watched,"Regular card should be watched"),e})))};var n=function(t,n){return(0,l.pipe)(t.getAt(e.getRegularIndex(n)),f.filter((function(e){return e.positionState.watched})))};e.getItemsPositionsUpdateTransformer=function(t){return function(n){var r=n.state,i=n.metadata;if(!T.nL.hasCards(r))return g.left({state:r,metadata:i});var a=T.nL.Prism.getLens();return g.left({state:a.modify(e.updateItemsPositions(t),r),metadata:i})}},e.updateItemsPositions=function(t){return function(r){var i=e.getRegularIndex(r.cardIndex),a=T.In.getActiveItem(r),o=(0,l.pipe)(function(e){return(0,l.pipe)(n(e.items,e.cardIndex),f.filter((function(e){return e.positionState.isHeightValid&&!e.scheduledToDispose})),f.map((function(e){return e.positionState.height})))}(r),p.vx((0,l.pipe)(r.items.find((function(e){return e.positionState.watched&&(0,l.pipe)(a,p.wo((function(t){return t.id!==e.id})))})),f.filter((function(e){return e.value.positionState.isHeightValid&&!e.value.scheduledToDispose})),f.map((function(e){return e.value.positionState.height}))))),s=0,c=(0,l.pipe)(a,p.wo((function(e){return e.positionState.isHeightValid}))),u=r.items.map((function(e,n,a){var u=p.FX(a)(r.cardIndex),d=u||a===i,m=e.scheduledToDispose||(u?e.positionState.isHeightValid:f.isSome(o)),h=e.scheduledToDispose?0:u?e.positionState.height:(0,l.pipe)(o,f.getOrElse((function(){return e.positionState.height}))),g={absTop:u||c?s:e.positionState.absTop,height:h,animationInProgress:r.animation(e,a),visible:e.positionState.visible,isHeightValid:m,watched:d};return s+=h,I.Z.eq.equals(e.positionState,g)?e:t.changePosition(g)(e)})),d=e.calculateCardsHeight(u),m=(0,l.pipe)(a,p.wo((function(e){return e.positionState.isHeightValid})))&&(0,l.pipe)(u.getAt(i),p.wo((function(e){return e.positionState.isHeightValid})));return r.changeVisibleItems(u).changeCardsHeight(d,m)}},e.filterAlertInLens=function(e){return o.filter((function(t){return y.bZ.isNotRemoved(t)||e.items.has(e.getCardId(t))}))}}(F||(F={}));var B=T.In.getActiveItemOfType(D);function D(e){return e.kind===E.h.alertCard}function H(e){return(0,l.pipe)(e,f.fold((function(){return 2433880}),(function(e){return null==e?9735524:e.hashCode()<<2})))}},26268:(e,t,n)=>{"use strict";n.d(t,{tn:()=>r,$A:()=>i,EQ:()=>a});var r,i,a,o=n(45980),s=n(73805),c=n(65772),l=n(8125),u=n(95574),d=n(22232),p=n(64909),f=n(83078),m=n(17753),h=n(10002),g=n(32952),v=n(28043),y=n(66310),b=n(40151),w=n(79462),_=n(78674),C=n(77176),S=n(598),A=n(83401),x=n(52479),I=n(99391),E=n(2834),k=n(40250),T=n(41199),R=n(50634),L=n(40644),P=n(38524);!function(e){!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(e.Type||(e.Type={}))}(r||(r={})),function(e){var t=function(){function e(){this.events=new g.xQ,this.focusAlertHighlight=function(){return c.left(new Error("Method not implemented."))},this.highlightAlertHighlight=function(){return c.left(new Error("Method not implemented."))},this.moveCursorToHighlight=l.ZT}return e.prototype.ensureAlertHighlightInViewport=function(){throw new Error("Method not implemented.")},e.prototype.getMarkByAlert=function(e){throw new Error("Method not implemented.")},e.prototype.getAlertByMark=function(e){throw new Error("Method not implemented.")},e}();e.Mock=t,e.getHighlightIndex=function(e,t){return(0,s.pipe)(t,c.mapLeft((function(){return new Error("Mark is collapsed")})),c.chain((function(t){return u.vM((function(){var n=m.bZ.isSuperAlert(e)||m.bZ.isPremium(e)&&e.highlightTexts.length>1?e.getHighlightRanges().findIndex((function(e){return e.start===t.start&&e.end===t.end})):0;return(0,d.kG)(-1!==n,"Could not find higlight index by Range for provided Alert",(function(){return JSON.stringify({alertRanges:e.getHighlightRanges(),targetRange:t})})),n}))})))}}(i||(i={})),function(e){e.getHighlightSubscribtion=function(e,t,n){return e.pipe(v.x(p.getEq(T.$.ord).equals),y.w((function(e){return(0,s.pipe)(e,p.fold(b.c,(function(e){return w.y.create((function(){return n.debug("highlight mark: "+e.id),(0,s.pipe)(t.highlightAlertHighlight(e),c.fold((function(t){return n.error("Cannot highlight mark: "+e.id,t),l.ZT}),(function(t){return function(){n.debug("unhighlight mark: "+e.id),t.dispose()}})))}))})))})))},e.highlightMarkByHighlightedCard=function(t,n,r,i,a){var s=e.getHighlightSubscribtion(t.hovered.pipe(_.b(100),C.U((0,o.flow)(p.chain((function(e){var t=n.get();return P.nL.hasCards(t)?k.l.find(t.currentLens.items,(0,l.W9)(L.X.isAlertCard,(function(t){return t.id===e}))):p.none})),p.map((function(e){return e.value.activeAlert})),p.filter((function(e){return i.isRegistered(e.id)}))))),r,a);return{id:"highlightMarkByHighlightedAlert",when:h.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(s.pipe(S.c(A.F())))}},e.focusMarkByActiveAlert=function(e,t,n,r){var i=e.view(P.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return(0,s.pipe)(P.In.getActiveItemWithAlert(t),p.map((function(e){return{alert:e.activeAlert,source:n,highlightIndex:e.activeHighlightIndex}})))}))).pipe(y.w(x.b2.rafScheduler),I.skipBy(p.getEq(R.E.getEq())),C.U(p.filter((function(e){return p.isSome(n.getRegistered(e.alert.id))}))),E.b(f.bw((function(e){return r.trace("new alert highlight: ",e)}))),y.w(p.fold((function(){return r.debug("Nothing to focus"),b.c()}),(function(e){return w.y.create((function(){return r.debug("Focus mark: "+e.alert.id+" | "+e.highlightIndex),e.source===m.l$.sidebar&&t.moveCursorToHighlight(e,"start"),(0,s.pipe)(t.focusAlertHighlight(e),c.fold((function(t){return r.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),l.ZT}),(function(t){return function(){r.debug("Unfocus mark: "+e.alert.id+" | "+e.highlightIndex+"'"),t.dispose()}})))}))}))));return{id:"focusMarkByActiveAlert",when:h.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(i.pipe(S.c(A.F())))}}}(a||(a={}))},65247:(e,t,n)=>{"use strict";n.d(t,{x:()=>u,O:()=>y});var r,i=n(22788),a=n(18208),o=n(68983),s=n(10002),c=n(58199);function l(e){return e+" "+a._6(e,"alert","alerts")}var u,d=function(e,t){return function(n,r,i,a){var o=a?n.count:n.priorityCount;return o>0?l(o):i&u.IsDocumentEmpty?e:t}},p={description:"Improves spelling, grammar, and punctuation.",stateMessage:d("No alerts","Looking good")},f={description:"Helps make your writing easier to understand.",stateMessage:function(e,t,n){var r=(0,o.W)(i.lt(c.g.ord))(t);if(n&u.IsDocumentEmpty)return"So far so good";if(e.count>0){if(c.g.isMin(t))return l(e.count);if(r(c.g.fromNumber(20)))return"Unclear";if(r(c.g.fromNumber(70)))return"A bit unclear";if(r(c.g.fromNumber(85)))return"Mostly clear";if(r(c.g.fromNumber(95)))return"Clear"}return"Very clear"}},m={description:"Helps make your writing more interesting and effective.",stateMessage:function(e,t,n){var r=n&u.IsFreeUser,a=c.g.isMin(t),s=(0,o.W)(i.lt(c.g.ord))(t);if(n&u.IsDocumentEmpty||r&&a)return"Nothing yet";if(r||e.count>0){if(a)return l(e.count);if(s(c.g.fromNumber(20)))return"Bland";if(s(c.g.fromNumber(80)))return"A bit bland";if(s(c.g.fromNumber(95)))return"Engaging"}return"Very engaging"}},h={description:"Helps you make the right impression on your reader.",stateMessage:function(e,t,n){var r=n&u.IsFreeUser,a=c.g.isMin(t),s=(0,o.W)(i.lt(c.g.ord))(t);if(n&u.IsDocumentEmpty||r&&a)return"Nothing yet";if(r||e.count>0){if(a)return l(e.count);if(s(c.g.fromNumber(20)))return"Serious issues";if(s(c.g.fromNumber(40)))return"Very off";if(s(c.g.fromNumber(95)))return"Slightly off"}return"Just right"}},g={description:"Your organizations writing guidelines.",stateMessage:d("Nothing yet","All good")},v=((r={})[s.R.SpecialId.Correctness]=p,r[s.R.SpecialId.CorrectnessPriority]=p,r[s.R.SpecialId.Clarity]=f,r[s.R.SpecialId.ClarityPriority]=f,r[s.R.SpecialId.Engagement]=m,r[s.R.SpecialId.EngagementPriority]=m,r[s.R.SpecialId.Delivery]=h,r[s.R.SpecialId.DeliveryPriority]=h,r[s.R.SpecialId.Vox]=g,r[s.R.SpecialId.VoxPriority]=g,r[s.R.SpecialId.Plagiarism]={description:"Checks for similarities to published writing.",stateMessage:function(e,t,n){return n&u.IsLensVisited&&!(n&u.IsDocumentEmpty)?n&u.IsLensActive?c.g.isMin(t)?"100% original":t+"% unoriginal":"Recheck":"Not checked yet"}},r[s.R.SpecialId.Premium]={description:"Offers more suggestions on how to improve your writing.",stateMessage:function(e,t,n){return n&u.IsDocumentEmpty?"Advanced checks":e.count+" more "+a._6(e.count,"alert","alerts")}},r);function y(e){return v[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(u||(u={}))},87325:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var r,i=n(45980),a=n(64909),o=n(27221);!function(e){!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){var t=function(){this.downloadStarted=o.h.create(!1),this.beginDownload=i.constVoid,this.tryToInterrupt=i.constVoid,this.generateReport=function(){throw new Error("Method not implemented.")},this.reportData=o.h.create(a.none),this.dedHTML="",this.dispose=i.constVoid};e.Mock=t}(e.ViewModel||(e.ViewModel={}))}(r||(r={}));var s,c=n(76974);!function(e){var t;!function(e){!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){var n=function(e,n){void 0===e&&(e={type:t.Type.EMPTY}),void 0===n&&(n=a.some(new r.ViewModel.Mock)),this.statisticsState=e,this.reportViewModel=n,this.state=c.of(this.statisticsState),this.onModalClose=i.constVoid};e.Mock=n}(e.ViewModel||(e.ViewModel={}))}(s||(s={}))},15228:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});var r,i=n(73805),a=n(27221),o=n(84966),s=n(64909),c=n(10002),l=n(38524),u=n(32952),d=n(85985),p=n(77176),f=n(66310),m=n(52479),h=n(93508),g=n(16118),v=n(76974),y=n(50628),b=n(17343),w=n(66265),_=n(2834);!function(){function e(e,t,n,v,y){var b=this;this._state=e,this._documentModel=t,this._trackSuccessStateChanged=n,this.nonPriorityOptions=v,this.mutedAlertsOptions=y,this._getTextAmount=function(e){return 0===e?r.TextAmount.zero:e<=o.hD?r.TextAmount.small:r.TextAmount.large},this._subs=[],this.successState=a.h.create({type:r.SuccessType.zero}),this.textAmount=a.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new u.xQ,this.applicatorEffects={id:"successViewModel.effects",when:c.R.isWithAlertsId,what:l.nL.Effect.Applicator.create(this.actionEvents.pipe(d.h((function(e){return e.type===r.ActionType.More})),p.U((function(){return function(e){var t=e.patch({currentLens:(0,l.yi)(e.currentLens)?e.currentLens.toggleNonPriorityList():e.currentLens});return(0,i.pipe)(t.currentLens.findFirstAlert(),s.fold((function(){return t}),(function(e){return t.patch({currentLens:t.currentLens.select(e)})})))}}))))},this._currentLens=this._state.view((function(e){return{isSuccess:l.nL.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:l.nL.isLensview(e)&&0!==e.currentLens.activeAlertsCount,isAllAlerts:c.R.isMainLens(e.currentLens.id)}})),this._listenTextSize=function(){return b._currentLens.view((function(e){return e.isSuccess})).pipe(f.w(m.Ft(b._documentModel.documentLength.view("trimmed"))),p.U(b._getTextAmount)).subscribe(m.wW(b.textAmount))},this._lensSwitch=this._currentLens.pipe(h.O(this._currentLens.get()),g.G(),p.U((function(e){var t=e[0],n=e[1];return n.isSuccess?s.fromNullable({prevLensType:t.type,nonPriorityAlertsLeft:n.nonPriorityAlertsLeft,isAllAlerts:n.isAllAlerts}):s.none}))),this._textAmountToSuccessType=function(e){return e===r.TextAmount.zero?{type:r.SuccessType.zero}:e===r.TextAmount.large?{type:r.SuccessType.large}:{type:r.SuccessType.small}},this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,i.pipe)(v,s.map((function(e){return{hasNonPriorityAlerts:b._state.view((function(e){return l.nL.isWithPriorityList(e)&&e.currentLens.onlyNonPriorityAlertsLeft})),reviewNonPriorityAlerts:function(){e.trackNonPriorityToggle(),b.actionEvents.next({type:r.ActionType.More})}}}))),this.mutedAlerts=(0,i.pipe)(y,s.map((function(){return{reviewMutedSuggestions:function(){},mutedSuggestionsCount:b._state.view((function(e){return e.currentLens.meta.mutedCount}))}})))}e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._listenSuccessStateChange=function(){var e=this;return this._lensSwitch.pipe(w.cp((function(t){return e.textAmount.pipe(p.U(e._textAmountToSuccessType),h.O(t.prevLensType===l.Nm.lensview?{type:r.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:e._textAmountToSuccessType(e.textAmount.get())),g.G(),p.U((function(e){var t=e[0],n=e[1];return t.type===r.SuccessType.applied&&n.type!==r.SuccessType.zero?t:n})),f.w((function(t,n){return 0===n?v.of(t):(i=t).type===r.SuccessType.applied||i.type===r.SuccessType.zero?v.of(i):e._documentModel.checkingState.pipe(d.h((function(e){return"checking"!==e})),y.P(),b.h(i));var i})),_.b((function(t){e._trackSuccessStateChanged(t.type===r.SuccessType.applied?"applied":t.type===r.SuccessType.zero?"nothingToCheck":"noIssues")})))}))).subscribe(m.wW(this.successState))}}();!function(e){var t,n;!function(e){e.More="More"}(e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(t=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied"}(n=e.SuccessType||(e.SuccessType={}));var r=function(){function e(){this.textAmount=a.h.create(t.zero),this.successState=a.h.create({type:n.zero}),this.mutedSuggestionsCount=a.h.create(0),this.hasNonPriorityAlerts=a.h.create(!1)}return e.prototype.reviewMutedSuggestions=function(){throw new Error("Method not implemented.")},e.prototype.reviewNonPriorityAlerts=function(){throw new Error("Method not implemented.")},e.prototype.dispose=function(){throw new Error("Method not implemented.")},e}();e.Mock=r}(r||(r={}))},64437:(e,t,n)=>{"use strict";n.d(t,{g:()=>v,m:()=>y});var r=n(59312),i=n(90351),a=n(22823),o=n(71031),s=n(13097),c={position:"relative",borderRadius:a.u.rem(s.Jr),background:i.Il.CoreNeutral0,boxShadow:"0 "+a.u.rem(.625)+" "+a.u.rem(s.mJ)+" 0 rgba(198, 203, 222, .45)"},l={$nest:{"&:before":{position:"absolute",width:a.u.px(10),height:a.u.px(10),borderRadius:a.u.percent(50),content:"''",transform:"scale(.5)"}}},u={$nest:{"&:before":{backgroundColor:o.kl}}},d={$nest:{"&:before":{backgroundColor:o.AX}}},p={$nest:{"&:before":{backgroundColor:i.Il.CoreRed50}}},f={$nest:{"&:before":{backgroundColor:i.Il.CoreBlue50}}},m={$nest:{"&:before":{backgroundColor:i.Il.CoreGreen50}}},h={$nest:{"&:before":{backgroundColor:i.Il.CorePurple50}}},g={$nest:{"&:before":{backgroundColor:i.Il.CoreNeutral50}}},v={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},y=(0,r.__assign)((0,r.__assign)({},a.u.stylesheet({dot:[l],dotAdvanced:[d],dotCritical:[u],dotCorrectness:[p],dotClarity:[f],dotEngagement:[m],dotDelivery:[h],dotVox:[g]})),{fullCard:a.u.joinClasses([v.fullCardSelector,a.u.style(c)])})},90600:(e,t,n)=>{"use strict";n.d(t,{d:()=>E});var r=n(59312),i=n(27378),a=n(71215),o=n(27221),s=n(64909),c=n(19962),l=n(92932),u=n(71517),d=n(73510),p=n(77176),f=n(24209),m=n(18625),h=n(66310),g=n(40151),v=n(16528),y=n(2834),b=n(49708),w=n(93508),_=n(17343),C=n(52479),S=n(76974),A=n(99391),x=n(67434),I=n(57091),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._log=l.C8.Logging.getLogger("CardsListConnectorView",l.zW.LogLevel.DEBUG),t._subs=new d.w.Keeper,t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.isMaster&&this._setMaster()},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:n}),this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",n),this.forceUpdate((function(){t._setMaster(),t._log.trace("view force update complete",n)}))):(this._log.trace("set master view",n),this._setMaster()):(this._log.trace("release master view",n),this._clearSubs())},t.prototype.componentWillUnmount=function(){this._clearSubs()},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.height;return i.createElement(a.F.div,{"data-purpose":"card-list-connector",style:r.pipe(p.U((function(e){return{height:e}}))),className:t},n)},t.prototype._setMaster=function(){this._setSubs()},t.prototype._setSubs=function(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())},t.prototype._clearSubs=function(){this._subs.dispose()},t}(i.Component);!function(e){!function(e){e.create=function(){return o.h.create({scrollProvider:s.none,scrollConsumer:s.none,viewport:s.none,title:s.none})}}(e.Elements||(e.Elements={})),e.boundedScrollListener=function(e,t){return f.T(m.P((function(){e.paddingTop.set(0)})),t.view("viewport").pipe(h.w(s.fold(g.c,(function(e){return v.YC(e).pipe(p.U((function(t){return(0,r.__assign)((0,r.__assign)({},t),{top:e.offsetTop,height:e.offsetHeight})})))}))),y.b((function(t){return e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})}))),t.view("scrollProvider").pipe(h.w(s.fold(g.c,(function(t){return b.R(t,"scroll").pipe(p.U((function(){return t.scrollTop})),w.O(t.scrollTop),y.b((function(t){return e.scrollTop.set(t)})),_.h(C.PU))})))),t.view("title").pipe(h.w(s.fold((function(){return S.of(c.UL.empty)}),(function(e){return v.YC(e)}))),p.U((function(e){return e.height})),A.shareReplay({bufferSize:1,refCount:!0}),y.b((function(t){return e.paddingTop.set(t)}))),t.view("scrollConsumer").pipe(h.w(s.fold(g.c,(function(t){return e.scrollOffset.pipe(y.b((function(e){t.scrollTop+=e})))}))))).pipe(_.h(void 0))},e.superScrollListener=function(e,t){var n=t.view("title").pipe(h.w(s.fold((function(){return S.of(c.UL.empty)}),(function(e){return v.YC(e)}))),p.U((function(e){return e.height})),A.shareReplay({bufferSize:1,refCount:!0}));return f.T(m.P((function(){e.paddingTop.set(0)})),t.view("viewport").pipe(h.w(s.fold(g.c,(function(e){return v.YC(e).pipe(p.U((function(t){return(0,r.__assign)((0,r.__assign)({},t),{top:e.offsetTop,height:e.offsetHeight})})))}))),y.b((function(t){return e.viewport.set({top:u.r.FromWindowTop.ISO.wrap(t.top),height:t.height})}))),t.view("scrollProvider").pipe(h.w(s.fold(g.c,(function(t){return b.R(t,"scroll").pipe(p.U((function(){return t.scrollTop})),w.O(t.scrollTop),y.b((function(t){return e.scrollTop.set(t)})),_.h(C.PU))})))),t.view("scrollConsumer").pipe(h.w(s.fold(g.c,(function(t){return e.scrollOffset.pipe(x.R((function(e,t){return e-t}),0),y.b((function(e){t.style.transform="translateY("+e+"px)"})))}))),I.a(n),y.b((function(t){var n=t[0],r=t[1];return e.paddingTop.set(n+r)})))).pipe(_.h(void 0))}}(E||(E={}))},83305:(e,t,n)=>{"use strict";n.d(t,{TG:()=>Q});var r,i=n(59312),a=n(27378),o=n(45980),s=n(73805),c=n(71215),l=n(85746),u=n(27221),d=n(22232),p=n(19962),f=n(83078),m=n(64909),h=n(93583),g=n(22168),v=n(8125),y=n(92932);!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(r||(r={}));var b=function(){function e(){this._steps={},this.cpuAndAnimationOptsExperiment=!1}return e.prototype.isStepEnabled=function(e){return void 0!==this._steps[e]},e.prototype.relaunchAllSteps=function(){y.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")},e.prototype.setState=function(e,t){this.subscribeForStep(e).state.set(t)},e.prototype.subscribeForStep=function(e){var t=u.h.create(r.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotShown:v.ZT,dotClicked:function(){return t.set(r.Popup)},popupClosed:function(){return t.set(r.Passed)},popupIgnored:function(){return t.set(r.Hidden)},actionTaken:function(){return t.set(r.Passed)}})},e.prototype.getStepCompletionCallback=function(e){throw new Error("Method not implemented.")},e.prototype.changeState=function(e){},e}(),w=n(52479),_=n(77176),C=n(95093),S=n(85985),A=n(598),x=n(41398),I=n(90351),E=n(22823),k=n(71031),T=n(13097),R=I.Il.BackgroundTooltip,L=E.u.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:"0 0 0 "+E.u.rem(1)+" rgba(95, 139, 250, 0)"},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),P={width:E.u.rem(1),height:E.u.rem(1),borderRadius:E.u.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:L+" 2s infinite",$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},M=E.u.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),N={width:E.u.rem(1),height:E.u.rem(1),borderRadius:E.u.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:E.u.rem(1),height:E.u.rem(1),borderRadius:E.u.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:M+" 2s infinite",willChange:"transform"},"&:hover:before":{animation:"none"}}},F={margin:E.u.rem(-1.5)+" 0 0 "+E.u.rem(-1.5),padding:E.u.rem(1),borderRadius:E.u.percent(50),cursor:"pointer",pointerEvents:"all"},O={margin:"0 0 "+E.u.rem(.5),color:I.Il.CoreNeutral0,fontWeight:"bold"},B={color:I.Il.CoreNeutral0,lineHeight:E.u.rem(1.25)},D={display:"flex",padding:E.u.rem(1)+" "+E.u.rem(1.5)+" "+E.u.rem(1.25)+" "+E.u.rem(2),width:E.u.rem(23),borderRadius:E.u.rem(T.fx),background:R,color:I.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},H={marginRight:E.u.rem(2),width:E.u.rem(2),flexShrink:0,alignSelf:"center"},W={stroke:k.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:I.Il.CoreNeutral0,fill:I.Il.CoreNeutral0}}},U={position:"absolute",top:E.u.percent(50),left:E.u.percent(50),zIndex:T.I3},z={position:"relative",zIndex:T.VN},X={zIndex:T.w$},G={position:"absolute",zIndex:T.w$},V=E.u.prefixedStylesheet("onboarding",{pulse:[P],pulseWrapper:[F],header:[O],description:[B],stepWrapper:[D],content:[{display:"inline-block"}],alertIcon:[H],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[W],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[U],containerDiv:[{}],editor:[z],onboardingPopup:[X],notificationContainer:[G],pulseOptimized:[N]}),q=n(39499),Y=n(41439),$=n(38206),j=n(45836),Z=function(e){var t=e.alignment,n=e.rect,r=e.onClose,o=e.className,u=e.children,d=e.icon,p=e.pinTargetRect,f=e.hideCloseButton,h=e.onMount;return a.createElement($.t.ByRelativeRect,(0,i.__assign)({rect:n,className:V.notificationContainer},$.t.Alignment.toSelector(t),{pinTargetRect:p,withPin:!0}),a.createElement(c.F.div,(0,i.__assign)({},(0,l.Sh)(V.stepWrapper,o),{mount:h}),(0,s.pipe)(d,m.fold((function(){return a.createElement(Y.JO.Grammarly,{className:V.alertIcon})}),(function(e){return a.createElement(e,{className:V.alertIcon})}))),u,!f&&a.createElement(q.zx,{name:"onboard-close",className:V.closeIconWrapper,onClick:function(){return r&&r()}},a.createElement(Y.JO.Close,{className:V.closeIcon,width:12}))))},J=function(e){var t=e.title,n=e.description,r=(0,i.__rest)(e,["title","description"]);return a.createElement(Z,(0,i.__assign)({},r),a.createElement("span",{className:V.content},t&&a.createElement(j.P1,{className:V.header},t),a.createElement(j.XY,{className:V.description},n)))},K=function(e){var t=e.className,n=e.onClick,r=e.customStyle,o=e.enableOptimizations;return a.createElement(c.F.div,(0,i.__assign)({},(0,l.Sh)(V.pulseWrapper,t),{style:r,onClick:function(){return n&&n()}}),a.createElement("div",{className:o?V.pulseOptimized:V.pulse}))};function Q(e){var t=e.stepId,n=e.onboardingViewModel,r=(0,i.__rest)(e,["stepId","onboardingViewModel"]),o=n||a.useContext(Q.Context),c=ee(t,o),l=a.useContext(g.l.Context).pipe(_.U((function(e){return e.rect})));return(0,s.pipe)(c,m.fold((function(){return a.Children.only(e.children)}),(function(e){return a.createElement(te,(0,i.__assign)({},r,{onboardingStep:e,enableOptimizations:o.cpuAndAnimationOptsExperiment,viewportRect:l}))})))}var ee=function(e,t){return(0,d.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?m.some(t.subscribeForStep(e)):m.none},te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._wrapperElement=u.h.create(m.none),t._containerElement=u.h.create(m.none),t._exactTargetRect=u.h.create(m.none),t._visibilityState=u.h.create(!t.props.findFirstButton),t._spotStyle=u.h.create({}),t._onEventActionTaken=function(e,n){return void 0===n&&(n=!0),function(r){var i=e.state.get();if("popup"===i||n&&"dot"===i){var a=r.target;if(p.pK(a))return;var o=n||p.q_(a,V.containerDiv);if(t.props.findFirstButton&&!p.q2(a,"role","button"))return;o&&e.actionTaken()}else"dot"===i&&(r.preventDefault(),r.stopPropagation())}},t}return(0,i.__extends)(t,e),t.prototype.componentWillUnmount=function(){var e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach((function(e){return e.unsubscribe()}))},t.prototype.componentDidMount=function(){var e=this;if(this.props.findFirstButton){var t=this.props.findFirstButton.dotPosition,n=this.props.findFirstButton.buttonOrder;this._subs.push(this.context.pipe(C.T(this.props.onboardingStep.state.pipe(S.h((function(e){return"dot"===e||"popup"===e})))),A.c(w.Dx(n)),x.M(this._wrapperElement,this._containerElement)).subscribe((function(n){var r=n[0],i=n[1],a=n[2];return setTimeout((function(){(0,s.pipe)(i,m.map((function(n){(0,s.pipe)(a,m.map((function(i){var a=i.querySelectorAll('[role="button"]'),s=a.length>0&&(void 0===r?a[a.length-1]:a[r]);if(s){var c=p.UL.fromEl((0,o.unsafeCoerce)(s)),l=p.UL.fromEl(n);switch(e._exactTargetRect.set(m.some(c)),t){case"rightTop":e._spotStyle.set({top:0,left:c.left-l.left+c.width});break;case"center":e._spotStyle.set({top:c.top-l.top+c.height/2,left:c.left-l.left+c.width/2});break;default:(0,d.vE)(t)}e._visibilityState.set(!0)}})))})))}),500)})))}},t.prototype.render=function(){var e=this,t=this.props.onboardingStep;return a.createElement(c.F.div,(0,i.__assign)({key:"onboarding-wrapper"},(0,l.Sh)(V.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:function(t){return e._wrapperElement.set(m.fromNullable(t))}}),a.createElement("div",(0,i.__assign)({key:"container",ref:function(t){return e._containerElement.set(m.fromNullable(t))}},(0,l.Sh)(V.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(t,"onclick"===this.props.eventType),onMouseEnter:function(n){return"onhover"===e.props.eventType&&e._onEventActionTaken(t,!1)(n)}}),this.props.children),u.h.combine(t.state,this._visibilityState,(function(n,r){if(!r)return null;switch(n){case"dot":var o=e.props.themes&&e.props.themes.spotClassName;return e.props.onboardingStep.dotShown(),a.createElement(K,(0,i.__assign)({customStyle:e._spotStyle,key:"spot",enableOptimizations:e.props.enableOptimizations},(0,l.Sh)(V.onboardingSpot,o),{onClick:function(){return t.dotClicked()}}));case"popup":return a.createElement(J,{key:"step",title:e.props.title,alignment:e.props.alignment,rect:e._containerElement.view(m.fold((function(){return p.UL.empty}),p.UL.fromEl)),className:e.props.themes&&e.props.themes.notificationClassName,description:e.props.message,icon:m.fromNullable(e.props.icon),onClose:function(){return t.popupClosed()},pinTargetRect:e._exactTargetRect.view(f.Fc)});default:return null}})))},t.contextType=h.u.Context,t.defaultProps={alignment:"left"},t}(a.Component);!function(e){e.Context=a.createContext(null),e.ContextMock=function(t){var n=t.children;return a.createElement(e.Context.Provider,{value:new b,children:n})}}(Q||(Q={}))},25781:(e,t,n)=>{"use strict";var r,i;n.d(t,{R:()=>r}),function(e){e.ESC_CODE=27}(r||(r={})),function(e){e.isLeftMouseButtom=function(e){return 1===e.which||0===e.button}}(i||(i={}))},51072:(e,t,n)=>{"use strict";n.d(t,{Vi:()=>i});var r=n(95574);function i(e){return e().then(r.MH)}},84347:(e,t,n)=>{"use strict";e.exports=n(87612)},17123:e=>{"use strict";var t={};t.create=function(e,t){var n=document.createElement(e);return n.className=t,n},t.appendTo=function(e,t){return t.appendChild(e),e},t.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}(e,t):void 0===n?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},t.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},t.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},t.queryChildren=function(e,n){return Array.prototype.filter.call(e.childNodes,(function(e){return t.matches(e,n)}))},e.exports=t},97490:e=>{"use strict";var t=function(e){this.element=e,this.events={}};t.prototype.bind=function(e,t,n){void 0===this.events[e]&&(this.events[e]=[]);var r={capture:!1};this.events[e].push(t),this.element.addEventListener(e,t,n?Object.assign({},r,n):r)},t.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter((function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)}),this)},t.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(e){var n=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===n&&(n=new t(e),this.eventElements.push(n)),n},n.prototype.bind=function(e,t,n,r){this.eventElement(e).bind(t,n,r)},n.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=n},48928:e=>{"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},95889:(e,t,n)=>{"use strict";var r=n(17123),i=t.toInt=function(e){return parseInt(e,10)||0};function a(e){return["ps--in-scrolling"].concat(void 0===e?["ps--x","ps--y"]:["ps--"+e])}t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];0===n.indexOf("ps-")&&e.classList.remove(n)}},t.outerWidth=function(e){return i(r.css(e,"width"))+i(r.css(e,"paddingLeft"))+i(r.css(e,"paddingRight"))+i(r.css(e,"borderLeftWidth"))+i(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){for(var n=a(t),r=0;r<n.length;r++)e.classList.add(n[r])},t.stopScrolling=function(e,t){for(var n=a(t),r=0;r<n.length;r++)e.classList.remove(n[r])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},87612:(e,t,n)=>{"use strict";var r=n(81489),i=n(41835),a=n(64114);e.exports={initialize:i,update:a,destroy:r}},48300:e=>{"use strict";e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},81489:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109);e.exports=function(e){var t=a.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),a.remove(e))}},3708:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);e.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",(function(r){var o=r.pageY-window.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;a(e,"top",e.scrollTop+o*t.containerHeight),i(e),r.stopPropagation()})),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",(function(r){var o=r.pageX-window.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;a(e,"left",e.scrollLeft+o*t.containerWidth),i(e),r.stopPropagation()}))}(e,r.get(e))}},35672:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);function c(e,t){var n=null,a=null;var c=function(i){!function(i){var a=n+i*t.railXRatio,o=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=a<0?0:a>o?o:a;var c=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;s(e,"left",c)}(i.pageX-a),o(e),i.stopPropagation(),i.preventDefault()},l=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarX,"mousedown",(function(o){a=o.pageX,n=r.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",l),o.stopPropagation(),o.preventDefault()}))}function l(e,t){var n=null,a=null;var c=function(i){!function(i){var a=n+i*t.railYRatio,o=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=a<0?0:a>o?o:a;var c=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));s(e,"top",c)}(i.pageY-a),o(e),i.stopPropagation(),i.preventDefault()},l=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarY,"mousedown",(function(o){a=o.pageY,n=r.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",l),o.stopPropagation(),o.preventDefault()}))}e.exports=function(e){var t=a.get(e);c(e,t),l(e,t)}},94742:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);function c(e,t){var n=!1;t.event.bind(e,"mouseenter",(function(){n=!0})),t.event.bind(e,"mouseleave",(function(){n=!1}));t.event.bind(t.ownerDocument,"keydown",(function(a){if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||a.defaultPrevented)){var c=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(n||c){var l=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(l){if("IFRAME"===l.tagName)l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(r.isEditable(l))return}var u=0,d=0;switch(a.which){case 37:u=a.metaKey?-t.contentWidth:a.altKey?-t.containerWidth:-30;break;case 38:d=a.metaKey?t.contentHeight:a.altKey?t.containerHeight:30;break;case 39:u=a.metaKey?t.contentWidth:a.altKey?t.containerWidth:30;break;case 40:d=a.metaKey?-t.contentHeight:a.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=a.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=a.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=a.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}s(e,"top",e.scrollTop-d),s(e,"left",e.scrollLeft+u),o(e),function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(u,d)&&a.preventDefault()}}}))}e.exports=function(e){c(e,a.get(e))}},83476:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);function o(e,t){var n=!1;function r(r){var o=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(r),s=o[0],c=o[1];(function(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){var i=window.getComputedStyle(r);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var a=r.scrollHeight-r.clientHeight;if(a>0&&!(0===r.scrollTop&&n>0||r.scrollTop===a&&n<0))return!0;var o=r.scrollLeft-r.clientWidth;if(o>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===o&&t>0))return!0}return!1})(s,c)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(a(e,"top",c?e.scrollTop-c*t.settings.wheelSpeed:e.scrollTop+s*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a(e,"left",s?e.scrollLeft+s*t.settings.wheelSpeed:e.scrollLeft-c*t.settings.wheelSpeed),n=!0):(a(e,"top",e.scrollTop-c*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+s*t.settings.wheelSpeed)),i(e),(n=n||function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(s,c))&&(r.stopPropagation(),r.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",r):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",r)}e.exports=function(e){o(e,r.get(e))}},15335:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){i(e)}))}(e,r.get(e))}},23405:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);e.exports=function(e){!function(e,t){function n(n){var r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),o=r[0],s=r[1];t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?a(e,"top",s?e.scrollTop-s*t.settings.wheelSpeed:e.scrollTop+o*t.settings.wheelSpeed):t.scrollbarXActive&&!t.scrollbarYActive&&a(e,"left",o?e.scrollLeft+o*t.settings.wheelSpeed:e.scrollLeft-s*t.settings.wheelSpeed):(a(e,"top",e.scrollTop-s*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+o*t.settings.wheelSpeed)),i(e)}void 0!==window.onwheel?t.event.bind(e,"wheel",n,{passive:!0}):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",n,{passive:!0})}(e,r.get(e))}},19539:(e,t,n)=>{"use strict";var r=n(95889),i=n(6109),a=n(86057),o=n(21459);function s(e,t){var n=null,s={top:0,left:0};function c(){n&&(clearInterval(n),n=null),r.stopScrolling(e)}var l=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){var t;e.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?l=!0:(l=!1,c())})),t.event.bind(window,"mouseup",(function(){l&&(l=!1,c())})),t.event.bind(window,"keyup",(function(){l&&(l=!1,c())})),t.event.bind(window,"mousemove",(function(t){if(l){var u={x:t.pageX,y:t.pageY},d={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};u.x<d.left+3?(s.left=-5,r.startScrolling(e,"x")):u.x>d.right-3?(s.left=5,r.startScrolling(e,"x")):s.left=0,u.y<d.top+3?(s.top=d.top+3-u.y<5?-5:-20,r.startScrolling(e,"y")):u.y>d.bottom-3?(s.top=u.y-d.bottom+3<5?5:20,r.startScrolling(e,"y")):s.top=0,0===s.top&&0===s.left?c():n||(n=setInterval((function(){i.get(e)?(o(e,"top",e.scrollTop+s.top),o(e,"left",e.scrollLeft+s.left),a(e)):clearInterval(n)}),50))}}))}e.exports=function(e){s(e,i.get(e))}},76905:(e,t,n)=>{"use strict";var r=n(95889),i=n(6109),a=n(86057),o=n(21459);function s(e,t,n,r){function s(t,n){o(e,"top",e.scrollTop-n),o(e,"left",e.scrollLeft-t),a(e)}var c={},l=0,u={},d=null,p=!1,f=!1;function m(){p=!0}function h(){p=!1}function g(e){return e.targetTouches?e.targetTouches[0]:e}function v(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function y(e){if(v(e)){f=!0;var t=g(e);c.pageX=t.pageX,c.pageY=t.pageY,l=(new Date).getTime(),null!==d&&clearInterval(d),e.stopPropagation()}}function b(n){if(!f&&t.settings.swipePropagation&&y(n),!p&&f&&v(n)){var r=g(n),i={pageX:r.pageX,pageY:r.pageY},a=i.pageX-c.pageX,o=i.pageY-c.pageY;s(a,o),c=i;var d=(new Date).getTime(),m=d-l;m>0&&(u.x=a/m,u.y=o/m,l=d),function(n,r){var i=e.scrollTop,a=e.scrollLeft,o=Math.abs(n),s=Math.abs(r);if(s>o){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(o>s&&(n<0&&a===t.contentWidth-t.containerWidth||n>0&&0===a))return!t.settings.swipePropagation;return!0}(a,o)&&(n.stopPropagation(),n.preventDefault())}}function w(){!p&&f&&(f=!1,t.settings.swipeEasing&&(clearInterval(d),d=setInterval((function(){i.get(e)&&(u.x||u.y)?Math.abs(u.x)<.01&&Math.abs(u.y)<.01?clearInterval(d):(s(30*u.x,30*u.y),u.x*=.8,u.y*=.8):clearInterval(d)}),10)))}n?(t.event.bind(window,"touchstart",m),t.event.bind(window,"touchend",h),t.event.bind(e,"touchstart",y),t.event.bind(e,"touchmove",b),t.event.bind(e,"touchend",w)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",m),t.event.bind(window,"pointerup",h),t.event.bind(e,"pointerdown",y),t.event.bind(e,"pointermove",b),t.event.bind(e,"pointerup",w)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",m),t.event.bind(window,"MSPointerUp",h),t.event.bind(e,"MSPointerDown",y),t.event.bind(e,"MSPointerMove",b),t.event.bind(e,"MSPointerUp",w)))}e.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&s(e,i.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},41835:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a={"click-rail":n(3708),"drag-scrollbar":n(35672),keyboard:n(94742),wheel:n(83476),passiveWheel:n(23405),touch:n(76905),selection:n(19539)},o=n(15335);e.exports=function(e,t){e.classList.add("ps");var n=r.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+n.settings.theme),n.settings.handlers.forEach((function(t){a[t](e)})),o(e),i(e)}},6109:(e,t,n)=>{"use strict";var r=n(95889),i=n(48300),a=n(17123),o=n(97490),s=n(48928),c={};function l(e,t){var n,s,c=this;for(var l in c.settings=i(),t)c.settings[l]=t[l];function u(){e.classList.add("ps--focus")}function d(){e.classList.remove("ps--focus")}c.containerWidth=null,c.containerHeight=null,c.contentWidth=null,c.contentHeight=null,c.isRtl="rtl"===a.css(e,"direction"),c.isNegativeScroll=(s=e.scrollLeft,e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=s,n),c.negativeScrollAdjustment=c.isNegativeScroll?e.scrollWidth-e.clientWidth:0,c.event=new o,c.ownerDocument=e.ownerDocument||document,c.scrollbarXRail=a.appendTo(a.create("div","ps__scrollbar-x-rail"),e),c.scrollbarX=a.appendTo(a.create("div","ps__scrollbar-x"),c.scrollbarXRail),c.scrollbarX.setAttribute("tabindex",0),c.event.bind(c.scrollbarX,"focus",u),c.event.bind(c.scrollbarX,"blur",d),c.scrollbarXActive=null,c.scrollbarXWidth=null,c.scrollbarXLeft=null,c.scrollbarXBottom=r.toInt(a.css(c.scrollbarXRail,"bottom")),c.isScrollbarXUsingBottom=c.scrollbarXBottom==c.scrollbarXBottom,c.scrollbarXTop=c.isScrollbarXUsingBottom?null:r.toInt(a.css(c.scrollbarXRail,"top")),c.railBorderXWidth=r.toInt(a.css(c.scrollbarXRail,"borderLeftWidth"))+r.toInt(a.css(c.scrollbarXRail,"borderRightWidth")),a.css(c.scrollbarXRail,"display","block"),c.railXMarginWidth=r.toInt(a.css(c.scrollbarXRail,"marginLeft"))+r.toInt(a.css(c.scrollbarXRail,"marginRight")),a.css(c.scrollbarXRail,"display",""),c.railXWidth=null,c.railXRatio=null,c.scrollbarYRail=a.appendTo(a.create("div","ps__scrollbar-y-rail"),e),c.scrollbarY=a.appendTo(a.create("div","ps__scrollbar-y"),c.scrollbarYRail),c.scrollbarY.setAttribute("tabindex",0),c.event.bind(c.scrollbarY,"focus",u),c.event.bind(c.scrollbarY,"blur",d),c.scrollbarYActive=null,c.scrollbarYHeight=null,c.scrollbarYTop=null,c.scrollbarYRight=r.toInt(a.css(c.scrollbarYRail,"right")),c.isScrollbarYUsingRight=c.scrollbarYRight==c.scrollbarYRight,c.scrollbarYLeft=c.isScrollbarYUsingRight?null:r.toInt(a.css(c.scrollbarYRail,"left")),c.scrollbarYOuterWidth=c.isRtl?r.outerWidth(c.scrollbarY):null,c.railBorderYWidth=r.toInt(a.css(c.scrollbarYRail,"borderTopWidth"))+r.toInt(a.css(c.scrollbarYRail,"borderBottomWidth")),a.css(c.scrollbarYRail,"display","block"),c.railYMarginHeight=r.toInt(a.css(c.scrollbarYRail,"marginTop"))+r.toInt(a.css(c.scrollbarYRail,"marginBottom")),a.css(c.scrollbarYRail,"display",""),c.railYHeight=null,c.railYRatio=null}function u(e){return e.getAttribute("data-ps-id")}t.add=function(e,t){var n=s();return function(e,t){e.setAttribute("data-ps-id",t)}(e,n),c[n]=new l(e,t),c[n]},t.remove=function(e){delete c[u(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return c[u(e)]}},86057:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(21459);function s(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,n=a.get(e);n.containerWidth=e.clientWidth,n.containerHeight=e.clientHeight,n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||((t=i.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarXRail,e)),e.contains(n.scrollbarYRail)||((t=i.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarYRail,e)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=s(n,r.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=r.toInt((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=s(n,r.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=r.toInt(e.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,r),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,n),n.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,o(e,"left",0)),n.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,o(e,"top",0))}},21459:(e,t,n)=>{"use strict";var r=n(6109),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var a=r.get(e);"top"===t&&n>=a.contentHeight-a.containerHeight&&((n=a.contentHeight-a.containerHeight)-e.scrollTop<=2?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=a.contentWidth-a.containerWidth&&((n=a.contentWidth-a.containerWidth)-e.scrollLeft<=2?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),void 0===a.lastTop&&(a.lastTop=e.scrollTop),void 0===a.lastLeft&&(a.lastLeft=e.scrollLeft),"top"===t&&n<a.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>a.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<a.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>a.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&n!==a.lastTop&&(e.scrollTop=a.lastTop=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&n!==a.lastLeft&&(e.scrollLeft=a.lastLeft=n,e.dispatchEvent(i("ps-scroll-x")))}},64114:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);e.exports=function(e){var t=a.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),o(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},96558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicativeComposition=void 0;var r=n(3025);t.getApplicativeComposition=function(e,t){return{map:r.getFunctorComposition(e,t).map,of:function(n){return e.of(t.of(n))},ap:function(n,r){return e.ap(e.map(n,(function(e){return function(n){return t.ap(e,n)}})),r)}}}},72635:(e,t,n)=>{"use strict";t.D=void 0;var r=n(96558),i=n(64909);t.D=function(e){var t=r.getApplicativeComposition(e,i.Applicative),n=e.of(i.none);return{map:t.map,ap:t.ap,of:t.of,chain:function(t,r){return e.chain(t,i.fold((function(){return n}),r))},alt:function(t,n){return e.chain(t,i.fold(n,(function(t){return e.of(i.some(t))})))},fold:function(t,n,r){return e.chain(t,i.fold(n,r))},getOrElse:function(t,n){return e.chain(t,i.fold(n,e.of))},fromM:function(t){return e.map(t,i.some)},none:function(){return n}}}},18756:(e,t,n)=>{"use strict";function r(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!r(e)||!e.equals(t))}n.d(t,{AC:()=>o});function a(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return a(t)}return r(e)?e.hashCode():o(String(e))}function o(e){let t=0;if(null==e||0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}class s extends Error{constructor(e){let t="";for(const n of e.slice(0,2)){let e="";e=n instanceof Error?`${n.name}(${n.message})`:""+n,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=s,this.__proto__=s.prototype}errors(){return this.errorsRef.slice()}}Error;class c extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=c,this.__proto__=c.prototype}}Error;class l extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=l,this.__proto__=l.prototype}}class u extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=u,this.__proto__=u.prototype}}class d extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=p,this.__proto__=p.prototype}}function f(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function m(e,t,n){const r=e,i=r.prototype,a="fantasy-land/",o="equals",s=a+o,c="map",l=a+c,u="ap",d=a+u,p=a+"of",m="chain",h=a+m,g="chainRec",v=a+g;i.equals?i[s]=i.equals:n&&(i[s]=f(n.equals)),i.map?i[l]=i.map:t&&(i[l]=f(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=f(t.ap)),r.pure?r[p]=r.pure:t&&(r[p]=t.of),i.chain?i[h]=i.chain:t&&(i[h]=f(t.chain)),r.chainRec?r[v]=r.chainRec:t&&(r[v]=t.chainRec)}class h{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:v(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new c("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?b(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?v(this.value):b(this.value)}toOption(){return this._isRight?S(this.value):A}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?a(this.value)<<2:a(this.value)<<3}static pure(e){return new y(e)}static left(e){return v(e)}static right(e){return b(e)}static map2(e,t,n){return e.isLeft()?e:t.isLeft()?t:b(n(e.value,t.value))}static map3(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:b(r(e.value,t.value,n.value))}static map4(e,t,n,r,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:b(i(e.value,t.value,n.value,r.value))}static map5(e,t,n,r,i,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:b(a(e.value,t.value,n.value,r.value,i.value))}static map6(e,t,n,r,i,a,o){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:a.isLeft()?a:b(o(e.value,t.value,n.value,r.value,i.value,a.value))}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.isRight())return e;const r=e.value;if(r.isRight())return b(r.value);n=r.value}}}class g extends h{constructor(e){super(e,"left")}}function v(e){return new g(e)}class y extends h{constructor(e){super(e,"right")}}function b(e){return new y(e)}const w={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:h.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>h.tailRecM(t,(t=>e(h.left,h.right,t)))};m(h,w,w);class _{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new c("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?A:S(e(this.value))}flatMap(e){return this._isEmpty?A:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?A:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:a(this.value)<<2}static of(e){return null!=e?S(e):A}static some(e){return new _(e,!1)}static none(){return A}static empty(){return A}static pure(e){return S(e)}static map2(e,t,n){return e.nonEmpty()&&t.nonEmpty()?S(n(e.value,t.value)):A}static map3(e,t,n,r){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?S(r(e.value,t.value,n.value)):A}static map4(e,t,n,r,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?S(i(e.value,t.value,n.value,r.value)):A}static map5(e,t,n,r,i,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()?S(a(e.value,t.value,n.value,r.value,i.value)):A}static map6(e,t,n,r,i,a,o){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()?S(o(e.value,t.value,n.value,r.value,i.value,a.value)):A}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.nonEmpty())return A;{const t=e.value;if(t.isRight())return S(t.value);n=t.value}}}}class C extends _{constructor(e){super(e,!1)}}function S(e){return new C(e)}const A=new class extends _{constructor(){super(void 0,!0)}},x={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:_.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>_.tailRecM(t,(t=>e(h.left,h.right,t)))};m(_,x,x);class I{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?R(new c("try.failed()")):k(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:R(new c("Predicate does not hold for "+this.value))}catch(e){return R(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return R(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?I.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:I.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return R(e)}}toOption(){return this._isSuccess?S(this.value):A}toEither(){return this._isSuccess?b(this.value):v(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,a(this.value)}static of(e){try{return k(e())}catch(e){return R(e)}}static pure(e){return I.success(e)}static unit(){return P}static success(e){return k(e)}static failure(e){return R(e)}static raise(e){return R(e)}static map2(e,t,n){if(e.isFailure())return e;if(t.isFailure())return t;try{return k(n(e.value,t.value))}catch(e){return R(e)}}static map3(e,t,n,r){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;try{return k(r(e.value,t.value,n.value))}catch(e){return R(e)}}static map4(e,t,n,r,i){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;try{return k(i(e.value,t.value,n.value,r.value))}catch(e){return R(e)}}static map5(e,t,n,r,i,a){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;try{return k(a(e.value,t.value,n.value,r.value,i.value))}catch(e){return R(e)}}static map6(e,t,n,r,i,a,o){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(a.isFailure())return a;try{return k(o(e.value,t.value,n.value,r.value,i.value,a.value))}catch(e){return R(e)}}static tailRecM(e,t){let n=e;for(;;)try{const e=t(n);if(e.isFailure())return e;const r=e.get();if(r.isRight())return k(r.value);n=r.value}catch(e){return R(e)}}}class E extends I{constructor(e){super(e,"success")}}function k(e){return new E(e)}class T extends I{constructor(e){super(e,"failure")}}function R(e){return new T(e)}const L={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:I.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>I.tailRecM(t,(t=>e(h.left,h.right,t)))};m(I,L,L);const P=k(void 0);class M{static of(e){return new N(e)}static empty(){return O}static collection(...e){return new D(e)}static cancelAll(e){let t=null;for(const n of e)try{n.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new s(t)}}class N extends M{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class F{constructor(){this._funIsDummy=!0}cancel(){}}const O=new F;class B{static of(e){return new H(e)}static empty(){return new W}static alreadyCanceled(){return U}static collection(...e){return new D(e)}}class D extends B{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{M.cancelAll(this._refs)}finally{delete this._refs}}}class H extends N{isCanceled(){return null===this.thunk}}class W extends B{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const U=new class extends F{isCanceled(){return!0}};new class extends F{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class z{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof z){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new z}static of(e){return new z(M.of(e))}}class X{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{M.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||M.empty()}static empty(){return new X}static collection(...e){return new X(e)}}class G{constructor(e){this._underlying=e||O,this._chained=!1}update(e){if(!e)throw new u("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=O,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new u("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,n=!0;for(;t&&n;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,n=!!e}else t._underlying||(t=void 0),n=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof F||t.update(e)}else this.cancel();return this}static empty(){return new G}}class V{toString(){return this.label.toUpperCase()}}const q=1e3,Y=1e6,$=1e3*Y,j=60*$,Z=60*j,J=24*Z,K=9007199254740992,Q=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ee(e,t,n){return e>n?K:e<-n?-9007199254740992:e*t}const te=new class extends V{constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return Q(e/1e3)}toMillis(e){return Q(e/(Y/1))}toSeconds(e){return Q(e/($/1))}toMinutes(e){return Q(e/(j/1))}toHours(e){return Q(e/(Z/1))}toDays(e){return Q(e/(J/1))}};const ne=new class extends V{constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ee(e,1e3,Q(K/1e3))}toMicros(e){return e}toMillis(e){return Q(e/1e3)}toSeconds(e){return Q(e/($/q))}toMinutes(e){return Q(e/(j/q))}toHours(e){return Q(e/(Z/q))}toDays(e){return Q(e/(J/q))}};const re=new class extends V{constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ee(e,Y/1,Q(K/(Y/1)))}toMicros(e){return ee(e,1e3,Q(K/1e3))}toMillis(e){return e}toSeconds(e){return Q(e/1e3)}toMinutes(e){return Q(e/6e4)}toHours(e){return Q(e/(Z/Y))}toDays(e){return Q(e/(J/Y))}};const ie=new class extends V{constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ee(e,$/1,Q(K/($/1)))}toMicros(e){return ee(e,$/q,Q(K/($/q)))}toMillis(e){return ee(e,1e3,Q(K/1e3))}toSeconds(e){return e}toMinutes(e){return Q(e/60)}toHours(e){return Q(e/3600)}toDays(e){return Q(e/86400)}};const ae=new class extends V{constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ee(e,j/1,Q(K/(j/1)))}toMicros(e){return ee(e,j/q,Q(K/(j/q)))}toMillis(e){return ee(e,6e4,Q(K/6e4))}toSeconds(e){return ee(e,60,Q(K/60))}toMinutes(e){return e}toHours(e){return Q(e/60)}toDays(e){return Q(e/1440)}};const oe=new class extends V{constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ee(e,Z/1,Q(K/(Z/1)))}toMicros(e){return ee(e,Z/q,Q(K/(Z/q)))}toMillis(e){return ee(e,Z/Y,Q(K/(Z/Y)))}toSeconds(e){return ee(e,3600,Q(K/3600))}toMinutes(e){return ee(e,60,Q(K/60))}toHours(e){return e}toDays(e){return Q(e/24)}};const se=new class extends V{constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ee(e,J/1,Q(K/(J/1)))}toMicros(e){return ee(e,J/q,Q(K/(J/q)))}toMillis(e){return ee(e,J/Y,Q(K/(J/Y)))}toSeconds(e){return ee(e,86400,Q(K/86400))}toMinutes(e){return ee(e,1440,Q(K/1440))}toHours(e){return ee(e,24,Q(K/24))}toDays(e){return e}};class ce{constructor(e,t){if(isNaN(e))throw new u("NaN is not supported for a Duration");this.duration=Q(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return te.convert(this.duration,this.unit)}toMicros(){return ne.convert(this.duration,this.unit)}toMillis(){return re.convert(this.duration,this.unit)}toSeconds(){return ie.convert(this.duration,this.unit)}toMinutes(){return ae.convert(this.duration,this.unit)}toHours(){return oe.convert(this.duration,this.unit)}toDays(){return se.convert(this.duration,this.unit)}convertTo(e){return new ce(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return ce.negInf();case-1/0:return ce.inf();default:return new ce(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new u("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,n=e;return n.unit.ord<t.unit.ord&&(t=e,n=this),n=n.convertTo(t.unit),new ce(t.duration+n.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?ce.millis(e):e}static zero(){return new ce(0,se)}static inf(){return new ce(1/0,se)}static negInf(){return new ce(-1/0,se)}static nanos(e){return new ce(e,te)}static micros(e){return new ce(e,ne)}static millis(e){return new ce(e,re)}static seconds(e){return new ce(e,ie)}static minutes(e){return new ce(e,ae)}static hours(e){return new ce(e,oe)}static days(e){return new ce(e,se)}}class le{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const n=this.get,r=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=n,i._previous=r}}static of(e){return new le(e)}}function ue(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),n=[];for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)return n}}const de=Math.log(2);function pe(e){if(e<0)throw new u("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/de}(e));return 1<<(t>30?30:t&t)}class fe{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const n=this.batchIndex+1&t;return n?(this.batchIndex=n,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,n){const r=(e,i,a)=>i.update(e.scheduleOnce(a,(()=>{n(),r(e,i,t)}))),i=z.empty();return r(this,i,e)}scheduleAtFixedRate(e,t,n){const r=(e,t,i,a)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();n();const o=e.currentTimeMillis()-i,s=Math.max(0,a-o);r(e,t,a,s)}))),i=z.empty();return r(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}fe.global=le.of((()=>ve));class me{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=pe(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*o(this.type)+this.recommendedBatchSize}static synchronous(){return new me("synchronous")}static alwaysAsync(){return new me("alwaysAsync")}static batched(e){return new me("batched",e)}}me.global=le.of((()=>me.batched()));class he{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class ge extends fe{constructor(e=!1,t=me.global.get(),n){super(t),n&&(this.reportFailure=n),this._trampoline=new he(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(ye(e,this.reportFailure)):e=>setTimeout(ye(e,this.reportFailure))}executeAsync(e){throw new d("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const n=Math.max(0,ce.of(e).toMillis()),r=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),n);return M.of((()=>clearTimeout(r)))}withExecutionModel(e){return new ge(this._useSetImmediate,e)}}const ve=new ge(!0);function ye(e,t){return()=>{try{e()}catch(e){t(e)}}}class be{transform(e,t){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(t(e),this._scheduler)))}attempt(){return this.transform(v,b)}flatMap(e){return this.transformWith(be.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(be.raise,(t=>be.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,be.pure)}recover(e){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const n=this._scheduler;return this.transformWith(Ie(t,(e=>be.raise(e,n)),n),Ie(e,(e=>be.pure(e,n)),n))}toPromise(){return new Promise(((e,t)=>{this.onComplete((n=>n.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>be.delayedTick(e,this._scheduler).flatMap((()=>be.raise(t,this._scheduler)))),(t=>be.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=be.raise(new p(ce.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const n=[this,be.delayedTick(e,this._scheduler).flatMap((()=>t()))];return be.firstCompletedOf(n,this._scheduler)}static of(e,t=fe.global.get()){const n=Ae.empty(t);return t.executeAsync((()=>n.tryComplete(I.of(e)))),n.future()}static pure(e,t=fe.global.get()){return new we(k(e),t)}static raise(e,t=fe.global.get()){return new we(R(e),t)}static create(e,t=fe.global.get()){const n=Ae.empty(t);try{const t=e(n.complete);return n.future(t||void 0)}catch(e){return be.raise(e,t)}}static unit(e=fe.global.get()){const t=e;let n=t._funCache&&t._funCache.futureUnit;return n||(n=new we(k(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=n),n}static delayedTick(e,t=fe.global.get()){return be.create((n=>t.scheduleOnce(e,(()=>n(k(void 0))))),t)}static tailRecM(e,t,n=fe.global.get()){return t(e).flatMap((e=>e.isRight()?be.pure(e.get(),n):be.tailRecM(e.swap().get(),t,n)))}static fromPromise(e,t=fe.global.get()){return e instanceof be?e.withScheduler(t):be.create((t=>{e.then((e=>t(k(e))),(e=>t(R(e))))}),t)}static fromTry(e,t=fe.global.get()){return new we(e,t)}static firstCompletedOf(e,t=fe.global.get()){return function(e,t){return be.create((n=>{try{const r=ke(e,t);if(0===r.length)return n(R(new u("empty list of futures")));let i=!1;for(let e=0;e<r.length;e++){const a=e;r[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,Ee(r,t,a),n(e))}))}return M.of((()=>Ee(r,t)))}catch(e){n(R(e))}}),t)}(e,t)}static traverse(e,t=1/0,n=fe.global.get()){return r=>function(e,t,n,r){if(n<=0)throw new u("parallelism <= 0");return be.of((()=>ue(e)),r).flatMap((e=>Te(e,t,n,r,0,[])))}(e,r,t,n)}static sequence(e,t=fe.global.get()){return function(e,t){return be.create((n=>{try{const r=ke(e,t);if(0===r.length)return n(k([]));const i=M.of((()=>Ee(r,t)));let a=!1,o=0,s=[];for(let e=0;e<r.length;e++){const c=e;r[e].onComplete((e=>{o+=1,e.isSuccess()?a||(s[c]=e.get(),a=o===r.length,a&&n(k(s))):a?t.reportFailure(e.failed().get()):(a=!0,i.cancel(),n(e))}))}return i}catch(e){n(R(e))}}),t)}(e,t)}static map2(e,t,n,r=fe.global.get()){return be.sequence([e,t],r).map((e=>n(e[0],e[1])))}static map3(e,t,n,r,i=fe.global.get()){return be.sequence([e,t,n],i).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i,a=fe.global.get()){return be.sequence([e,t,n,r],a).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a,o=fe.global.get()){return be.sequence([e,t,n,r,i],o).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o,s=fe.global.get()){return be.sequence([e,t,n,r,i,a],s).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}}class we extends be{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return S(this._value)}withScheduler(e){return this._scheduler===e?this:new we(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return xe(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class _e{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return A;case"complete":return S(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const n=this.ref;if(this.ref=e,this.id="complete",n)for(let r=0;r<n.length;r++)t.executeBatched((()=>n[r](e)));return!0;case"complete":return!1;case"chained":const r=this.ref.compressedRoot(),i=r.tryComplete(e,t);return this.id="complete",this.ref=i?e:r.value().get(),i}}chainTo(e,t){switch(this.id){case null:const n=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),n&&n.length>0)for(let r=0;r<n.length;r++)e.onComplete(n[r],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const Ce={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:be.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>be.tailRecM(t,(t=>e(h.left,h.right,t)))};m(be,Ce);class Se extends be{constructor(e,t,n){super(),this._state=e,this._scheduler=n,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Se(this._state,this._cancelable,e)}transformWith(e,t){return xe(this,e,t,this._scheduler,this._cancelable)}}class Ae{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new l("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(k(e))}success(e){return this.complete(k(e))}tryFailure(e){return this.tryComplete(R(e))}failure(e){return this.complete(R(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){switch(this._state.id){case"complete":return new we(this._state.ref,this._scheduler);default:return new Se(this._state,e,this._scheduler)}}withScheduler(e){return this._scheduler===e?this:new Ae(this._state,e)}static empty(e=fe.global.get()){return new Ae(new _e,e)}static completed(e,t=fe.global.get()){const n=new _e;return n.id="complete",n.ref=e,new Ae(n,t)}}function xe(e,t,n,r,i){const a=Ae.empty(r),o=new G(i);return e.onComplete((e=>{let i;try{i=e.fold(t,n)}catch(e){i=be.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof G?e.chainTo(o):!e||e instanceof F||o.update(e)}else o.clear();i instanceof Se?i._state.chainTo(a._state,r):i.onComplete(a.tryComplete)})),a.future(o)}function Ie(e,t,n){return r=>{if("function"!=typeof e)return t(r);const i=e(r);return i?"function"==typeof i.then?be.fromPromise(i,n):be.pure(i,n):be.pure(r,n)}}function Ee(e,t,n=-1){const r=[];for(let t=0;t<e.length;t++)if(t!==n)try{e[t].cancel()}catch(e){r.push(e)}if(r.length>0)for(const e of r)t.reportFailure(e)}function ke(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const n=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)break}return n}catch(e){throw Ee(n,t),e}}function Te(e,t,n,r,i,a){if(i>=e.length)return be.pure(a,r);let o=[],s=0;try{for(;i<e.length&&s<n;)o.push(t(e[i++])),s+=1;const c=be.sequence(o,r).map((e=>{for(let t=0;t<e.length;t++)a.push(e[t])}));return i>=e.length?c.map((()=>a)):c.flatMap((()=>Te(e,t,n,r,i,a)))}catch(e){return Ee(o,r),be.raise(e)}}const Re={next:()=>({done:!0})};function Le(e){if(!e)return Re;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return Re;let n=0;return{next:()=>{const e=t[n++];return{done:n>=t.length,value:e}}}}class Pe{get(){return function(e){let t=e,n=null,r=null;for(;;)switch(t._tag){case"now":const e=t,i=We(n,r);if(!i)return e.value;n=null,t=i(e.value);break;case"always":case"once":t=new Me(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":n&&(r||(r=[]),r.push(n));const a=t;n=a.f,t=a.source}}(this)}map(e){return new De(this,(t=>Pe.now(e(t))))}flatMap(e){return new De(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Fe(this.get);default:return new Fe((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return Pe.always(e)}static pure(e){return Pe.now(e)}static now(e){return new Me(e)}static unit(){return Ne}static always(e){return new Oe(e)}static once(e){return new Fe(e)}static suspend(e){return new Be(e)}static defer(e){return Pe.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?Pe.now(e.get()):Pe.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return Pe.of((()=>Le(e))).flatMap((e=>Ue([],e)))}(e)}static map2(e,t,n){return Pe.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return Pe.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return Pe.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return Pe.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o){return Pe.sequence([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Me extends Pe{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const Ne=new Me(void 0);class Fe extends Pe{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class Oe extends Pe{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class Be extends Pe{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class De extends Pe{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const He={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Pe.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Pe.tailRecM(t,(t=>e(h.left,h.right,t)))};function We(e,t){return e||(t&&t.length>0?t.pop():null)}function Ue(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?Pe.pure(e):Ue(e,t))))}if(r)return Pe.pure(e)}}m(Pe,He);class ze{run(e=fe.global.get()){return function(e,t){let n=e,r=null,i=null;const a=t.executionModel.recommendedBatchSize-1;let o=t.batchIndex;for(;;)if(n instanceof I){if(n.isSuccess()){const e=et(r,i);if(!e)return t.batchIndex=o,be.pure(n.get());try{n=e(n.get())}catch(e){n=new Xe(I.failure(e))}}else{const e=n.failed().get(),a=tt(r,i);if(!a)return t.batchIndex=o,be.raise(e);try{n=a(e)}catch(e){n=new Xe(I.failure(e))}}r=null;const e=o+1&a;if(!e)return ot(n,t,r,i,!0);o=e}else switch(n._tag){case"pure":n=n.value;break;case"always":n=I.of(n.thunk);break;case"once":n=n.runTry();break;case"flatMap":const e=n;r&&(i||(i=[]),i.push(r)),r=e.g?[e.f,e.g]:e.f,n=e.source;break;case"async":case"memoize":return ot(n,t,r,i,!1)}}(this,e)}runOnComplete(e,t=fe.global.get()){return at(this,t,null,e,null,null,null)||M.empty()}attempt(){return this.transform((e=>h.left(e)),h.right)}asyncBoundary(e){return this.flatMap((t=>ze.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return ze.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>ze.delayedTick(e).flatMap((()=>ze.raise(t)))),(t=>ze.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(S(t)).flatMap((()=>ze.raise(t)))),(t=>e(A).map((()=>t))))}doOnCancel(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler;r.trampoline((()=>{const i=t.connection;i.push(M.of((()=>e.run(r)))),ze.unsafeStart(this,t,st(r,i,n))}))}))}executeForked(e){return ze.fork(this,e)}executeWithModel(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler.withExecutionModel(e),i=new Ze(r,t.connection,t.options);r.trampoline((()=>ze.unsafeStart(this,i,n)))}))}executeWithOptions(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=new Ze(r,t.connection,e);r.trampoline((()=>ze.unsafeStart(this,i,n)))}))}flatMap(e){return new Ye(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new Ye(this,(t=>ze.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new Ve(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new je(this,!1):e;default:return new je(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new Ve(this.thunk,!0);default:return new je(this,!0)}}recover(e){return this.recoverWith((t=>ze.now(e(t))))}recoverWith(e){return this.transformWith(e,ze.now)}timeout(e){const t=ze.raise(new p(ce.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const n=[this,ze.delayedTick(e).flatMap((()=>t))];return ze.firstCompletedOf(n)}transform(e,t){return this.transformWith((t=>ze.now(e(t))),(e=>ze.now(t(e))))}transformWith(e,t){return new Ye(this,t,e)}static always(e){return new qe(e)}static async(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=t.connection;r.trampoline((()=>{const t=st(r,i,n);try{const n=e(r,t);i.push(n||M.empty())}catch(e){t(R(e))}}))}))}static asyncUnsafe(e){return new $e(e)}static defer(e){return ze.unit().flatMap((()=>e()))}static deferAction(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler;let i;try{i=e(r)}catch(e){i=ze.raise(e)}r.trampoline((()=>ze.unsafeStart(i,t,n)))}))}static deferFuture(e){return ze.suspend((()=>ze.fromFuture(e())))}static deferFutureAction(e){return ze.deferAction((t=>ze.fromFuture(e(t))))}static delayedTick(e){return ze.asyncUnsafe(((t,n)=>{const r=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{r.pop(),n(I.unit())}));r.push(i)}))}static firstCompletedOf(e){return ut(e,be.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?ze.asyncUnsafe(((t,n)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),n(e)}))})):ze.fromTry(e.value().get())}static fromTry(e){return new Xe(e)}static fork(e,t){return ze.shift(t).flatMap((()=>e))}static map2(e,t,n){return ze.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return ze.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return ze.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return ze.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o){return ze.sequence([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new Xe(k(e))}static of(e){return ze.always(e)}static once(e){return new Ve(e,!1)}static parMap2(e,t,n){return ze.gather([e,t]).map((e=>n(e[0],e[1])))}static parMap3(e,t,n,r){return ze.gather([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static parMap4(e,t,n,r,i){return ze.gather([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,n,r,i,a){return ze.gather([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,n,r,i,a,o){return ze.gather([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return ze.now(e)}static raise(e){return new Xe(R(e))}static sequence(e){return function(e){return ze.of((()=>Le(e))).flatMap((e=>lt([],e)))}(e)}static gather(e){return ut(e,be.sequence)}static shift(e){return e?Ke(e):Qe}static suspend(e){return ze.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?ze.now(e.get()):ze.tailRecM(e.swap().get(),t)))}catch(e){return ze.raise(e)}}static unit(){return Ge}static unsafeStart(e,t,n){return at(e,t.scheduler,t,n,null,null,null)}}class Xe extends ze{constructor(e){super(),this.value=e,this._tag="pure"}}const Ge=new Xe(I.unit());class Ve extends ze{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new Ve(this._thunk,!1):this}runTry(){if(this._thunk){const e=I.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class qe extends ze{constructor(e){super(),this.thunk=e,this._tag="always"}}class Ye extends ze{constructor(e,t,n){super(),this.source=e,this.f=t,this.g=n,this._tag="flatMap"}}class $e extends ze{constructor(e){super(),this.register=e,this._tag="async"}}class je extends ze{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class Ze{constructor(e,t=new X,n={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=n,this.connection=t,n.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Je={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:ze.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>ze.tailRecM(t,(t=>e(h.left,h.right,t)))};function Ke(e){return ze.asyncUnsafe(((t,n)=>{(e||t.scheduler).executeAsync((()=>n(I.unit())))}))}m(ze,Je);const Qe=Ke();function et(e,t){let n=void 0;return e?n=e:t&&t.length>0&&(n=t.pop()),n?"function"==typeof n?n:n[0]:null}function tt(e,t){let n=e;do{if(n&&"function"!=typeof n)return n[1];n=t?t.pop():null}while(n);return null}class nt{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,at(new Xe(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function rt(e,t,n,r,i,a,o){if(!t.shouldCancel()){t.scheduler.batchIndex=o;const s=r||new nt(t,n);s.prepare(i,a),e(t,s.asFunction)}}function it(e,t,n,r,i,a){t.shouldCancel()||t.scheduler.executeAsync((()=>{at(e,t.scheduler,t,n,r,i,a)}))}function at(e,t,n,r,i,a,o){let s=e,c=a,l=o;const u=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(s instanceof I){if(s.isSuccess()){const e=et(c,l);if(!e)return t.batchIndex=d,r(s);try{s=e(s.get())}catch(e){s=I.failure(e)}}else{const e=tt(c,l);if(!e)return t.batchIndex=d,r(s);try{s=e(s.failed().get())}catch(e){s=I.failure(e)}}c=null;const e=d+1&u;if(!e){const e=n||new Ze(t);return it(s instanceof I?new Xe(s):s,e,r,i,c,l),e.connection}d=e}else switch(s._tag){case"pure":s=s.value;break;case"always":s=I.of(s.thunk);break;case"once":s=s.runTry();break;case"flatMap":const e=s;c&&(l||(l=[]),l.push(c)),c=e.g?[e.f,e.g]:e.f,s=e.source;break;case"async":const a=s,o=n||new Ze(t);return rt(a.register,o,r,i,c,l,d),o.connection;case"memoize":return ct(s,t,n,r,c,l,d)}}function ot(e,t,n,r,i){return be.create((a=>{const o=new Ze(t);return i?it(e,o,a,null,n,r):at(e,t,o,a,null,n,r),o.connection}))}function st(e,t,n){let r=!1;return i=>{r?i.isFailure()&&e.reportFailure(i.failed().get()):(r=!0,e.trampoline((()=>{t.pop(),n(i)})))}}function ct(e,t,n,r,i,a,o){let s;if(t.batchIndex=o,e.result)s=e.result;else{const n=ot(e.source,t,null,null,!1);n.value().isEmpty()?(e.result=n,s=n,n.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(s=n.value().get(),!s.isSuccess()&&e.onlySuccess||(e.result=s))}at(s instanceof I?new Xe(s):ze.fromFuture(s),t,n,r,null,i,a)}function lt(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?ze.pure(e):lt(e,t))))}if(r)return ze.pure(e)}}function ut(e,t){return ze.asyncUnsafe(((n,r)=>{n.scheduler.trampoline((()=>{let i=!0;try{const a=[],o=ue(e);i=!1;for(let e=0;e<o.length;e++){const t=o[e].run(n.scheduler);a.push(t)}const s=t(a,n.scheduler);n.connection.push(s),s.onComplete(st(n.scheduler,n.connection,r))}catch(e){i?r(R(e)):n.scheduler.reportFailure(e)}}))}))}}}]);